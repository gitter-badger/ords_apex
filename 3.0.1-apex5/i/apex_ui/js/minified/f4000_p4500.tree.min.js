!function(a,b,c,d,e,f,g){"use strict";function h(a){return e.getMessage("PD.TREE."+a)}function i(a){var b=h(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.formatNoEscape.apply(this,c)}function j(a,b){var c=k(a,f.extend({isHeader:!0},b));return c.children=[],c.state={},b.isOpen&&(c.state={opened:!0}),b.omitIfEmpty&&(c.commands.omitIfEmpty=!0),b.showHasComponents&&(c.commands.showHasComponents=!0),c}function k(c,d){var e={type:d.type,label:d.title,classes:"",data:{},commands:{}};return d.component instanceof a.Component?(e.data={typeId:d.component.typeId,componentId:d.component.id,isPlain:d.isPlain},b.isConditional(d.component)&&!d.isPlain&&(e.classes=b.CSS.IS_CONDITIONAL),d.component.hasErrors()&&!d.isPlain&&(e.classes+=" "+b.CSS.IS_ERROR,e.commands.openAllParents=!0),d.component.hasWarnings()&&!d.isPlain&&(e.classes+=" "+b.CSS.IS_WARNING),d.title||(e.label=d.component.getDisplayTitle())):(d.hasWarnings&&(e.classes+=" "+b.CSS.IS_WARNING),d.hasErrors&&(e.classes+=" "+b.CSS.IS_ERROR,e.commands.openAllParents=!0)),d.isNotImportant&&(e.classes+=" "+kb.IS_NOT_IMPORTANT),d.hasOwnProperty("id")?e.id=d.id:d.component instanceof a.Component?(e.id=e.type+"_"+d.component.typeId+"_"+d.component.id,(0===e.type.indexOf("inline_")||0===e.type.indexOf("page_load_da_"))&&(e.id=c.id+"_"+e.id)):(e.id=d.type,d.idPostfix&&(e.id+=d.idPostfix),c&&(e.id=c.id+"_"+e.id)),d.tooltip&&(e.tooltip=d.tooltip),d.hasOwnProperty("icon")&&(e.icon=d.icon===!1?null:d.icon),d.openAllParents&&(e.commands.openAllParents=!0),c&&c.children.push(e),e}function l(a,b){var c,d;if(b=f.extend({component:{},hasWarnings:!1,hasErrors:!1,isOpen:!1,isPlain:!1,openAllParents:!1,omitIfEmpty:!1,showHasComponents:!1},b),b.isHeader=!0,b.isNotImportant=!0,c=j(a,b),b.filter)if("parent"===b.filter.setFilter)for(d=0;d<b.filter.properties.length;d++)a.data[b.filter.properties[d].id]=b.filter.properties[d].value;else if(b.filter.properties)for(d=0;d<b.filter.properties.length;d++)c.data[b.filter.properties[d].id]=b.filter.properties[d].value;if(b.data)for(var e in b.data)b.data.hasOwnProperty(e)&&(c.data[e]=b.data[e]);return c}function m(b){if(b.children){for(var c=0;c<b.children.length;)m(b.children[c])?b.children.splice(c,1):(b.children[c].commands.openAllParents&&(b.state.opened||(b.state.opened=!0),b.commands.openAllParents||(b.commands.openAllParents=!0)),(b.children[c].state&&b.children[c].state.hasComponents||b.children[c].data.hasOwnProperty("componentId")&&!a.getComponents(b.children[c].data.typeId,{id:b.children[c].data.componentId})[0].isOnGlobalPage())&&(b.state.hasComponents||(b.state.hasComponents=!0,b.commands.showHasComponents&&(b.classes+=" "+kb.IS_POPULATED))),c++);return 0===b.children.length&&delete b.state,b.commands.omitIfEmpty&&(b.children&&0===b.children.length||!b.children)}return delete b.state,!1}function n(c,d){var e,h,i,m,n,o,p=d.setFilter,q=[],r={};if(p===g&&(p=b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?"header":"parent"),d.header===!1){if(m=c,"parent"===p)for(o=0;o<d.component.filter.properties.length;o++)c.data[d.component.filter.properties[o].id]=d.component.filter.properties[o].value}else{if(e=d.header.component instanceof a.Component?d.header.component.getDisplayTitle():d.header.title?d.header.title:a.getComponentType(d.component.typeId).title.plural,p)if(i={setFilter:p,properties:[]},f.isArray(d.component))for(o=0;o<d.component.length;o++)i.properties=i.properties.concat(d.component[o].filter.properties);else d.component.filter.properties&&(i.properties=d.component.filter.properties);m=l(c,{title:e,type:d.header.type,id:d.header.id,idPostfix:d.header.idPostfix,isPlain:d.header.isPlain,hasWarnings:d.header.hasWarnings,hasErrors:d.header.hasErrors,isOpen:d.header.isOpen,openAllParents:d.header.openAllParents,omitIfEmpty:d.header.omitIfEmpty,component:d.header.component,filter:i})}if(f.isArray(d.component))for(o=0;o<d.component.length;o++)q[o]={typeId:d.component[o].typeId,filter:d.component[o].filter},r[d.component[o].typeId]=d.component[o];else q[0]={typeId:d.component.typeId,filter:d.component.filter},r[d.component.typeId]=d.component;for(h=a.getComponentsAdvanced(q),o=0;o<h.length;o++)b.isDisplayed(h[o])&&(r[h[o].typeId].addSubComponents?(n=j(m,{title:h[o].getDisplayTitle(),type:r[h[o].typeId].type,component:h[o],isHeader:!1,isPlain:r[h[o].typeId].isPlain,isOpen:r[h[o].typeId].isOpen,openAllParents:h[o].isOnGlobalPage()?!1:r[h[o].typeId].openAllParents,omitIfEmpty:r[h[o].typeId].omitIfEmpty}),r[h[o].typeId].addSubComponents(n,h[o])):k(m,{title:h[o].getDisplayTitle(),type:r[h[o].typeId].type,isPlain:r[h[o].typeId].isPlain,component:h[o],openAllParents:h[o].isOnGlobalPage()?!1:r[h[o].typeId].openAllParents}))}function o(b,c){var d;return b===a.COMP_TYPE.BRANCH?d=a.PROP.BRANCH_POINT:b===a.COMP_TYPE.PAGE_COMPUTATION?d=a.PROP.COMPUTATION_POINT:b===a.COMP_TYPE.PAGE_PROCESS&&(d=a.PROP.PROCESS_POINT),a.getLovTitle(b,d,c)}function p(c,d,e){var f={type:"branches",isOpen:!0,omitIfEmpty:e};b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)&&(f.title=o(a.COMP_TYPE.BRANCH,d.point)),n(c,{header:f,component:{type:"branch",typeId:a.COMP_TYPE.BRANCH,filter:{properties:[{id:a.PROP.BRANCH_POINT,value:d.point}]},openAllParents:!0}})}function q(b,c,d){var e,f,g,h="inline_",i=[],j={isOpen:!0,omitIfEmpty:d};c.hasOwnProperty("regionColumn")?(g=c.regionColumn.getProperty(a.PROP.COLUMN_NAME).getValue(),e=function(){var b;return this.getProperty(a.PROP.VALIDATION_REGION).getValue()!==c.region.id?!1:(b=this.getProperty(a.PROP.REGION_VAL_COLUMN),b&&b.getValue()===g||this.getProperty(a.PROP.ASSOCIATED_COLUMN).getValue()===g)}):c.hasOwnProperty("region")?(j.isOpen=!1,e=function(){return!(this.getProperty(a.PROP.VALIDATION_REGION).getValue()!==c.region.id||""!==this.getProperty(a.PROP.ASSOCIATED_COLUMN).getValue()||this.getProperty(a.PROP.REGION_VAL_COLUMN))}):c.hasOwnProperty("pageItem")?(f=c.pageItem.getProperty(a.PROP.ITEM_NAME).getValue(),e=function(){var b;return""!==this.getProperty(a.PROP.VALIDATION_REGION).getValue()?!1:(b=this.getProperty(a.PROP.VAL_ITEM),this.getProperty(a.PROP.ASSOCIATED_ITEM).getValue()===c.pageItem.id||b&&b.getValue()===f)}):(h="",j.isOpen=!0,j.openAllParents=!0),j.type=h+"validations",n(b,{header:j,setFilter:!1,component:{type:h+"validation",typeId:a.COMP_TYPE.VALIDATION,filter:{properties:i,filterFunction:e}}})}function r(c,d,e,f){var g,h=d.hasOwnProperty("pageItem")?"inline_":"",i={type:h+"computations",isOpen:!0,omitIfEmpty:e};d.hasOwnProperty("point")?(b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)&&(i.title=o(a.COMP_TYPE.PAGE_COMPUTATION,d.point)),g={id:a.PROP.COMPUTATION_POINT,value:d.point}):d.hasOwnProperty("pageItem")&&(g={id:a.PROP.COMPUTATION_ITEM_NAME,value:d.pageItem.getProperty(a.PROP.ITEM_NAME).getValue()}),n(c,{header:i,component:{type:h+"computation",typeId:a.COMP_TYPE.PAGE_COMPUTATION,filter:{properties:[g]},openAllParents:f}})}function s(c,d,e,g){function h(b,c){var d=c.getProperty(a.PROP.PAGE_PROCESS_TYPE).getValue();-1!==f.inArray(d,["NATIVE_WEB_SERVICE","NATIVE_WEB_SERVICE_LEGACY"])&&(n(b,{header:{type:"ws_params",isOpen:!0,omitIfEmpty:!0},setFilter:!1,component:{type:"ws_param",typeId:a.COMP_TYPE.PAGE_PROC_WS_P_I,filter:{parentId:c.id}}}),"ITEMS"===c.getProperty(a.getPluginProperty(a.COMP_TYPE.PAGE_PROCESS,d,2).id).getValue()&&n(b,{header:{type:"ws_params",isOpen:!0,omitIfEmpty:!0},setFilter:!1,component:{type:"ws_param",typeId:a.COMP_TYPE.PAGE_PROC_WS_P_O,filter:{parentId:c.id}}}),n(b,{header:{type:"ws_params",isOpen:!0,omitIfEmpty:!0},setFilter:!1,component:{type:"ws_param",typeId:a.COMP_TYPE.PAGE_PROC_WS_P_A,filter:{parentId:c.id}}}))}var i,j,k=d.hasOwnProperty("region")?"inline_":"";j="ON_DEMAND"!==d.point||b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?{type:k+"processes",isOpen:!0,omitIfEmpty:e}:!1,d.hasOwnProperty("point")?(b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)&&(j.title=o(a.COMP_TYPE.PAGE_PROCESS,d.point)),i={id:a.PROP.PROCESS_POINT,value:d.point}):d.hasOwnProperty("region")&&(i={id:a.PROP.PROCESS_REGION,value:d.region.id},j.isOpen=!1),n(c,{header:j,component:{type:k+"process",typeId:a.COMP_TYPE.PAGE_PROCESS,filter:{properties:[i]},addSubComponents:h,openAllParents:g}})}function t(b,d){function e(b,c,d,e){n(b,{header:{title:e,type:"da_actions_"+d,isOpen:!0,omitIfEmpty:!1},setFilter:"header",component:{type:"da_action",typeId:a.COMP_TYPE.DA_ACTION,filter:{parentId:c.id,properties:[{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:d.toUpperCase()}]}}})}function f(a,b){e(a,b,"true",h("TRUE")),e(a,b,"false",h("FALSE"))}var g,i=!1,j=[],k={title:h("DYNAMIC_ACTIONS"),isOpen:!0,omitIfEmpty:!0};g="inline_",d.hasOwnProperty("regionColumn")?j.push({id:a.PROP.WHEN_REGION,value:d.region.id}):d.hasOwnProperty("region")?(j.push({id:a.PROP.WHEN_REGION,value:d.region.id}),k.isOpen=!1):d.hasOwnProperty("pageItem")?j.push({id:a.PROP.WHEN_ITEMS,value:new RegExp("(^|,|\\s)"+c.escapeRegExp(d.pageItem.getProperty(a.PROP.ITEM_NAME).getValue())+"($|,|\\s)")}):d.hasOwnProperty("button")?j.push({id:a.PROP.WHEN_BUTTON,value:d.button.id}):d.hasOwnProperty("event")&&(j.push({id:a.PROP.EVENT,value:d.event}),g="",i="header",k.title=""===d.event?h("UNDEFINED_EVENT"):a.getLovTitle(a.COMP_TYPE.DA_EVENT,a.PROP.EVENT,d.event),k.idPostfix="_"+d.event,k.omitIfEmpty=!1),k.type=g+"da_events",n(b,{header:k,setFilter:i,component:{type:g+"da_event",typeId:a.COMP_TYPE.DA_EVENT,filter:{properties:j},addSubComponents:f}})}function u(c,d){function e(c,d){var e={NATIVE_IR:v,NATIVE_SQL_REPORT:w,NATIVE_FNC_REPORT:w,NATIVE_TABFORM:x,NATIVE_FLASH_MAP:y,NATIVE_FLASH_CHART5:z,NATIVE_CALENDAR:A},f=d.getProperty(a.PROP.REGION_TYPE).getValue();d.isOnGlobalPage()||(e.hasOwnProperty(f)?e[f](c,d):B(c,d)),b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?u(c,{region:d}):(C(c,d),D(c,d),q(c,{region:d},!0),t(c,{region:d}),u(c,{region:d}))}var f,g={},i={isOpen:!1,omitIfEmpty:!0};d.hasOwnProperty("region")?(f=a.getRegionTemplate(d.region.id).displayPointsMap.SUB_REGIONS,i.title=f?f.name:h("SUB_REGIONS"),i.type="sub_regions",g.properties=[{id:a.PROP.PARENT_REGION,value:d.region.id}]):d.hasOwnProperty("point")?(i.title=d.point.name,i.type="regions",i.id="rdp_"+d.point.id,i.omitIfEmpty=!d.point.isQuickPick,g.properties=[],g.properties.push({id:a.PROP.PARENT_REGION,value:""}),g.properties.push({id:a.PROP.REGION_POSITION,value:d.point.id})):d.hasOwnProperty("validPointsMap")&&(i.title=h("INVALID_POSITION"),i.type="regions",i.id="invalid_region_dp",i.hasWarnings=!0,g.filterFunction=function(){var b=this.getProperty(a.PROP.REGION_POSITION);return b?!d.validPointsMap.hasOwnProperty(b.getValue()):!1}),n(c,{header:i,setFilter:"header",component:{type:"region",typeId:a.COMP_TYPE.REGION,filter:g,addSubComponents:e,isOpen:!0,openAllParents:!0,omitIfEmpty:!1}})}function v(b,c){var d,e,g,i=a.getComponents(a.COMP_TYPE.IR_ATTRIBUTES,{parentId:c.id})[0];n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"ir_report_column",typeId:a.COMP_TYPE.IR_COLUMN,filter:{parentId:i.id}}}),d=j(b,{type:"ir_attributes",title:a.getComponentType(i.typeId).title.singular,component:i,isHeader:!1,isOpen:!1,omitIfEmpty:!1}),n(d,{header:{type:"ir_column_groups",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"ir_column_group",typeId:a.COMP_TYPE.IR_COLUMN_GROUP,filter:{parentId:i.id}}}),n(d,{header:{type:"ir_saved_reports",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"ir_saved_report",typeId:a.COMP_TYPE.IR_SAVED_REPORT,filter:{parentId:i.id}}}),e=i.getProperty(a.PROP.SHOW_DOWNLOAD),e&&"Y"===e.getValue()&&(g=i.getProperty(a.PROP.DOWNLOAD_FORMATS).getValue().split(":"),(-1!==f.inArray("XLS",g)||-1!==f.inArray("PDF",g)||-1!==f.inArray("RTF",g))&&j(d,{type:"ir_print",title:a.getComponentType(a.COMP_TYPE.IR_PRINT_ATTR).title.singular,component:a.getComponents(a.COMP_TYPE.IR_PRINT_ATTR,{parentId:i.id})[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1}))}function w(b,c){var d,e;n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"classic_report_column",typeId:a.COMP_TYPE.CLASSIC_RPT_COLUMN,isOpen:!1,filter:{parentId:c.id}}}),d=a.getComponents(a.COMP_TYPE.CLASSIC_REPORT,{parentId:c.id})[0],e=j(b,{type:"classic_report_attributes",title:a.getComponentType(d.typeId).title.singular,component:d,isHeader:!1,isOpen:!1,omitIfEmpty:!1}),"Y"===d.getProperty(a.PROP.ENABLE_PRINTING).getValue()&&j(e,{type:"classic_report_print",title:a.getComponentType(a.COMP_TYPE.CLASSIC_RPT_PRINT).title.singular,component:a.getComponents(a.COMP_TYPE.CLASSIC_RPT_PRINT,{parentId:d.id})[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function x(b,c){function d(a,b){q(a,{region:c,regionColumn:b},!0)}var e,f;n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"tabform_column",typeId:a.COMP_TYPE.TAB_FORM_COLUMN,isOpen:!1,filter:{parentId:c.id},addSubComponents:d}}),e=a.getComponents(a.COMP_TYPE.TABULAR_FORM,{parentId:c.id})[0],f=j(b,{type:"tabform_attributes",title:a.getComponentType(e.typeId).title.singular,component:e,isHeader:!1,isOpen:!1,omitIfEmpty:!1}),"Y"===e.getProperty(a.PROP.ENABLE_PRINTING).getValue()&&j(f,{type:"tabform_print",title:a.getComponentType(a.COMP_TYPE.TAB_FORM_PRINT).title.singular,component:a.getComponents(a.COMP_TYPE.TAB_FORM_PRINT,{parentId:e.id})[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function y(b,c){var d,e=a.getComponents(a.COMP_TYPE.MAP_CHART,{parentId:c.id})[0];d=j(b,{type:"map_chart",title:a.getComponentType(e.typeId).title.singular,component:e,isHeader:!1,isOpen:!0,omitIfEmpty:!1}),n(d,{header:{type:"map_chart_series",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"map_chart_serie",typeId:a.COMP_TYPE.MAP_CHART_SERIES,filter:{parentId:e.id}}})}function z(b,c){var d,e=a.getComponents(a.COMP_TYPE.CHART,{parentId:c.id})[0];d=j(b,{type:"chart_attributes",title:a.getComponentType(e.typeId).title.singular,component:e,isHeader:!1,isOpen:!0,omitIfEmpty:!1}),n(d,{header:{type:"chart_series",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"chart_serie",typeId:a.COMP_TYPE.CHART_SERIES,filter:{parentId:e.id}}})}function A(b,c){var d=a.getComponents(a.COMP_TYPE.CLASSIC_CALENDAR,{parentId:c.id})[0];j(b,{type:"classic_calendar",title:a.getComponentType(d.typeId).title.singular,component:d,isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function B(b,c){var d,e,g=a.getComponentType(a.COMP_TYPE.REGION_PLUGIN_ATTR).pluginType.plugins;e=c.getProperty(a.PROP.REGION_TYPE).getValue(),d=a.getComponents(a.COMP_TYPE.REGION_PLUGIN_ATTR,{parentId:c.id}),-1!==f.inArray("COLUMNS",g[e].stdAttributes)&&n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"region_column",typeId:a.COMP_TYPE.REGION_COLUMN,filter:{parentId:c.id}}}),d.length>0&&j(b,{type:"region_plugin_attributes",title:a.getComponentType(a.COMP_TYPE.REGION_PLUGIN_ATTR).title.singular,component:d[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function C(c,d){function e(a,b){q(a,{pageItem:b},!0),t(a,{pageItem:b}),r(a,{pageItem:b},!0)}function f(a,b){t(a,{button:b})}var g={type:"page_items",isOpen:!1,omitIfEmpty:!0};b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?d instanceof a.Component?g.component=d:(g.title=h("NO_REGION"),g.type="no_region",g.hasWarnings=!0):g.title=h("ITEMS"),n(c,{header:g,setFilter:"header",component:[{type:"page_item",typeId:a.COMP_TYPE.PAGE_ITEM,isOpen:!1,openAllParents:!0,filter:{properties:[{id:a.PROP.REGION,value:d instanceof a.Component?d.id:""}]},addSubComponents:e},{type:"form_button",typeId:a.COMP_TYPE.BUTTON,isOpen:!1,openAllParents:!0,filter:{properties:[{id:a.PROP.REGION,value:d instanceof a.Component?d.id:""},{id:a.PROP.BUTTON_POSITION,value:"BODY"}]},addSubComponents:f}]})}function D(c,d){function e(a,b){t(a,{button:b})}var f={type:"region_buttons",isOpen:!1,omitIfEmpty:!0},g=d instanceof a.Component?d.id:"";b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?d instanceof a.Component?f.component=d:(f.title=h("NO_REGION"),f.type="no_region",f.hasWarnings=!0):f.title=h("REGION_BUTTONS"),n(c,{header:f,component:{type:"region_button",typeId:a.COMP_TYPE.BUTTON,isOpen:!1,openAllParents:!0,filter:{filterFunction:function(){var b=this.getProperty(a.PROP.REGION).getValue();return(b===g||""===b&&"no_region"===f.type)&&"BODY"!==this.getProperty(a.PROP.BUTTON_POSITION).getValue()}},addSubComponents:e}})}function E(){var c,d;return d=a.getComponents(a.COMP_TYPE.PAGE),c=j(g,{component:d[0],type:"page",title:i("PAGE_TITLE",d[0].id,d[0].getDisplayTitle()),isHeader:!1,isOpen:!0}),c.data[a.PROP.COMPUTATION_POINT]="BEFORE_BOX_BODY",c.data[a.PROP.PROCESS_POINT]="AFTER_HEADER",c.data[a.PROP.BRANCH_POINT]="BEFORE_HEADER",c.data[a.PROP.REGION_POSITION]="BODY",c.data[a.PROP.BUTTON_POSITION]="BELOW_BOX","Y"===b.getPreference("GROUP_BY_COMPONENT_TYPE")?G(c):F(c),m(c),c}function F(b){var c,d,e,g,i=a.isGlobalPage();g=a.getPageTemplate(),c=l(b,{title:h("PRE_RENDERING"),type:"pre_rendering",showHasComponents:!0,omitIfEmpty:!0}),i||(e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"ON_NEW_INSTANCE"),type:"on_new_instance",isOpen:!0,omitIfEmpty:!0}),r(e,{point:"ON_NEW_INSTANCE"},!0),s(e,{point:"ON_NEW_INSTANCE"},!0),e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"BEFORE_HEADER"),type:"before_header",isOpen:!0}),p(e,{point:"BEFORE_HEADER"},!0),r(e,{point:"BEFORE_HEADER"},!0),s(e,{point:"BEFORE_HEADER"},!0)),e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_HEADER"),type:"after_header",isOpen:!0,omitIfEmpty:i}),i||(r(e,{point:"AFTER_HEADER"},!0),s(e,{point:"AFTER_HEADER"},!0)),u(e,{point:{id:"AFTER_HEADER"}}),i||(e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"BEFORE_BOX_BODY"),type:"before_regions",isOpen:!0}),r(e,{point:"BEFORE_BOX_BODY"},!0),s(e,{point:"BEFORE_BOX_BODY"},!0)),e=l(b,{title:a.getComponentType(a.COMP_TYPE.REGION).title.plural,type:"main_regions",icon:"icon-tree-region",isOpen:!0});for(var j=0;j<g.displayPoints.length;j++)-1===f.inArray(g.displayPoints[j].id,["AFTER_HEADER","BEFORE_FOOTER"])&&u(e,{point:g.displayPoints[j]});u(e,{validPointsMap:g.displayPointsMap}),e=l(b,{title:h("NO_REGION"),type:"no_region",hasWarnings:!0,isOpen:!0,omitIfEmpty:!0}),C(e,null),D(e,null),d=l(b,{title:h("POST_RENDERING"),type:"post_rendering",showHasComponents:!0}),i||(e=l(d,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_BOX_BODY"),type:"after_regions",isOpen:!0}),r(e,{point:"AFTER_BOX_BODY"},!0),s(e,{point:"AFTER_BOX_BODY"},!0)),e=l(d,{title:o(a.COMP_TYPE.PAGE_PROCESS,"BEFORE_FOOTER"),type:"before_footer",isOpen:!0}),i||(r(e,{point:"BEFORE_FOOTER"},!0),s(e,{point:"BEFORE_FOOTER"},!0)),u(e,{point:{id:"BEFORE_FOOTER",name:a.getComponentType(a.COMP_TYPE.REGION).title.plural}}),i||(e=l(d,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_FOOTER"),type:"after_footer",isOpen:!0}),r(e,{point:"AFTER_FOOTER"},!0),s(e,{point:"AFTER_FOOTER"},!0))}function G(b){var c,d,e,f,g,h=a.isGlobalPage();for(d=a.getPageTemplate(),c=l(b,{title:a.getComponentType(a.COMP_TYPE.REGION).title.plural,type:"main_regions",isOpen:!0}),u(c,{validPointsMap:d.displayPointsMap}),g=0;g<d.displayPoints.length;g++)u(c,{point:d.displayPoints[g]});for(f=a.getComponents(a.COMP_TYPE.REGION,{}),c=l(b,{title:a.getComponentType(a.COMP_TYPE.BUTTON).title.plural,type:"main_buttons",isOpen:!0}),D(c,null),g=0;g<f.length;g++)D(c,f[g]);for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_ITEM).title.plural,type:"main_page_items",isOpen:!0}),C(c,null),g=0;g<f.length;g++)C(c,f[g]);if(!h){for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_COMPUTATION).title.plural,type:"main_computations",isOpen:!0}),e=["ON_NEW_INSTANCE","BEFORE_HEADER","AFTER_HEADER","BEFORE_BOX_BODY","AFTER_BOX_BODY","BEFORE_FOOTER","AFTER_FOOTER"],g=0;g<e.length;g++)r(c,{point:e[g]},!0,!0);for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_PROCESS).title.plural,type:"main_processes",isOpen:!0}),e=["ON_NEW_INSTANCE","BEFORE_HEADER","AFTER_HEADER","BEFORE_BOX_BODY","AFTER_BOX_BODY","BEFORE_FOOTER","AFTER_FOOTER"],g=0;g<e.length;g++)s(c,{point:e[g]},!0,!0);c=l(b,{title:a.getComponentType(a.COMP_TYPE.BRANCH).title.plural,type:"main_branches",isOpen:!0}),p(c,{point:"BEFORE_HEADER"},!0)}}function H(){function b(b,c,d,e){var f=[{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:d.toUpperCase()}];"ready"!==c.getProperty(a.PROP.EVENT).getValue()&&f.push({id:a.PROP.FIRE_ON_PAGE_LOAD,value:"Y"}),n(b,{header:{title:e,type:"page_load_da_actions_"+d,isOpen:!0,omitIfEmpty:!0},setFilter:"header",component:{type:"page_load_da_action",typeId:a.COMP_TYPE.DA_ACTION,isPlain:!0,filter:{parentId:c.id,properties:f}}})}var c,d,e={id:"da",children:[],state:{},commands:{omitIfEmpty:!1}},f={ready:!0,change:!0,click:!0,apexafterclosedialog:!0};n(e,{header:{title:h("FIRED_ON_PAGE_LOAD"),type:"page_load_da_events",isOpen:!1,omitIfEmpty:!0},setFilter:!1,component:{type:"page_load_da_event",typeId:a.COMP_TYPE.DA_EVENT,isPlain:!0,filter:{filterFunction:function(){var b=!0;return"ready"!==this.getProperty(a.PROP.EVENT).getValue()&&(b=this.getChilds(a.COMP_TYPE.DA_ACTION,{properties:[{id:a.PROP.FIRE_ON_PAGE_LOAD,value:"Y"}]},!1).length>0),b}},addSubComponents:function(a,c){b(a,c,"true",h("TRUE")),b(a,c,"false",h("FALSE"))}}}),c=l(e,{title:h("EVENTS"),type:"da_events",isOpen:!0,filter:{properties:[{id:a.PROP.EVENT,value:""}]}}),d=a.getComponents(a.COMP_TYPE.DA_EVENT,{});for(var g=0;g<d.length;g++)f[d[g].getProperty(a.PROP.EVENT).getValue()]=!0;for(var i in f)f.hasOwnProperty(i)&&t(c,{event:i});return m(e),e}function I(){var a={id:"rd",children:[],state:{},commands:{omitIfEmpty:!1}};return"Y"===b.getPreference("GROUP_BY_COMPONENT_TYPE")?K(a):J(a),m(a),a}function J(b){var c,d=a.isGlobalPage();d||(c=l(b,{title:o(a.COMP_TYPE.PAGE_COMPUTATION,"AFTER_SUBMIT"),type:"after_submit"}),s(c,{point:"ON_SUBMIT_BEFORE_COMPUTATION"},!0,!0),p(c,{point:"BEFORE_COMPUTATION"},!0),r(c,{point:"AFTER_SUBMIT"},!0,!0),c=l(b,{title:o(a.COMP_TYPE.BRANCH,"BEFORE_VALIDATION"),type:"validating"}),p(c,{point:"BEFORE_VALIDATION"},!0),q(c,{},!0),c=l(b,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_SUBMIT"),type:"processing",isOpen:!0}),p(c,{point:"BEFORE_PROCESSING"},!0),s(c,{point:"AFTER_SUBMIT"},!0,!0),c=l(b,{title:o(a.COMP_TYPE.BRANCH,"AFTER_PROCESSING"),type:"after_processing",isOpen:!0}),p(c,{point:"AFTER_PROCESSING"},!0),c=l(b,{title:o(a.COMP_TYPE.PAGE_PROCESS,"ON_DEMAND"),id:"ajax_callbacks",type:"processes",isOpen:!0}),s(c,{point:"ON_DEMAND"},!1,!0))}function K(b){var c,d,e,f=a.isGlobalPage();if(!f){for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_COMPUTATION).title.plural,type:"main_computations",isOpen:!0,filter:{properties:[{id:a.PROP.COMPUTATION_POINT,value:"AFTER_SUBMIT"}]}}),r(c,{point:"AFTER_SUBMIT"},!0,!0),q(b,{},!1),c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_PROCESS).title.plural,type:"main_processes",isOpen:!0,filter:{properties:[{id:a.PROP.PROCESS_POINT,value:"AFTER_SUBMIT"}]}}),d=["ON_SUBMIT_BEFORE_COMPUTATION","AFTER_SUBMIT","ON_DEMAND"],e=0;e<d.length;e++)s(c,{point:d[e]},!0,!0);for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.BRANCH).title.plural,type:"main_branches",isOpen:!0,filter:{properties:[{id:a.PROP.BRANCH_POINT,value:"AFTER_PROCESSING"}]}}),d=["BEFORE_COMPUTATION","BEFORE_VALIDATION","BEFORE_PROCESSING","AFTER_PROCESSING"],e=0;e<d.length;e++)p(c,{point:d[e]},!0)}}function L(){function b(b,c,d){var e,g,h,j,k,m,o,p=a.getComponentType(c.typeId);o=l(b,{title:c.title||(c.titleTypeId?a.getComponentType(c.titleTypeId).title.singular:p.title.plural),type:c.type+"s",isOpen:!1,omitIfEmpty:d,data:{typeId:c.typeId}}),e=M(c.typeId),m={};for(var q=0;q<e.length;q++){g=a.getComponents(e[q].typeId,{});for(var r=0;r<g.length;r++)k=!1,e[q].typeId===a.COMP_TYPE.PAGE&&-1!==f.inArray(e[q].propertyId,[a.PROP.PAGE_TEMPLATE,a.PROP.DIALOG_TEMPLATE,a.PROP.NAVIGATION_LIST,a.PROP.TAB_SET])?!g[r].getProperty(e[q].propertyId)||e[q].propertyId!==a.PROP.PAGE_TEMPLATE&&e[q].propertyId!==a.PROP.DIALOG_TEMPLATE||(k=!0,j=a.getPageTemplate().id):(h=g[r].getProperty(e[q].propertyId),h&&(j=h.getValue(),""!==j&&(c.typeId!==a.COMP_TYPE.BUILD_OPTION&&c.typeId!==a.COMP_TYPE.AUTHORIZATION||!/^[-!]/.test(j)||(j=j.substr(1)),k=!0))),k&&""!==j&&(m.hasOwnProperty(j)||(m[j]={}),m[j].hasOwnProperty(e[q].typeId)||(m[j][e[q].typeId]=[]),m[j][e[q].typeId].push(g[r]))}for(var s in m)m.hasOwnProperty(s)&&n(o,{header:!1,component:{type:c.type,typeId:c.typeId,isOpen:!1,filter:{id:s,properties:[]},addSubComponents:function(b){var c,d;for(var e in m[s])if(m[s].hasOwnProperty(e)){c=a.getComponentType(e),d=l(b,{title:i("REFERENCED_BY",1===m[s][c.id].length?c.title.singular:c.title.plural),type:"references",isOpen:!0,omitIfEmpty:!1});for(var f=0;f<m[s][c.id].length;f++)n(d,{header:!1,component:{type:"referenced_by",typeId:c.id,isPlain:!0,filter:{id:m[s][c.id][f].id,properties:[]}}})}}}});return o}function c(d,e,g){for(var h,i,j=0;j<e.length;j++)-1!==f.inArray(e[j].type,["navigation_list","nav_list_template","tab_set"])?("navigation_list"===e[j].type?i=a.getNavListId():"nav_list_template"===e[j].type?i=a.getNavListTemplateId():"tab_set"===e[j].type&&(i=a.getTabSetId()),i&&n(d,{header:{title:e[j].title,type:e[j].type+"s",isOpen:!1,omitIfEmpty:!0,data:{typeId:e[j].typeId}},component:{type:e[j].type,typeId:e[j].typeId,isOpen:!1,filter:{id:i,properties:[]}}})):h=e[j].hasOwnProperty("typeId")?b(d,e[j],g):l(d,{title:e[j].title,type:e[j].type+"s",isOpen:!0,omitIfEmpty:g}),e[j].children&&c(h,e[j].children,!0)}var d={id:"sd",children:[],state:{},commands:{omitIfEmpty:!1}};return c(d,ob,!1),m(d),d}function M(b){for(var c,d,e=a.getComponentType(b),f=[],g=0;g<e.refByProperties.length;g++){c=a.getProperty(e.refByProperties[g]);for(var h=0;h<c.refByComponentTypes.length;h++)d=a.getComponentType(c.refByComponentTypes[h]),(d.isPageComponent||d.id===a.COMP_TYPE.PAGE)&&f.push({typeId:d.id,propertyId:c.id})}return f}function N(b){function c(a){var c;a.hasOwnProperty("value")?d.push({id:a.id,value:a.value}):a.typeId?(c=_(a.typeId,b._parent),d.push({id:a.id,value:c?c.id:""})):a.id&&d.push({id:a.id,value:ab(a.id,b._parent)+""})}var d=[];switch(b.type){case"region":"regions"===b._parent.type?(c({id:a.PROP.PARENT_REGION,value:""}),c({id:a.PROP.REGION_POSITION})):c({id:a.PROP.PARENT_REGION,typeId:a.COMP_TYPE.REGION});break;case"page_item":c({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION});break;case"form_button":c({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION}),c({id:a.PROP.BUTTON_POSITION});break;case"region_button":c({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION}),c({id:a.PROP.BUTTON_POSITION});break;case"da_action":c({id:a.PROP.DA_EVENT,typeId:a.COMP_TYPE.DA_EVENT}),c({id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS});break;case"computation":c({id:a.PROP.COMPUTATION_POINT});break;case"process":c({id:a.PROP.PROCESS_POINT});break;case"branch":c({id:a.PROP.BRANCH_POINT})}return d}function O(b){var c,d,e,f=[];if(b.items.length>0){d=a.transaction.message({action:a.MESSAGE_ACTION.MOVE,component:$(b.items[0].toNode),count:b.items.length}),e=a.transaction.start("",d);for(var g=0;g<b.items.length;g++)f[g]=$(b.items[g].toNode),0===b.items[g].toIndex?c=null:(c=$(b.parentNode.children[b.items[g].toIndex-1]),c||(c="last")),f[g].move(c,N(b.items[g].toNode));apex.commandHistory.execute(e)}}function P(b,c){var d,e,f,g,h=[];if(b.items.length>0){f=a.transaction.message({action:a.MESSAGE_ACTION.DUPLICATE,component:$(b.items[0].toNode),count:b.items.length}),g=a.transaction.start("",f);for(var i=0;i<b.items.length;i++)d=$(b.items[i].toNode),0===b.items[i].toIndex?e=null:(e=$(b.parentNode.children[b.items[i].toIndex-1]),e||(e="last")),h[i]=d.duplicate(),h[i].move(e,N(b.items[i].toNode));apex.commandHistory.execute(g),T(h,c,b.items[0].toNode._parent.id,!0)}}function Q(b){var c,d,e;if(b.items.length>0){d=a.transaction.message({action:a.MESSAGE_ACTION.DELETE,component:$(b.items[0].node),count:b.items.length}),e=a.transaction.start("",d);for(var f=0;f<b.items.length;f++)c=$(b.items[f].node),c&&c.remove()}apex.commandHistory.execute(e)}function R(b,c){var d,e,f=[];if(b.length>0){d=a.transaction.message({action:a.MESSAGE_ACTION.DUPLICATE,component:$(b[0]),count:b.length}),e=a.transaction.start("",d);for(var g=0;g<b.length;g++)f.push($(b[g]).duplicate());apex.commandHistory.execute(e),T(f,c,b[0]._parent.id,!0)}}function S(b){var c,d;if(b.length>0){c=a.transaction.message({action:a.MESSAGE_ACTION.DELETE,component:$(b[0]),count:b.length}),d=a.transaction.start("",c);for(var e=0;e<b.length;e++)$(b[e]).remove();apex.commandHistory.execute(d)}}function T(a,b,c,d){var e,g,h=[],i=f(),j=c;if(c||"PDdynamicActionTree"!==b[0].id||(j="da_da_events"),d){for(g=0;g<a.length;g++)i=i.add(Y(a[g],b,j));b.treeView("setSelection",i)}else{for(g=0;g<a.length;g++)e=Z(a[g],b,j),e&&h.push(e);b.treeView("setSelectedNodes",h)}}function U(b,c){var d,e,f,g,h,i,j,k={NATIVE_SHOW:"NATIVE_HIDE",NATIVE_HIDE:"NATIVE_SHOW",NATIVE_ENABLE:"NATIVE_DISABLE",NATIVE_DISABLE:"NATIVE_ENABLE",NATIVE_ADD_CLASS:"NATIVE_REMOVE_CLASS",NATIVE_REMOVE_CLASS:"NATIVE_ADD_CLASS"},l=[],m=[];i=a.transaction.message({action:a.MESSAGE_ACTION.CREATE,component:$(b[0]),count:b.length}),j=a.transaction.start("",i);for(var n=0;n<b.length;n++){if(d=$(b[n]),e=d.getProperty(a.PROP.DA_ACTION_TYPE).getValue(),k.hasOwnProperty(e)){for(l.push({id:a.PROP.DA_ACTION_TYPE,value:k[e]}),f=1,g=a.getPluginProperty(a.COMP_TYPE.DA_ACTION,e,f);g&&nb>=f;)l.push({id:a.getPluginProperty(a.COMP_TYPE.DA_ACTION,k[e],f).id,value:d.getProperty(g.id).getValue()}),f++,g=a.getPluginProperty(a.COMP_TYPE.DA_ACTION,e,f);l.push({id:a.PROP.FIRE_ON_PAGE_LOAD,value:d.getProperty(a.PROP.FIRE_ON_PAGE_LOAD).getValue()})}h="TRUE"===d.getProperty(a.PROP.FIRE_WHEN_EVENT_RESULT_IS).getValue()?"FALSE":"TRUE",l.push({id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:h}),m.push(d.duplicate(l)),m[m.length-1].move("last")}apex.commandHistory.execute(j),T(m,c,b[0]._parent._parent.id,!0)}function V(b,c,d,e){function h(a){var c;a.hasOwnProperty("value")?s.push({id:a.id,value:a.value}):a.typeId?(c=_(a.typeId,b),s.push({id:a.id,value:c?c.id:""})):a.id&&s.push({id:a.id,value:ab(a.id,b)+""})}var i,j,k,l,m,n,o,p,q,r=$(b),s=[];if(d===a.COMP_TYPE.REGION)h("SUB_REGION"===e?{id:a.PROP.PARENT_REGION,typeId:a.COMP_TYPE.REGION}:r&&""!==r.getProperty(a.PROP.PARENT_REGION).getValue()?{id:a.PROP.PARENT_REGION}:{id:a.PROP.REGION_POSITION});else if(d===a.COMP_TYPE.PAGE_ITEM)h({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION});else if(d===a.COMP_TYPE.BUTTON)h({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION}),h({id:a.PROP.BUTTON_POSITION});else if(d===a.COMP_TYPE.PAGE_COMPUTATION)j=_(a.COMP_TYPE.PAGE_ITEM,b),j?(h({id:a.PROP.COMPUTATION_ITEM_NAME,value:j.getProperty(a.PROP.ITEM_NAME).getValue()}),h({id:a.PROP.COMPUTATION_POINT,value:"BEFORE_BOX_BODY"})):h({id:a.PROP.COMPUTATION_POINT});else if(d===a.COMP_TYPE.PAGE_PROCESS)h({id:a.PROP.PROCESS_POINT});else if(d===a.COMP_TYPE.VALIDATION){if(j=_([a.COMP_TYPE.PAGE_ITEM,a.COMP_TYPE.REGION,a.COMP_TYPE.TAB_FORM_COLUMN],b))switch(j.typeId){case a.COMP_TYPE.PAGE_ITEM:h({id:a.PROP.ASSOCIATED_ITEM,value:j.id});break;case a.COMP_TYPE.REGION:h({id:a.PROP.VALIDATION_REGION,value:j.id});break;case a.COMP_TYPE.TAB_FORM_COLUMN:k=j.getProperty(a.PROP.COLUMN_NAME).getValue(),h({id:a.PROP.VALIDATION_REGION,value:j.parentId}),h({id:a.PROP.ASSOCIATED_COLUMN,value:k}),h({id:a.PROP.REGION_VALIDATION_TYPE,value:"ITEM_NOT_NULL"}),h({id:a.PROP.REGION_VAL_COLUMN,value:k}),h({id:a.PROP.ERROR_MESSAGE,value:"#COLUMN_HEADER# must have a value."})}}else if(d===a.COMP_TYPE.BRANCH)h({id:a.PROP.BRANCH_POINT});else if(d===a.COMP_TYPE.DA_EVENT)if(j=_([a.COMP_TYPE.PAGE_ITEM,a.COMP_TYPE.BUTTON,a.COMP_TYPE.REGION,a.COMP_TYPE.PAGE],b))switch(j.typeId){case a.COMP_TYPE.PAGE_ITEM:h({id:a.PROP.EVENT,value:"change"}),h({id:a.PROP.WHEN_TYPE,value:"ITEM"}),h({id:a.PROP.WHEN_ITEMS,value:j.getProperty(a.PROP.ITEM_NAME).getValue()});break;case a.COMP_TYPE.BUTTON:h(-1!==f.inArray(j.getProperty(a.PROP.BUTTON_ACTION).getValue(),["REDIRECT_PAGE","REDIRECT_APP"])?{id:a.PROP.EVENT,value:"apexafterclosedialog"}:{id:a.PROP.EVENT,value:"click"}),h({id:a.PROP.WHEN_TYPE,value:"BUTTON"}),h({id:a.PROP.WHEN_BUTTON,value:j.id});break;case a.COMP_TYPE.REGION:h({id:a.PROP.EVENT,value:"apexafterrefresh"}),h({id:a.PROP.WHEN_TYPE,value:"REGION"}),h({id:a.PROP.WHEN_REGION,value:j.id});break;
case a.COMP_TYPE.PAGE:h({id:a.PROP.EVENT,value:"ready"})}else h({id:a.PROP.EVENT});else d===a.COMP_TYPE.DA_ACTION?(h({id:a.PROP.DA_EVENT,typeId:a.COMP_TYPE.DA_EVENT}),h(e!==g?{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:e}:{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS})):d===a.COMP_TYPE.TAB_FORM_COLUMN||d===a.COMP_TYPE.CLASSIC_RPT_COLUMN?(j=_(a.COMP_TYPE.REGION,b),i=j.id,l=j.getChilds(d),h({id:a.PROP.QUERY_COLUMN_ID,value:l.length+1}),h({id:a.PROP.DERIVED_COLUMN,value:"Y"}),h({id:a.PROP.DISABLE_SORT_COLUMN,value:"Y"}),"ROW_SELECTOR"===e?(h({id:a.PROP.COLUMN_NAME,value:lb}),h({id:a.PROP.TAB_FORM_COLUMN_TYPE,value:"ROW_SELECTOR"}),h({id:a.PROP.COLUMN_HEADING,value:"&nbsp;"})):"VIRTUAL"===e&&(l=j.getChilds(d,{properties:[{id:a.PROP.DERIVED_COLUMN,value:"Y"}]},function(b,c){return b.getProperty(a.PROP.COLUMN_NAME).getValue()>c.getProperty(a.PROP.COLUMN_NAME).getValue()?1:-1}),h({id:a.PROP.COLUMN_NAME,value:"DERIVED$"+(l.length<8?"0":"")+(l.length+1)}),h({id:d===a.COMP_TYPE.TAB_FORM_COLUMN?a.PROP.TAB_FORM_COLUMN_TYPE:a.PROP.CLASSIC_REPORT_COLUMN_TYPE,value:"LINK"}),h({id:a.PROP.COLUMN_HEADING,value:"&nbsp;"}))):d===a.COMP_TYPE.IR_COLUMN_GROUP?i=_(a.COMP_TYPE.IR_ATTRIBUTES,b).id:d===a.COMP_TYPE.CHART_SERIES?(j=_(a.COMP_TYPE.CHART,b),i=j.id,h({id:a.PROP.SERIES_CHART_TYPE,value:j.getProperty(a.PROP.CHART_TYPE).getValue()})):d===a.COMP_TYPE.MAP_CHART_SERIES&&(j=_(a.COMP_TYPE.MAP_CHART,b),i=j.id);r&&(m=b._parent.id),p=d===a.COMP_TYPE.TAB_FORM_COLUMN&&"ROW_SELECTOR"===e?g:d===a.COMP_TYPE.DA_EVENT?"last":r?r:"last",q=a.transaction.message({action:a.MESSAGE_ACTION.CREATE,component:d}),n=a.transaction.start("",q),o=new a.Component({previousComponent:p,typeId:d,parentId:i,values:s}),d===a.COMP_TYPE.DA_EVENT&&new a.Component("apexafterclosedialog"===o.getProperty(a.PROP.EVENT).getValue()?{typeId:a.COMP_TYPE.DA_ACTION,parentId:o.id,values:[{id:a.PROP.DA_ACTION_TYPE,value:"NATIVE_REFRESH"},{id:a.PROP.AFFECTED_TYPE,value:"REGION"},{id:a.PROP.AFFECTED_REGION,value:j?j.getProperty(a.PROP.REGION).getValue():""}]}:{typeId:a.COMP_TYPE.DA_ACTION,parentId:o.id,values:[{id:a.PROP.DA_ACTION_TYPE,value:"NATIVE_SHOW"},{id:a.PROP.AFFECTED_TYPE,value:"ITEM"}]}),apex.commandHistory.execute(n),T([o],c,m,!0)}function W(a,b){return b.treeView("getNodes",a)}function X(b){for(var c=b.treeView("getSelectedNodes"),d=[],e=0;e<c.length;e++)c[e].data&&c[e].data.hasOwnProperty("componentId")&&d.push(a.getComponents(c[e].data.typeId,{id:c[e].data.componentId})[0]);return d}function Y(a,b,c){var d;return c&&(d=b.treeView("find",{depth:-1,match:function(a){return a.id===c}})),b.treeView("find",{parentNodeContent$:d,depth:-1,findAll:!0,match:function(b){return b.data.typeId===a.typeId&&b.data.componentId===a.id}})}function Z(a,b,c){return b.treeView("getNodes",Y(a,b,c))[0]}function $(b,c){var d,e=[];return d=b instanceof jQuery?c.treeView("getNodes",b)[0]:b,d.data&&d.data.typeId&&d.data.componentId&&(e=a.getComponents(d.data.typeId,{id:d.data.componentId})),1===e.length?e[0]:g}function _(a,b){var c,d=f.isArray(a)?a:[a];return b&&(c=$(b),(c===g||c&&-1===f.inArray(c.typeId,d))&&(c=_(d,b._parent))),c}function ab(a,b){var c;return c=b?b.data.hasOwnProperty(a)?b.data[a]:ab(a,b._parent):""}function bb(a,b,c){Y(a,b).each(function(){var a=f(this);c.call(W(a,b)[0]),b.treeView("update",a)})}function cb(a,b,c){bb(a,c,function(){this.data&&this.data.isPlain||(this.classes+=" "+b)})}function db(a,b,c){bb(a,c,function(){this.classes=f.grep(this.classes.split(" "),function(a){return a!==b}).join(" ")})}function eb(){function b(b){return"Y"===$(b).getProperty(a.PROP.DERIVED_COLUMN).getValue()}function c(b){return $(b).getProperty(a.PROP.COLUMN_NAME).getValue()!==lb}function d(b){return-1===f.inArray(_(a.COMP_TYPE.CHART,b).getProperty(a.PROP.CHART_TYPE).getValue(),["DOUGHNUT","PIE","DIAL","CANDLESTICK","PROJECT_GANTT","RESOURCE_GANTT"])}function e(b){return a.getComponents(a.COMP_TYPE.CHART_SERIES,{parentId:$(b).parentId}).length>1}function g(b){return-1===f.inArray($(b).getParent().getProperty(a.PROP.CHART_TYPE).getValue(),["DOUGHNUT","PIE","DIAL","CANDLESTICK","PROJECT_GANTT","RESOURCE_GANTT"])}function h(b){return a.getComponents(a.COMP_TYPE.MAP_CHART_SERIES,{parentId:$(b).parentId}).length>1}return{"default":{operations:{canAdd:!1,canDuplicate:!1,canDelete:!1,canRename:!1,canDrag:!1,canSearch:!1,canExtCreate:!1,canExtEdit:!1,canExtCopy:!1}},page:{icon:"icon-tree-page"},validations:{operations:{canAdd:!0},icon:"icon-tree-folder",validChildren:["validation"]},validation:{icon:"icon-tree-validation",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canDrag:!0,canExtCopy:!0}},inline_validations:{icon:"icon-tree-folder",validChildren:["inline_validation"]},inline_validation:{icon:"icon-tree-validation",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},pre_rendering:{icon:"icon-tree-folder"},post_rendering:{icon:"icon-tree-folder"},main_computations:{icon:"icon-tree-folder",validChildren:["computations"]},computations:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["computation"]},computation:{icon:"icon-tree-computation",operations:{canDuplicate:!0,canDrag:!0,canDelete:!0,canExtCopy:!0,canSearch:!0}},inline_computations:{icon:"icon-tree-folder",validChildren:["inline_computation"]},inline_computation:{icon:"icon-tree-computation",operations:{canDuplicate:!0,canDelete:!0,canExtCopy:!0,canSearch:!0}},main_processes:{icon:"icon-tree-folder",validChildren:["processes"]},processes:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["process"]},process:{icon:"icon-tree-process",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},after_submit:{icon:"icon-tree-folder"},processing:{icon:"icon-tree-folder"},after_processing:{icon:"icon-tree-folder"},validating:{icon:"icon-tree-folder"},after_header:{icon:"icon-tree-folder"},before_header:{icon:"icon-tree-folder"},before_regions:{icon:"icon-tree-folder"},after_regions:{icon:"icon-tree-folder"},before_footer:{icon:"icon-tree-folder"},after_footer:{icon:"icon-tree-folder"},main_branches:{icon:"icon-tree-folder",validChildren:["branches"]},branches:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["branch"]},branch:{icon:"icon-tree-branch",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},main_regions:{icon:"icon-tree-folder",validChildren:["regions"]},regions:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["region"]},sub_regions:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["region"]},region:{icon:"icon-tree-region",operations:{canAdd:!0,canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0},validChildren:["page_items","region_buttons","inline_da_events","region_columns","ir_attributes","classic_report_attributes","classic_report_print","tabform_attributes","tabform_print","chart_series","map_chart_series","svg_chart_series","region","page_item","region_button"]},main_page_items:{icon:"icon-tree-folder",validChildren:["page_items"]},page_items:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["page_item","region_button","form_button"]},page_item:{icon:"icon-tree-item",operations:{canAdd:!0,canDuplicate:!0,canDrag:!0,canRename:!1,canDelete:!0,canExtCopy:!0,canSearch:!0},validChildren:["computations","inline_validations","inline_da_events","computation"]},form_button:{icon:"icon-tree-button",operations:{canDuplicate:!0,canDrag:!0,canRename:!1,canDelete:!0,canExtCopy:!0}},region_columns:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["classic_report_column","ir_report_column","tabform_column","region_column"]},classic_report_column:{icon:"icon-tree-report-column",operations:{canRename:!1,canDuplicate:!1,canDelete:b,canDrag:c,drag:{normal:"move"}}},classic_report_attributes:{icon:"icon-tree-attributes"},tabform_attributes:{icon:"icon-tree-attributes"},region_plugin_attributes:{icon:"icon-tree-attributes"},ir_attributes:{icon:"icon-tree-folder",validChildren:["ir_column_groups","ir_saved_reports"]},ir_column_groups:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["ir_column_group"]},ir_column_group:{icon:"icon-tree-col-group",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0}},ir_saved_reports:{icon:"icon-tree-folder",validChildren:["ir_saved_report"]},ir_saved_report:{icon:"icon-tree-saved-report"},ir_report_column:{icon:"icon-tree-report-column",operations:{canRename:!1,canDrag:!0}},tabform_column:{icon:"icon-tree-item",operations:{canRename:!1,canDrag:c,canDelete:b}},tabform_processes:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["tabform_process"]},tabform_process:{icon:"icon-tree-process",operations:{canDuplicate:!0,canRename:!0,canDelete:!0}},region_column:{icon:"icon-tree-report-column",operations:{canRename:!1,canDrag:!0}},chart_attributes:{icon:"icon-tree-folder",validChildren:["chart_series"]},chart_series:{icon:"icon-tree-folder",operations:{canAdd:d},validChildren:["chart_serie"]},chart_serie:{icon:"icon-tree-chart-series",operations:{canAdd:d,canDuplicate:g,canDelete:e,canRename:!0,canDrag:!0,drag:{normal:"move"}}},map_chart_attributes:{icon:"icon-tree-folder",validChildren:["map_chart_series"]},map_chart_series:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["map_chart_serie"]},map_chart_serie:{icon:"icon-tree-map-series",operations:{canDuplicate:!0,canDelete:h,canRename:!0,canDrag:!0,drag:{normal:"move"}}},main_buttons:{icon:"icon-tree-folder",validChildren:["region_buttons"]},region_buttons:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["region_button","form_button"]},region_button:{icon:"icon-tree-button",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},main_da_events:{icon:"icon-tree-folder",validChildren:["da_events"]},da_events:{icon:"icon-tree-folder",validChildren:["da_event"]},da_event:{icon:"icon-tree-da-event",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canExtCopy:!0},validChildren:["da_actions_true","da_actions_false"]},da_actions_true:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["da_action"]},da_actions_false:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["da_action"]},da_action:{icon:"icon-tree-da-action",operations:{canDuplicate:!0,canDrag:!0,canDelete:!0}},inline_da_events:{icon:"icon-tree-folder",validChildren:["inline_da_event"]},inline_da_event:{icon:"icon-tree-da-event",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canExtCopy:!0},validChildren:["da_actions_true","da_actions_false"]},page_load_da_events:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["page_load_da_event"]},page_load_da_event:{icon:"icon-tree-da-event",operations:{canDrag:!0,drag:{normal:"move"}}},tab_sets:{icon:"icon-tree-folder"},tab_set:{icon:"icon-tree-tabs",operations:{canExtEdit:!0}},lovs:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},lov:{icon:"icon-tree-lov",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},breadcrumbs:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},breadcrumb:{icon:"icon-tree-breadcrumb",operations:{canExtCreate:!0,canExtEdit:!0}},lists:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},list:{icon:"icon-tree-list",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},navigation_lists:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},navigation_list:{icon:"icon-tree-list",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},templates:{icon:"icon-tree-folder"},page_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},page_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},field_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},field_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},button_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},button_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},region_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},region_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},list_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},list_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},nav_list_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},nav_list_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},breadcrumb_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},breadcrumb_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},calendar_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},calendar_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},report_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},report_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},authorizations:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},authorization:{icon:"icon-tree-authorization",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},plugins:{icon:"icon-tree-folder"},plugin:{icon:"icon-tree-plugin"},build_options:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},build_option:{icon:"icon-tree-build-option",operations:{canExtCreate:!0,canExtEdit:!0}},data_load_tables:{icon:"icon-tree-folder"},data_load_table:{icon:"icon-tree-data-load-table",operations:{canExtEdit:!0}},web_services:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},web_service:{icon:"icon-tree-web-service",operations:{canExtCreate:!0}},references:{icon:"icon-tree-folder"},referenced_by:{operations:{canRename:!0}}}}function fb(c,d){function e(a){function b(a){return d&&d[a.id]===!0?!0:!a.state||!a.state.opened||d&&d[a.id]===!1?!1:!0}function c(a){for(var d=0;d<a.length;d++)b(a[d])&&e.push(a[d].id),a[d].children&&c(a[d].children)}var e=[];return b(a)&&e.push(a.id),c(a.children),e}var g=c(),h=f.apex.treeView.makeDefaultNodeAdapter(g,eb(),!0,e(g));return h.sortCompare=null,h.defaultGetIcon=h.getIcon,h.getIcon=function(c){if(c.data){if(c.data.typeId===a.COMP_TYPE.REGION)return b.getComponentIconClass("region",$(c).getProperty(a.PROP.REGION_TYPE).getValue());if(c.data.typeId===a.COMP_TYPE.PAGE_ITEM)return b.getComponentIconClass("item",$(c).getProperty(a.PROP.ITEM_TYPE).getValue());if(c.data.typeId===a.COMP_TYPE.BUTTON)return b.getComponentIconClass("button","Y"===$(c).getProperty(a.PROP.BUTTON_IS_HOT).getValue()?"hot":"normal")}return this.defaultGetIcon(c)},h.extraCheck=function(b,c,d,e,g){var h,i;if(b){if(-1!==f.inArray(c,["canDelete","canRename","canDrag","canDuplicate"]))return h=$(d),h&&!h.isReadOnly()&&!a.isPageReadOnly();if("canAdd"===c&&a.isPageReadOnly())return!1;if("canAdd"===c&&"move"===e&&-1!==f.inArray(d.type,["region_columns","ir_column_groups","chart_series","map_chart_series"])&&g)for(i=0;i<g.length;i++)if(g[i]._parent&&g[i]._parent!==d)return!1}return b},h.renderNodeContent=function(a,c,d,e){var f,g,h;f=this.getIcon(a),null!==f&&c.markup("<span").attr("class","a-Icon "+f).markup("></span>"),g=this.getClasses(a),g&&(g.indexOf(b.CSS.IS_ERROR)>=0?h="icon-error":g.indexOf(b.CSS.IS_WARNING)>=0&&(h="icon-warning")),c.markup("<span role='treeitem' class='a-TreeView-label' tabIndex='-1'").attr("aria-level",e.level).optionalAttr("aria-selected",e.selected?"true":"false").optionalAttr("aria-disabled",e.disabled?"true":null).optionalAttr("aria-expanded",e.hasChildren===!1?null:e.expanded?"true":"false").markup(">"),h&&c.markup("<span class='a-Icon ").attr(h).markup("'></span>"),c.content(this.getLabel(a)).markup("</span>")},function(){return h}}function gb(a,c,e){a.treeView({getNodeAdapter:fb(c),showRoot:e,collapsibleRoot:!1,expandRoot:!1,contextMenu:jb(a),contextMenuId:a[0].id+"Menu",multiple:!0,doubleClick:"toggle",clickToRename:!1,keyboardRename:!1,keyboardAdd:!1,keyboardDelete:!0,tooltip:{show:apex.tooltipManager.defaultShowOption(),content:function(a,c){var d=$(c);return d?b.tooltipContentForComponent(d):void 0}},dragAndDrop:!0,dragMultiple:!0,dragReorder:!0,delay:10,distance:5,dragAppendTo:document.body,dragCursor:"move",dragOpacity:.6,dragCursorAt:{left:10,bottom:10},dragAnimate:!1,dragContainment:"document",selectionChange:function(){var a,b=this.id;a=X(f(this)),d.trace("%s: trigger event selectionChanged",b,a),f(document).trigger("selectionChanged",[b,a])},added:function(){},moved:function(b,c){O(c,a)},copied:function(b,c){P(c,a)},deleted:function(b,c){Q(c,a)}}),a.on("refresh",function(){var b=a.treeView("getExpandedState");d.trace("%s: refresh tree",a[0].id),a.treeView("option","getNodeAdapter",fb(c,b))}),ib(a,c)}function hb(b){var c=b[0].id;a.unobserver(c,{}),f(document).off("selectionChanged."+c),b.off("refresh"),b.treeView("destroy")}function ib(c){function e(a){for(var b,c=0;c<a.length;c++){if(a[c].hasOwnProperty("typeId")){h[a[c].typeId]=!0,b=M(a[c].typeId);for(var d=0;d<b.length;d++)j.push({typeId:b[d].typeId}),k.push(b[d].propertyId)}a[c].children&&e(a[c].children)}}var h,i=c[0].id,j=null,k=[];if("PDrenderingTree"===i?(j=null,h=null):"PDdynamicActionTree"===i?j=[{typeId:a.COMP_TYPE.DA_EVENT},{typeId:a.COMP_TYPE.DA_ACTION}]:"PDprocessingTree"===i?j=[{typeId:a.COMP_TYPE.BRANCH},{typeId:a.COMP_TYPE.PAGE_COMPUTATION},{typeId:a.COMP_TYPE.PAGE_PROCESS},{typeId:a.COMP_TYPE.VALIDATION},{typeId:a.COMP_TYPE.PAGE_PROC_WS_P_I},{typeId:a.COMP_TYPE.PAGE_PROC_WS_P_O},{typeId:a.COMP_TYPE.PAGE_PROC_WS_P_A}]:"PDsharedCompTree"===i&&(j=[],h={},e(ob)),h===g){h={};for(var l=0;l<j.length;l++)h[j[l].typeId]=!0}a.observer(i,{components:j,events:[a.EVENT.DISPLAY_TITLE]},function(a){d.trace("%s: DISPLAY_TITLE component notification received",i,a),bb(a.component,c,function(){this.label=a.component.getDisplayTitle()})}),a.observer(i,{components:j,events:[a.EVENT.CREATE,a.EVENT.DELETE]},function(a){d.trace("%s: CREATE/DELETE component notification received",i,a),c.trigger("refresh")},!0),"PDsharedCompTree"===i?a.observer(i,{components:j,events:[a.EVENT.CHANGE,a.EVENT.ADD_PROP,a.EVENT.REMOVE_PROP],properties:k},function(a){d.trace("%s: CHANGE/ADD_PROP/REMOVE_PROP component notification received for shared component reference properties",i,a),c.trigger("refresh")},!0):(a.observer(i,{components:j,events:[a.EVENT.CHANGE,a.EVENT.ADD_PROP,a.EVENT.REMOVE_PROP],properties:[a.PROP.PAGE_TEMPLATE,a.PROP.DIALOG_TEMPLATE,a.PROP.EXECUTION_SEQUENCE,a.PROP.DISPLAY_SEQUENCE,a.PROP.BRANCH_POINT,a.PROP.PROCESS_POINT,a.PROP.COMPUTATION_POINT,a.PROP.BUTTON_POSITION,a.PROP.REGION_POSITION,a.PROP.PARENT_REGION,a.PROP.REGION,a.PROP.VALIDATION_REGION,a.PROP.VAL_ITEM,a.PROP.REGION_VAL_COLUMN,a.PROP.REGION_TYPE,a.ASSOCIATED_ITEM,a.ASSOCIATED_COLUMN,a.PROP.COMPUTATION_ITEM_NAME,a.PROP.EVENT,a.PROP.DA_EVENT,a.PROP.DA_ACTION_TYPE,a.PROP.FIRE_WHEN_EVENT_RESULT_IS,a.PROP.FIRE_ON_PAGE_LOAD,a.PROP.WHEN_REGION,a.PROP.WHEN_ITEMS,a.PROP.WHEN_BUTTON]},function(a){d.trace("%s: CHANGE/ADD_PROP/REMOVE_PROP component notification received for display relevant properties",i,a),c.trigger("refresh")},!0),a.observer(i,{components:j,events:[a.EVENT.ERRORS,a.EVENT.NO_ERRORS]},function(a){a.component.hasErrors()?cb(a.component,b.CSS.IS_ERROR,c):db(a.component,b.CSS.IS_ERROR,c)}),a.observer(i,{components:j,events:[a.EVENT.WARNINGS,a.EVENT.NO_WARNINGS]},function(a){a.component.hasWarnings()?cb(a.component,b.CSS.IS_WARNING,c):db(a.component,b.CSS.IS_WARNING,c)}),b.observerIsConditional(i,j,function(a){b.isConditional(a.component)?cb(a.component,b.CSS.IS_CONDITIONAL,c):db(a.component,b.CSS.IS_CONDITIONAL,c)})),f(document).on("selectionChanged."+i,function(a,b,e){b!==i&&(d.trace("%s: selectionChanged event received from %s",i,b,e),(0===e.length||null===h||h.hasOwnProperty(e[0].typeId))&&T(e,c,null,!1))})}function jb(c){function d(b){return i("CREATE",a.getComponentType(b).title.singular)}function e(a){return a.call(c.treeView("getSelectedNodes"))}function g(b,c){return 1===b.length&&-1!==f.inArray(b[0].type,c)&&!a.isPageReadOnly()}function j(b,c){return a.isGlobalPage()?!1:g(b,c)}function k(b,c){var d=_(a.COMP_TYPE.REGION,b);return-1!==f.inArray(d.getProperty(a.PROP.REGION_TYPE).getValue(),c)}function l(b,c){apex.navigation.redirect(b.replace(/\\u002525/g,"%").replace(/%25/g,"%").replace(/%session%/g,$v("pInstance")).replace(/%pk_value%/g,c).replace(/%application_id%/g,a.getCurrentAppId()).replace(/%page_id%/g,a.getCurrentPageId()))}function m(b,c){var d=$(b,c);l(a.getComponentType(d.typeId).editUrl,d.id)}function n(b,c){var d=$(b,c);l(a.getComponentType(d.typeId).copyUrl,d.id)}function o(b,c){var d;d=$(b,c)?$(b,c).typeId:b.data.typeId,l(a.getComponentType(d).createUrl)}function p(b,c){var d,e,g=$(b,c),h=g.getProperty(a.PROP.BRANCH_TYPE).getValue(),i=null;return"REDIRECT_URL"===h?(d=g.getProperty(a.PROP.TARGET).getValue(),/f\?p=([^:]*):([^:]*)/i.test(d)&&(e=RegExp.$1,("&FLOW_ID."===e||"&APP_ID."===e||e===a.getCurrentAppId())&&(i=RegExp.$2))):-1!==f.inArray(h,["BRANCH_TO_STEP","BRANCH_TO_PAGE_ACCEPT"])&&(i=g.getProperty(a.PROP.BRANCH_PAGE_NUMBER).getValue()),i}function q(a){var b,h,i={label:a.label,accelerator:a.accelerator,type:a.type};s++,i.id=c[0].id+"_ctx_"+s,i.type||(i.type="action",b=a.action),a.typeId&&(a.label||(i.label=d(a.typeId)),b||(b=function(){V(this[0],c,a.typeId)})),i.action=function(){return e(b)},a.visible&&(h=f.isFunction(a.visible)?a.visible:f.isArray(a.visible)?function(){return g(this,a.visible)}:a.visible.global===!1?function(){return j(this,a.visible.types)}:function(){return g(this,a.visible.types)},i.hide=function(){return!e(h)}),a.disabled&&(i.disabled=function(){return e(a.disabled)}),r.push(i)}var r=[],s=0;return q({typeId:a.COMP_TYPE.REGION,visible:["main_regions","regions","region","before_footer"]}),q({label:i("CREATE",h("SUB_REGION")),action:function(){V(this[0],c,a.COMP_TYPE.REGION,"SUB_REGION")},visible:function(){var a=$(this[0],c);return!a||a&&!a.isOnGlobalPage()?g(this,["region","sub_regions"]):!1}}),q({typeId:a.COMP_TYPE.PAGE_ITEM,visible:["main_page_items","page_items","page_item","form_button","region"]}),q({typeId:a.COMP_TYPE.BUTTON,visible:["main_buttons","region_buttons","region_button","region","page_items","page_item","form_button"]}),q({typeId:a.COMP_TYPE.BRANCH,visible:{global:!1,types:["main_branches","branches","branch","before_header","after_submit","validating","processing","after_processing"]}}),q({typeId:a.COMP_TYPE.PAGE_COMPUTATION,visible:{global:!1,types:["main_computations","computations","computation","inline_computations","inline_computation","on_new_instance","before_header","after_header","before_regions","after_regions","before_footer","after_footer","after_submit","page_item"]}}),q({typeId:a.COMP_TYPE.PAGE_PROCESS,visible:{global:!1,types:["main_processes","processes","process","on_new_instance","before_header","after_header","before_regions","after_regions","before_footer","after_footer","after_submit","processing"]}}),q({typeId:a.COMP_TYPE.VALIDATION,visible:function(){return j(this,["validation","validations","validating","inline_validations","inline_validation","page_item"])?!0:j(this,["region","tabform_column"])&&k(this[0],["NATIVE_TABFORM"])}}),q({typeId:a.COMP_TYPE.DA_EVENT,visible:["main_da_events","da_events","da_event","inline_da_events","inline_da_event","region","page_item","region_button","form_button"]}),q({typeId:a.COMP_TYPE.DA_ACTION,visible:["da_action"]}),q({label:i("CREATE",h("TRUE_ACTION")),typeId:a.COMP_TYPE.DA_ACTION,action:function(){V(this[0],c,a.COMP_TYPE.DA_ACTION,"TRUE")},visible:["da_actions_true","da_event","inline_da_event"]}),q({label:i("CREATE",h("FALSE_ACTION")),typeId:a.COMP_TYPE.DA_ACTION,action:function(){V(this[0],c,a.COMP_TYPE.DA_ACTION,"FALSE")},visible:["da_actions_false","da_event","inline_da_event"]}),q({label:i("CREATE",h("OPPOSITE_DYNAMIC_ACTION")),typeId:a.COMP_TYPE.DA_ACTION,action:function(){U(this,c)},visible:function(){for(var a=0;a<this.length;a++)if("da_action"!==this[a].type||!c.treeView("getNodeAdapter").check("canDuplicate",this[a]))return!1;return!0}}),q({label:i("CREATE",h("VIRTUAL_COLUMN")),action:function(){k(this[0],["NATIVE_TABFORM"])?V(this[0],c,a.COMP_TYPE.TAB_FORM_COLUMN,"VIRTUAL"):V(this[0],c,a.COMP_TYPE.CLASSIC_RPT_COLUMN,"VIRTUAL")},visible:function(){return g(this,["region_columns","classic_report_column","tabform_column"])&&k(this[0],["NATIVE_SQL_REPORT","NATIVE_FNC_REPORT","NATIVE_TABFORM"])}}),q({label:i("CREATE",h("ROW_SELECTOR")),action:function(){V(this[0],c,a.COMP_TYPE.TAB_FORM_COLUMN,"ROW_SELECTOR")},visible:function(){var b;return g(this,["region_columns","tabform_column"])&&(b=_(a.COMP_TYPE.REGION,this[0],c),"NATIVE_TABFORM"===b.getProperty(a.PROP.REGION_TYPE).getValue())?0===b.getChilds(a.COMP_TYPE.TAB_FORM_COLUMN,{properties:[{id:a.PROP.COLUMN_NAME,value:lb}]}).length:!1}}),q({typeId:a.COMP_TYPE.CHART_SERIES,visible:function(){return g(this,["chart_series","chart_serie"])?c.treeView("getNodeAdapter").check("canAdd",this[0]):!1}}),q({typeId:a.COMP_TYPE.MAP_CHART_SERIES,visible:["map_chart","map_chart_series","map_chart_serie"]}),q({typeId:a.COMP_TYPE.IR_COLUMN_GROUP,visible:["ir_attributes","ir_column_groups","ir_column_group"]}),q({label:h("DUPLICATE"),action:function(){R(this,c)},visible:function(){for(var a=0;a<this.length;a++)if(!c.treeView("getNodeAdapter").check("canDuplicate",this[a]))return!1;return!0}}),q({type:"separator"}),q({label:h("DELETE"),accelerator:"Del",action:function(){return S(this,c),!0},visible:function(){for(var a=0;a<this.length;a++)if(!c.treeView("getNodeAdapter").allowDelete(this[a]))return!1;return!0}}),q({type:"separator"}),q({label:h("COPY_TO_PAGE"),action:function(){n(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtCopy",this[0])&&a.getComponentType($(this[0]).typeId).isPageComponent&&!$(this[0]).isOnGlobalPage()}}),q({label:h("EDIT_SHARED_COMPONENT"),action:function(){m(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtEdit",this[0])&&!a.getComponentType($(this[0],c).typeId).isPageComponent}}),q({label:h("COPY_SHARED_COMPONENT"),action:function(){n(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtCopy",this[0])&&!a.getComponentType($(this[0],c).typeId).isPageComponent}}),q({label:h("CREATE_SHARED_COMPONENT"),action:function(){o(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtCreate",this[0])}}),q({label:h("PAGE_SEARCH"),action:function(){f(document).trigger("pageSearch",[$(this[0],c).getDisplayTitle()])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canSearch",this[0])}}),q({label:h("GOTO_TARGET_PAGE"),action:function(){b.goToPage(p(this[0],c))},visible:function(){return 1===this.length&&"branch"===this[0].type},disabled:function(){return null===p(this[0],c)}}),q({type:"separator"}),q({label:h("EXPAND_ALL_BELOW"),action:function(){c.treeView("expandAll",c.treeView("getSelection"))}}),q({label:h("COLLAPSE_ALL_BELOW"),action:function(){c.treeView("collapseAll",c.treeView("getSelection"))}}),{items:r}}var kb={IS_HEADER:"is-header",IS_COMPONENT_VIEW:"is-component-view",IS_EVENT_VIEW:"is-event-view",IS_NOT_IMPORTANT:"is-not-important",IS_POPULATED:"is-populated"},lb="CHECK$01",mb="is-active",nb=15,ob=[{typeId:a.COMP_TYPE.LOV,type:"lov"},{typeId:a.COMP_TYPE.LIST,type:"list"},{typeId:a.COMP_TYPE.AUTHORIZATION,type:"authorization"},{typeId:a.COMP_TYPE.BUILD_OPTION,type:"build_option"},{typeId:a.COMP_TYPE.DATA_LOAD_TABLE,type:"data_load_table"},{typeId:a.COMP_TYPE.WS_REF,type:"web_service"},{typeId:a.COMP_TYPE.BREADCRUMB,type:"breadcrumb"},{title:h("NAVIGATION_MENU_LIST"),typeId:a.COMP_TYPE.LIST,type:"navigation_list"},{title:h("TAB_SET"),typeId:a.COMP_TYPE.TAB_SET,type:"tab_set"},{title:h("TEMPLATES"),type:"template",children:[{titleTypeId:a.COMP_TYPE.PAGE,typeId:a.COMP_TYPE.PAGE_TEMPLATE,type:"page_template"},{titleTypeId:a.COMP_TYPE.PAGE_ITEM,typeId:a.COMP_TYPE.FIELD_TEMPLATE,type:"field_template"},{titleTypeId:a.COMP_TYPE.BUTTON,typeId:a.COMP_TYPE.BUTTON_TEMPLATE,type:"button_template"},{titleTypeId:a.COMP_TYPE.REGION,typeId:a.COMP_TYPE.REGION_TEMPLATE,type:"region_template"},{titleTypeId:a.COMP_TYPE.LIST,typeId:a.COMP_TYPE.LIST_TEMPLATE,type:"list_template"},{title:h("CLASSIC_REPORT"),typeId:a.COMP_TYPE.REPORT_TEMPLATE,type:"report_template"},{title:h("NAVIGATION_MENU_LIST"),typeId:a.COMP_TYPE.LIST_TEMPLATE,type:"nav_list_template"},{titleTypeId:a.COMP_TYPE.BREADCRUMB,typeId:a.COMP_TYPE.BREADCRUMB_TEMPLATE,type:"breadcrumb_template"},{title:h("LEGACY_CALENDAR"),typeId:a.COMP_TYPE.CALENDAR_TEMPLATE,type:"calendar_template"}]}];f(document).ready(function(){function a(){b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?(c.removeClass(kb.IS_EVENT_VIEW),c.addClass(kb.IS_COMPONENT_VIEW),j.removeClass(mb),k.addClass(mb)):(c.removeClass(kb.IS_COMPONENT_VIEW),c.addClass(kb.IS_EVENT_VIEW),j.addClass(mb),k.removeClass(mb))}var c=f("#trees"),e=f("#PDrenderingTree"),g=f("#PDdynamicActionTree"),h=f("#PDprocessingTree"),i=f("#PDsharedCompTree"),j=f("#r_event_view, #p_event_view"),k=f("#r_comp_view, #p_comp_view");j.click(function(){b.saveBoolPref("GROUP_BY_COMPONENT_TYPE",!1),f(document).trigger("settingsStateChanged",["view"])}),k.click(function(){b.saveBoolPref("GROUP_BY_COMPONENT_TYPE",!0),f(document).trigger("settingsStateChanged",["view"])}),a(),c.on("tabsactivate",function(a,b){var c,e=b.newPanel.find(".a-TreeView");e.length>0&&(c=X(e),c.length>0&&(d.trace("%s: trigger event selectionChanged",e.id,c),f(document).trigger("selectionChanged",[e.id,c])))}),f(document).on("settingsStateChanged",function(b,c){"view"===c?(a(),e.trigger("refresh"),h.trigger("refresh")):"componentTitle"===c&&alert("Not yet implemented!")}),f(document).on("modelReady",function(){gb(e,E,!0),gb(g,H,!1),gb(h,I,!1),gb(i,L,!1),f(document).one("modelCleared",function(){hb(e),hb(g),hb(h),hb(i)})})})}(pe,window.pageDesigner,apex.util,apex.debug,apex.lang,apex.jQuery);