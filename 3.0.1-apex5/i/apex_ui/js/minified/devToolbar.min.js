!function(a,b,c,d){"use strict";function e(b,c,d){var e=5,f=0,g=function(){a.universalThemeRoller?(a.universalThemeRoller({filePaths:{utrScript:u+"utr.js",utrStylesheet:u+"utr.css",lessCompilerScript:u+"less.js",jQueryUiComponentsScript:u+"jquery-ui.utr.js",codeMirrorScript:v+"lib/codemirror.js",codeMirrorCSSModeScript:v+"mode/css/css.js",codeMirrorStylesheet:v+"lib/codemirror.css",codeMirrorThemeStylesheet:v+"theme/mbo.css",d3Script:y+"d3.min.js",d3ColorPickerScript:w+"d3.oracle.colorpicker.js",d3ColorPickerStylesheet:w+"d3.oracle.colorpicker.css",d3PaletteScript:x+"d3.oracle.palette.js",d3PaletteStylesheet:x+"d3.oracle.palette.css"},config:{themeId:b,builderSessionId:c}}),d&&"function"==typeof d&&d()):e>f&&(setTimeout(g,100),f++)};return g}function f(a){return a.attr("data-link")}function g(a){if(h(a))return null;try{if(a.opener&&!a.opener.closed&&a.opener.apex&&a.opener.apex.jQuery)return a.opener.location.href.match(/f?p=4\d\d\d:/)||a.opener.document.getElementById("pFlowId").value.match(/^4\d\d\d$/)?a.opener:g(a.opener)}catch(b){return null}return null}function h(a){return a.name&&a.name.match("^"+q)}function i(){var a=g(window);return a?a.document.getElementById("pInstance").value:null}function j(a){var b,c;return b=i(),b&&(c=a.split(":"),c[2]=b,a=c.join(":")),a}function k(){var b,c,d=a("#apexDevToolbar");d.is(".a-DevToolbar--top, .a-DevToolbar--bottom")?(c=a(window).width(),d.css({width:"","white-space":"nowrap"}),b=d.children("ul").first().outerWidth(!0)+4,b>c&&(b=c),d.css({left:(c-b)/2,"white-space":"normal"}),d.width(b)):(d.css("left",""),d.css("width",""))}function l(b){a("#apexDevToolbarApp").attr("title",b.appTitle).find(".a-DevToolbar-buttonLabel").text(b.appTitle),a("#apexDevToolbarPage").attr("title",b.pageTitle).find(".a-DevToolbar-buttonLabel").text(b.pageTitle),a("#apexDevToolbarDebug").attr("title",b.debugTitle).find(".a-DevToolbar-buttonLabel").text(b.debugTitle),k()}function m(){C.push({})}function n(a,b,c,d,e,g){var h=Object.create(J),i=j(f(a.find("#apexDevToolbarPage"))),k=i.split(":")[7].split(",");h.currentApp=k[0],h.currentPage=k[1],h.builderSessionId=i.split(":")[2],h.document=a[0].ownerDocument,h.window=b,h.actions={home:f(a.find("#apexDevToolbarHome")),app:f(a.find("#apexDevToolbarApp")),page:f(a.find("#apexDevToolbarPage")),session:f(a.find("#apexDevToolbarSession")),viewDebug:f(a.find("#apexDevToolbarViewDebug")),debug:f(a.find("#apexDevToolbarDebug")),quickEdit:f(a.find("#apexDevToolbarQuickEdit"))},h.components=c,h.windowMgmtMode=d,h.themeId=g,h.text=e,h.appTitle=a.find("#apexDevToolbarApp").attr("title"),h.pageTitle=a.find("#apexDevToolbarPage").attr("title"),h.debugTitle=a.find("#apexDevToolbarDebug").attr("title"),C[C.length-1]=h,l(p())}function o(){C.pop(),l(p())}function p(){var a;for(a=C.length-1;a>=0;a--)if(void 0!==C[a].currentApp)return C[a];return null}var q="APEX_BUILDER",r="ORA_WWV_apex.builder.devToolbar",s="ORA_WWV_apex.builder.themeRoller",t="crosshair",u=window.apex_img_dir+"apex_ui/theme_roller/",v=window.apex_img_dir+"libraries/codemirror/4.4/",w=window.apex_img_dir+"libraries/d3.oracle.colorpicker/0.1/",x=window.apex_img_dir+"libraries/d3.oracle.palette/0.1/",y=window.apex_img_dir+"libraries/d3/3.3.11/",z=d.getScopedSessionStorage({prefix:r,useAppId:!1}),A=d.getScopedLocalStorage({prefix:r,useAppId:!1}),B=d.getScopedSessionStorage({prefix:s,useAppId:!0});a.ui.dialog&&a.widget("ui.dialog",a.ui.dialog,{_allowInteraction:function(b){return a(b.target).closest(".a-DevToolbar, #apexDevToolbarMenu, .u-Overlay--quickEdit").length>0||this._super(b)}});var C=[],D=null,E=null,F=null,G=!1,H=null,I=null,J={navigateInPageDesigner:function(a,b,d,e,f){var h=g(window);h&&h.pageDesigner?(h.pageDesigner.setPageSelection(a,b,d,e,function(a){"OK"!==a&&"PAGE_CHANGE_ABORTED"!==a&&f()}),c.openInNewWindow("",q,{altSuffix:i()})):f()},builderWindow:function(a){this.builderWindowUrl(j(this.actions[a]))},builderWindowUrl:function(a){var b=i();h(window)||"NONE"===this.windowMgmtMode?c.redirect(a):b?c.openInNewWindow(a,q,{altSuffix:b}):(alert(this.text.noBuilderMessage),window.name="",c.redirect(a))},popup:function(a){c.popup({url:j(this.actions[a]),name:"view_debug",width:1024,height:768})},sameWindow:function(a){var b,d=this.actions[a];this.window===window?c.redirect(d):(b=/apex.navigation.dialog\(['"]([^'"]*)['"]/.exec(d),b&&(d=b[1],d=d.replace(/\\u(\d\d\d\d)/g,function(a,b){return String.fromCharCode(parseInt(b,16))})),this.window.location.href=d)},initLocateBoxes:function(){var c,d,e,f;for(D=[],c=this.components.length-1;c>=0;c--)f=this.components[c],d=a("#"+b.escapeCSS(f.domId),this.document).filter(":visible"),d.length&&(e=d.offset(),D.push({node:d[0],pageId:f.pageId,typeId:f.typeId,componentId:f.id,top:e.top,bottom:e.top+d.outerHeight(),left:e.left,right:e.left+d.outerWidth()}))},endDomLocate:function(){a(this.document).off(".locate"),a(document).off(".locate"),a(window).off(".locate"),a(this.document.body).css("cursor",I),H.remove(),E.remove(),F.remove(),G=!1},beginDomLocate:function(b){function c(a,b,c){return b>c.top&&b<c.bottom&&a>c.left&&a<c.right}var d=this,e=null,f=a(this.document.body);this.initLocateBoxes(),e=null,G=this.document!==document,E=a("<div class='u-Overlay u-Overlay--quickEdit'></div>").appendTo(f),F=a("<div id='foo' class='a-DevToolbar-uiSelector'></div>").appendTo(f),I=f.css("cursor"),H=a("<style>*{ cursor: "+t+" !important; }</style>").appendTo(f),f.css("cursor",t),a(this.document).on("mousemove.locate",function(b){var d,f,g,h,i,j,k,l=b.pageX,m=b.pageY;for(G||(G=!0),j=null,d=0;d<D.length;d++)if(f=D[d],c(l,m,f)){j=f;break}e!==j&&(e=j,null===e?F.hide():(F.show(),k=a(f.node),g=k.offset(),h=k.outerHeight(),i=k.outerWidth(),F.css({top:g.top+"px",left:g.left+"px"}),F.height(h),F.width(i)))}).on("click.locate",function(){return G?(d.endDomLocate(),e&&b(e),!1):void(G=!0)}),a(document).on("keydown.locate",function(b){b.keyCode===a.ui.keyCode.ESCAPE&&d.endDomLocate()})},quickEdit:function(){var a=this;G?this.endDomLocate():this.beginDomLocate(function(b){var c,d,e=j(a.actions.quickEdit);a.navigateInPageDesigner(a.currentApp,b.pageId,b.typeId,b.componentId,function(){b.pageId!==a.currentPage&&(d=e.split(":"),c=d[d.length-1].split(","),c[1]=c[3]=c[4]=b.pageId,d[d.length-1]=c.join(","),e=d.join(":")),e+="#"+b.typeId+":"+b.componentId,a.builderWindowUrl(e)})})},themeRoller:function(){var b=this;apex.debug.info("ThemeId: %s, BuilderSessionId: %s",b.themeId,b.builderSessionId);var c=function(){a.universalThemeRoller(apex.utr&&apex.utr.opened?"close":"open")};if(a.universalThemeRoller)c();else{var d=e(b.themeId,b.builderSessionId,c);a.getScript(u+"jquery.universalThemeRoller.js",d)}}};apex.initNestedDevToolbar=function(a,b,c,d,e,f){n(a,b,c,d,e,f)},apex.initDevToolbar=function(c,f,g,h){function j(){d.hasLocalStorageSupport()&&A.setItem("options",'{"autoHide":'+w+',"iconsOnly":'+x+',"displayPosition":"'+y+'"}')}function l(){var b;if(b=A.getItem("options"))try{b=a.parseJSON(b),w=b.autoHide?b.autoHide:w,x=b.iconsOnly?b.iconsOnly:x,y=/^(top|left|right|bottom)$/.test(b.displayPosition)?b.displayPosition:y}catch(c){}}function q(b){var c=b?"on":"off";a("#grid_debug_on").parent().toggle(!b),a("#grid_debug_off").parent().toggle(b),a(document).trigger("apex-devbar-grid-debug-"+c),z.setItem("grid",c),k()}var r=!1,s=!1,t=a("<div id='apexDevToolbarMenu'></div>").appendTo("body"),v=null,w=!1,x=!1,y="bottom";if(q("on"===z.getItem("grid")),self.apex===b.getTopApex()){var C=e(h,i(),function(){a.universalThemeRoller("open")});a.getScript(u+"utr-base.js",function(){"true"===B.getItem("OPENED")&&a.getScript(u+"jquery.universalThemeRoller.js",C)}),a("#apexDevToolbarHome").click(function(){p().builderWindow("home")}),a("#apexDevToolbarApp").click(function(){p().builderWindow("app")}),a("#apexDevToolbarPage").click(function(){var a=p();a.navigateInPageDesigner(a.currentApp,a.currentPage,null,null,function(){a.builderWindow("page")})}),a("#apexDevToolbarSession").click(function(){p().popup("session")}),a("#apexDevToolbarViewDebug").click(function(){p().popup("viewDebug")}),a("#apexDevToolbarDebug").click(function(){p().sameWindow("debug")}),a("#grid_debug_on").click(function(){q(!0)}),a("#grid_debug_off").click(function(){q(!1)}),a("#apexDevToolbarQuickEdit").off("click").click(function(){p().quickEdit()}),a("#apexDevToolbarThemeRoller").off("click").click(function(){p().themeRoller()}),t.menu({items:[{type:"toggle",label:g.autoHide,get:function(){return w},set:function(b){w=b,j(),a("#apexDevToolbar").toggleClass("a-DevToolbar--autoHide",w)}},{type:"toggle",label:g.iconsOnly,get:function(){return x},set:function(b){x=b,j(),a("#apexDevToolbar").toggleClass("a-DevToolbar--iconsOnly",x),k()}},{type:"subMenu",label:g.display,menu:{items:[{type:"radioGroup",get:function(){return y},set:function(b){y=b,j(),a("#apexDevToolbar").removeClass("a-DevToolbar--top a-DevToolbar--left a-DevToolbar--bottom a-DevToolbar--right"),a("#apexDevToolbar").addClass("a-DevToolbar--"+y),k()},choices:[{label:g.displayTop,value:"top"},{label:g.displayLeft,value:"left"},{label:g.displayBottom,value:"bottom"},{label:g.displayRight,value:"right"}]}]}}],beforeOpen:function(){s=!0}}),l(),a("#apexDevToolbar").toggleClass("a-DevToolbar--iconsOnly",x).toggleClass("a-DevToolbar--autoHide",w).removeClass("a-DevToolbar--top a-DevToolbar--left a-DevToolbar--bottom a-DevToolbar--right").addClass("a-DevToolbar--"+y).on("focusin",function(){r=!0,s=!1,a(this).addClass("is-active")}).on("focusout",function(){r=!1,s||a(this).removeClass("is-active")}).on("mouseenter",function(){null!==v&&(clearTimeout(v),v=null),a(this).addClass("is-active")}).on("mouseleave",function(){var b=this;v=setTimeout(function(){v=null,r||s||a(b).removeClass("is-active")},1e3)}).show(),m(),n(a("#apexDevToolbar"),window,c,f,g,h),a(window).on("apexwindowresized",function(){k()}),a(document.body).on("dialogopen",function(){m()}).on("dialogclose",function(){o()})}else if(b.getTopApex().initNestedDevToolbar&&b.getTopApex().initNestedDevToolbar(a("#apexDevToolbar"),window,c,f,g,h),b.getTopApex().utr){window.apex.utr={nested:!0};var D=function(){window.apex.utr.nest?b.getTopApex().utr.nest&&b.getTopApex().utr.nest(window.apex.utr):setTimeout(D,100)};a.getScript(u+"utr-base.js",D)}}}(apex.jQuery,apex.util,apex.navigation,apex.storage);