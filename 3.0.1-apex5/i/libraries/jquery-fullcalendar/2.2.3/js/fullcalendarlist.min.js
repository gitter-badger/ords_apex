/*!
 * FullCalendar v2.2.3
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
!function(factory){"function"==typeof define&&define.amd?define(["jquery","moment"],factory):factory(jQuery,moment)}(function($,moment){function generateShortTimeFormat(options,langData){return langData.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function generateWeekColumnFormat(options,langData){var format=langData.longDateFormat("L");return format=format.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),options.isRTL?format+=" ddd":format="ddd "+format,format}function setDefaults(d){mergeOptions(defaults,d)}function mergeOptions(target){function mergeIntoTarget(name,value){$.isPlainObject(value)&&$.isPlainObject(target[name])&&!isForcedAtomicOption(name)?target[name]=mergeOptions({},target[name],value):void 0!==value&&(target[name]=value)}for(var i=1;i<arguments.length;i++)$.each(arguments[i],mergeIntoTarget);return target}function isForcedAtomicOption(name){return/(Time|Duration)$/.test(name)}function Calendar(element,instanceOptions){function getLocaleData(langCode){var f=moment.localeData||moment.langData;return f.call(moment,langCode)||f.call(moment,"en")}function render(inc){content?elementVisible()&&(calcSize(),renderView(inc)):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),element.addClass(options.isRTL?"fc-rtl":"fc-ltr"),element.addClass(options.theme?"ui-widget":"fc-unthemed"),content=$("<div class='fc-view-container'/>").prependTo(element),header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),changeView(options.defaultView),options.handleWindowResize&&(windowResizeProxy=debounce(windowResize,options.windowResizeDelay),$(window).resize(windowResizeProxy))}function destroy(){currentView&&currentView.destroy(),header.destroy(),content.remove(),element.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),$(window).unbind("resize",windowResizeProxy)}function elementVisible(){return element.is(":visible")}function changeView(viewName){renderView(0,viewName)}function renderView(delta,viewName){ignoreWindowResize++,currentView&&viewName&&currentView.name!==viewName&&(header.deactivateButton(currentView.name),freezeContentHeight(),currentView.start&&currentView.destroy(),currentView.el.remove(),currentView=null),!currentView&&viewName&&(currentView=new fcViews[viewName](t),currentView.el=$("<div class='fc-view fc-"+viewName+"-view' />").appendTo(content),header.activateButton(viewName)),currentView&&(delta&&(date=currentView.incrementDate(date,delta)),currentView.start&&!delta&&date.isWithin(currentView.intervalStart,currentView.intervalEnd)||elementVisible()&&(freezeContentHeight(),currentView.start&&currentView.destroy(),currentView.render(date),unfreezeContentHeight(),updateTitle(),updateTodayButton(),getAndRenderEvents())),unfreezeContentHeight(),ignoreWindowResize--}function updateSize(shouldRecalc){return elementVisible()?(shouldRecalc&&_calcSize(),ignoreWindowResize++,currentView.updateSize(!0),ignoreWindowResize--,!0):void 0}function calcSize(){elementVisible()&&_calcSize()}function _calcSize(){suggestedViewHeight="number"==typeof options.contentHeight?options.contentHeight:"number"==typeof options.height?options.height-(headerElement?headerElement.outerHeight(!0):0):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function windowResize(ev){!ignoreWindowResize&&ev.target===window&&currentView.start&&updateSize(!0)&&currentView.trigger("windowResize",_element)}function refetchEvents(){destroyEvents(),fetchAndRenderEvents()}function renderEvents(){elementVisible()&&(freezeContentHeight(),currentView.destroyEvents(),currentView.renderEvents(events),unfreezeContentHeight())}function destroyEvents(){freezeContentHeight(),currentView.destroyEvents(),unfreezeContentHeight()}function getAndRenderEvents(){!options.lazyFetching||isFetchNeeded(currentView.start,currentView.end)?fetchAndRenderEvents():renderEvents()}function fetchAndRenderEvents(){fetchEvents(currentView.start,currentView.end)}function reportEvents(_events){events=_events,renderEvents()}function reportEventChange(){renderEvents()}function updateTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){var now=t.getNow();now.isWithin(currentView.intervalStart,currentView.intervalEnd)?header.disableButton("today"):header.enableButton("today")}function select(start,end){start=t.moment(start),end=end?t.moment(end):start.clone().add(start.hasTime()?t.defaultTimedEventDuration:t.defaultAllDayEventDuration),currentView.select(start,end)}function unselect(){currentView&&currentView.unselect()}function prev(){renderView(-1)}function next(){renderView(1)}function prevYear(){date.add(-1,"years"),renderView()}function nextYear(){date.add(1,"years"),renderView()}function today(){date=t.getNow(),renderView()}function gotoDate(dateInput){date=t.moment(dateInput),renderView()}function incrementDate(delta){date.add(moment.duration(delta)),renderView()}function zoomTo(newDate,viewName){var viewStr,match;viewName&&void 0!==fcViews[viewName]||(viewName=viewName||"day",viewStr=header.getViewsWithButtons().join(" "),match=viewStr.match(new RegExp("\\w+"+capitaliseFirstLetter(viewName))),match||(match=viewStr.match(/\w+Day/)),viewName=match?match[0]:"agendaDay"),date=newDate,changeView(viewName)}function getDate(){return date.clone()}function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getCalendar(){return t}function getView(){return currentView}function option(name,value){return void 0===value?options[name]:void(("height"==name||"contentHeight"==name||"aspectRatio"==name)&&(options[name]=value,updateSize(!0)))}function trigger(name,thisObj){return options[name]?options[name].apply(thisObj||_element,Array.prototype.slice.call(arguments,2)):void 0}var t=this;instanceOptions=instanceOptions||{};var langOptions,options=mergeOptions({},defaults,instanceOptions);langOptions=options.lang in langOptionHash?langOptionHash[options.lang]:langOptionHash[defaults.lang],langOptions&&(options=mergeOptions({},defaults,langOptions,instanceOptions)),options.isRTL&&(options=mergeOptions({},defaults,rtlDefaults,langOptions||{},instanceOptions)),t.options=options,t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=renderEvents,t.changeView=changeView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.zoomTo=zoomTo,t.getDate=getDate,t.getCalendar=getCalendar,t.getView=getView,t.option=option,t.trigger=trigger;var localeData=createObject(getLocaleData(options.lang));if(options.monthNames&&(localeData._months=options.monthNames),options.monthNamesShort&&(localeData._monthsShort=options.monthNamesShort),options.dayNames&&(localeData._weekdays=options.dayNames),options.dayNamesShort&&(localeData._weekdaysShort=options.dayNamesShort),null!=options.firstDay){var _week=createObject(localeData._week);_week.dow=options.firstDay,localeData._week=_week}t.defaultAllDayEventDuration=moment.duration(options.defaultAllDayEventDuration),t.defaultTimedEventDuration=moment.duration(options.defaultTimedEventDuration),t.moment=function(){var mom;return"local"===options.timezone?(mom=fc.moment.apply(null,arguments),mom.hasTime()&&mom.local()):mom="UTC"===options.timezone?fc.moment.utc.apply(null,arguments):fc.moment.parseZone.apply(null,arguments),"_locale"in mom?mom._locale=localeData:mom._lang=localeData,mom},t.getIsAmbigTimezone=function(){return"local"!==options.timezone&&"UTC"!==options.timezone},t.rezoneDate=function(date){return t.moment(date.toArray())},t.getNow=function(){var now=options.now;return"function"==typeof now&&(now=now()),t.moment(now)},t.calculateWeekNumber=function(mom){var calc=options.weekNumberCalculation;return"function"==typeof calc?calc(mom):"local"===calc?mom.week():"ISO"===calc.toUpperCase()?mom.isoWeek():void 0},t.getEventEnd=function(event){return event.end?event.end.clone():t.getDefaultEventEnd(event.allDay,event.start)},t.getDefaultEventEnd=function(allDay,start){var end=start.clone();return allDay?end.stripTime().add(t.defaultAllDayEventDuration):end.add(t.defaultTimedEventDuration),t.getIsAmbigTimezone()&&end.stripZone(),end},t.formatRange=function(m1,m2,formatStr){return"function"==typeof formatStr&&(formatStr=formatStr.call(t,options,localeData)),formatRange(m1,m2,formatStr,null,options.isRTL)},t.formatDate=function(mom,formatStr){return"function"==typeof formatStr&&(formatStr=formatStr.call(t,options,localeData)),formatDate(mom,formatStr)},EventManager.call(t,options);var header,headerElement,content,tm,currentView,suggestedViewHeight,windowResizeProxy,date,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],ignoreWindowResize=0,events=[];date=null!=options.defaultDate?t.moment(options.defaultDate):t.getNow(),t.getSuggestedViewHeight=function(){return void 0===suggestedViewHeight&&calcSize(),suggestedViewHeight},t.isHeightAuto=function(){return"auto"===options.contentHeight||"auto"===options.height}}function Header(calendar,options){function render(){var sections=options.header;return tm=options.theme?"ui":"fc",sections?el=$("<div class='fc-toolbar'/>").append(renderSection("left")).append(renderSection("right")).append(renderSection("center")).append('<div class="fc-clear"/>'):void 0}function destroy(){el.remove()}function renderSection(position){var sectionEl=$('<div class="fc-'+position+'"/>'),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(){var groupEl,groupChildren=$(),isOnlyButtons=!0;$.each(this.split(","),function(j,buttonName){var buttonClick,themeIcon,normalIcon,defaultText,customText,innerHtml,classes,button;"title"==buttonName?(groupChildren=groupChildren.add($("<h2>&nbsp;</h2>")),isOnlyButtons=!1):(calendar[buttonName]?buttonClick=function(){calendar[buttonName]()}:fcViews[buttonName]&&(buttonClick=function(){calendar.changeView(buttonName)},viewsWithButtons.push(buttonName)),buttonClick&&(themeIcon=smartProperty(options.themeButtonIcons,buttonName),normalIcon=smartProperty(options.buttonIcons,buttonName),defaultText=smartProperty(options.defaultButtonText,buttonName),customText=smartProperty(options.buttonText,buttonName),innerHtml=customText?htmlEscape(customText):themeIcon&&options.theme?"<span class='ui-icon ui-icon-"+themeIcon+"'></span>":normalIcon&&!options.theme?"<span class='fc-icon fc-icon-"+normalIcon+"'></span>":htmlEscape(defaultText||buttonName),classes=["fc-"+buttonName+"-button",tm+"-button",tm+"-state-default"],button=$('<button type="button" class="'+classes.join(" ")+'">'+innerHtml+"</button>").click(function(){button.hasClass(tm+"-state-disabled")||(buttonClick(),(button.hasClass(tm+"-state-active")||button.hasClass(tm+"-state-disabled"))&&button.removeClass(tm+"-state-hover"))}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}),groupChildren=groupChildren.add(button)))}),isOnlyButtons&&groupChildren.first().addClass(tm+"-corner-left").end().last().addClass(tm+"-corner-right").end(),groupChildren.length>1?(groupEl=$("<div/>"),isOnlyButtons&&groupEl.addClass("fc-button-group"),groupEl.append(groupChildren),sectionEl.append(groupEl)):sectionEl.append(groupChildren)}),sectionEl}function updateTitle(text){el.find("h2").text(text)}function activateButton(buttonName){el.find(".fc-"+buttonName+"-button").addClass(tm+"-state-active")}function deactivateButton(buttonName){el.find(".fc-"+buttonName+"-button").removeClass(tm+"-state-active")}function disableButton(buttonName){el.find(".fc-"+buttonName+"-button").attr("disabled","disabled").addClass(tm+"-state-disabled")}function enableButton(buttonName){el.find(".fc-"+buttonName+"-button").removeAttr("disabled").removeClass(tm+"-state-disabled")}function getViewsWithButtons(){return viewsWithButtons}var t=this;t.render=render,t.destroy=destroy,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton,t.getViewsWithButtons=getViewsWithButtons;var tm,el=$(),viewsWithButtons=[]}function EventManager(options){function isFetchNeeded(start,end){return!rangeStart||start.clone().stripZone()<rangeStart.clone().stripZone()||end.clone().stripZone()>rangeEnd.clone().stripZone()}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;len>i;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(eventInputs){var i,eventInput,abstractEvent,isArraySource=$.isArray(source.events);if(fetchID==currentFetchID){if(eventInputs)for(i=0;i<eventInputs.length;i++)eventInput=eventInputs[i],abstractEvent=isArraySource?eventInput:buildEventFromInput(eventInput,source),abstractEvent&&cache.push.apply(cache,expandEvent(abstractEvent));pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=fc.sourceFetchers;for(i=0;i<fetchers.length;i++){if(res=fetchers[i].call(t,source,rangeStart.clone(),rangeEnd.clone(),options.timezone,callback),res===!0)return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(pushLoading(),events.call(t,rangeStart.clone(),rangeEnd.clone(),options.timezone,function(events){callback(events),popLoading()})):$.isArray(events)?callback(events):callback();else{var url=source.url;if(url){var customData,success=source.success,error=source.error,complete=source.complete;customData=$.isFunction(source.data)?source.data():source.data;var data=$.extend({},customData||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam),timezoneParam=firstDefined(source.timezoneParam,options.timezoneParam);startParam&&(data[startParam]=rangeStart.format()),endParam&&(data[endParam]=rangeEnd.format()),options.timezone&&"local"!=options.timezone&&(data[timezoneParam]=options.timezone),pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),popLoading()}}))}else callback()}}function addEventSource(sourceInput){var source=buildEventSource(sourceInput);source&&(sources.push(source),pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function buildEventSource(sourceInput){var source,i,normalizers=fc.sourceNormalizers;if($.isFunction(sourceInput)||$.isArray(sourceInput)?source={events:sourceInput}:"string"==typeof sourceInput?source={url:sourceInput}:"object"==typeof sourceInput&&(source=$.extend({},sourceInput)),source){for(source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[],$.isArray(source.events)&&(source.origArray=source.events,source.events=$.map(source.events,function(eventInput){return buildEventFromInput(eventInput,source)})),i=0;i<normalizers.length;i++)normalizers[i].call(t,source);return source}}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.origArray||source.googleCalendarId||source.url||source.events:null)||source}function updateEvent(event){event.start=t.moment(event.start),event.end&&(event.end=t.moment(event.end)),mutateEvent(event),propagateMiscProperties(event),reportEvents(cache)}function propagateMiscProperties(event){var i,cachedEvent,j,prop;for(i=0;i<cache.length;i++)if(cachedEvent=cache[i],cachedEvent._id==event._id&&cachedEvent!==event)for(j=0;j<miscCopyableProps.length;j++)prop=miscCopyableProps[j],void 0!==event[prop]&&(cachedEvent[prop]=event[prop])}function renderEvent(eventInput,stick){var events,i,event,abstractEvent=buildEventFromInput(eventInput);if(abstractEvent){for(events=expandEvent(abstractEvent),i=0;i<events.length;i++)event=events[i],event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event));return reportEvents(cache),events}return[]}function removeEvents(filter){var eventID,i;for(null==filter?filter=function(){return!0}:$.isFunction(filter)||(eventID=filter+"",filter=function(event){return event._id==eventID}),cache=$.grep(cache,filter,!0),i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0));reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):null!=filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function pushLoading(){loadingLevel++||trigger("loading",null,!0,getView())}function popLoading(){--loadingLevel||trigger("loading",null,!1,getView())}function buildEventFromInput(input,source){var start,end,allDay,allDayDefault,out={};if(options.eventDataTransform&&(input=options.eventDataTransform(input)),source&&source.eventDataTransform&&(input=source.eventDataTransform(input)),$.extend(out,input),source&&(out.source=source),out._id=input._id||(void 0===input.id?"_fc"+eventGUID++:input.id+""),out.className=input.className?"string"==typeof input.className?input.className.split(/\s+/):input.className:[],start=input.start||input.date,end=input.end,isTimeString(start)&&(start=moment.duration(start)),isTimeString(end)&&(end=moment.duration(end)),input.dow||moment.isDuration(start)||moment.isDuration(end))out.start=start?moment.duration(start):null,out.end=end?moment.duration(end):null,out._recurring=!0;else{if(start&&(start=t.moment(start),!start.isValid()))return!1;end&&(end=t.moment(end),end.isValid()||(end=null)),allDay=input.allDay,void 0===allDay&&(allDayDefault=firstDefined(source?source.allDayDefault:void 0,options.allDayDefault),allDay=void 0!==allDayDefault?allDayDefault:!(start.hasTime()||end&&end.hasTime())),assignDatesToEvent(start,end,allDay,out)}return out}function assignDatesToEvent(start,end,allDay,event){allDay?(start.hasTime()&&start.stripTime(),end&&end.hasTime()&&end.stripTime()):(start.hasTime()||(start=t.rezoneDate(start)),end&&!end.hasTime()&&(end=t.rezoneDate(end))),end&&start>=end&&(end=null),event.allDay=allDay,event.start=start,event.end=end||null,options.forceEventDuration&&!event.end&&(event.end=getEventEnd(event)),backupEventDates(event)}function expandEvent(abstractEvent,_rangeStart,_rangeEnd){var dowHash,dow,i,date,startTime,endTime,start,end,event,events=[];if(_rangeStart=_rangeStart||rangeStart,_rangeEnd=_rangeEnd||rangeEnd,abstractEvent)if(abstractEvent._recurring){if(dow=abstractEvent.dow)for(dowHash={},i=0;i<dow.length;i++)dowHash[dow[i]]=!0;for(date=_rangeStart.clone().stripTime();date.isBefore(_rangeEnd);)(!dowHash||dowHash[date.day()])&&(startTime=abstractEvent.start,endTime=abstractEvent.end,start=date.clone(),end=null,startTime&&(start=start.time(startTime)),endTime&&(end=date.clone().time(endTime)),event=$.extend({},abstractEvent),assignDatesToEvent(start,end,!startTime&&!endTime,event),events.push(event)),date.add(1,"days")}else events.push(abstractEvent);return events}function mutateEvent(event,newStart,newEnd){var newAllDay,dateDelta,durationDelta,undoFunc,oldAllDay=event._allDay,oldStart=event._start,oldEnd=event._end,clearEnd=!1;return newStart||newEnd||(newStart=event.start,newEnd=event.end),newAllDay=event.allDay!=oldAllDay?event.allDay:!(newStart||newEnd).hasTime(),newAllDay&&(newStart&&(newStart=newStart.clone().stripTime()),newEnd&&(newEnd=newEnd.clone().stripTime())),newStart&&(dateDelta=newAllDay?dayishDiff(newStart,oldStart.clone().stripTime()):dayishDiff(newStart,oldStart)),newAllDay!=oldAllDay?clearEnd=!0:newEnd&&(durationDelta=dayishDiff(newEnd||t.getDefaultEventEnd(newAllDay,newStart||oldStart),newStart||oldStart).subtract(dayishDiff(oldEnd||t.getDefaultEventEnd(oldAllDay,oldStart),oldStart))),undoFunc=mutateEvents(clientEvents(event._id),clearEnd,newAllDay,dateDelta,durationDelta),{dateDelta:dateDelta,durationDelta:durationDelta,undo:undoFunc}}function mutateEvents(events,clearEnd,forceAllDay,dateDelta,durationDelta){var isAmbigTimezone=t.getIsAmbigTimezone(),undoFunctions=[];return $.each(events,function(i,event){var oldAllDay=event._allDay,oldStart=event._start,oldEnd=event._end,newAllDay=null!=forceAllDay?forceAllDay:oldAllDay,newStart=oldStart.clone(),newEnd=!clearEnd&&oldEnd?oldEnd.clone():null;newAllDay?(newStart.stripTime(),newEnd&&newEnd.stripTime()):(newStart.hasTime()||(newStart=t.rezoneDate(newStart)),newEnd&&!newEnd.hasTime()&&(newEnd=t.rezoneDate(newEnd))),newEnd||!options.forceEventDuration&&!+durationDelta||(newEnd=t.getDefaultEventEnd(newAllDay,newStart)),newStart.add(dateDelta),newEnd&&newEnd.add(dateDelta).add(durationDelta),isAmbigTimezone&&(+dateDelta||+durationDelta)&&(newStart.stripZone(),newEnd&&newEnd.stripZone()),event.allDay=newAllDay,event.start=newStart,event.end=newEnd,backupEventDates(event),undoFunctions.push(function(){event.allDay=oldAllDay,event.start=oldStart,event.end=oldEnd,backupEventDates(event)})}),function(){for(var i=0;i<undoFunctions.length;i++)undoFunctions[i]()}}function getBusinessHoursEvents(){var eventInput,optionVal=options.businessHours,defaultVal={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},view=t.getView();return optionVal&&(eventInput="object"==typeof optionVal?$.extend({},defaultVal,optionVal):defaultVal),eventInput?expandEvent(buildEventFromInput(eventInput),view.start,view.end):[]}function isEventAllowedInRange(event,start,end){var source=event.source||{},constraint=firstDefined(event.constraint,source.constraint,options.eventConstraint),overlap=firstDefined(event.overlap,source.overlap,options.eventOverlap);return isRangeAllowed(start,end,constraint,overlap,event)}function isSelectionAllowedInRange(start,end){return isRangeAllowed(start,end,options.selectConstraint,options.selectOverlap)}function isExternalDragAllowedInRange(start,end,eventInput){var event;return eventInput&&(event=expandEvent(buildEventFromInput(eventInput))[0])?isEventAllowedInRange(event,start,end):isSelectionAllowedInRange(start,end)}function isRangeAllowed(start,end,constraint,overlap,event){var constraintEvents,anyContainment,i,otherEvent,otherOverlap;if(start=start.clone().stripZone(),end=end.clone().stripZone(),null!=constraint){for(constraintEvents=constraintToEvents(constraint),anyContainment=!1,i=0;i<constraintEvents.length;i++)if(eventContainsRange(constraintEvents[i],start,end)){anyContainment=!0;break}if(!anyContainment)return!1}for(i=0;i<cache.length;i++)if(otherEvent=cache[i],(!event||event._id!==otherEvent._id)&&eventIntersectsRange(otherEvent,start,end)){if(overlap===!1)return!1;if("function"==typeof overlap&&!overlap(otherEvent,event))return!1;if(event){if(otherOverlap=firstDefined(otherEvent.overlap,(otherEvent.source||{}).overlap),otherOverlap===!1)return!1;if("function"==typeof otherOverlap&&!otherOverlap(event,otherEvent))return!1}}return!0}function constraintToEvents(constraintInput){return"businessHours"===constraintInput?getBusinessHoursEvents():"object"==typeof constraintInput?expandEvent(buildEventFromInput(constraintInput)):clientEvents(constraintInput)}function eventContainsRange(event,start,end){var eventStart=event.start.clone().stripZone(),eventEnd=t.getEventEnd(event).stripZone();return start>=eventStart&&eventEnd>=end}function eventIntersectsRange(event,start,end){var eventStart=event.start.clone().stripZone(),eventEnd=t.getEventEnd(event).stripZone();return eventEnd>start&&end>eventStart}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.mutateEvent=mutateEvent;var rangeStart,rangeEnd,trigger=t.trigger,getView=t.getView,reportEvents=t.reportEvents,getEventEnd=t.getEventEnd,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,loadingLevel=0,cache=[];$.each((options.events?[options.events]:[]).concat(options.eventSources||[]),function(i,sourceInput){var source=buildEventSource(sourceInput);source&&sources.push(source)});var miscCopyableProps=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];t.getBusinessHoursEvents=getBusinessHoursEvents,t.isEventAllowedInRange=isEventAllowedInRange,t.isSelectionAllowedInRange=isSelectionAllowedInRange,t.isExternalDragAllowedInRange=isExternalDragAllowedInRange}function backupEventDates(event){event._allDay=event.allDay,event._start=event.start.clone(),event._end=event.end?event.end.clone():null}function compensateScroll(rowEls,scrollbarWidths){scrollbarWidths.left&&rowEls.css({"border-left-width":1,"margin-left":scrollbarWidths.left-1}),scrollbarWidths.right&&rowEls.css({"border-right-width":1,"margin-right":scrollbarWidths.right-1})}function uncompensateScroll(rowEls){rowEls.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function disableCursor(){$("body").addClass("fc-not-allowed")}function enableCursor(){$("body").removeClass("fc-not-allowed")}function distributeHeight(els,availableHeight,shouldRedistribute){var minOffset1=Math.floor(availableHeight/els.length),minOffset2=Math.floor(availableHeight-minOffset1*(els.length-1)),flexEls=[],flexOffsets=[],flexHeights=[],usedHeight=0;undistributeHeight(els),els.each(function(i,el){var minOffset=i===els.length-1?minOffset2:minOffset1,naturalOffset=$(el).outerHeight(!0);minOffset>naturalOffset?(flexEls.push(el),flexOffsets.push(naturalOffset),flexHeights.push($(el).height())):usedHeight+=naturalOffset}),shouldRedistribute&&(availableHeight-=usedHeight,minOffset1=Math.floor(availableHeight/flexEls.length),minOffset2=Math.floor(availableHeight-minOffset1*(flexEls.length-1))),$(flexEls).each(function(i,el){var minOffset=i===flexEls.length-1?minOffset2:minOffset1,naturalOffset=flexOffsets[i],naturalHeight=flexHeights[i],newHeight=minOffset-(naturalOffset-naturalHeight);minOffset>naturalOffset&&$(el).height(newHeight)})}function undistributeHeight(els){els.height("")}function matchCellWidths(els){var maxInnerWidth=0;return els.find("> *").each(function(i,innerEl){var innerWidth=$(innerEl).outerWidth();innerWidth>maxInnerWidth&&(maxInnerWidth=innerWidth)}),maxInnerWidth++,els.width(maxInnerWidth),maxInnerWidth}function setPotentialScroller(containerEl,height){return containerEl.height(height).addClass("fc-scroller"),containerEl[0].scrollHeight-1>containerEl[0].clientHeight?!0:(unsetScroller(containerEl),!1)}function unsetScroller(containerEl){containerEl.height("").removeClass("fc-scroller")}function getScrollParent(el){var position=el.css("position"),scrollParent=el.parents().filter(function(){var parent=$(this);return/(auto|scroll)/.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(el[0].ownerDocument||document)}function getScrollbarWidths(container){var containerLeft=container.offset().left,containerRight=containerLeft+container.width(),inner=container.children(),innerLeft=inner.offset().left,innerRight=innerLeft+inner.outerWidth();return{left:innerLeft-containerLeft,right:containerRight-innerRight}}function isPrimaryMouseButton(ev){return 1==ev.which&&!ev.ctrlKey}function intersectionToSeg(subjectStart,subjectEnd,intervalStart,intervalEnd){var segStart,segEnd,isStart,isEnd;return subjectEnd>intervalStart&&intervalEnd>subjectStart?(subjectStart>=intervalStart?(segStart=subjectStart.clone(),isStart=!0):(segStart=intervalStart.clone(),isStart=!1),intervalEnd>=subjectEnd?(segEnd=subjectEnd.clone(),isEnd=!0):(segEnd=intervalEnd.clone(),isEnd=!1),{start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}):void 0}function smartProperty(obj,name){if(obj=obj||{},void 0!==obj[name])return obj[name];for(var res,parts=name.split(/(?=[A-Z])/),i=parts.length-1;i>=0;i--)if(res=obj[parts[i].toLowerCase()],void 0!==res)return res;return obj["default"]}function dayishDiff(a,b){return moment.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function isNativeDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function isTimeString(str){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(str)}function createObject(proto){var f=function(){};return f.prototype=proto,new f}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]}function htmlEscape(s){return(s+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function stripHtmlEntities(text){return text.replace(/&.*?;/g,"")}function capitaliseFirstLetter(str){return str.charAt(0).toUpperCase()+str.slice(1)}function compareNumbers(a,b){return a-b}function debounce(func,wait){var timeoutId,args,context,timestamp,later=function(){var last=+new Date-timestamp;wait>last&&last>0?timeoutId=setTimeout(later,wait-last):(timeoutId=null,func.apply(context,args),timeoutId||(context=args=null))};return function(){context=this,args=arguments,timestamp=+new Date,timeoutId||(timeoutId=setTimeout(later,wait))}}function makeMoment(args,parseAsUTC,parseZone){var isAmbigTime,isAmbigZone,ambigMatch,mom,input=args[0],isSingleString=1==args.length&&"string"==typeof input;return moment.isMoment(input)?(mom=moment.apply(null,args),transferAmbigs(input,mom)):isNativeDate(input)||void 0===input?mom=moment.apply(null,args):(isAmbigTime=!1,isAmbigZone=!1,isSingleString?ambigDateOfMonthRegex.test(input)?(input+="-01",args=[input],isAmbigTime=!0,isAmbigZone=!0):(ambigMatch=ambigTimeOrZoneRegex.exec(input))&&(isAmbigTime=!ambigMatch[5],isAmbigZone=!0):$.isArray(input)&&(isAmbigZone=!0),mom=parseAsUTC?moment.utc.apply(moment,args):moment.apply(null,args),isAmbigTime?(mom._ambigTime=!0,mom._ambigZone=!0):parseZone&&(isAmbigZone?mom._ambigZone=!0:isSingleString&&mom.zone(input))),mom._fullCalendar=!0,mom}function commonlyAmbiguate(inputs,preserveTime){var i,outputs=[],anyAmbigTime=!1,anyAmbigZone=!1;for(i=0;i<inputs.length;i++)outputs.push(fc.moment.parseZone(inputs[i])),anyAmbigTime=anyAmbigTime||outputs[i]._ambigTime,anyAmbigZone=anyAmbigZone||outputs[i]._ambigZone;for(i=0;i<outputs.length;i++)anyAmbigTime&&!preserveTime?outputs[i].stripTime():anyAmbigZone&&outputs[i].stripZone();return outputs}function transferAmbigs(src,dest){src._ambigTime?dest._ambigTime=!0:dest._ambigTime&&(dest._ambigTime=!1),src._ambigZone?dest._ambigZone=!0:dest._ambigZone&&(dest._ambigZone=!1)}function setMomentValues(mom,a){mom.year(a[0]||0).month(a[1]||0).date(a[2]||0).hours(a[3]||0).minutes(a[4]||0).seconds(a[5]||0).milliseconds(a[6]||0)}function oldMomentFormat(mom,formatStr){return oldMomentProto.format.call(mom,formatStr)}function formatDate(date,formatStr){return formatDateWithChunks(date,getFormatStringChunks(formatStr))
}function formatDateWithChunks(date,chunks){var i,s="";for(i=0;i<chunks.length;i++)s+=formatDateWithChunk(date,chunks[i]);return s}function formatDateWithChunk(date,chunk){var token,maybeStr;return"string"==typeof chunk?chunk:(token=chunk.token)?tokenOverrides[token]?tokenOverrides[token](date):oldMomentFormat(date,token):chunk.maybe&&(maybeStr=formatDateWithChunks(date,chunk.maybe),maybeStr.match(/[1-9]/))?maybeStr:""}function formatRange(date1,date2,formatStr,separator,isRTL){var localeData;return date1=fc.moment.parseZone(date1),date2=fc.moment.parseZone(date2),localeData=(date1.localeData||date1.lang).call(date1),formatStr=localeData.longDateFormat(formatStr)||formatStr,separator=separator||" - ",formatRangeWithChunks(date1,date2,getFormatStringChunks(formatStr),separator,isRTL)}function formatRangeWithChunks(date1,date2,chunks,separator,isRTL){var chunkStr,leftI,rightI,middleI,leftStr="",rightStr="",middleStr1="",middleStr2="",middleStr="";for(leftI=0;leftI<chunks.length&&(chunkStr=formatSimilarChunk(date1,date2,chunks[leftI]),chunkStr!==!1);leftI++)leftStr+=chunkStr;for(rightI=chunks.length-1;rightI>leftI&&(chunkStr=formatSimilarChunk(date1,date2,chunks[rightI]),chunkStr!==!1);rightI--)rightStr=chunkStr+rightStr;for(middleI=leftI;rightI>=middleI;middleI++)middleStr1+=formatDateWithChunk(date1,chunks[middleI]),middleStr2+=formatDateWithChunk(date2,chunks[middleI]);return(middleStr1||middleStr2)&&(middleStr=isRTL?middleStr2+separator+middleStr1:middleStr1+separator+middleStr2),leftStr+middleStr+rightStr}function formatSimilarChunk(date1,date2,chunk){var token,unit;return"string"==typeof chunk?chunk:(token=chunk.token)&&(unit=similarUnitMap[token.charAt(0)],unit&&date1.isSame(date2,unit))?oldMomentFormat(date1,token):!1}function getFormatStringChunks(formatStr){return formatStr in formatStringChunkCache?formatStringChunkCache[formatStr]:formatStringChunkCache[formatStr]=chunkFormatString(formatStr)}function chunkFormatString(formatStr){for(var match,chunks=[],chunker=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;match=chunker.exec(formatStr);)match[1]?chunks.push(match[1]):match[2]?chunks.push({maybe:chunkFormatString(match[2])}):match[3]?chunks.push({token:match[3]}):match[5]&&chunks.push(match[5]);return chunks}function Popover(options){this.options=options||{}}function GridCoordMap(grid){this.grid=grid}function ComboCoordMap(coordMaps){this.coordMaps=coordMaps}function DragListener(coordMap,options){this.coordMap=coordMap,this.options=options||{}}function isCellsEqual(cell1,cell2){return cell1||cell2?cell1&&cell2?cell1.grid===cell2.grid&&cell1.row===cell2.row&&cell1.col===cell2.col:!1:!0}function MouseFollower(sourceEl,options){this.options=options=options||{},this.sourceEl=sourceEl,this.parentEl=options.parentEl?$(options.parentEl):sourceEl.parent()}function RowRenderer(view){this.view=view}function Grid(view){RowRenderer.call(this,view),this.coordMap=new GridCoordMap(this),this.elsByFill={}}function isBgEvent(event){var rendering=getEventRendering(event);return"background"===rendering||"inverse-background"===rendering}function isInverseBgEvent(event){return"inverse-background"===getEventRendering(event)}function getEventRendering(event){return firstDefined((event.source||{}).rendering,event.rendering)}function groupEventsById(events){var i,event,eventsById={};for(i=0;i<events.length;i++)event=events[i],(eventsById[event._id]||(eventsById[event._id]=[])).push(event);return eventsById}function compareNormalRanges(range1,range2){return range1.eventStartMS-range2.eventStartMS}function compareSegs(seg1,seg2){return seg1.eventStartMS-seg2.eventStartMS||seg2.eventDurationMS-seg1.eventDurationMS||seg2.event.allDay-seg1.event.allDay||(seg1.event.title||"").localeCompare(seg2.event.title)}function DayGrid(view){Grid.call(this,view)}function isDaySegCollision(seg,otherSegs){var i,otherSeg;for(i=0;i<otherSegs.length;i++)if(otherSeg=otherSegs[i],otherSeg.leftCol<=seg.rightCol&&otherSeg.rightCol>=seg.leftCol)return!0;return!1}function compareDaySegCols(a,b){return a.leftCol-b.leftCol}function TimeGrid(view){Grid.call(this,view)}function placeSlotSegs(segs){var levels,level0,i;if(segs.sort(compareSegs),levels=buildSlotSegLevels(segs),computeForwardSlotSegs(levels),level0=levels[0]){for(i=0;i<level0.length;i++)computeSlotSegPressures(level0[i]);for(i=0;i<level0.length;i++)computeSlotSegCoords(level0[i],0,0)}}function buildSlotSegLevels(segs){var i,seg,j,levels=[];for(i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&computeSlotSegCollisions(seg,levels[j]).length;j++);seg.level=j,(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level,j,seg,k;for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)for(seg=level[j],seg.forwardSegs=[],k=i+1;k<levels.length;k++)computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}function computeSlotSegPressures(seg){var i,forwardSeg,forwardSegs=seg.forwardSegs,forwardPressure=0;if(void 0===seg.forwardPressure){for(i=0;i<forwardSegs.length;i++)forwardSeg=forwardSegs[i],computeSlotSegPressures(forwardSeg),forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);seg.forwardPressure=forwardPressure}}function computeSlotSegCoords(seg,seriesBackwardPressure,seriesBackwardCoord){var i,forwardSegs=seg.forwardSegs;if(void 0===seg.forwardCoord)for(forwardSegs.length?(forwardSegs.sort(compareForwardSlotSegs),computeSlotSegCoords(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord),seg.forwardCoord=forwardSegs[0].backwardCoord):seg.forwardCoord=1,seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1),i=0;i<forwardSegs.length;i++)computeSlotSegCoords(forwardSegs[i],0,seg.forwardCoord)}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++)isSlotSegCollision(seg,otherSegs[i])&&results.push(otherSegs[i]);return results}function isSlotSegCollision(seg1,seg2){return seg1.bottom>seg2.top&&seg1.top<seg2.bottom}function compareForwardSlotSegs(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||compareSegs(seg1,seg2)}function View(calendar){function opt(name){var v=options[name];return $.isPlainObject(v)&&!isForcedAtomicOption(name)?smartProperty(v,t.name):v}function trigger(name,thisObj){return calendar.trigger.apply(calendar,[name,thisObj||t].concat(Array.prototype.slice.call(arguments,2),[t]))}function isEventDraggable(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,opt("eventStartEditable"),event.editable,source.editable,opt("editable"))}function isEventResizable(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,opt("eventDurationEditable"),event.editable,source.editable,opt("editable"))}function eventDrop(el,event,newStart,ev){var mutateResult=calendar.mutateEvent(event,newStart,null);trigger("eventDrop",el,event,mutateResult.dateDelta,function(){mutateResult.undo(),reportEventChange()},ev,{}),reportEventChange()}function eventResize(el,event,newEnd,ev){var mutateResult=calendar.mutateEvent(event,null,newEnd);trigger("eventResize",el,event,mutateResult.durationDelta,function(){mutateResult.undo(),reportEventChange()},ev,{}),reportEventChange()}function isHiddenDay(day){return moment.isMoment(day)&&(day=day.day()),isHiddenDayHash[day]}function getCellsPerWeek(){return cellsPerWeek}function skipHiddenDays(date,inc,isExclusive){var out=date.clone();for(inc=inc||1;isHiddenDayHash[(out.day()+(isExclusive?inc:0)+7)%7];)out.add(inc,"days");return out}function cellToDate(){var cellOffset=cellToCellOffset.apply(null,arguments),dayOffset=cellOffsetToDayOffset(cellOffset),date=dayOffsetToDate(dayOffset);return date}function cellToCellOffset(row,col){var colCnt=t.colCnt,dis=isRTL?-1:1,dit=isRTL?colCnt-1:0;"object"==typeof row&&(col=row.col,row=row.row);var cellOffset=row*colCnt+(col*dis+dit);return cellOffset}function cellOffsetToDayOffset(cellOffset){var day0=t.start.day();return cellOffset+=dayToCellMap[day0],7*Math.floor(cellOffset/cellsPerWeek)+cellToDayMap[(cellOffset%cellsPerWeek+cellsPerWeek)%cellsPerWeek]-day0}function dayOffsetToDate(dayOffset){return t.start.clone().add(dayOffset,"days")}function dateToCell(date){var dayOffset=dateToDayOffset(date),cellOffset=dayOffsetToCellOffset(dayOffset),cell=cellOffsetToCell(cellOffset);return cell}function dateToDayOffset(date){return date.clone().stripTime().diff(t.start,"days")}function dayOffsetToCellOffset(dayOffset){var day0=t.start.day();return dayOffset+=day0,Math.floor(dayOffset/7)*cellsPerWeek+dayToCellMap[(dayOffset%7+7)%7]-dayToCellMap[day0]}function cellOffsetToCell(cellOffset){var colCnt=t.colCnt,dis=isRTL?-1:1,dit=isRTL?colCnt-1:0,row=Math.floor(cellOffset/colCnt),col=(cellOffset%colCnt+colCnt)%colCnt*dis+dit;return{row:row,col:col}}function rangeToSegments(start,end){for(var rowCnt=t.rowCnt,colCnt=t.colCnt,segments=[],dayRange=computeDayRange(start,end),rangeDayOffsetStart=dateToDayOffset(dayRange.start),rangeDayOffsetEnd=dateToDayOffset(dayRange.end),rangeCellOffsetFirst=dayOffsetToCellOffset(rangeDayOffsetStart),rangeCellOffsetLast=dayOffsetToCellOffset(rangeDayOffsetEnd)-1,row=0;rowCnt>row;row++){var rowCellOffsetFirst=row*colCnt,rowCellOffsetLast=rowCellOffsetFirst+colCnt-1,segmentCellOffsetFirst=Math.max(rangeCellOffsetFirst,rowCellOffsetFirst),segmentCellOffsetLast=Math.min(rangeCellOffsetLast,rowCellOffsetLast);if(segmentCellOffsetLast>=segmentCellOffsetFirst){var segmentCellFirst=cellOffsetToCell(segmentCellOffsetFirst),segmentCellLast=cellOffsetToCell(segmentCellOffsetLast),cols=[segmentCellFirst.col,segmentCellLast.col].sort(compareNumbers),isStart=cellOffsetToDayOffset(segmentCellOffsetFirst)==rangeDayOffsetStart,isEnd=cellOffsetToDayOffset(segmentCellOffsetLast)+1==rangeDayOffsetEnd;segments.push({row:row,leftCol:cols[0],rightCol:cols[1],isStart:isStart,isEnd:isEnd})}}return segments}function computeDayRange(start,end){var endDay,endTimeMS,startDay=start.clone().stripTime();return end&&(endDay=end.clone().stripTime(),endTimeMS=+end.time(),endTimeMS&&endTimeMS>=nextDayThreshold&&endDay.add(1,"days")),(!end||startDay>=endDay)&&(endDay=startDay.clone().add(1,"days")),{start:startDay,end:endDay}}function isMultiDayEvent(event){var range=computeDayRange(event.start,event.end);return range.end.diff(range.start,"days")>1}var t=this;t.calendar=calendar,t.opt=opt,t.trigger=trigger,t.isEventDraggable=isEventDraggable,t.isEventResizable=isEventResizable,t.eventDrop=eventDrop,t.eventResize=eventResize;var reportEventChange=calendar.reportEventChange,options=calendar.options,nextDayThreshold=moment.duration(options.nextDayThreshold);t.init(),t.getEventTimeText=function(event,formatStr){var start,end;return"object"==typeof event&&"object"==typeof formatStr?(start=event,end=formatStr,formatStr=arguments[2]):(start=event.start,end=event.end),formatStr=formatStr||opt("timeFormat"),end&&opt("displayEventEnd")?calendar.formatRange(start,end,formatStr):calendar.formatDate(start,formatStr)},t.isHiddenDay=isHiddenDay,t.skipHiddenDays=skipHiddenDays,t.getCellsPerWeek=getCellsPerWeek,t.dateToCell=dateToCell,t.dateToDayOffset=dateToDayOffset,t.dayOffsetToCellOffset=dayOffsetToCellOffset,t.cellOffsetToCell=cellOffsetToCell,t.cellToDate=cellToDate,t.cellToCellOffset=cellToCellOffset,t.cellOffsetToDayOffset=cellOffsetToDayOffset,t.dayOffsetToDate=dayOffsetToDate,t.rangeToSegments=rangeToSegments,t.isMultiDayEvent=isMultiDayEvent;var cellsPerWeek,hiddenDays=opt("hiddenDays")||[],isHiddenDayHash=[],dayToCellMap=[],cellToDayMap=[],isRTL=opt("isRTL");!function(){opt("weekends")===!1&&hiddenDays.push(0,6);for(var dayIndex=0,cellIndex=0;7>dayIndex;dayIndex++)dayToCellMap[dayIndex]=cellIndex,isHiddenDayHash[dayIndex]=-1!=$.inArray(dayIndex,hiddenDays),isHiddenDayHash[dayIndex]||(cellToDayMap[cellIndex]=dayIndex,cellIndex++);if(cellsPerWeek=cellIndex,!cellsPerWeek)throw"invalid hiddenDays"}()}function getDraggedElMeta(el){var eventProps,startTime,duration,stick,prefix=fc.dataAttrPrefix;return prefix&&(prefix+="-"),eventProps=el.data(prefix+"event")||null,eventProps&&(eventProps="object"==typeof eventProps?$.extend({},eventProps):{},startTime=eventProps.start,null==startTime&&(startTime=eventProps.time),duration=eventProps.duration,stick=eventProps.stick,delete eventProps.start,delete eventProps.time,delete eventProps.duration,delete eventProps.stick),null==startTime&&(startTime=el.data(prefix+"start")),null==startTime&&(startTime=el.data(prefix+"time")),null==duration&&(duration=el.data(prefix+"duration")),null==stick&&(stick=el.data(prefix+"stick")),startTime=null!=startTime?moment.duration(startTime):null,duration=null!=duration?moment.duration(duration):null,stick=Boolean(stick),{eventProps:eventProps,startTime:startTime,duration:duration,stick:stick}}function BasicView(calendar){View.call(this,calendar),this.dayGrid=new DayGrid(this),this.coordMap=this.dayGrid.coordMap}function MonthView(calendar){BasicView.call(this,calendar)}function BasicWeekView(calendar){BasicView.call(this,calendar)}function BasicDayView(calendar){BasicView.call(this,calendar)}function generateAgendaAxisFormat(options,langData){return langData.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function generateAgendaTimeFormat(options,langData){return langData.longDateFormat("LT").replace(/\s*a$/i,"")}function AgendaView(calendar){View.call(this,calendar),this.timeGrid=new TimeGrid(this),this.opt("allDaySlot")?(this.dayGrid=new DayGrid(this),this.coordMap=new ComboCoordMap([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function AgendaWeekView(calendar){AgendaView.call(this,calendar)}function AgendaDayView(calendar){AgendaView.call(this,calendar)}function ListView(calendar){View.call(this,calendar),this.dayGrid=new ListGrid(this)}function AgendaListView(calendar){ListView.call(this,calendar)}function ListGrid(view){RowRenderer.call(this,view)}var defaults={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:generateWeekColumnFormat,day:"dddd"},timeFormat:{"default":generateShortTimeFormat},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},langOptionHash={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},fc=$.fullCalendar={version:"2.2.3"},fcViews=fc.views={};$.fn.fullCalendar=function(options){var args=Array.prototype.slice.call(arguments,1),res=this;return this.each(function(i,_element){var singleRes,element=$(_element),calendar=element.data("fullCalendar");"string"==typeof options?calendar&&$.isFunction(calendar[options])&&(singleRes=calendar[options].apply(calendar,args),i||(res=singleRes),"destroy"===options&&element.removeData("fullCalendar")):calendar||(calendar=new Calendar(element,options),element.data("fullCalendar",calendar),calendar.render())}),res},fc.langs=langOptionHash,fc.datepickerLang=function(langCode,datepickerLangCode,options){var langOptions=langOptionHash[langCode];langOptions||(langOptions=langOptionHash[langCode]={}),mergeOptions(langOptions,{isRTL:options.isRTL,weekNumberTitle:options.weekHeader,titleFormat:{month:options.showMonthAfterYear?"YYYY["+options.yearSuffix+"] MMMM":"MMMM YYYY["+options.yearSuffix+"]"},defaultButtonText:{prev:stripHtmlEntities(options.prevText),next:stripHtmlEntities(options.nextText),today:stripHtmlEntities(options.currentText)}}),$.datepicker&&($.datepicker.regional[datepickerLangCode]=$.datepicker.regional[langCode]=options,$.datepicker.regional.en=$.datepicker.regional[""],$.datepicker.setDefaults(options))},fc.lang=function(langCode,options){var langOptions;options&&(langOptions=langOptionHash[langCode],langOptions||(langOptions=langOptionHash[langCode]={}),mergeOptions(langOptions,options||{})),defaults.lang=langCode},fc.sourceNormalizers=[],fc.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1,dayIDs=["sun","mon","tue","wed","thu","fri","sat"];fc.applyAll=applyAll;var allowValueOptimization,setUTCValues,setLocalValues,ambigDateOfMonthRegex=/^\s*\d{4}-\d\d$/,ambigTimeOrZoneRegex=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,newMomentProto=moment.fn,oldMomentProto=$.extend({},newMomentProto);fc.moment=function(){return makeMoment(arguments)},fc.moment.utc=function(){var mom=makeMoment(arguments,!0);return mom.hasTime()&&mom.utc(),mom},fc.moment.parseZone=function(){return makeMoment(arguments,!0,!0)},newMomentProto.clone=function(){var mom=oldMomentProto.clone.apply(this,arguments);return transferAmbigs(this,mom),this._fullCalendar&&(mom._fullCalendar=!0),mom},newMomentProto.time=function(time){if(!this._fullCalendar)return oldMomentProto.time.apply(this,arguments);if(null==time)return moment.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,moment.isDuration(time)||moment.isMoment(time)||(time=moment.duration(time));var dayHours=0;return moment.isDuration(time)&&(dayHours=24*Math.floor(time.asDays())),this.hours(dayHours+time.hours()).minutes(time.minutes()).seconds(time.seconds()).milliseconds(time.milliseconds())},newMomentProto.stripTime=function(){var a=this.toArray();return this.utc(),setUTCValues(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0,this},newMomentProto.hasTime=function(){return!this._ambigTime},newMomentProto.stripZone=function(){var a=this.toArray(),wasAmbigTime=this._ambigTime;return this.utc(),setUTCValues(this,a),wasAmbigTime&&(this._ambigTime=!0),this._ambigZone=!0,this},newMomentProto.hasZone=function(){return!this._ambigZone},newMomentProto.zone=function(tzo){return null!=tzo&&(this._ambigTime=!1,this._ambigZone=!1),oldMomentProto.zone.apply(this,arguments)},newMomentProto.local=function(){var a=this.toArray(),wasAmbigZone=this._ambigZone;return oldMomentProto.local.apply(this,arguments),wasAmbigZone&&setLocalValues(this,a),this},newMomentProto.format=function(){return this._fullCalendar&&arguments[0]?formatDate(this,arguments[0]):this._ambigTime?oldMomentFormat(this,"YYYY-MM-DD"):this._ambigZone?oldMomentFormat(this,"YYYY-MM-DD[T]HH:mm:ss"):oldMomentProto.format.apply(this,arguments)},newMomentProto.toISOString=function(){return this._ambigTime?oldMomentFormat(this,"YYYY-MM-DD"):this._ambigZone?oldMomentFormat(this,"YYYY-MM-DD[T]HH:mm:ss"):oldMomentProto.toISOString.apply(this,arguments)},newMomentProto.isWithin=function(start,end){var a=commonlyAmbiguate([this,start,end]);return a[0]>=a[1]&&a[0]<a[2]},newMomentProto.isSame=function(input,units){var a;return this._fullCalendar?units?(a=commonlyAmbiguate([this,input],!0),oldMomentProto.isSame.call(a[0],a[1],units)):(input=fc.moment.parseZone(input),oldMomentProto.isSame.call(this,input)&&Boolean(this._ambigTime)===Boolean(input._ambigTime)&&Boolean(this._ambigZone)===Boolean(input._ambigZone)):oldMomentProto.isSame.apply(this,arguments)},$.each(["isBefore","isAfter"],function(i,methodName){newMomentProto[methodName]=function(input,units){var a;return this._fullCalendar?(a=commonlyAmbiguate([this,input]),oldMomentProto[methodName].call(a[0],a[1],units)):oldMomentProto[methodName].apply(this,arguments)}}),allowValueOptimization="_d"in moment()&&"updateOffset"in moment,setUTCValues=allowValueOptimization?function(mom,a){mom._d.setTime(Date.UTC.apply(Date,a)),moment.updateOffset(mom,!1)}:setMomentValues,setLocalValues=allowValueOptimization?function(mom,a){mom._d.setTime(+new Date(a[0]||0,a[1]||0,a[2]||0,a[3]||0,a[4]||0,a[5]||0,a[6]||0)),moment.updateOffset(mom,!1)}:setMomentValues;var tokenOverrides={t:function(date){return oldMomentFormat(date,"a").charAt(0)},T:function(date){return oldMomentFormat(date,"A").charAt(0)}};fc.formatRange=formatRange;var similarUnitMap={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},formatStringChunkCache={};Popover.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var _this=this,options=this.options;this.el=$('<div class="fc-popover"/>').addClass(options.className||"").css({top:0,left:0}).append(options.content).appendTo(options.parentEl),this.el.on("click",".fc-close",function(){_this.hide()}),options.autoHide&&$(document).on("mousedown",this.documentMousedownProxy=$.proxy(this,"documentMousedown"))},documentMousedown:function(ev){this.el&&!$(ev.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),$(document).off("mousedown",this.documentMousedownProxy)},position:function(){var viewportTop,viewportLeft,viewportOffset,top,left,options=this.options,origin=this.el.offsetParent().offset(),width=this.el.outerWidth(),height=this.el.outerHeight(),windowEl=$(window),viewportEl=getScrollParent(this.el);top=options.top||0,left=void 0!==options.left?options.left:void 0!==options.right?options.right-width:0,viewportEl.is(window)||viewportEl.is(document)?(viewportEl=windowEl,viewportTop=0,viewportLeft=0):(viewportOffset=viewportEl.offset(),viewportTop=viewportOffset.top,viewportLeft=viewportOffset.left),viewportTop+=windowEl.scrollTop(),viewportLeft+=windowEl.scrollLeft(),options.viewportConstrain!==!1&&(top=Math.min(top,viewportTop+viewportEl.outerHeight()-height-this.margin),top=Math.max(top,viewportTop+this.margin),left=Math.min(left,viewportLeft+viewportEl.outerWidth()-width-this.margin),left=Math.max(left,viewportLeft+this.margin)),this.el.css({top:top-origin.top,left:left-origin.left})},trigger:function(name){this.options[name]&&this.options[name].apply(this,Array.prototype.slice.call(arguments,1))}},GridCoordMap.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(x,y){var i,cell=null,rows=this.rows,cols=this.cols,r=-1,c=-1;if(this.inBounds(x,y)){for(i=0;i<rows.length;i++)if(y>=rows[i][0]&&y<rows[i][1]){r=i;break}for(i=0;i<cols.length;i++)if(x>=cols[i][0]&&x<cols[i][1]){c=i;break}r>=0&&c>=0&&(cell={row:r,col:c},cell.grid=this.grid,cell.date=this.grid.getCellDate(cell))}return cell},computeBounds:function(){var containerOffset;this.containerEl&&(containerOffset=this.containerEl.offset(),this.minX=containerOffset.left,this.maxX=containerOffset.left+this.containerEl.outerWidth(),this.minY=containerOffset.top,this.maxY=containerOffset.top+this.containerEl.outerHeight())},inBounds:function(x,y){return this.containerEl?x>=this.minX&&x<this.maxX&&y>=this.minY&&y<this.maxY:!0}},ComboCoordMap.prototype={coordMaps:null,build:function(){var i,coordMaps=this.coordMaps;for(i=0;i<coordMaps.length;i++)coordMaps[i].build()},getCell:function(x,y){var i,coordMaps=this.coordMaps,cell=null;for(i=0;i<coordMaps.length&&!cell;i++)cell=coordMaps[i].getCell(x,y);return cell}},DragListener.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(ev){isPrimaryMouseButton(ev)&&(ev.preventDefault(),this.startListening(ev),this.options.distance||this.startDrag(ev))},startListening:function(ev){var scrollParent,cell;this.isListening||(ev&&this.options.scroll&&(scrollParent=getScrollParent($(ev.target)),scrollParent.is(window)||scrollParent.is(document)||(this.scrollEl=scrollParent,this.scrollHandlerProxy=debounce($.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),ev&&(cell=this.getCell(ev),this.origCell=cell,this.origDate=cell?cell.date:null,this.mouseX0=ev.pageX,this.mouseY0=ev.pageY),$(document).on("mousemove",this.mousemoveProxy=$.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=$.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",ev))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(ev){var minDistance,distanceSq;this.isDragging||(minDistance=this.options.distance||1,distanceSq=Math.pow(ev.pageX-this.mouseX0,2)+Math.pow(ev.pageY-this.mouseY0,2),distanceSq>=minDistance*minDistance&&this.startDrag(ev)),this.isDragging&&this.drag(ev)},startDrag:function(ev){var cell;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",ev),cell=this.getCell(ev),cell&&this.cellOver(cell,!0))},drag:function(ev){var cell;this.isDragging&&(cell=this.getCell(ev),isCellsEqual(cell,this.cell)||(this.cell&&this.cellOut(),cell&&this.cellOver(cell)),this.dragScroll(ev))},cellOver:function(cell){this.cell=cell,this.date=cell.date,this.trigger("cellOver",cell,cell.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(ev){this.stopDrag(ev),this.stopListening(ev)},stopDrag:function(ev){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",ev),this.isDragging=!1)},stopListening:function(ev){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),$(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",ev),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(ev){return this.coordMap.getCell(ev.pageX,ev.pageY)},trigger:function(name){this.options[name]&&this.options[name].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(ev){ev.preventDefault()},computeScrollBounds:function(){var offset,el=this.scrollEl;el&&(offset=el.offset(),this.scrollBounds={top:offset.top,left:offset.left,bottom:offset.top+el.outerHeight(),right:offset.left+el.outerWidth()})},dragScroll:function(ev){var topCloseness,bottomCloseness,leftCloseness,rightCloseness,sensitivity=this.scrollSensitivity,bounds=this.scrollBounds,topVel=0,leftVel=0;bounds&&(topCloseness=(sensitivity-(ev.pageY-bounds.top))/sensitivity,bottomCloseness=(sensitivity-(bounds.bottom-ev.pageY))/sensitivity,leftCloseness=(sensitivity-(ev.pageX-bounds.left))/sensitivity,rightCloseness=(sensitivity-(bounds.right-ev.pageX))/sensitivity,topCloseness>=0&&1>=topCloseness?topVel=topCloseness*this.scrollSpeed*-1:bottomCloseness>=0&&1>=bottomCloseness&&(topVel=bottomCloseness*this.scrollSpeed),leftCloseness>=0&&1>=leftCloseness?leftVel=leftCloseness*this.scrollSpeed*-1:rightCloseness>=0&&1>=rightCloseness&&(leftVel=rightCloseness*this.scrollSpeed)),this.setScrollVel(topVel,leftVel)},setScrollVel:function(topVel,leftVel){this.scrollTopVel=topVel,this.scrollLeftVel=leftVel,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval($.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var el=this.scrollEl;this.scrollTopVel<0?el.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&el.scrollTop()+el[0].clientHeight>=el[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?el.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&el.scrollLeft()+el[0].clientWidth>=el[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var el=this.scrollEl,frac=this.scrollIntervalMs/1e3;this.scrollTopVel&&el.scrollTop(el.scrollTop()+this.scrollTopVel*frac),this.scrollLeftVel&&el.scrollLeft(el.scrollLeft()+this.scrollLeftVel*frac),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}},MouseFollower.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(ev){this.isFollowing||(this.isFollowing=!0,this.mouseY0=ev.pageY,this.mouseX0=ev.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),$(document).on("mousemove",this.mousemoveProxy=$.proxy(this,"mousemove")))},stop:function(shouldRevert,callback){function complete(){this.isAnimating=!1,_this.destroyEl(),this.top0=this.left0=null,callback&&callback()}var _this=this,revertDuration=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,$(document).off("mousemove",this.mousemoveProxy),shouldRevert&&revertDuration&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:revertDuration,complete:complete})):complete())},getEl:function(){var el=this.el;return el||(this.sourceEl.width(),el=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),el},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var sourceOffset,origin;this.getEl(),null===this.top0&&(this.sourceEl.width(),sourceOffset=this.sourceEl.offset(),origin=this.el.offsetParent().offset(),this.top0=sourceOffset.top-origin.top,this.left0=sourceOffset.left-origin.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(ev){this.topDelta=ev.pageY-this.mouseY0,this.leftDelta=ev.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},RowRenderer.prototype={view:null,cellHtml:"<td/>",rowHtml:function(rowType,row){var col,date,view=this.view,renderCell=this.getHtmlRenderer("cell",rowType),cellHtml="";for(row=row||0,col=0;col<view.colCnt;col++)date=view.cellToDate(row,col),cellHtml+=renderCell(row,col,date);return cellHtml=this.bookendCells(cellHtml,rowType,row),"<tr>"+cellHtml+"</tr>"},bookendCells:function(cells,rowType,row){var view=this.view,intro=this.getHtmlRenderer("intro",rowType)(row||0),outro=this.getHtmlRenderer("outro",rowType)(row||0),isRTL=view.opt("isRTL"),prependHtml=isRTL?outro:intro,appendHtml=isRTL?intro:outro;
return"string"==typeof cells?prependHtml+cells+appendHtml:cells.prepend(prependHtml).append(appendHtml)},getHtmlRenderer:function(rendererName,rowType){var generalName,specificName,provider,renderer,view=this.view;return generalName=rendererName+"Html",rowType&&(specificName=rowType+capitaliseFirstLetter(rendererName)+"Html"),specificName&&(renderer=view[specificName])?provider=view:specificName&&(renderer=this[specificName])?provider=this:(renderer=view[generalName])?provider=view:(renderer=this[generalName])&&(provider=this),"function"==typeof renderer?function(){return renderer.apply(provider,arguments)||""}:function(){return renderer||""}}},Grid.prototype=createObject(RowRenderer.prototype),$.extend(Grid.prototype,{el:null,coordMap:null,cellDuration:null,elsByFill:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(){},getCellDate:function(){},getCellDayEl:function(){},rangeToSegs:function(){},bindHandlers:function(){var _this=this;this.el.on("mousedown",function(ev){$(ev.target).is(".fc-event-container *, .fc-more")||$(ev.target).closest(".fc-popover").length||_this.dayMousedown(ev)}),this.bindSegHandlers()},dayMousedown:function(ev){var start,end,dayEl,_this=this,view=this.view,calendar=view.calendar,isSelectable=view.opt("selectable"),dates=null,dragListener=new DragListener(this.coordMap,{scroll:view.opt("dragScroll"),dragStart:function(){view.unselect()},cellOver:function(cell,date){dragListener.origDate&&(dayEl=_this.getCellDayEl(cell),dates=[date,dragListener.origDate].sort(compareNumbers),start=dates[0],end=dates[1].clone().add(_this.cellDuration),isSelectable&&(calendar.isSelectionAllowedInRange(start,end)?_this.renderSelection(start,end):(dates=null,disableCursor())))},cellOut:function(){dates=null,_this.destroySelection(),enableCursor()},listenStop:function(ev){dates&&(dates[0].isSame(dates[1])&&view.trigger("dayClick",dayEl[0],start,ev),isSelectable&&view.reportSelection(start,end,ev)),enableCursor()}});dragListener.mousedown(ev)},renderDrag:function(){},destroyDrag:function(){},renderResize:function(){},destroyResize:function(){},renderRangeHelper:function(start,end,sourceSeg){var fakeEvent,view=this.view;!end&&view.opt("forceEventDuration")&&(end=view.calendar.getDefaultEventEnd(!start.hasTime(),start)),fakeEvent=sourceSeg?createObject(sourceSeg.event):{},fakeEvent.start=start,fakeEvent.end=end,fakeEvent.allDay=!(start.hasTime()||end&&end.hasTime()),fakeEvent.className=(fakeEvent.className||[]).concat("fc-helper"),sourceSeg||(fakeEvent.editable=!1),this.renderHelper(fakeEvent,sourceSeg)},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(start,end){this.renderHighlight(start,end)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(start,end){this.renderFill("highlight",this.rangeToSegs(start,end))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},destroyFill:function(type){var el=this.elsByFill[type];el&&(el.remove(),delete this.elsByFill[type])},renderFillSegEls:function(type,segs){var i,_this=this,segElMethod=this[type+"SegEl"],html="",renderedSegs=[];if(segs.length){for(i=0;i<segs.length;i++)html+=this.fillSegHtml(type,segs[i]);$(html).each(function(i,node){var seg=segs[i],el=$(node);segElMethod&&(el=segElMethod.call(_this,seg,el)),el&&(el=$(el),el.is(_this.fillSegTag)&&(seg.el=el,renderedSegs.push(seg)))})}return renderedSegs},fillSegTag:"div",fillSegHtml:function(type,seg){var classesMethod=this[type+"SegClasses"],stylesMethod=this[type+"SegStyles"],classes=classesMethod?classesMethod.call(this,seg):[],styles=stylesMethod?stylesMethod.call(this,seg):"";return"<"+this.fillSegTag+(classes.length?' class="'+classes.join(" ")+'"':"")+(styles?' style="'+styles+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(row,col,date){var view=this.view,calendar=view.calendar,colFormat=view.opt("columnFormat");return'<th class="fc-day-header '+view.widgetHeaderClass+" fc-"+dayIDs[date.day()]+'">'+htmlEscape(calendar.formatDate(date,colFormat))+"</th>"},bgCellHtml:function(row,col,date){var view=this.view,classes=this.getDayClasses(date);return classes.unshift("fc-day",view.widgetContentClass),'<td class="'+classes.join(" ")+'" data-date="'+date.format()+'"></td>'},getDayClasses:function(date){var view=this.view,today=view.calendar.getNow().stripTime(),classes=["fc-"+dayIDs[date.day()]];return"month"===view.name&&date.month()!=view.intervalStart.month()&&classes.push("fc-other-month"),date.isSame(today,"day")?classes.push("fc-today",view.highlightStateClass):classes.push(today>date?"fc-past":"fc-future"),classes}}),$.extend(Grid.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(events){var i,seg,segs=this.eventsToSegs(events),bgSegs=[],fgSegs=[];for(i=0;i<segs.length;i++)seg=segs[i],isBgEvent(seg.event)?bgSegs.push(seg):fgSegs.push(seg);bgSegs=this.renderBgSegs(bgSegs)||bgSegs,fgSegs=this.renderFgSegs(fgSegs)||fgSegs,this.segs=bgSegs.concat(fgSegs)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getSegs:function(){return this.segs||[]},renderFgSegs:function(){},destroyFgSegs:function(){},renderFgSegEls:function(segs,disableResizing){var i,view=this.view,html="",renderedSegs=[];if(segs.length){for(i=0;i<segs.length;i++)html+=this.fgSegHtml(segs[i],disableResizing);$(html).each(function(i,node){var seg=segs[i],el=view.resolveEventEl(seg.event,$(node));el&&(el.data("fc-seg",seg),seg.el=el,renderedSegs.push(seg))})}return renderedSegs},fgSegHtml:function(){},renderBgSegs:function(segs){return this.renderFill("bgEvent",segs)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(seg,el){return this.view.resolveEventEl(seg.event,el)},bgEventSegClasses:function(seg){var event=seg.event,source=event.source||{};return["fc-bgevent"].concat(event.className,source.className||[])},bgEventSegStyles:function(seg){var view=this.view,event=seg.event,source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=view.opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||view.opt("eventBackgroundColor")||optionColor;return backgroundColor?"background-color:"+backgroundColor:""},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var _this=this,view=this.view;$.each({mouseenter:function(seg,ev){_this.triggerSegMouseover(seg,ev)},mouseleave:function(seg,ev){_this.triggerSegMouseout(seg,ev)},click:function(seg,ev){return view.trigger("eventClick",this,seg.event,ev)},mousedown:function(seg,ev){$(ev.target).is(".fc-resizer")&&view.isEventResizable(seg.event)?_this.segResizeMousedown(seg,ev):view.isEventDraggable(seg.event)&&_this.segDragMousedown(seg,ev)}},function(name,func){_this.el.on(name,".fc-event-container > *",function(ev){var seg=$(this).data("fc-seg");return!seg||_this.isDraggingSeg||_this.isResizingSeg?void 0:func.call(this,seg,ev)})})},triggerSegMouseover:function(seg,ev){this.mousedOverSeg||(this.mousedOverSeg=seg,this.view.trigger("eventMouseover",seg.el[0],seg.event,ev))},triggerSegMouseout:function(seg,ev){ev=ev||{},this.mousedOverSeg&&(seg=seg||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",seg.el[0],seg.event,ev))},segDragMousedown:function(seg,ev){var newStart,newEnd,_this=this,view=this.view,calendar=view.calendar,el=seg.el,event=seg.event,mouseFollower=new MouseFollower(seg.el,{parentEl:view.el,opacity:view.opt("dragOpacity"),revertDuration:view.opt("dragRevertDuration"),zIndex:2}),dragListener=new DragListener(view.coordMap,{distance:5,scroll:view.opt("dragScroll"),listenStart:function(ev){mouseFollower.hide(),mouseFollower.start(ev)},dragStart:function(ev){_this.triggerSegMouseout(seg,ev),_this.isDraggingSeg=!0,view.hideEvent(event),view.trigger("eventDragStart",el[0],event,ev,{})},cellOver:function(cell,date){var origDate=seg.cellDate||dragListener.origDate,res=_this.computeDraggedEventDates(seg,origDate,date);newStart=res.start,newEnd=res.end,calendar.isEventAllowedInRange(event,newStart,res.visibleEnd)?view.renderDrag(newStart,newEnd,seg)?mouseFollower.hide():mouseFollower.show():(newStart=null,mouseFollower.show(),disableCursor())},cellOut:function(){newStart=null,view.destroyDrag(),mouseFollower.show(),enableCursor()},dragStop:function(ev){var hasChanged=newStart&&!newStart.isSame(event.start);mouseFollower.stop(!hasChanged,function(){_this.isDraggingSeg=!1,view.destroyDrag(),view.showEvent(event),view.trigger("eventDragStop",el[0],event,ev,{}),hasChanged&&view.eventDrop(el[0],event,newStart,ev)}),enableCursor()},listenStop:function(){mouseFollower.stop()}});dragListener.mousedown(ev)},computeDraggedEventDates:function(seg,dragStartDate,dropDate){var delta,newStart,newEnd,newAllDay,visibleEnd,view=this.view,event=seg.event,start=event.start,end=view.calendar.getEventEnd(event);return dropDate.hasTime()===dragStartDate.hasTime()?(delta=dayishDiff(dropDate,dragStartDate),newStart=start.clone().add(delta),newEnd=null===event.end?null:end.clone().add(delta),newAllDay=event.allDay):(newStart=dropDate,newEnd=null,newAllDay=!dropDate.hasTime()),visibleEnd=newEnd||view.calendar.getDefaultEventEnd(newAllDay,newStart),{start:newStart,end:newEnd,visibleEnd:visibleEnd}},segResizeMousedown:function(seg,ev){function destroy(){_this.destroyResize(),view.showEvent(event)}var dragListener,_this=this,view=this.view,calendar=view.calendar,el=seg.el,event=seg.event,start=event.start,end=view.calendar.getEventEnd(event),newEnd=null;dragListener=new DragListener(this.coordMap,{distance:5,scroll:view.opt("dragScroll"),dragStart:function(ev){_this.triggerSegMouseout(seg,ev),_this.isResizingSeg=!0,view.trigger("eventResizeStart",el[0],event,ev,{})},cellOver:function(cell,date){date.isBefore(start)&&(date=start),newEnd=date.clone().add(_this.cellDuration),calendar.isEventAllowedInRange(event,start,newEnd)?newEnd.isSame(end)?(newEnd=null,destroy()):(_this.renderResize(start,newEnd,seg),view.hideEvent(event)):(newEnd=null,destroy(),disableCursor())},cellOut:function(){newEnd=null,destroy(),enableCursor()},dragStop:function(ev){_this.isResizingSeg=!1,destroy(),enableCursor(),view.trigger("eventResizeStop",el[0],event,ev,{}),newEnd&&view.eventResize(el[0],event,newEnd,ev)}}),dragListener.mousedown(ev)},getSegClasses:function(seg,isDraggable,isResizable){var event=seg.event,classes=["fc-event",seg.isStart?"fc-start":"fc-not-start",seg.isEnd?"fc-end":"fc-not-end"].concat(event.className,event.source?event.source.className:[]);return isDraggable&&classes.push("fc-draggable"),isResizable&&classes.push("fc-resizable"),classes},getEventSkinCss:function(event){var view=this.view,source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=view.opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||view.opt("eventBackgroundColor")||optionColor,borderColor=event.borderColor||eventColor||source.borderColor||sourceColor||view.opt("eventBorderColor")||optionColor,textColor=event.textColor||source.textColor||view.opt("eventTextColor"),statements=[];return backgroundColor&&statements.push("background-color:"+backgroundColor),borderColor&&statements.push("border-color:"+borderColor),textColor&&statements.push("color:"+textColor),statements.join(";")},eventsToSegs:function(events,rangeToSegsFunc){var i,eventRanges=this.eventsToRanges(events),segs=[];for(i=0;i<eventRanges.length;i++)segs.push.apply(segs,this.eventRangeToSegs(eventRanges[i],rangeToSegsFunc));return segs},eventsToRanges:function(events){var _this=this,eventsById=groupEventsById(events),ranges=[];return $.each(eventsById,function(id,eventGroup){eventGroup.length&&ranges.push.apply(ranges,isInverseBgEvent(eventGroup[0])?_this.eventsToInverseRanges(eventGroup):_this.eventsToNormalRanges(eventGroup))}),ranges},eventsToNormalRanges:function(events){var i,event,eventStart,eventEnd,calendar=this.view.calendar,ranges=[];for(i=0;i<events.length;i++)event=events[i],eventStart=event.start.clone().stripZone(),eventEnd=calendar.getEventEnd(event).stripZone(),ranges.push({event:event,start:eventStart,end:eventEnd,eventStartMS:+eventStart,eventDurationMS:eventEnd-eventStart});return ranges},eventsToInverseRanges:function(events){var i,normalRange,view=this.view,viewStart=view.start.clone().stripZone(),viewEnd=view.end.clone().stripZone(),normalRanges=this.eventsToNormalRanges(events),inverseRanges=[],event0=events[0],start=viewStart;for(normalRanges.sort(compareNormalRanges),i=0;i<normalRanges.length;i++)normalRange=normalRanges[i],normalRange.start>start&&inverseRanges.push({event:event0,start:start,end:normalRange.start}),start=normalRange.end;return viewEnd>start&&inverseRanges.push({event:event0,start:start,end:viewEnd}),inverseRanges},eventRangeToSegs:function(eventRange,rangeToSegsFunc){var segs,i,seg;for(segs=rangeToSegsFunc?rangeToSegsFunc(eventRange.start,eventRange.end):this.rangeToSegs(eventRange.start,eventRange.end),i=0;i<segs.length;i++)seg=segs[i],seg.event=eventRange.event,seg.eventStartMS=eventRange.eventStartMS,seg.eventDurationMS=eventRange.eventDurationMS;return segs}}),DayGrid.prototype=createObject(Grid.prototype),$.extend(DayGrid.prototype,{numbersVisible:!1,cellDuration:moment.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,render:function(isRigid){var row,view=this.view,html="";for(row=0;row<view.rowCnt;row++)html+=this.dayRowHtml(row,isRigid);this.el.html(html),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(i,node){var date=view.cellToDate(Math.floor(i/view.colCnt),i%view.colCnt);view.trigger("dayRender",null,date,$(node))}),Grid.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(row,isRigid){var view=this.view,classes=["fc-row","fc-week",view.widgetContentClass];return isRigid&&classes.push("fc-rigid"),'<div class="'+classes.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",row)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",row)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(row,col,date){return this.bgCellHtml(row,col,date)},buildCoords:function(rows,cols){var e,n,p,colCnt=this.view.colCnt;this.dayEls.slice(0,colCnt).each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),this.rowEls.each(function(i,_e){e=$(_e),n=e.offset().top,i&&(p[1]=n),p=[n],rows[i]=p}),p[1]=n+e.outerHeight()+this.bottomCoordPadding},getCellDate:function(cell){return this.view.cellToDate(cell)},getCellDayEl:function(cell){return this.dayEls.eq(cell.row*this.view.colCnt+cell.col)},rangeToSegs:function(start,end){return this.view.rangeToSegments(start,end)},renderDrag:function(start,end,seg){var opacity;return this.renderHighlight(start,end||this.view.calendar.getDefaultEventEnd(!0,start)),seg&&!seg.el.closest(this.el).length?(this.renderRangeHelper(start,end,seg),opacity=this.view.opt("dragOpacity"),void 0!==opacity&&this.helperEls.css("opacity",opacity),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(start,end,seg){this.renderHighlight(start,end),this.renderRangeHelper(start,end,seg)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(event,sourceSeg){var rowStructs,helperNodes=[],segs=this.eventsToSegs([event]);segs=this.renderFgSegEls(segs),rowStructs=this.renderSegRows(segs),this.rowEls.each(function(row,rowNode){var skeletonTop,rowEl=$(rowNode),skeletonEl=$('<div class="fc-helper-skeleton"><table/></div>');skeletonTop=sourceSeg&&sourceSeg.row===row?sourceSeg.el.position().top:rowEl.find(".fc-content-skeleton tbody").position().top,skeletonEl.css("top",skeletonTop).find("table").append(rowStructs[row].tbodyEl),rowEl.append(skeletonEl),helperNodes.push(skeletonEl[0])}),this.helperEls=$(helperNodes)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(type,segs){var i,seg,skeletonEl,nodes=[];for(segs=this.renderFillSegEls(type,segs),i=0;i<segs.length;i++)seg=segs[i],skeletonEl=this.renderFillRow(type,seg),this.rowEls.eq(seg.row).append(skeletonEl),nodes.push(skeletonEl[0]);return this.elsByFill[type]=$(nodes),segs},renderFillRow:function(type,seg){var skeletonEl,trEl,colCnt=this.view.colCnt,startCol=seg.leftCol,endCol=seg.rightCol+1;return skeletonEl=$('<div class="fc-'+type.toLowerCase()+'-skeleton"><table><tr/></table></div>'),trEl=skeletonEl.find("tr"),startCol>0&&trEl.append('<td colspan="'+startCol+'"/>'),trEl.append(seg.el.attr("colspan",endCol-startCol)),colCnt>endCol&&trEl.append('<td colspan="'+(colCnt-endCol)+'"/>'),this.bookendCells(trEl,type),skeletonEl}}),$.extend(DayGrid.prototype,{rowStructs:null,destroyEvents:function(){this.destroySegPopover(),Grid.prototype.destroyEvents.apply(this,arguments)},getSegs:function(){return Grid.prototype.getSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(segs){var allDaySegs=$.grep(segs,function(seg){return seg.event.allDay});return Grid.prototype.renderBgSegs.call(this,allDaySegs)},renderFgSegs:function(segs){var rowStructs;return segs=this.renderFgSegEls(segs),rowStructs=this.rowStructs=this.renderSegRows(segs),this.rowEls.each(function(i,rowNode){$(rowNode).find(".fc-content-skeleton > table").append(rowStructs[i].tbodyEl)}),segs},destroyFgSegs:function(){for(var rowStruct,rowStructs=this.rowStructs||[];rowStruct=rowStructs.pop();)rowStruct.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(segs){var segRows,row,rowStructs=[];for(segRows=this.groupSegRows(segs),row=0;row<segRows.length;row++)rowStructs.push(this.renderSegRow(row,segRows[row]));return rowStructs},fgSegHtml:function(seg,disableResizing){var titleHtml,view=this.view,isRTL=view.opt("isRTL"),event=seg.event,isDraggable=view.isEventDraggable(event),isResizable=!disableResizing&&event.allDay&&seg.isEnd&&view.isEventResizable(event),classes=this.getSegClasses(seg,isDraggable,isResizable),skinCss=this.getEventSkinCss(event),timeHtml="";return classes.unshift("fc-day-grid-event"),!event.allDay&&seg.isStart&&(timeHtml='<span class="fc-time">'+htmlEscape(view.getEventTimeText(event))+"</span>"),titleHtml='<span class="fc-title">'+(htmlEscape(event.title||"")||"&nbsp;")+"</span>",'<a class="'+classes.join(" ")+'"'+(event.url?' href="'+htmlEscape(event.url)+'"':"")+(skinCss?' style="'+skinCss+'"':"")+'><div class="fc-content">'+(isRTL?titleHtml+" "+timeHtml:timeHtml+" "+titleHtml)+"</div>"+(isResizable?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(row,rowSegs){function emptyCellsUntil(endCol){for(;endCol>col;)td=(loneCellMatrix[i-1]||[])[col],td?td.attr("rowspan",parseInt(td.attr("rowspan")||1,10)+1):(td=$("<td/>"),tr.append(td)),cellMatrix[i][col]=td,loneCellMatrix[i][col]=td,col++}var i,levelSegs,col,tr,j,seg,td,view=this.view,colCnt=view.colCnt,segLevels=this.buildSegLevels(rowSegs),levelCnt=Math.max(1,segLevels.length),tbody=$("<tbody/>"),segMatrix=[],cellMatrix=[],loneCellMatrix=[];for(i=0;levelCnt>i;i++){if(levelSegs=segLevels[i],col=0,tr=$("<tr/>"),segMatrix.push([]),cellMatrix.push([]),loneCellMatrix.push([]),levelSegs)for(j=0;j<levelSegs.length;j++){for(seg=levelSegs[j],emptyCellsUntil(seg.leftCol),td=$('<td class="fc-event-container"/>').append(seg.el),seg.leftCol!=seg.rightCol?td.attr("colspan",seg.rightCol-seg.leftCol+1):loneCellMatrix[i][col]=td;col<=seg.rightCol;)cellMatrix[i][col]=td,segMatrix[i][col]=seg,col++;tr.append(td)}emptyCellsUntil(colCnt),this.bookendCells(tr,"eventSkeleton"),tbody.append(tr)}return{row:row,tbodyEl:tbody,cellMatrix:cellMatrix,segMatrix:segMatrix,segLevels:segLevels,segs:rowSegs}},buildSegLevels:function(segs){var i,seg,j,levels=[];for(segs.sort(compareSegs),i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&isDaySegCollision(seg,levels[j]);j++);seg.level=j,(levels[j]||(levels[j]=[])).push(seg)}for(j=0;j<levels.length;j++)levels[j].sort(compareDaySegCols);return levels},groupSegRows:function(segs){var i,view=this.view,segRows=[];for(i=0;i<view.rowCnt;i++)segRows.push([]);for(i=0;i<segs.length;i++)segRows[segs[i].row].push(segs[i]);return segRows}}),$.extend(DayGrid.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(levelLimit){var row,rowLevelLimit,rowStructs=this.rowStructs||[];for(row=0;row<rowStructs.length;row++)this.unlimitRow(row),rowLevelLimit=levelLimit?"number"==typeof levelLimit?levelLimit:this.computeRowLevelLimit(row):!1,rowLevelLimit!==!1&&this.limitRow(row,rowLevelLimit)},computeRowLevelLimit:function(row){var i,trEl,rowEl=this.rowEls.eq(row),rowHeight=rowEl.height(),trEls=this.rowStructs[row].tbodyEl.children();for(i=0;i<trEls.length;i++)if(trEl=trEls.eq(i).removeClass("fc-limited"),trEl.position().top+trEl.outerHeight()>rowHeight)return i;return!1},limitRow:function(row,levelLimit){function emptyCellsUntil(endCol){for(;endCol>col;)cell={row:row,col:col},segsBelow=_this.getCellSegs(cell,levelLimit),segsBelow.length&&(td=cellMatrix[levelLimit-1][col],moreLink=_this.renderMoreLink(cell,segsBelow),moreWrap=$("<div/>").append(moreLink),td.append(moreWrap),moreNodes.push(moreWrap[0])),col++}var cell,levelSegs,cellMatrix,limitedNodes,i,seg,segsBelow,totalSegsBelow,colSegsBelow,td,rowspan,segMoreNodes,j,moreTd,moreWrap,moreLink,_this=this,view=this.view,rowStruct=this.rowStructs[row],moreNodes=[],col=0;if(levelLimit&&levelLimit<rowStruct.segLevels.length){for(levelSegs=rowStruct.segLevels[levelLimit-1],cellMatrix=rowStruct.cellMatrix,limitedNodes=rowStruct.tbodyEl.children().slice(levelLimit).addClass("fc-limited").get(),i=0;i<levelSegs.length;i++){for(seg=levelSegs[i],emptyCellsUntil(seg.leftCol),colSegsBelow=[],totalSegsBelow=0;col<=seg.rightCol;)cell={row:row,col:col},segsBelow=this.getCellSegs(cell,levelLimit),colSegsBelow.push(segsBelow),totalSegsBelow+=segsBelow.length,col++;if(totalSegsBelow){for(td=cellMatrix[levelLimit-1][seg.leftCol],rowspan=td.attr("rowspan")||1,segMoreNodes=[],j=0;j<colSegsBelow.length;j++)moreTd=$('<td class="fc-more-cell"/>').attr("rowspan",rowspan),segsBelow=colSegsBelow[j],cell={row:row,col:seg.leftCol+j},moreLink=this.renderMoreLink(cell,[seg].concat(segsBelow)),moreWrap=$("<div/>").append(moreLink),moreTd.append(moreWrap),segMoreNodes.push(moreTd[0]),moreNodes.push(moreTd[0]);td.addClass("fc-limited").after($(segMoreNodes)),limitedNodes.push(td[0])}}emptyCellsUntil(view.colCnt),rowStruct.moreEls=$(moreNodes),rowStruct.limitedEls=$(limitedNodes)}},unlimitRow:function(row){var rowStruct=this.rowStructs[row];rowStruct.moreEls&&(rowStruct.moreEls.remove(),rowStruct.moreEls=null),rowStruct.limitedEls&&(rowStruct.limitedEls.removeClass("fc-limited"),rowStruct.limitedEls=null)},renderMoreLink:function(cell,hiddenSegs){var _this=this,view=this.view;return $('<a class="fc-more"/>').text(this.getMoreLinkText(hiddenSegs.length)).on("click",function(ev){var clickOption=view.opt("eventLimitClick"),date=view.cellToDate(cell),moreEl=$(this),dayEl=_this.getCellDayEl(cell),allSegs=_this.getCellSegs(cell),reslicedAllSegs=_this.resliceDaySegs(allSegs,date),reslicedHiddenSegs=_this.resliceDaySegs(hiddenSegs,date);"function"==typeof clickOption&&(clickOption=view.trigger("eventLimitClick",null,{date:date,dayEl:dayEl,moreEl:moreEl,segs:reslicedAllSegs,hiddenSegs:reslicedHiddenSegs},ev)),"popover"===clickOption?_this.showSegPopover(date,cell,moreEl,reslicedAllSegs):"string"==typeof clickOption&&view.calendar.zoomTo(date,clickOption)})},showSegPopover:function(date,cell,moreLink,segs){var topEl,options,_this=this,view=this.view,moreWrap=moreLink.parent();topEl=1==view.rowCnt?this.view.el:this.rowEls.eq(cell.row),options={className:"fc-more-popover",content:this.renderSegPopoverContent(date,segs),parentEl:this.el,top:topEl.offset().top,autoHide:!0,viewportConstrain:view.opt("popoverViewportConstrain"),hide:function(){_this.segPopover.destroy(),_this.segPopover=null,_this.popoverSegs=null}},view.opt("isRTL")?options.right=moreWrap.offset().left+moreWrap.outerWidth()+1:options.left=moreWrap.offset().left-1,this.segPopover=new Popover(options),this.segPopover.show()},renderSegPopoverContent:function(date,segs){var i,view=this.view,isTheme=view.opt("theme"),title=date.format(view.opt("dayPopoverFormat")),content=$('<div class="fc-header '+view.widgetHeaderClass+'"><span class="fc-close '+(isTheme?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+htmlEscape(title)+'</span><div class="fc-clear"/></div><div class="fc-body '+view.widgetContentClass+'"><div class="fc-event-container"></div></div>'),segContainer=content.find(".fc-event-container");for(segs=this.renderFgSegEls(segs,!0),this.popoverSegs=segs,i=0;i<segs.length;i++)segs[i].cellDate=date,segContainer.append(segs[i].el);return content},resliceDaySegs:function(segs,dayDate){var events=$.map(segs,function(seg){return seg.event}),dayStart=dayDate.clone().stripTime(),dayEnd=dayStart.clone().add(1,"days");return this.eventsToSegs(events,function(rangeStart,rangeEnd){var seg=intersectionToSeg(rangeStart,rangeEnd,dayStart,dayEnd);return seg?[seg]:[]})},getMoreLinkText:function(num){var view=this.view,opt=view.opt("eventLimitText");return"function"==typeof opt?opt(num):"+"+num+" "+opt},getCellSegs:function(cell,startLevel){for(var seg,segMatrix=this.rowStructs[cell.row].segMatrix,level=startLevel||0,segs=[];level<segMatrix.length;)seg=segMatrix[level][cell.col],seg&&segs.push(seg),level++;return segs}}),TimeGrid.prototype=createObject(Grid.prototype),$.extend(TimeGrid.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),this.renderBusinessHours(),Grid.prototype.render.call(this)},renderBusinessHours:function(){var events=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(events),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(row,col,date){return this.bgCellHtml(row,col,date)},slatRowHtml:function(){for(var slotDate,minutes,axisHtml,view=this.view,calendar=view.calendar,isRTL=view.opt("isRTL"),html="",slotNormal=this.slotDuration.asMinutes()%15===0,slotTime=moment.duration(+this.minTime);slotTime<this.maxTime;)slotDate=view.start.clone().time(slotTime),minutes=slotDate.minutes(),axisHtml='<td class="fc-axis fc-time '+view.widgetContentClass+'" '+view.axisStyleAttr()+">"+(slotNormal&&minutes?"":"<span>"+htmlEscape(calendar.formatDate(slotDate,view.opt("axisFormat")))+"</span>")+"</td>",html+="<tr "+(minutes?'class="fc-minor"':"")+">"+(isRTL?"":axisHtml)+'<td class="'+view.widgetContentClass+'"/>'+(isRTL?axisHtml:"")+"</tr>",slotTime.add(this.slotDuration);return html},processOptions:function(){var view=this.view,slotDuration=view.opt("slotDuration"),snapDuration=view.opt("snapDuration");slotDuration=moment.duration(slotDuration),snapDuration=snapDuration?moment.duration(snapDuration):slotDuration,this.slotDuration=slotDuration,this.snapDuration=snapDuration,this.cellDuration=snapDuration,this.minTime=moment.duration(view.opt("minTime")),this.maxTime=moment.duration(view.opt("maxTime"))},rangeToSegs:function(rangeStart,rangeEnd){var seg,col,cellDate,colStart,colEnd,view=this.view,segs=[];for(rangeStart=rangeStart.clone().stripZone(),rangeEnd=rangeEnd.clone().stripZone(),col=0;col<view.colCnt;col++)cellDate=view.cellToDate(0,col),colStart=cellDate.clone().time(this.minTime),colEnd=cellDate.clone().time(this.maxTime),seg=intersectionToSeg(rangeStart,rangeEnd,colStart,colEnd),seg&&(seg.col=col,segs.push(seg));return segs},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(rows,cols){var e,n,colCnt=this.view.colCnt,originTop=this.el.offset().top,snapTime=moment.duration(+this.minTime),p=null;for(this.dayEls.slice(0,colCnt).each(function(i,_e){e=$(_e),n=e.offset().left,p&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),p=null;snapTime<this.maxTime;)n=originTop+this.computeTimeTop(snapTime),p&&(p[1]=n),p=[n],rows.push(p),snapTime.add(this.snapDuration);p[1]=originTop+this.computeTimeTop(snapTime)},getCellDate:function(cell){var view=this.view,calendar=view.calendar;return calendar.rezoneDate(view.cellToDate(0,cell.col).time(this.minTime+this.snapDuration*cell.row))},getCellDayEl:function(cell){return this.dayEls.eq(cell.col)},computeDateTop:function(date,startOfDayDate){return this.computeTimeTop(moment.duration(date.clone().stripZone()-startOfDayDate.clone().stripTime()))},computeTimeTop:function(time){var slatIndex,slatRemainder,slatTop,slatBottom,slatCoverage=(time-this.minTime)/this.slotDuration;return slatCoverage=Math.max(0,slatCoverage),slatCoverage=Math.min(this.slatEls.length,slatCoverage),slatIndex=Math.floor(slatCoverage),slatRemainder=slatCoverage-slatIndex,slatTop=this.slatTops[slatIndex],slatRemainder?(slatBottom=this.slatTops[slatIndex+1],slatTop+(slatBottom-slatTop)*slatRemainder):slatTop},computeSlatTops:function(){var top,tops=[];this.slatEls.each(function(i,node){top=$(node).position().top,tops.push(top)}),tops.push(top+this.slatEls.last().outerHeight()),this.slatTops=tops},renderDrag:function(start,end,seg){var opacity;return seg?(this.renderRangeHelper(start,end,seg),opacity=this.view.opt("dragOpacity"),void 0!==opacity&&this.helperEl.css("opacity",opacity),!0):void this.renderHighlight(start,end||this.view.calendar.getDefaultEventEnd(!1,start))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(start,end,seg){this.renderRangeHelper(start,end,seg)},destroyResize:function(){this.destroyHelper()},renderHelper:function(event,sourceSeg){var tableEl,i,seg,sourceEl,segs=this.eventsToSegs([event]);for(segs=this.renderFgSegEls(segs),tableEl=this.renderSegTable(segs),i=0;i<segs.length;i++)seg=segs[i],sourceSeg&&sourceSeg.col===seg.col&&(sourceEl=sourceSeg.el,seg.el.css({left:sourceEl.css("left"),right:sourceEl.css("right"),"margin-left":sourceEl.css("margin-left"),"margin-right":sourceEl.css("margin-right")}));this.helperEl=$('<div class="fc-helper-skeleton"/>').append(tableEl).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(start,end){this.view.opt("selectHelper")?this.renderRangeHelper(start,end):this.renderHighlight(start,end)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(type,segs,className){var segCols,skeletonEl,trEl,col,colSegs,tdEl,containerEl,dayDate,i,seg,view=this.view;if(segs.length){for(segs=this.renderFillSegEls(type,segs),segCols=this.groupSegCols(segs),className=className||type.toLowerCase(),skeletonEl=$('<div class="fc-'+className+'-skeleton"><table><tr/></table></div>'),trEl=skeletonEl.find("tr"),col=0;col<segCols.length;col++)if(colSegs=segCols[col],tdEl=$("<td/>").appendTo(trEl),colSegs.length)for(containerEl=$('<div class="fc-'+className+'-container"/>').appendTo(tdEl),dayDate=view.cellToDate(0,col),i=0;i<colSegs.length;i++)seg=colSegs[i],containerEl.append(seg.el.css({top:this.computeDateTop(seg.start,dayDate),bottom:-this.computeDateTop(seg.end,dayDate)}));this.bookendCells(trEl,type),this.el.append(skeletonEl),this.elsByFill[type]=skeletonEl}return segs}}),$.extend(TimeGrid.prototype,{eventSkeletonEl:null,renderFgSegs:function(segs){return segs=this.renderFgSegEls(segs),this.el.append(this.eventSkeletonEl=$('<div class="fc-content-skeleton"/>').append(this.renderSegTable(segs))),segs
},destroyFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(segs){var segCols,i,seg,col,colSegs,containerEl,tableEl=$("<table><tr/></table>"),trEl=tableEl.find("tr");for(segCols=this.groupSegCols(segs),this.computeSegVerticals(segs),col=0;col<segCols.length;col++){for(colSegs=segCols[col],placeSlotSegs(colSegs),containerEl=$('<div class="fc-event-container"/>'),i=0;i<colSegs.length;i++)seg=colSegs[i],seg.el.css(this.generateSegPositionCss(seg)),seg.bottom-seg.top<30&&seg.el.addClass("fc-short"),containerEl.append(seg.el);trEl.append($("<td/>").append(containerEl))}return this.bookendCells(trEl,"eventSkeleton"),tableEl},updateSegVerticals:function(){var i,allSegs=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(allSegs),i=0;i<allSegs.length;i++)allSegs[i].el.css(this.generateSegVerticalCss(allSegs[i]))},computeSegVerticals:function(segs){var i,seg;for(i=0;i<segs.length;i++)seg=segs[i],seg.top=this.computeDateTop(seg.start,seg.start),seg.bottom=this.computeDateTop(seg.end,seg.start)},fgSegHtml:function(seg,disableResizing){var timeText,fullTimeText,startTimeText,view=this.view,event=seg.event,isDraggable=view.isEventDraggable(event),isResizable=!disableResizing&&seg.isEnd&&view.isEventResizable(event),classes=this.getSegClasses(seg,isDraggable,isResizable),skinCss=this.getEventSkinCss(event);return classes.unshift("fc-time-grid-event"),view.isMultiDayEvent(event)?(seg.isStart||seg.isEnd)&&(timeText=view.getEventTimeText(seg.start,seg.end),fullTimeText=view.getEventTimeText(seg.start,seg.end,"LT"),startTimeText=view.getEventTimeText(seg.start,null)):(timeText=view.getEventTimeText(event),fullTimeText=view.getEventTimeText(event,"LT"),startTimeText=view.getEventTimeText(event.start,null)),'<a class="'+classes.join(" ")+'"'+(event.url?' href="'+htmlEscape(event.url)+'"':"")+(skinCss?' style="'+skinCss+'"':"")+'><div class="fc-content">'+(timeText?'<div class="fc-time" data-start="'+htmlEscape(startTimeText)+'" data-full="'+htmlEscape(fullTimeText)+'"><span>'+htmlEscape(timeText)+"</span></div>":"")+(event.title?'<div class="fc-title">'+htmlEscape(event.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(isResizable?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(seg){var left,right,view=this.view,isRTL=view.opt("isRTL"),shouldOverlap=view.opt("slotEventOverlap"),backwardCoord=seg.backwardCoord,forwardCoord=seg.forwardCoord,props=this.generateSegVerticalCss(seg);return shouldOverlap&&(forwardCoord=Math.min(1,backwardCoord+2*(forwardCoord-backwardCoord))),isRTL?(left=1-forwardCoord,right=backwardCoord):(left=backwardCoord,right=1-forwardCoord),props.zIndex=seg.level+1,props.left=100*left+"%",props.right=100*right+"%",shouldOverlap&&seg.forwardPressure&&(props[isRTL?"marginLeft":"marginRight"]=20),props},generateSegVerticalCss:function(seg){return{top:seg.top,bottom:-seg.bottom}},groupSegCols:function(segs){var i,view=this.view,segCols=[];for(i=0;i<view.colCnt;i++)segCols.push([]);for(i=0;i<segs.length;i++)segCols[segs[i].col].push(segs[i]);return segCols}}),View.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var tm=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=tm+"-widget-header",this.widgetContentClass=tm+"-widget-content",this.highlightStateClass=tm+"-state-highlight",this.documentMousedownProxy=$.proxy(this,"documentMousedown"),this.documentDragStartProxy=$.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),$(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),$(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(){},updateSize:function(isResize){isResize&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var calendar=this.calendar;this.setHeight(calendar.getSuggestedViewHeight(),calendar.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(totalHeight){var otherHeight,both=this.el.add(this.scrollerEl);return both.css({position:"relative",left:-1}),otherHeight=this.el.outerHeight()-this.scrollerEl.height(),both.css({position:"",left:""}),totalHeight-otherHeight},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(){this.segEach(function(seg){this.trigger("eventAfterRender",seg.event,seg.event,seg.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(seg){this.trigger("eventDestroy",seg.event,seg.event,seg.el)})},resolveEventEl:function(event,el){var custom=this.trigger("eventRender",event,event,el);return custom===!1?el=null:custom&&custom!==!0&&(el=$(custom)),el},showEvent:function(event){this.segEach(function(seg){seg.el.css("visibility","")},event)},hideEvent:function(event){this.segEach(function(seg){seg.el.css("visibility","hidden")},event)},segEach:function(func,event){var i,segs=this.getSegs();for(i=0;i<segs.length;i++)event&&segs[i].event._id!==event._id||func.call(this,segs[i])},getSegs:function(){},renderDrag:function(){},destroyDrag:function(){},documentDragStart:function(ev){var el,accept,meta,eventProps,dragListener,_this=this,calendar=this.calendar,eventStart=null,eventEnd=null,visibleEnd=null;this.opt("droppable")&&(el=$(ev.target),accept=this.opt("dropAccept"),($.isFunction(accept)?accept.call(el[0],el):el.is(accept))&&(meta=getDraggedElMeta(el),eventProps=meta.eventProps,dragListener=new DragListener(this.coordMap,{cellOver:function(cell,cellDate){eventStart=cellDate,eventEnd=meta.duration?eventStart.clone().add(meta.duration):null,visibleEnd=eventEnd||calendar.getDefaultEventEnd(!eventStart.hasTime(),eventStart),eventProps&&$.extend(eventProps,{start:eventStart,end:eventEnd}),calendar.isExternalDragAllowedInRange(eventStart,visibleEnd,eventProps)?_this.renderDrag(eventStart,visibleEnd):(eventStart=null,disableCursor())},cellOut:function(){eventStart=null,_this.destroyDrag(),enableCursor()}}),$(document).one("dragstop",function(ev,ui){var renderedEvents;_this.destroyDrag(),enableCursor(),eventStart&&(meta.startTime&&!eventStart.hasTime()&&eventStart.time(meta.startTime),_this.trigger("drop",el[0],eventStart,ev,ui),eventProps&&(renderedEvents=calendar.renderEvent(eventProps,meta.stick),_this.trigger("eventReceive",null,renderedEvents[0])))}),dragListener.startDrag(ev)))},select:function(start,end,ev){this.unselect(ev),this.renderSelection(start,end),this.reportSelection(start,end,ev)},renderSelection:function(){},reportSelection:function(start,end,ev){this.isSelected=!0,this.trigger("select",null,start,end,ev)},unselect:function(ev){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,ev))},destroySelection:function(){},documentMousedown:function(ev){var ignore;this.isSelected&&this.opt("unselectAuto")&&isPrimaryMouseButton(ev)&&(ignore=this.opt("unselectCancel"),ignore&&$(ev.target).closest(ignore).length||this.unselect(ev))}},fc.dataAttrPrefix="",BasicView.prototype=createObject(View.prototype),$.extend(BasicView.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(rowCnt,colCnt,dayNumbersVisible){this.rowCnt=rowCnt,this.colCnt=colCnt,this.dayNumbersVisible=dayNumbersVisible,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),View.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),View.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+htmlEscape(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(row){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(row,0))+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(row,col,date){var classes;return this.dayNumbersVisible?(classes=this.dayGrid.getDayClasses(date),classes.unshift("fc-day-number"),'<td class="'+classes.join(" ")+'" data-date="'+date.format()+'">'+date.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var eventLimit=this.opt("eventLimit");return eventLimit&&"number"!=typeof eventLimit},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=matchCellWidths(this.el.find(".fc-week-number")))},setHeight:function(totalHeight,isAuto){var scrollerHeight,eventLimit=this.opt("eventLimit");unsetScroller(this.scrollerEl),uncompensateScroll(this.headRowEl),this.dayGrid.destroySegPopover(),eventLimit&&"number"==typeof eventLimit&&this.dayGrid.limitRows(eventLimit),scrollerHeight=this.computeScrollerHeight(totalHeight),this.setGridHeight(scrollerHeight,isAuto),eventLimit&&"number"!=typeof eventLimit&&this.dayGrid.limitRows(eventLimit),!isAuto&&setPotentialScroller(this.scrollerEl,scrollerHeight)&&(compensateScroll(this.headRowEl,getScrollbarWidths(this.scrollerEl)),scrollerHeight=this.computeScrollerHeight(totalHeight),this.scrollerEl.height(scrollerHeight),this.restoreScroll())},setGridHeight:function(height,isAuto){isAuto?undistributeHeight(this.dayGrid.rowEls):distributeHeight(this.dayGrid.rowEls,height,!0)},renderEvents:function(events){this.dayGrid.renderEvents(events),this.updateHeight(),View.prototype.renderEvents.call(this,events)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){View.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(start,end,seg){return this.dayGrid.renderDrag(start,end,seg)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(start,end){this.dayGrid.renderSelection(start,end)},destroySelection:function(){this.dayGrid.destroySelection()}}),setDefaults({fixedWeekCount:!0}),fcViews.month=MonthView,MonthView.prototype=createObject(BasicView.prototype),$.extend(MonthView.prototype,{name:"month",incrementDate:function(date,delta){return date.clone().stripTime().add(delta,"months").startOf("month")},render:function(date){var rowCnt;this.intervalStart=date.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),rowCnt=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-rowCnt,"weeks"),rowCnt=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),BasicView.prototype.render.call(this,rowCnt,this.getCellsPerWeek(),!0)},setGridHeight:function(height,isAuto){isAuto=isAuto||"variable"===this.opt("weekMode"),isAuto&&(height*=this.rowCnt/6),distributeHeight(this.dayGrid.rowEls,height,!isAuto)},isFixedWeeks:function(){var weekMode=this.opt("weekMode");return weekMode?"fixed"===weekMode:this.opt("fixedWeekCount")}}),fcViews.basicWeek=BasicWeekView,BasicWeekView.prototype=createObject(BasicView.prototype),$.extend(BasicWeekView.prototype,{name:"basicWeek",incrementDate:function(date,delta){return date.clone().stripTime().add(delta,"weeks").startOf("week")},render:function(date){this.intervalStart=date.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),BasicView.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),fcViews.basicDay=BasicDayView,BasicDayView.prototype=createObject(BasicView.prototype),$.extend(BasicDayView.prototype,{name:"basicDay",incrementDate:function(date,delta){var out=date.clone().stripTime().add(delta,"days");return out=this.skipHiddenDays(out,0>delta?-1:1)},render:function(date){this.start=this.intervalStart=date.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),BasicView.prototype.render.call(this,1,1,!1)}}),setDefaults({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:generateAgendaAxisFormat,timeFormat:{agenda:generateAgendaTimeFormat},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var AGENDA_ALL_DAY_EVENT_LIMIT=5;AgendaView.prototype=createObject(View.prototype),$.extend(AgendaView.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(colCnt){this.rowCnt=1,this.colCnt=colCnt,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=$('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),View.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),View.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var date,weekNumber,weekTitle,weekText;return this.opt("weekNumbers")?(date=this.cellToDate(0,0),weekNumber=this.calendar.calculateWeekNumber(date),weekTitle=this.opt("weekNumberTitle"),weekText=this.opt("isRTL")?weekNumber+weekTitle:weekTitle+weekNumber,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+htmlEscape(weekText)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||htmlEscape(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(isResize){isResize&&this.timeGrid.resize(),View.prototype.updateSize.call(this,isResize)},updateWidth:function(){this.axisWidth=matchCellWidths(this.el.find(".fc-axis"))},setHeight:function(totalHeight,isAuto){var eventLimit,scrollerHeight;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),unsetScroller(this.scrollerEl),uncompensateScroll(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),eventLimit=this.opt("eventLimit"),eventLimit&&"number"!=typeof eventLimit&&(eventLimit=AGENDA_ALL_DAY_EVENT_LIMIT),eventLimit&&this.dayGrid.limitRows(eventLimit)),isAuto||(scrollerHeight=this.computeScrollerHeight(totalHeight),setPotentialScroller(this.scrollerEl,scrollerHeight)?(compensateScroll(this.noScrollRowEls,getScrollbarWidths(this.scrollerEl)),scrollerHeight=this.computeScrollerHeight(totalHeight),this.scrollerEl.height(scrollerHeight),this.restoreScroll()):(this.scrollerEl.height(scrollerHeight).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function scroll(){_this.scrollerEl.scrollTop(top)}var _this=this,scrollTime=moment.duration(this.opt("scrollTime")),top=this.timeGrid.computeTimeTop(scrollTime);top=Math.ceil(top),top&&top++,scroll(),setTimeout(scroll,0)},renderEvents:function(events){var timedSegs,i,dayEvents=[],timedEvents=[],daySegs=[];for(i=0;i<events.length;i++)events[i].allDay?dayEvents.push(events[i]):timedEvents.push(events[i]);timedSegs=this.timeGrid.renderEvents(timedEvents),this.dayGrid&&(daySegs=this.dayGrid.renderEvents(dayEvents)),this.updateHeight(),View.prototype.renderEvents.call(this,events)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){View.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(start,end,seg){return start.hasTime()?this.timeGrid.renderDrag(start,end,seg):this.dayGrid?this.dayGrid.renderDrag(start,end,seg):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(start,end){start.hasTime()||end.hasTime()?this.timeGrid.renderSelection(start,end):this.dayGrid&&this.dayGrid.renderSelection(start,end)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),fcViews.agendaWeek=AgendaWeekView,AgendaWeekView.prototype=createObject(AgendaView.prototype),$.extend(AgendaWeekView.prototype,{name:"agendaWeek",incrementDate:function(date,delta){return date.clone().stripTime().add(delta,"weeks").startOf("week")},render:function(date){this.intervalStart=date.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),AgendaView.prototype.render.call(this,this.getCellsPerWeek())}}),fcViews.agendaDay=AgendaDayView,AgendaDayView.prototype=createObject(AgendaView.prototype),$.extend(AgendaDayView.prototype,{name:"agendaDay",incrementDate:function(date,delta){var out=date.clone().stripTime().add(delta,"days");return out=this.skipHiddenDays(out,0>delta?-1:1)},render:function(date){this.start=this.intervalStart=date.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),AgendaView.prototype.render.call(this,1)}}),fcViews.list=AgendaListView,defaults.defaultButtonText.list="list",defaults.titleFormat.list="MMMM YYYY",defaults.columnFormat.list="MMMM D, YYYY",defaults.timeFormat.list="MMMM D",defaults.agendaDisType=!0,ListView.prototype=createObject(View.prototype),$.extend(ListView.prototype,{axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(){this.el.addClass("fc-agendaList-view").html(this.renderHtml()),this.trigger("viewRender",this,this,this.el)},renderHtml:function(){return'<div class="fc-agendaList"></div>'},setHeight:function(){},destroy:function(){View.prototype.destroy.call(this)},updateWidth:function(){this.axisWidth=matchCellWidths(this.el.find(".fc-axis"))},getSegs:function(){return[]},renderEvents:function(events){var tstart,tend,t=this,displayeventlist=[],j=0;for(i in events){for(displayeventlist[j]=Object.create(events[i]),tstart=events[i].start.clone(),tend=events[i].end?events[i].end.clone():null,displayeventlist[j].displayDay=events[i].start;tend-tstart>=864e5;)j+=1,displayeventlist[j]=Object.create(events[i]),tstart=tstart.add(1,"day"),displayeventlist[j].displayDay=tstart.clone();j+=1}displayeventlist.sort(function(a,b){var dateA=new Date(a.displayDay),dateB=new Date(b.displayDay);return dateA-dateB});var disDay,disDate,lurl,ltitle,disDay,disDate,ltitle,allDay,startDate,endDate,temp,html=$("<ul class='fc-agendaList'></ul>"),i=0;visMonth=formatDate(t.intervalStart,"MM"),visYear=formatDate(t.intervalStart,"YYYY");var fmt=this.opt("timeFormat");fmt=fmt?"ll "+fmt:"lll";for(i in displayeventlist)if(evMonth=formatDate(displayeventlist[i].displayDay,"MM"),evYear=formatDate(displayeventlist[i].displayDay,"YYYY"),endDate=null,evMonth==visMonth&&evYear==visYear){if(disDay=formatDate(displayeventlist[i].displayDay,"dddd"),disDate=formatDate(displayeventlist[i].displayDay,this.opt("columnFormat")),ltitle=htmlEscape(displayeventlist[i].title),allDay=displayeventlist[i].allDay,startDate=moment(displayeventlist[i].start).format("lll"),displayeventlist[i].end&&(endDate=moment(displayeventlist[i].end).format("lll")),lurl=htmlEscape(displayeventlist[i].url),classes=displayeventlist[i].className,description=displayeventlist[i].description,displayeventlist[i].source&&(classes=classes.concat(displayeventlist[i].source.className)),disDate!=temp){var innerlist=$("<ul class='fc-agendaList'></ul>").appendTo(html);$("<li class='fc-agendaList-dayHeader ui-widget-header'><span class='fc-agendaList-day'>"+disDay+"</span><span class='fc-agendaList-date'>"+disDate+"</span></li>").appendTo(innerlist),temp=disDate}eventdisplay=allDay?$("<li class='fc-agendaList-item'><"+("undefined"!==lurl?"a href='"+lurl+"'":"div")+" class='fc-agendaList-event fc-eventlist "+classes+"'><div class='fc-event-time'>"+(endDate?"<span class='fc-event-start-time'>"+htmlEscape(moment(displayeventlist[i].start).format("ll"))+"</span> <span class='fc-event-end-time'>"+(endDate?htmlEscape(moment(displayeventlist[i].end).format("ll")):"")+"</span>":"<span class='fc-event-all-day'>"+this.opt("allDayText")+"</span>")+"</div><div class='fc-agendaList-eventDetails'><div class='fc-eventlist-title'>"+ltitle+"</div>"+(description?"<div class='fc-eventlist-desc'>"+htmlEscape(description)+"</div>":"")+"</div></"+("undefined"!==lurl?"a":"div")+"></li>").appendTo(innerlist):$("<li class='fc-agendaList-item'><"+("undefined"!==lurl?"a href='"+lurl+"'":"div")+" class='fc-agendaList-event fc-eventlist "+classes.join(" ")+"'><div class='fc-event-time'>"+(endDate?"<span class='fc-event-start-time'>"+htmlEscape(moment(displayeventlist[i].start).format(fmt))+"</span> <span class='fc-event-end-time'>"+(endDate?htmlEscape(moment(displayeventlist[i].end).format(fmt)):"")+"</span>":"<span class='fc-event-start-time'>"+htmlEscape(moment(displayeventlist[i].start).format(fmt))+"</span> ")+"</div><div class='fc-agendaList-eventDetails'><div class='fc-eventlist-title'>"+ltitle+"</div>"+(description?"<div class='fc-eventlist-desc'>"+htmlEscape(description)+"</div>":"")+"</div></"+("undefined"!==lurl?"a":"div")+"></li>").appendTo(innerlist)}View.prototype.renderEvents.call(this,events),this.el.find(".fc-agendaList").html(html),this.trigger("eventAfterAllRender")}}),AgendaListView.prototype=createObject(ListView.prototype),$.extend(AgendaListView.prototype,{name:"list",incrementDate:function(date,delta){return date.clone().stripTime().add("months",delta).startOf("month")},render:function(date){this.intervalStart=date.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add("months",1),this.start=this.intervalStart.clone(),this.end=this.intervalEnd.clone(),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),ListView.prototype.render.call(this,1)}})});