!function(widget,$){widget.textarea=function(pId,pOptions){function resizable(){function startResize(pEvent){return gOffsetX=gTextarea.width()-pEvent.pageX,gOffsetY=gTextarea.height()-pEvent.pageY,gTextarea.css("opacity",.25),$(document).bind("mousemove.apex_startResize",function(pE){return performResize(pE,"se-resize"===$(pEvent.currentTarget).css("cursor"))}).bind("mouseup.apex_startResize",endResize),!1}function performResize(pEvent,pSetWidth){var lWidth;return gTextarea.height(Math.max(gMinHeight,gOffsetY+pEvent.pageY)+"px"),pSetWidth&&(lWidth=Math.max(gMinWidth,gOffsetX+pEvent.pageX),gTextarea.width(lWidth)),!1}function endResize(){$(document).unbind("mousemove.apex_startResize").unbind("mouseup.apex_startResize"),gTextarea.css("opacity",1)}var gMinWidth,gMinHeight,gOffsetX=null,gOffsetY=null;gMinWidth=parseInt(gTextarea.css("min-width"),10)||20,gMinHeight=parseInt(gTextarea.css("min-height"),10)||20,gTextarea.after('<div class="apex_size_bar"><div class="apex_size_grip"></div></div>'),$("div.apex_size_bar, div.apex_size_grip",gTextarea.parent()).mousedown(startResize),gTextarea.parent().css("display:inline-block")}function charCount(){var lLength=gTextarea.val().replace(/\n/g,"xx").length,lPctFull=lLength/gOptions.maxChar*100;lLength>=gOptions.maxChar?(gTextarea.val(gTextarea.val().substr(0,gOptions.maxChar)),gTextarea.css("color","red"),gCounter.html(gOptions.maxChar)):(gTextarea.css("color","black"),gCounter.html(lLength)),lLength>0?gCountDiv.show():gCountDiv.hide(),lPctFull>95?gCountDiv.css("color","red"):lPctFull>=90?gCountDiv.css("color","#EAA914"):gCountDiv.css("color","black")}var gTextarea=$("#"+pId,apex.gPageContext$),gOptions=$.extend({isResizable:!1,hasCharCounter:!1,maxChar:null},pOptions);if(0!==gTextarea.length){if(gOptions.isResizable&&("string"==typeof document.documentElement.style.resize?gTextarea.css("resize","both"):resizable()),gOptions.hasCharCounter){var gCountDiv=$("#"+pId+"_CHAR_COUNT",apex.gPageContext$),gCounter=$("#"+pId+"_CHAR_COUNTER",apex.gPageContext$);gTextarea.change(charCount).keyup(charCount).focus(charCount),charCount()}apex.widget.initPageItem(pId,{show:function(){gTextarea.closest("fieldset").show()},hide:function(){gTextarea.closest("fieldset").hide()}})}}}(apex.widget,apex.jQuery);