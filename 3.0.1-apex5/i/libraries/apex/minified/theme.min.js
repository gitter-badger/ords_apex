apex.theme={},function(theme,navigation,$,lang,util){"use strict";var C_HELP_DLG="apex_popup_field_help",SEL_HELP_DLG="#"+C_HELP_DLG,C_HELP_AREA="apex_popup_help_area",SEL_HELP_AREA="#"+C_HELP_AREA,gFieldHelpReturnFocusTo=null;theme.popupFieldHelpClassic=function(pItemId,pSessionId,pUrl){var url;url=pUrl?pUrl:"wwv_flow_item_help.show_help?p_item_id="+pItemId+"&p_session="+pSessionId,navigation.popup({url:url+"&p_output_format=HTML",name:"Help",width:500,height:350})},theme.popupFieldHelp=function(pItemId,pSessionId,pUrl){function cleanTitle(title){var result,t$=$("<span></span>");return result=title.replace(/&#?\w+;/g,function(m){return t$.html(m),t$.text()})}var url;gFieldHelpReturnFocusTo=document.activeElement||null,url=pUrl?pUrl:"wwv_flow_item_help.show_help?p_item_id="+pItemId+"&p_session="+pSessionId,$x("pScreenReaderMode")?theme.popupFieldHelpClassic(pItemId,pSessionId,pUrl):$.getJSON(url+"&p_output_format=JSON",function(pData){var lDialog$=util.getTopApex().jQuery(SEL_HELP_DLG),lDialogArea$=util.getTopApex().jQuery(SEL_HELP_AREA);0===lDialog$.length?(0===lDialogArea$.length&&util.getTopApex().jQuery("#wwvFlowForm").after("<div id='"+C_HELP_AREA+"'></div>"),lDialog$=util.getTopApex().jQuery("<div id='"+C_HELP_DLG+"' tabindex='0'>"+pData.helpText+"</div>"),lDialog$.dialog({title:cleanTitle(pData.title),appendTo:SEL_HELP_AREA,dialogClass:"ui-dialog--helpDialog",width:500,height:350,create:function(){lDialog$.closest(".ui-dialog").css("position","fixed")},resize:function(){lDialog$.closest(".ui-dialog").css("position","fixed")},close:function(){gFieldHelpReturnFocusTo&&$(gFieldHelpReturnFocusTo).focus()}}).keydown(function(event){117===event.which&&event.altKey&&gFieldHelpReturnFocusTo&&$(gFieldHelpReturnFocusTo).focus()})):lDialog$.html(pData.helpText).dialog("option","title",cleanTitle(pData.title)).dialog("open"),lDialog$.focus()})},$(document).ready(function(){$(document.body).on("click",".js-itemHelp",function(){var itemId=$(this).attr("data-itemhelp");itemId&&theme.popupFieldHelp(itemId,$v("pInstance"))}).on("keydown",function(event){112===event.which&&event.altKey&&$(event.target).parents().each(function(){var helpElement$,itemId;if(this.id&&/_CONTAINER$/.test(this.id)||"TD"===this.nodeName){if(helpElement$=$(this).find(".js-itemHelp"),helpElement$.length&&(itemId=helpElement$.attr("data-itemhelp")))return theme.popupFieldHelp(itemId,$v("pInstance")),!1;if("TD"!==this.nodeName)return!1}})}),$(document.body).on("dialogopen dialogclose",function(event){var dlg$=$(event.target);!dlg$.is(SEL_HELP_DLG)&&dlg$.dialog("option","modal")&&$(SEL_HELP_DLG).dialog("close")}),$(document.body).on("click","label",function(pEvent){var lLabelFor=$(this).attr("for"),lItem$=$("#"+util.escapeCSS(lLabelFor));lItem$.is("input,textarea,select")&&!lItem$.prop("disabled")&&lItem$.is(":visible")||0!==$(this).find("a").length||(apex.item(lLabelFor).setFocus(),pEvent.preventDefault())}),$(".js-regionDialog").each(function(){var inst$=$(this),size=/js-dialog-size(\d+)x(\d+)/.exec(this.className),options={autoOpen:!1,closeText:apex.lang.getMessage("APEX.DIALOG.CLOSE"),modal:inst$.hasClass("js-modal"),resizable:inst$.hasClass("js-resizable"),draggable:inst$.hasClass("js-draggable"),create:function(){$(this).closest(".ui-dialog").css("position","fixed")}},placeholder$=$("<div style='display:none'></div>");size&&(options.width=size[1],options.height=size[2]),$.each(["width","height","minWidth","minHeight","maxWidth","maxHeight"],function(i,prop){var attrValue=parseInt(inst$.attr("data-"+prop.toLowerCase()),10);isNaN(attrValue)||(options[prop]=attrValue)}),$.each(["appendTo","dialogClass"],function(i,prop){var attrValue=inst$.attr("data-"+prop.toLowerCase());attrValue&&(options[prop]=attrValue)}),options.appendTo&&"#"===options.appendTo.substring(0,1)&&0===$(options.appendTo).length&&$("#wwvFlowForm").after('<div id="'+util.escapeHTML(options.appendTo.substring(1))+'"></div>'),inst$.before(placeholder$),inst$.dialog(options).on("dialogopen",function(){options.modal&&apex.navigation.beginFreezeScroll()}).on("dialogresize",function(){$(this).closest(".ui-dialog").css("position","fixed")}).on("dialogclose",function(){options.modal&&apex.navigation.endFreezeScroll()}),$(apex.gPageContext$).on("apexpagesubmit",function(){inst$.dialog("close").css("display","none"),placeholder$.replaceWith(inst$)})})}),theme.pageResizeInit=function(){$("#wwvFlowForm").addClass("resize"),$("body > link").hide(),$("body").css("overflow","hidden"),$(".resize").each(function(){"flex"===$(this).css("display")&&$(this).css("display","block")}),$("body").on("resize",function(event){var h,w,resize$,pos,parent$=$(event.target);"BODY"===event.target.nodeName?(h=document.documentElement.clientHeight,w=document.documentElement.clientWidth):(h=parent$.height(),w=parent$.width()),resize$=parent$.children(".resize").filter(":visible"),resize$.length>0&&(parent$.children(":not(.resize)").filter(":visible").each(function(){pos=$(this).css("position"),"fixed"!==pos&&"absolute"!==pos&&(h-=$(this).outerHeight(!0))}),h=Math.floor(h/resize$.length),resize$.each(function(){var el$=$(this);util.setOuterHeight(el$,h),util.setOuterWidth(el$,w),el$.filter(":visible").trigger("resize")})),event.stopPropagation()}),$(".ui-accordion.resize").on("resize",function(event){event.target===this&&($(this).accordion("refresh"),event.stopPropagation())}),$(".ui-tabs.resize").on("resize",function(event){event.target===this&&($(this).tabs("refresh").children(".ui-tabs-panel.resize").trigger("resize"),event.stopPropagation())}),$(window).on("apexwindowresized",function(){$("body").trigger("resize")}),$("body").trigger("resize")},theme.defaultStickyTop=function(){return 0},theme.initWizardProgressBar=function(pBaseClass){var lBaseClass=pBaseClass?pBaseClass:"t-WizardSteps",lBaseClassSelector="."+lBaseClass;$(lBaseClassSelector).find(lBaseClassSelector+"-step.is-active").find("span"+lBaseClassSelector+"-labelState").text(lang.getMessage("APEX.ACTIVE_STATE")).end().prevAll(lBaseClassSelector+"-step").addClass("is-complete").find("span"+lBaseClassSelector+"-labelState").text(lang.getMessage("APEX.COMPLETED_STATE"))},theme.initResponsiveDialogs=function(){$("body").on("dialogopen",".ui-dialog-content",function(){var uiDialogContent$=$(this),uiDialog$=uiDialogContent$.closest(".ui-dialog");if(!(uiDialog$.find(".utr-container").length>0)){uiDialog$.css("maxWidth","100%");var uiButtonPane$=uiDialog$.find(".ui-dialog-buttonpane"),uiButtonPaneHeight=0;uiButtonPane$.length>0&&(uiButtonPaneHeight=uiButtonPane$.outerHeight()+20);var initialHeight=parseInt(uiDialogContent$.dialog("option","height"),10);(!initialHeight||0>=initialHeight)&&(initialHeight=uiDialogContent$.outerHeight());var minHeight=parseInt(uiDialogContent$.dialog("option","minHeight"),10);minHeight||(minHeight=0);var onPageResize=function(){var offset=uiDialog$.offset(),window$=$(window);offset.top-=window$.scrollTop(),offset.left-=window$.scrollLeft();var windowWidth=window$.width(),dialogWidth=uiDialog$.outerWidth();offset.left+dialogWidth>windowWidth&&uiDialog$.css("left",windowWidth-dialogWidth);var windowHeight=$(window).height(),dialogHeight=uiDialog$.height();if(initialHeight+uiButtonPaneHeight>windowHeight){var newHeight=windowHeight-uiDialog$.find(".ui-dialog-titlebar").outerHeight()-uiButtonPaneHeight;uiDialogContent$.height(Math.max(newHeight,minHeight)),dialogHeight=uiDialog$.height()}else windowHeight>initialHeight+uiButtonPaneHeight&&uiDialogContent$.height(initialHeight);if(offset.top+dialogHeight>windowHeight){var scrollOffset=0;"absolute"===uiDialog$.css("position")&&(scrollOffset=window$.scrollTop()),uiDialog$.css("top",Math.max(windowHeight-dialogHeight+scrollOffset,0))}};$(window).on("apexwindowresized",onPageResize),setTimeout(function(){onPageResize()},250),uiDialogContent$.on("dialogclose",function(){$(window).off("apexwindowresized",onPageResize)})}})}}(apex.theme,apex.navigation,apex.jQuery,apex.lang,apex.util);