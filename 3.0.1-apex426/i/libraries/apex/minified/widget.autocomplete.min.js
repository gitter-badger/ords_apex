!function(widget,$){widget.autocomplete=function(pSelector,pData,pOptions){function _triggerRefresh(){gAutoComplete.trigger("apexrefresh")}function refresh(){gAutoComplete.trigger("apexbeforerefresh"),$s(gAutoComplete[0],"",""),gAutoComplete.flushCache(),gAutoComplete.trigger("apexafterrefresh")}function formatOneColumn(pItem){var lValue="string"==typeof pItem?pItem:pItem[0];return lOptions.isEscaped?apex.util.escapeHTML(lValue):lValue}function formatTwoColumn(pItem){return lOptions.isEscaped?apex.util.escapeHTML(pItem.d):pItem.d}function parseOneColumn(pData){return pData?$.map(pData,function(pRow){return{data:pRow,value:pRow,result:pRow}}):[]}function parseTwoColumn(pData){return $.map(pData,function(pRow){return{data:pRow,value:pRow.r,result:pRow.d}})}function formatResult(pValue){return pValue}function formatMatch(pValue){return"string"==typeof pValue?pValue:pValue[0]}function resultTwoColumn(pEvent,pItem){$s(this.id+"_HIDDENVALUE",pItem?pItem.r:"")}function changeTwoColumn(){this.value?pOptions.mustMatch||$s(this.id+"_HIDDENVALUE",this.value):$s(this.id+"_HIDDENVALUE","")}function retrieveData(pParameter,pSuccess){apex.widget.util.cascadingLov(null,pOptions.ajaxIdentifier,{x01:pParameter.q,x02:pParameter.limit,x03:pParameter.timestamp,pageItems:$(pOptions.pageItemsToSubmit,apex.gPageContext$)},{optimizeRefresh:pOptions.optimizeRefresh,dependingOn:$(pOptions.dependingOnSelector,apex.gPageContext$),success:pSuccess})}var gAutoComplete=null,lOptions=apex.jQuery.extend({formatItem:pOptions.useHiddenField?formatTwoColumn:formatOneColumn,formatResult:formatResult,formatMatch:formatMatch,parse:pOptions.useHiddenField?parseTwoColumn:parseOneColumn,multiple:pOptions.multipleSeparator?!0:!1,matchSubset:!pOptions.matchContains,isEscaped:!0},pOptions);delete lOptions.useHiddenField,delete lOptions.ajaxIdentifier,delete lOptions.dependingOnSelector,delete lOptions.optimizeRefresh,delete lOptions.pageItemsToSubmit,gAutoComplete=$(pSelector,apex.gPageContext$).autocomplete(pData?pData:retrieveData,lOptions),pOptions.useHiddenField&&gAutoComplete.result(resultTwoColumn).change(changeTwoColumn),pOptions.dependingOnSelector&&$(pOptions.dependingOnSelector,apex.gPageContext$).change(_triggerRefresh),gAutoComplete.bind("apexrefresh",refresh)}}(apex.widget,apex.jQuery);