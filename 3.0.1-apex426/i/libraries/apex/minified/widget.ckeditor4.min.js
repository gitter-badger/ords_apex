!function(widget,$){widget.ckeditor4=function(pSelector,pOptions){var lOptions=$.extend({toolbar:"Basic",toolbarStartupExpanded:!0,disableNativeSpellChecker:!1,menu_groups:"clipboard,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash"},pOptions),lMinWidth=0;"Basic"===lOptions.toolbar?"kama"===lOptions.skin?lMinWidth=lOptions.toolbarStartupExpanded?185:205:("moono"===lOptions.skin||"moonocolor"===lOptions.skin)&&(lMinWidth=lOptions.toolbarStartupExpanded?181:201):"Intermediate"===lOptions.toolbar?"kama"===lOptions.skin?lMinWidth=lOptions.toolbarStartupExpanded?240:260:("moono"===lOptions.skin||"moonocolor"===lOptions.skin)&&(lMinWidth=lOptions.toolbarStartupExpanded?235:255):"Full"===lOptions.toolbar&&("kama"===lOptions.skin?(lOptions.toolbarStartupExpanded,lMinWidth=530):("moono"===lOptions.skin||"moonocolor"===lOptions.skin)&&(lMinWidth=lOptions.toolbarStartupExpanded?590:605));var lEditorPadding="kama"===lOptions.skin?25:20;"Basic"===lOptions.toolbar?lOptions.toolbar=[["Bold","Italic","-","RemoveFormat","-","NumberedList","BulletedList","-","Link","Unlink","-","Undo","Redo"]]:"Intermediate"===lOptions.toolbar?lOptions.toolbar=[["Cut","Copy","Paste","-","Bold","Italic","Underline","-","RemoveFormat","-","NumberedList","BulletedList","-","Outdent","Indent","-","Link","Unlink","Anchor","-","Undo","Redo"],"/",["Format","Font","FontSize","TextColor","-","JustifyLeft","JustifyCenter","JustifyRight"]]:"Full"===lOptions.toolbar&&(lOptions.toolbar=[["Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","Preview","-","Undo","Redo"],["Templates"],["Link","Unlink","Anchor"],["Image","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript","-","RemoveFormat"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["TextColor","BGColor"],["ShowBlocks"],"/",["Styles","Format","Font","FontSize"],["Source"]]),lOptions.toolbarCanCollapse=lOptions.toolbarStartupExpanded?!1:!0,lOptions.resize_dir="both",lOptions.removePlugins="elementspath,image",lOptions.extraPlugins="image2",$(pSelector,apex.gPageContext$).each(function(){var lFinalOptions=lOptions,self=this;lFinalOptions.height=15*this.rows+lEditorPadding,lFinalOptions.width=9.5*this.cols<lMinWidth?lMinWidth:9.5*this.cols,lFinalOptions.resize_minHeight=lFinalOptions.height,lFinalOptions.resize_minWidth=lFinalOptions.width,lFinalOptions.title=apex.lang.formatMessage("APEX.RICH_TEXT_EDITOR.ACCESSIBLE_LABEL",lOptions.label||""),$(this).wrap("<div id='"+this.id+"_DISPLAY'></div>"),CKEDITOR.replace(this.id,lFinalOptions),CKEDITOR.instances[this.id].on("key",function(event){event.data.keyCode===CKEDITOR.ALT+112&&$("#"+self.id).trigger($.Event("keydown",{altKey:!0,ctrlKey:!1,shiftKey:!1,metaKey:!1,isChar:!1,which:112,keyCode:112}))}),CKEDITOR.instances[this.id].on("blur",function(){CKEDITOR.instances[self.id].checkDirty()&&($("#"+self.id).trigger("change"),CKEDITOR.instances[self.id].resetDirty())}),widget.initPageItem(this.id,{enable:function(){alert("Enable not supported.")},disable:function(){alert("Disable not supported.")},setValue:function(pValue){var oEditor=CKEDITOR.instances[this.id];oEditor.setData(pValue)},getValue:function(){var oEditor=CKEDITOR.instances[this.id];return oEditor.getData()},setFocusTo:function(){var oEditor=CKEDITOR.instances[this.id];return oEditor.focus(),{focus:function(){}}}})}),$(pSelector,apex.gPageContext$).focus(function(){var oEditor=CKEDITOR.instances[this.id];oEditor.focus()}),$()}}(apex.widget,apex.jQuery);