!function($,util,debug){"use strict";var C_SPLITTER="a-Splitter",SEL_SPLITTER="."+C_SPLITTER,C_SPLITTER_H="a-Splitter-barH",C_SPLITTER_V="a-Splitter-barV",SEL_BAR="."+C_SPLITTER_H+",."+C_SPLITTER_V,C_SPLITTER_END="a-Splitter--end",C_THUMB="a-Splitter-thumb",SEL_THUMB="."+C_THUMB,C_RTL="u-RTL",C_FOCUSED="is-focused",C_ACTIVE="is-active",C_COLLAPSED="is-collapsed",C_DISABLED="is-disabled",SEL_BUTTON="button",TITLE="title";$.widget("apex.splitter",{version:"5.0",widgetEventPrefix:"splitter",options:{orientation:"horizontal",positionedFrom:"begin",minSize:60,position:100,noCollapse:!1,dragCollapse:!0,collapsed:!1,snap:!1,inc:10,realTime:!1,iframeFix:!1,restoreText:null,collapseText:null,title:null,change:null},lastPos:null,bar$:null,before$:null,after$:null,horiz:!0,fromEnd:!1,barSize:1,_create:function(){var left,top,cursor,keyInc,keyDec,pos,self=this,o=this.options,ctrl$=this.element,out=util.htmlBuilder(),keys=$.ui.keyCode,grid=o.snap?[1*o.snap,1*o.snap]:!1,minLimit=o.noCollapse?0:1,timerId=null;if(2!==ctrl$.children().length)throw"Splitter must have exactly two children.";if("horizontal"!==o.orientation&&"vertical"!==o.orientation)throw"Orientation bad value";if("begin"!==o.positionedFrom&&"end"!==o.positionedFrom)throw"PositionedFrom bad value";if(o.minSize<minLimit&&(o.minSize=minLimit,debug.warn("Option minSize adjusted")),this.horiz="horizontal"===o.orientation,this.fromEnd="end"===o.positionedFrom,pos=this.horiz?"left":"top",this.before$=ctrl$.children().eq(0),this.after$=ctrl$.children().eq(1),ctrl$.addClass(C_SPLITTER+" resize"),"rtl"===ctrl$.css("direction")&&(ctrl$.addClass(C_RTL),this.horiz&&(this.before$=ctrl$.children().eq(1),this.after$=ctrl$.children().eq(0),this.fromEnd=!this.fromEnd)),ctrl$.parent(SEL_SPLITTER).length>0||this.before$.is(SEL_SPLITTER)||this.after$.is(SEL_SPLITTER))throw"Child of splitter cannot be a splitter";this.before$[0].id||(this.before$[0].id=(ctrl$[0].id||"splitter")+"_first"),this.after$[0].id||(this.after$[0].id=(ctrl$[0].id||"splitter")+"_second"),o.position<o.minSize&&(o.position=o.minSize),this.lastPos=o.position,o.snap&&(o.inc=o.snap),this._renderBar(out),this.bar$=$(out.toString()).insertAfter(ctrl$.children().eq(0)),this.barSize=this.horiz?this.bar$.width():this.bar$.height(),ctrl$.css({position:"relative"}).children().css({position:"absolute"}),this.horiz?(left=this.bar$.position()[pos],top=0,cursor="e-resize",this.fromEnd?(keyInc=keys.LEFT,keyDec=keys.RIGHT):(keyInc=keys.RIGHT,keyDec=keys.LEFT)):(left=0,top=this.bar$.position()[pos],cursor="s-resize",this.fromEnd?(keyInc=keys.UP,keyDec=keys.DOWN):(keyInc=keys.DOWN,keyDec=keys.UP)),this.bar$.css({left:left,top:top}).draggable({axis:self.horiz?"x":"y",containment:"parent",cancel:SEL_BUTTON,cursor:cursor,iframeFix:o.iframeFix,grid:grid,scroll:!1,drag:function(e,ui){var p;o.realTime&&(p=ui.position[pos],self.fromEnd&&(p=(self.horiz?ctrl$.width():ctrl$.height())-p-self.barSize),self._setPos(p,!1))},start:function(){self.bar$.addClass(C_ACTIVE)},stop:function(e,ui){var p=ui.position[pos];self.bar$.removeClass(C_ACTIVE),self.fromEnd&&(p=(self.horiz?ctrl$.width():ctrl$.height())-p-self.barSize),self._setPos(p,!1)}}).click(function(){$(this).find(SEL_THUMB).focus()}).find(SEL_BUTTON).click(function(){self._setPos(self._getPos(),!self._isCollapsed())}),this.bar$.find(SEL_THUMB).focus(function(){$(this).parent().addClass(C_FOCUSED+" "+C_ACTIVE)}).blur(function(){$(this).parent().removeClass(C_FOCUSED+" "+C_ACTIVE)}).keydown(function(e){var max,p1,kc=e.keyCode,p=null,collapsed=!1;return kc!==keyDec||o.collapsed?kc===keyInc&&(p=self._getPos(),0>p?(o.noCollapse||(collapsed=!0),p=0):p+=o.inc,max=self._getMaxPos(),p>max&&(p=max)):(p=self._getPos(),p-=o.inc,p<o.minSize&&o.noCollapse&&(p=o.minSize),0>p&&(p=0)),null!==p?(p1=p,self.fromEnd&&(p1=(self.horiz?ctrl$.width():ctrl$.height())-p1-self.barSize),self.bar$.css(pos,p1),timerId&&(clearTimeout(timerId),timerId=null),timerId=setTimeout(function(){timerId=null,self._setPos(p,collapsed)},100),!1):void 0}),this._on(!0,this._eventHandlers),o.disabled&&this._setOption("disabled",o.disabled),this.refresh()},_eventHandlers:{resize:function(event){var h,w,bounds,offset,o=this.options,ctrl$=this.element;if(event.target===ctrl$[0]){if(h=ctrl$.height(),w=ctrl$.width(),0===h||0===w)throw"Splitter needs to be in a component with size";offset=ctrl$.offset(),this.horiz?(ctrl$.children().each(function(){util.setOuterHeight($(this),h)}),this.fromEnd?(bounds=[offset.left+o.minSize,offset.top,offset.left+w-this.barSize,offset.top+h],(!o.dragCollapse||o.noCollapse)&&(bounds[2]-=o.minSize)):(bounds=[offset.left,offset.top,offset.left+w-this.barSize-o.minSize,offset.top+h],(!o.dragCollapse||o.noCollapse)&&(bounds[0]+=o.minSize+1))):(ctrl$.children().each(function(){util.setOuterWidth($(this),w)}),this.fromEnd?(bounds=[offset.left,offset.top+o.minSize,offset.left+w,offset.top+h-this.barSize],(!o.dragCollapse||o.noCollapse)&&(bounds[3]-=o.minSize)):(bounds=[offset.left,offset.top,offset.left+w,offset.top+h-this.barSize-o.minSize],(!o.dragCollapse||o.noCollapse)&&(bounds[1]+=o.minSize+1))),this._setPos(o.position,o.collapsed),this.bar$.draggable("option","containment",bounds),ctrl$.children(".resize").filter(":visible").trigger("resize"),event.stopPropagation()}}},_destroy:function(){this.element.removeClass(C_SPLITTER+" "+C_DISABLED+" "+C_RTL+" resize").children(SEL_BAR).remove()},refresh:function(){this.element.is(":visible")&&this.element.trigger("resize")},_setOption:function(key,value){var grid,minLimit,thumb$;if(this.options.noCollapse&&("collapsed"===key||"restoreText"===key||"collapseText"===key))return void debug.warn("Setting "+key+" option on noCollapse splitter has no effect.");if("orientation"===key||"positionedFrom"===key||"noCollapse"===key)throw"Readonly option: "+key;"position"===key?this._setPos(1*value,this._isCollapsed()):"collapsed"===key?this._setPos(this._getPos(),!!value):"snap"===key?(value=value?1*value:!1,this.options.snap=value,grid=value?[value,value]:!1,this.bar$.draggable("option","grid",grid),value&&(this.options.inc=value)):"inc"===key?(value=1*value,this.options.snap&&(value=this.options.snap),this.options.inc=value):"disabled"===key?(this.options.disabled=value,thumb$=this.bar$.find(SEL_THUMB),this.options.noCollapse?value?thumb$.removeAttr("tabindex"):thumb$.attr("tabindex","0"):(thumb$[0].disabled=value,value?thumb$.attr(TITLE,this.options.title):thumb$.attr(TITLE,this.options.collapsed?this.options.restoreText:this.options.collapseText)),this.bar$.draggable("option","disabled",value),value?(this.element.addClass(C_DISABLED),this.bar$.addClass(C_DISABLED),thumb$.attr("aria-disabled",!0)):(thumb$.removeAttr("aria-disabled"),this.bar$.removeClass(C_DISABLED),this.element.removeClass(C_DISABLED))):"minSize"===key?(minLimit=this.options.noCollapse?0:1,minLimit>value&&(value=minLimit,debug.warn("Option minSize adjusted")),this.options.minSize=value):$.Widget.prototype._setOption.apply(this,arguments),"title"===key?(this.bar$.attr(TITLE,value),(this.options.noCollapse||this.options.disabled)&&this.bar$.find(SEL_THUMB).attr(TITLE,value)):"restoreText"===key&&this.options.collapsed&&!this.options.disabled?this.bar$.find(SEL_BUTTON).attr(TITLE,value):"collapseText"!==key||this.options.collapsed||this.options.disabled?"iframeFix"===key?this.bar$.draggable("option","iframeFix",value):"dragCollapse"===key&&this.refresh():this.bar$.find(SEL_BUTTON).attr(TITLE,value)},_renderBar:function(out){var o=this.options,barClass=this.horiz?C_SPLITTER_H:C_SPLITTER_V;this.fromEnd&&(barClass+=" "+C_SPLITTER_END),o.noCollapse&&(o.collapsed=!1),o.collapsed&&(barClass+=" "+C_COLLAPSED),out.markup("<div").attr("class",barClass).optionalAttr(TITLE,o.title).markup("><div></div>"),o.noCollapse?out.markup("<span role='separator' class='"+C_THUMB+"' tabindex='0' aria-expanded='true'").optionalAttr(TITLE,o.title).markup("></span>"):out.markup("<button role='separator' class='"+C_THUMB+"' type='button'").attr("aria-expanded",!o.collapsed).optionalAttr(TITLE,o.collapsed?o.restoreText:o.collapseText).markup("></button>"),out.markup("</div>")},_getPos:function(){var ctrl$=this.element,pos=this.horiz?"left":"top",p=this.bar$.position()[pos];return this.fromEnd&&(p=(this.horiz?ctrl$.width():ctrl$.height())-p-this.barSize),p},_isCollapsed:function(){return this.bar$.hasClass(C_COLLAPSED)},_getMaxPos:function(){var o=this.options,ctrl$=this.element;return this.horiz?ctrl$.width()-this.barSize-o.minSize:ctrl$.height()-this.barSize-o.minSize},_setPos:function(position,collapsed){var max,total,child$,childSize,p,thumb$,o=this.options,ctrl$=this.element,pos=this.horiz?"left":"top",curCollapsed=this._isCollapsed(),curPos=this.lastPos;o.noCollapse&&(collapsed=!1),curCollapsed&&!collapsed&&(position=this.lastPos,position<o.minSize&&(position=o.minSize)),position<o.minSize?o.noCollapse?position=o.minSize:collapsed=!0:(max=this._getMaxPos(),position>max&&(position=max)),o.noCollapse&&0>=position&&(position=0),position>0&&(this.lastPos=position),collapsed&&(position=0,o.position=0),total=this.horiz?ctrl$.width():ctrl$.height(),p=position,this.fromEnd&&(p=total-position-this.barSize),this.bar$.css(pos,p),thumb$=this.bar$.find(SEL_THUMB),this.fromEnd?(child$=this.after$,childSize=total-p-this.barSize):(child$=this.before$,childSize=p),collapsed?(this.bar$.addClass(C_COLLAPSED),o.disabled||thumb$.attr("aria-expanded",!1).attr(TITLE,o.restoreText),child$.hide()):(o.noCollapse?child$.toggle(0!==position):(this.bar$.removeClass(C_COLLAPSED),o.noCollapse||o.disabled||thumb$.attr("aria-expanded",!0).attr(TITLE,o.collapseText),child$.show()),this.horiz?util.setOuterWidth(child$,childSize):util.setOuterHeight(child$,childSize)),this.fromEnd?(child$=this.before$,childSize=p):(child$=this.after$,childSize=total-p-this.barSize),this.horiz?util.setOuterWidth(child$,childSize):util.setOuterHeight(child$,childSize),o.noCollapse&&child$.toggle(0!==childSize),this.after$.css(pos,p+this.barSize+"px"),this.before$.css(pos,0),(!collapsed&&position!==curPos||curCollapsed!==collapsed)&&(o.collapsed=collapsed,o.position=position,ctrl$.children(".resize").filter(":visible").trigger("resize"),this._trigger("change",{},{position:o.position,collapsed:o.collapsed,lastPosition:this.lastPos}))}});var dialogCount=0,menuCount=0;$.apex.splitter.nextSplitter=function(reverse){var next$,allBars$,cur,inc=reverse?-1:1,focused$=$(document.activeElement);if(!(dialogCount>0||menuCount>0))return allBars$=$(SEL_SPLITTER+" >."+C_SPLITTER_H+","+SEL_SPLITTER+" >."+C_SPLITTER_V).filter(":visible").not(".ui-state-disabled").add(focused$),cur=allBars$.index(focused$),cur>=0&&(cur+=inc,reverse&&focused$.parent().is(SEL_BAR)&&(cur+=inc),cur>=0&&cur<allBars$.length&&(next$=allBars$.eq(cur))),(next$&&0===next$.length&&!focused$.parent().is(SEL_BAR)||focused$.is("html,body"))&&(next$=$(SEL_SPLITTER+" >."+C_SPLITTER_H+","+SEL_SPLITTER+" >."+C_SPLITTER_V).filter(":visible").not(".ui-state-disabled")[reverse?"last":"first"]()),next$&&next$.length>0?(next$.children(SEL_THUMB).focus(),!0):void 0},$(document).ready(function(){$(document.body).on("menubeforeopen",function(){menuCount+=1}).on("menuafterclose",function(){menuCount-=1}).on("dialogopen",function(){dialogCount+=1}).on("dialogclose",function(){dialogCount-=1})})}(apex.jQuery,apex.util,apex.debug);