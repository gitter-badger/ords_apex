!function(widget,$,undefined){widget.listManager=function(pSelector,pOptions){function _triggerRefresh(){gListManager.trigger("apexrefresh")}function refresh(){gListManager.trigger("apexbeforerefresh"),$(pSelector+"_ADD",apex.gPageContext$).val(""),$("option",gListManager).remove(),gListManager.change(),gListManager.trigger("apexafterrefresh")}function _callPopup(){return widget.util.callPopupLov(gOptions.ajaxIdentifier,{pageItems:$(gOptions.pageItemsToSubmit,apex.gPageContext$).add(gOptions.dependingOnSelector)},{filterOutput:gOptions.filterWithValue,filterValue:$(pSelector+"_ADD",apex.gPageContext$).val(),windowParameters:gOptions.windowParameters}),!1}function registerIconEvent(){$(pSelector+"_ADD_fieldset a",apex.gPageContext$).click(_callPopup)}var gOptions=$.extend({dependingOnSelector:null,optimizeRefresh:!0,pageItemsToSubmit:null,filterWithValue:!1,windowParameters:null},pOptions),gListManager=$(pSelector,apex.gPageContext$);$(pSelector,apex.gPageContext$).each(function(){widget.initPageItem(this.id,{enable:function(){var lFieldset;lFieldset=$x(this.id+"_fieldset"),$(":input",lFieldset).prop("disabled",!1).filter("[type!=button]").removeClass("apex_disabled"),registerIconEvent(),widget.util.enableIcon($(lFieldset),"#")},disable:function(){var lFieldset;lFieldset=$x(this.id+"_fieldset"),$("option:selected",$x(this.id)).attr("selected",!1),$(":input",lFieldset).prop("disabled",!0).filter("[type!=button]").addClass("apex_disabled"),widget.util.disableIcon($(lFieldset))},hide:function(){$("#"+this.id+"_fieldset",apex.gPageContext$).hide()},show:function(){$("#"+this.id+"_fieldset",apex.gPageContext$).show()},setValue:function(pValue){var lValueArray,lHtml;"undefined"!=typeof pValue&&(lValueArray=[],lValueArray=apex.util.toArray(pValue),$.each(lValueArray,function(key,value){value=apex.util.escapeHTML(value),lHtml+='<option value="'+value+'">'+value+"</option>"}),gListManager.find("option").remove().end().append(lHtml))},getValue:function(){var lReturn=[];return $("option",gListManager[0]).each(function(){lReturn[lReturn.length]=this.value}),lReturn},addValue:function(pValue){var lItem,i,lItems=pValue.split(","),lChanged=!1,lHtml="";for(i=0;i<lItems.length;i++)lItem=$.trim(lItems[i]),""!==lItem&&0===gListManager.find('option[value="'+lItem.replace(/"/g,'\\"')+'"]').length&&(lItem=apex.util.escapeHTML(lItem),lHtml='<option value="'+lItem+'">'+lItem+"</option>",gListManager.append(lHtml),lChanged=!0);lChanged&&gListManager.change()},removeValue:function(){var lSelectedOptions$=gListManager.find(":selected");lSelectedOptions$.length>0&&(lSelectedOptions$.remove(),gListManager.change())}})}),registerIconEvent(),gOptions.dependingOnSelector&&$(gOptions.dependingOnSelector,apex.gPageContext$).change(_triggerRefresh),gListManager.bind("apexrefresh",refresh),gListManager.change(function(e){e.originalEvent!==undefined&&e.stopImmediatePropagation()}),window.flowSelectArray||(window.flowSelectArray=[]),window.flowSelectArray[window.flowSelectArray.length]=gListManager.attr("id")}}(apex.widget,apex.jQuery);