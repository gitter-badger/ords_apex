!function($,lang,util){"use strict";var C_COLLAPSIBLE="a-Collapsible",C_COLLAPSIBLE_CONTENT=C_COLLAPSIBLE+"-content",C_COLLAPSIBLE_HEADING=C_COLLAPSIBLE+"-heading",C_IS_EXPANDED="is-expanded",C_IS_COLLAPSED="is-collapsed",C_ICON="a-Icon",C_ICON_COLLAPSIBLE=C_ICON+" "+C_COLLAPSIBLE+"-icon",SEL_C=".",SEL_COLLAPSIBLE=SEL_C+C_COLLAPSIBLE,A_CONTROLS="aria-controls",A_EXPANDED="aria-expanded",A_HIDDEN="aria-hidden";$.widget("apex.collapsible",{version:"5.0",widgetEventPrefix:"collapsible",baseId:null,heading$:null,controllingElement$:null,content$:null,isContentIdSetByWidget:!1,isHeadingIdSetByWidget:!1,isControllingElementALink:!1,core:null,expandedClass:C_IS_EXPANDED,collapsedClass:C_IS_COLLAPSED,options:{heading:"h1,h2,h3,h4,h5,h6",controllingElement:"button,a",content:null,collapsed:!0,doCollapse:!0,universalTheme:!1,expandedClass:null,collapsedClass:null},_create:function(){var lContentId,lHeadingId,me=this,out=util.htmlBuilder(),o=this.options,lCollapsibleCount=$(SEL_COLLAPSIBLE).length;this.baseId=this.element.id||"a_Collapsible"+(lCollapsibleCount+1),this.element.addClass(C_COLLAPSIBLE),o.expandedClass&&(this.expandedClass+=" "+o.expandedClass),o.collapsedClass&&(this.collapsedClass+=" "+o.collapsedClass),this.heading$=this.element.find(o.heading).first(),this.heading$.addClass(C_COLLAPSIBLE_HEADING),this.controllingElement$=this.element.find(o.controllingElement).first(),this.controllingElement$.text()||(lHeadingId=this.heading$[0].id,lHeadingId||(lHeadingId=this.baseId+"_heading",this.heading$[0].id=lHeadingId,this.isHeadingIdSetByWidget=!0),this.controllingElement$.attr("aria-labelledby",lHeadingId)),this.content$=o.universalTheme?o.content:o.content?this.element.find(o.content).first():this.heading$.next(),this.content$.addClass(C_COLLAPSIBLE_CONTENT),lContentId=this.content$[0].id,lContentId||(lContentId=this.baseId+"_content",this.content$[0].id=lContentId,this.isContentIdSetByWidget=!0),this.controllingElement$.attr(A_CONTROLS,lContentId).attr(A_EXPANDED,!o.collapsed),this.controllingElement$.is("a")&&(this.isControllingElementALink=!0),out.markup("<span").attr("class",C_ICON_COLLAPSIBLE).attr("aria-hidden",!0).markup(">").markup("</span>"),this.controllingElement$.prepend(out.toString()),this.isControllingElementALink&&(this.controllingElement$.attr("role","button"),this._on(this.controllingElement$,{keypress:function(pEvent){pEvent.which===$.ui.keyCode.SPACE&&(me.core.toggle(),pEvent.preventDefault())}})),this.core=ToggleCore({key:me.baseId,controllingElement:this.controllingElement$,content:me.element,contentClassExpanded:this.expandedClass,contentClassCollapsed:this.collapsedClass,defaultExpandedPreference:!o.collapsed,useSessionStorage:!1,onExpand:function(){me.content$.attr(A_HIDDEN,"false"),o.doCollapse&&me.content$.show(),me.controllingElement$.attr(A_EXPANDED,"true"),me._trigger("expand")},onCollapse:function(){me.content$.attr(A_HIDDEN,"true"),o.doCollapse&&me.content$.hide(),me.controllingElement$.attr(A_EXPANDED,"false"),me._trigger("collapse")}}),this.core.initialize()},_destroy:function(){this.element.removeClass(C_COLLAPSIBLE+" "+this.collapsedClass+" "+this.expandedClass),this.controllingElement$.removeAttr(A_EXPANDED).removeAttr(A_CONTROLS),this._off(this.controllingElement$),this.isContentIdSetByWidget&&this.content$.removeAttr("id"),this.isHeadingIdSetByWidget&&this.heading$.removeAttr("id"),this.heading$.removeClass(C_COLLAPSIBLE_HEADING),this.content$.removeAttr(A_HIDDEN).removeClass(C_COLLAPSIBLE_CONTENT),this.options.doCollapse&&this.content$.show()},expand:function(){this.core.expand()},collapse:function(){this.core.collapse()},toggle:function(){this.core.toggle()},getCore:function(){return this.core}})}(apex.jQuery,apex.lang,apex.util);