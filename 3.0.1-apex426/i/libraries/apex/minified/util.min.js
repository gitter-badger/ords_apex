apex.util={},function(util,$,undefined){"use strict";util.toArray=function(pValue,pSeparator){var lSeparator,lReturn=[];return"string"==typeof pValue?(lSeparator=pSeparator===undefined?":":pSeparator,lReturn=pValue.split(lSeparator)):lReturn=$.makeArray(pValue),lReturn},util.escapeHTML=function(pValue){return pValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},util.escapeRegExp=function(pValue){var lReturn="";return pValue?pValue.replace(/([\.\$\*\+\-\?\(\)\{\}\|\^\[\]\\])/g,"\\$1"):lReturn};var CSS_META_CHARS_REGEXP=new RegExp("(["+util.escapeRegExp(" !#$%&'()*+,./:;<=>?@[\\]^`{|}~\"")+"])","g");util.escapeCSS=function(pValue){var lReturn="";return pValue?pValue.replace(CSS_META_CHARS_REGEXP,"\\$1"):lReturn},util.escapeHTMLContent=util.escapeHTMLAttr=function(s){return s=""+s,util.escapeHTML(s)};var htmlBuilderPrototype={markup:function(t){return this.html+=t,this},attr:function(name,value){return 1===arguments.length&&(value=name,name=null),name&&(this.html+=" ",this.html+=name,this.html+="='"),this.html+=util.escapeHTMLAttr(value),name&&(this.html+="'"),this},optionalAttr:function(name,value){return value&&"object"!=typeof value&&(this.html+=" ",this.html+=name,this.html+="='",this.html+=util.escapeHTMLAttr(value),this.html+="'"),this},optionalBoolAttr:function(name,value){return value===!0&&(this.html+=" ",this.html+=name),this},content:function(t){return this.html+=util.escapeHTMLContent(t),this},clear:function(){this.html=""},toString:function(){return this.html}};util.htmlBuilder=function(){var that=Object.create(htmlBuilderPrototype);return that.clear(),that},util.makeApplicationUrl=function(pArgs){var i,lUrl="f?p=";if(lUrl+=pArgs.appId||$v("pFlowId"),lUrl+=":",lUrl+=pArgs.pageId||$v("pFlowStepId"),lUrl+=":",lUrl+=pArgs.session||$v("pInstance"),lUrl+=":",lUrl+=pArgs.request||$v("pRequest"),lUrl+=":",lUrl+=pArgs.debug||$v("pdebug")||"",lUrl+=":",lUrl+=pArgs.clearCache||"",lUrl+=":",pArgs.itemNames&&(lUrl+=pArgs.itemNames.join(",")),lUrl+=":",pArgs.itemValues)for(i=0;i<pArgs.itemValues.length;i++)i>0&&(lUrl+=","),lUrl+=encodeURIComponent(pArgs.itemValues[i]);return lUrl+=":",lUrl+=pArgs.printerFriendly||""},util.showSpinner=function(pContainer,pOptions){var lSpinner$,lTop,lBottom,lYPosition,lYOffset,out=util.htmlBuilder(),lContainer$=$(pContainer?pContainer:"body"),lWindow$=$(window),lContainer=lContainer$.offset(),lOptions=$.extend({alert:apex.lang.getMessage("APEX.PROCESSING")},pOptions),lViewport={top:lWindow$.scrollTop(),left:lWindow$.scrollLeft()};return lViewport.bottom=lViewport.top+lWindow$.height(),lViewport.right=lViewport.left+lWindow$.width(),lContainer.bottom=lContainer.top+lContainer$.outerHeight(),lContainer.right=lContainer.left+lContainer$.outerWidth(),lTop=lContainer.top>lViewport.top?lContainer.top:lViewport.top,lBottom=lContainer.bottom<lViewport.bottom?lContainer.bottom:lViewport.bottom,lYPosition=(lBottom-lTop)/2,lYOffset=lViewport.top-lContainer.top,lYOffset>0&&(lYPosition+=lYOffset),out.markup("<span").attr("class","u-Processing").attr("role","alert").markup(">").markup("<span").attr("class","u-Processing-spinner").markup(">").markup("</span>").markup("<span").attr("class","u-VisuallyHidden").markup(">").content(lOptions.alert).markup("</span>").markup("</span>"),lSpinner$=$(out.toString()),lSpinner$.appendTo(lContainer$),lSpinner$.position({my:"center",at:"left+50% top+"+lYPosition+"px",of:lContainer$,collision:"fit"}),lSpinner$},util.delayLinger=function(){function getScope(scopeName){var s=scopes[scopeName];return s||(s={count:0,timer:null},scopes[scopeName]=s),s}function removeScope(scopeName){delete scopes[scopeName]}var scopes={},busyDelay=200,busyLinger=1e3;return{start:function(pScopeName,pAction){var s=getScope(pScopeName);s.count+=1,1===s.count&&null===s.timer&&(s.start=(new Date).getTime(),s.timer=setTimeout(function(){s.timer=null,pAction()},busyDelay))},finish:function(pScopeName,pAction){var elapsed,s=getScope(pScopeName);if(0===s.count)throw"delayLinger.finish called before start for scope "+pScopeName;elapsed=(new Date).getTime()-s.start,s.count-=1,0===s.count&&(null===s.timer?busyLinger>elapsed?setTimeout(function(){pAction(),removeScope(pScopeName)},busyLinger-elapsed):(pAction(),removeScope(pScopeName)):(clearTimeout(s.timer),s.timer=null,removeScope(pScopeName)))}}}(),util.setOuterHeight=function($e,h){$.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","marginTop","marginBottom"],function(i,p){var v=parseInt($e.css(p),10);isNaN(v)||(h-=v)}),$e.height(h)},util.setOuterWidth=function($e,w){$.each(["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","marginLeft","marginRight"],function(i,p){var v=parseInt($e.css(p),10);isNaN(v)||(w-=v)}),$e.width(w)},util.getDateFromISO8601String=function(pDateStr){var date,year,month,day,hr=0,min=0,sec=0,ms=0,m=/^(\d\d\d\d)-(\d\d)-(\d\d)(T(\d\d):(\d\d)(:(\d\d)(.(\d\d\d))?)?Z?)?$/.exec(pDateStr);if(!m)throw"Invalid date format";return year=parseInt(m[1],10),month=parseInt(m[2],10)-1,day=parseInt(m[3],10),m[5]&&(hr=parseInt(m[5],10),min=parseInt(m[6],10),m[8]&&(sec=parseInt(m[8],10),m[10]&&(ms=parseInt(m[10],10)))),date=new Date(Date.UTC(year,month,day,hr,min,sec,ms))};var gTopApex=null;util.getTopApex=function(){function get(w){var a;try{a=w.apex||null}catch(ex){a=null}return a}var curWindow,lastApex;if(null!==gTopApex)return gTopApex;if(gTopApex=get(top),null!==gTopApex)return gTopApex;for(curWindow=window;lastApex=get(curWindow),null!==lastApex&&curWindow.parent&&curWindow.parent!==curWindow;)gTopApex=lastApex,curWindow=curWindow.parent;return gTopApex}}(apex.util,apex.jQuery);