window.pageDesigner={},function(a,b,c,d,e,f,g,h){"use strict";function i(){a.getCurrentPageId()!==b.trim(b("#go_to_page").val())&&b("#go_to_page").val(a.getCurrentPageId())}function j(a){apex.debug.getLevel()===apex.debug.LOG_LEVEL.ENGINE_TRACE&&console.time(a)}function k(a){apex.debug.getLevel()===apex.debug.LOG_LEVEL.ENGINE_TRACE&&console.timeEnd(a)}function l(a){var b,c=/^[0-9:]+$/,d=null;return"#"===a.charAt(0)&&(a=a.substring(1)),c.test(a)&&(b=a.split(":"),2===b.length&&(d={typeId:b[0],componentId:b[1]})),d}function m(){function g(d){var e=b("#a_PageDesigner");c.delayLinger.start("main",function(){m=c.showSpinner(e),e.addClass(r)}),b.each(["pd-undo","pd-redo","pd-save-page","pd-save-run-page"],function(a,b){apex.actions.disable(b)}),b(".a-TreeView").treeView("disable"),b("#glv").gridlayout("disable"),b("#pe").propertyEditor("disable"),a.saveChanges(function(a){b.each(["pd-undo","pd-redo","pd-save-page","pd-save-run-page"],function(a,b){apex.actions.enable(b)}),b(".a-TreeView").treeView("enable"),b("#glv").gridlayout("enable"),b("#pe").propertyEditor("enable"),c.delayLinger.finish("main",function(){m.remove(),e.removeClass(r)}),d(a)})}function j(b){var c;for(c=0;c<b.length;c++)b[c].hasOwnProperty("menu")?j(b[c].menu.items):b[c].action=function(){a.hasChanged()?window.confirm(f.msg("BEFORE_AJAX_UNSAVED_CHANGES"))&&e.redirect(this.href):e.redirect(this.href)}}function k(){var b=a.getPageLockState();b?b.isLockedByCurrentUser?o.attr("title",f.msg("PAGE_LOCKED_BY_YOU")).attr("aria-label",f.msg("PAGE_LOCKED_BY_YOU")).removeClass("is-locked").addClass("is-active is-locked-by-self").find(".a-Icon")[0].className="a-Icon icon-lock":o.attr("title",f.format("PAGE_LOCKED_BY",b.owner)).attr("aria-label",f.format("PAGE_LOCKED_BY",b.owner)).removeClass("is-locked-by-self").addClass(" is-active is-locked").find(".a-Icon")[0].className="a-Icon icon-lock-user":o.attr("title",f.msg("PAGE_UNLOCKED")).attr("aria-label",f.msg("PAGE_UNLOCKED")).removeClass("is-active is-locked is-locked-by-self").find(".a-Icon")[0].className="a-Icon icon-unlock"}var l,m,n=b("#createMenu_menu"),o=(b("<div id='pdSettingsMenu'></div>").appendTo("body"),b("#button-lock")),p=b("#lockDialog"),s=b("#runDialogOpenMsg"),t=b("#runDialogFocusMsg");apex.commandHistory.setErrorHandler(function(a,b){var c={execute:"CMD.EXECUTE_FAILED",undo:"CMD.UNDO_FAILED",redo:"CMD.REDO_FAILED"};f.showError(f.format(c[a],b.label()))}),apex.actions.add([{name:"pd-undo",label:null,title:null,icon:"icon-undo",shortcut:"Ctrl+Z",action:function(){apex.commandHistory.undo()}},{name:"pd-redo",label:null,title:null,icon:"icon-redo",shortcut:"Ctrl+Y",action:function(){apex.commandHistory.redo()}},{name:"pd-save-page",label:null,disabled:!0,shortcut:"Ctrl+Alt+S",action:function(a){b(a.target).closest(".a-Property").length&&b("#pe").propertyEditor("saveProperty"),g(function(a){apex.commandHistory.clear(),b(document).trigger("commandHistoryChange"),a.error?"NO_CHANGES"!==a.error&&f.showError(a.error):f.showSuccess(f.msg("CHANGES_SAVED"))})}},{name:"pd-save-run-page",label:null,title:null,icon:"icon-run-page",disabled:!0,shortcut:"Ctrl+Alt+R",action:function(h,i){function j(){return c.makeApplicationUrl({pageId:"RUN_PAGE",request:"BRANCH_TO_PAGE_ACCEPT",debug:"NO",itemNames:["FB_FLOW_ID","FB_FLOW_PAGE_ID","F4000_P1_FLOW"],itemValues:[o,p,o]})}function k(a,b){a.dialog({modal:!0,title:f.msg(b?"FOCUS_PAGE":"RUN_PAGE"),closeText:d.getMessage("APEX.DIALOG.CLOSE"),dialogClass:"ui-dialog--pageDesignerAlert",width:400,height:240,minWidth:400,minHeight:240,position:{my:"right top",at:"right-20 bottom+20",of:i},buttons:[{text:f.msg("TRY_AGAIN"),"class":"a-Button--hot",click:function(){a.dialog("close"),b?e.openInNewWindow("",apex.builder.getAppUnderTestWindowName(o)):m()}}]})}function l(){n=!1,b(window).on("blur.runcheck",function(){b(window).off(".runcheck"),n=!0}),q=setTimeout(function(){q=null,n||k(t,!0),b(window).off(".runcheck")},800)}function m(){var c=a.getComponents(a.COMP_TYPE.PAGE)[0],d={},g=$v("P0_WINDOW_MGMT_MODE")||"FOCUS";a.isGlobalPage()?f.showSuccess(f.msg("CHANGES_SAVED_GLOBAL_PAGE")):"NORMAL"===c.getProperty(a.PROP.PAGE_MODE).getValue()?"NONE"===g||/^4\d\d\d$/.test(o)?e.redirect(j()):("BROWSER"===g?d.favorTabbedBrowsing=!0:l(),e.openInNewWindow(j(),apex.builder.getAppUnderTestWindowName(o),d)||(clearTimeout(q),b(window).off(".runcheck"),k(s))):f.showSuccess(f.msg("CHANGES_SAVED_DIALOG_PAGE"))}var n,o=a.getCurrentAppId(),p=a.getCurrentPageId(),q=null;b(h.target).closest(".a-Property").length&&b("#pe").propertyEditor("saveProperty"),a.hasChanged()?g(function(a){apex.commandHistory.clear(),b(document).trigger("commandHistoryChange"),a.error?"NO_CHANGES"!==a.error&&f.showError(a.error):m()}):m()}}]),b(document).on("commandHistoryChange",function(){var a,b;b=apex.actions.lookup("pd-undo"),b.disabled=!apex.commandHistory.canUndo(),apex.commandHistory.canUndo()?(a=d.formatMessageNoEscape("PD.UNDO",apex.commandHistory.undoLabel()),b.title=a):b.title="",apex.actions.update("pd-undo"),b=apex.actions.lookup("pd-redo"),b.disabled=!apex.commandHistory.canRedo(),apex.commandHistory.canRedo()?(a=d.formatMessageNoEscape("PD.REDO",apex.commandHistory.redoLabel()),b.title=a):b.title="",apex.actions.update("pd-redo")}).trigger("commandHistoryChange"),o.attr("disabled",!0).click(function(){var c,e,g=!1,h=a.getPageLockState();e=[{text:f.msg("CANCEL"),click:function(){p.dialog("close")}}],b("#lockDialogIntroUnlocked, #lockDialogIntroLocked, #lockDialogIntroOwned").hide(),apex.item("P4500_DLG_LOCK_OWNER").hide(),!h||h.isLockedByCurrentUser?(e.push({click:function(){p.dialog("close"),a.lockPage($v("P4500_DLG_LOCK_COMMENT")).fail(function(a){f.showError(a)}).always(function(){k()})}}),h?(c=f.msg("UNLOCK_PAGE"),e[1].text=f.msg("APPLY_CHANGES"),b("#lockDialogIntroOwned").show(),e.push({text:f.msg("UNLOCK"),"class":"a-Button--hot",click:function(){p.dialog("close"),a.unlockPage().fail(function(a){f.showError(a)}).always(function(){k()})}})):(c=f.msg("LOCK_PAGE"),e[1].text=f.msg("LOCK"),e[1]["class"]="a-Button--hot",b("#lockDialogIntroUnlocked").show())):(c=f.msg("PAGE_LOCKED"),b("#lockDialogIntroLocked").show(),apex.item("P4500_DLG_LOCK_OWNER").show(),$s("P4500_DLG_LOCK_OWNER",h.owner),g=!0,e[0].text=f.msg("OK")),b("#P4500_DLG_LOCK_COMMENT").val(h.comment).attr("readOnly",g),p.dialog({modal:!0,title:c,closeText:d.getMessage("APEX.DIALOG.CLOSE"),dialogClass:"ui-dialog--pageDesignerLock",width:600,height:340,minHeight:340,minWidth:600,buttons:e})}),n.on("menucreate",function(){var a=n.menu("find","teamDev");a&&(a.hide=!gTeamDevEnabled),j(n.menu("option").items)}),n.on("apexafterclosedialog",function(a,b){b.hasOwnProperty("FB_FLOW_PAGE_ID")&&f.goToPage(b.FB_FLOW_PAGE_ID)}),gTeamDevEnabled&&(l=b("<div id='teamDevMenu'></div>").appendTo("body"),l.menu({menubar:!1,items:[{type:"action",labelKey:"PD.FEATURES",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"9000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_MODULE","IRLT_PERCENT_COMPLETE"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"100"]}))}},{type:"action",labelKey:"PD.TODOS",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"3000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_PCT_COMPLETE"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"100"]}))}},{type:"action",labelKey:"PD.BUGS",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"3500",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_BUG_PCT_COMPLETE"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"100"]}))}},{type:"action",labelKey:"PD.FEEDBACK_ENTRIES",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"8000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_FEEDBACK_STATUS_ID"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"3"]}))}}],beforeOpen:function(a,b){var c,d,e=b.menu.items,g=[["FEATURES_N","features"],["TODOS_N","todos"],["BUGS_N","bugs"],["FEEDBACK_ENTRIES_N","feedback"]];for(c=0;c<g.length;c++)d=g[c],q[d[1]]!==h&&(e[c].label=f.format(d[0],q[d[1]]),delete e[c].labelKey)}})),b("#button-comments").prop("disabled",!0),b("#go_to_page").on("keypress",function(a){13===a.which&&f.goToPage(b("#go_to_page").val())}).on("focus",function(){this.select()}),b("#a_PageDesigner").on("focusin",function(){i()}),b("#go_to_page_button").click(function(){f.goToPage(b("#go_to_page").val())}),b("#go_to_page_lov").on("click",function(){var d=c.htmlBuilder(),e={columnDefinitions:[{name:"id",title:f.msg("PAGE_NUMBER")},{name:"name",title:f.msg("PAGE_NAME")},{name:"userInterface",title:f.msg("USER_INTERFACE")},{name:"group",title:f.msg("GROUP")}],filters:[{name:"show",title:f.msg("PAGE_PICKER.SHOW"),type:"buttonset",defaultValue:"all",lov:[{display:f.msg("ALL_PAGES"),value:"all"},{display:f.msg("PAGE_PICKER.RECENTLY_EDITED"),value:"recent"}]},{name:"search",title:f.msg("SEARCH"),type:"search"}],filterLov:function(b,c){var d={};"current_ui"===b.show?d={show:"user_interface_id",id:a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.USER_INTERFACE).getValue()}:"current_group"===b.show?d={show:"group_id",id:a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.PAGE_GROUP).getValue()}:"recent"===b.show&&(d={show:"recent"}),a.getPagesLov(d,function(a){c(a,b.search)},"Y")}};a.getCurrentPageId()!==h&&(a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.PAGE_GROUP).getValue()&&e.filters[0].lov.unshift({display:f.msg("CURRENT_GROUP"),value:"current_group"}),e.filters[0].lov.unshift({display:f.msg("CURRENT_UI"),value:"current_ui"}),e.filters[0].defaultValue="current_ui"),d.markup("<div").attr("id","goToPageDlg").attr("title",f.msg("PAGE_FINDER")).markup(">").markup("</div>"),b(d.toString()).lovDialog({modal:!0,minWidth:750,height:500,filters:e.filters,columnDefinitions:e.columnDefinitions,filterLov:e.filterLov,dialogClass:f.CSS.DIALOG_FLUSH_BODY,resizable:!1,multiValue:!1,valueSelected:function(a,b){f.goToPage(b.id)}})}),b(document).on("modelConfigLoaded",function(){a.getComponentType(a.COMP_TYPE.BREADCRUMB).editUrl="f?p=4000:287:%session%:::RP,287:FB_FLOW_ID,FB_FLOW_PAGE_ID,P287_PAGE,F4000_P287_MENU_ID:%application_id%,%page_id%,%page_id%,%pk_value%",a.getComponentType(a.COMP_TYPE.LIST).editUrl="f?p=4000:4050:%session%:::RP,4050:FB_FLOW_ID,FB_FLOW_PAGE_ID,F4000_P4050_LIST_ID:%application_id%,%page_id%,%pk_value%"}),b(document).on("modelReady",function(){(!a.isPageReadOnly()||a.getPageLockState())&&(o.attr("disabled",!1),k()),b.each(["pd-save-page","pd-save-run-page"],function(a,b){apex.actions.enable(b)}),b(document).one("modelCleared",function(){apex.commandHistory.clear(),b(document).trigger("commandHistoryChange"),o.attr("disabled",!0),b.each(["pd-save-page","pd-save-run-page"],function(a,b){apex.actions.disable(b)}),b("#button-comments").prop("disabled",!0).find(".a-Button-badge").text(""),gTeamDevEnabled&&(b("#menu-team-dev").prop("disabled",!0).find(".a-Button-badge").text(""),q={})})})}function n(){var a=b('<span class="a-AlertBadge"></span>').appendTo(b('#editor_tabs a[href="#messages"]'));b("#messages-container").peMessagesView({badge:a})}function o(){var a=b("#search-container").peSearch();b("#P4500_LOCAL_SEARCH,#P4500_MATCH_CASE,#P4500_IS_REGEXP").on("change",function(){var b=$v("P4500_LOCAL_SEARCH"),d=("Y"===$v("P4500_MATCH_CASE")?"":"i")+"g",e="Y"===$v("P4500_IS_REGEXP");""!==b?(b=e?new RegExp(b,d):new RegExp(c.escapeRegExp(b),d),a.peSearch("search",b)):a.peSearch("clear")}),b("#CLEAR_PAGE_SEARCH").on("click",function(){$s("P4500_LOCAL_SEARCH","","",!0),$s("P4500_MATCH_CASE","","",!0),$s("P4500_IS_REGEXP","","",!0),a.peSearch("clear")}),b(document).on("pageSearch",function(a,c){b("#editor_tabs").tabs({active:2}),$s("P4500_MATCH_CASE","","",!0),$s("P4500_IS_REGEXP","","",!0),$s("P4500_LOCAL_SEARCH",c)})}var p,q,r="is-processing";f.CSS={IS_ERROR:"is-error",IS_WARNING:"is-warning",IS_CONDITIONAL:"is-conditional",DIALOG_FLUSH_BODY:"ui-dialog-flushBody"},f.SETTINGS={COMPONENT_TITLE:{LABEL:"l",NAME:"n"}},f.settingsState={componentTitle:f.SETTINGS.COMPONENT_TITLE.NAME},f.msg=function(a){return d.getMessage("PD."+a)},f.format=function(a){var b=f.msg(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.format.apply(this,c)},f.tooltipContentForComponent=function(b){function c(a,c){var d,e=b.getProperty(a);!e||c!==h&&e.getValue()===c||(d=e.getDisplayValue(),""!==d&&l.markup("<li><span class='tt-label'>").content(e.getMetaData().prompt).markup(": </span><span class='tt-value'>").content(d).markup("</span></li>"))}function d(){var d=b.getProperty(a.PROP.CONDITION_TYPE);c(a.PROP.WHEN_BUTTON_PRESSED),d&&""!==d.getValue()&&(c(a.PROP.CONDITION_TYPE),c(a.PROP.CONDITION_SQL_STATEMENT),c(a.PROP.CONDITION_SQL_EXPRESSION),c(a.PROP.CONDITION_PLSQL_EXPRESSION),c(a.PROP.CONDITION_PLSQL_FUNCTION_BODY),c(a.PROP.CONDITION_VALUE1),c(a.PROP.CONDITION_ITEM1),c(a.PROP.CONDITION_LIST),c(a.PROP.CONDITION_PREFERENCE),c(a.PROP.CONDITION_PAGE),c(a.PROP.CONDITION_PAGES),c(a.PROP.CONDITION_TEXT),c(a.PROP.CONDITION_VALUE2),c(a.PROP.CONDITION_ITEM2),c(a.PROP.CONDITION_TEXT2)),c(a.PROP.AUTHORIZATION_SCHEME),c(a.PROP.BUILD_OPTION)}function e(){c(a.PROP.GRID_NEW_GRID,"N"),c(a.PROP.GRID_NEW_ROW,"N"),c(a.PROP.GRID_COLUMN,""),c(a.PROP.GRID_NEW_COLUMN,"N"),c(a.PROP.GRID_COLUMN_SPAN,"")}function f(){var d=b.getProperty(a.PROP.WHEN_TYPE);c(a.PROP.EVENT),c(a.PROP.CUSTOM_EVENT),d&&""!==d.getValue()&&(c(a.PROP.WHEN_REGION),c(a.PROP.WHEN_BUTTON),c(a.PROP.WHEN_ITEMS),c(a.PROP.WHEN_DOM_OBJECT),c(a.PROP.WHEN_JQUERY_SELECTOR),c(a.PROP.WHEN_JAVASCRIPT_EXPRESSION))}function g(){var d=b.getProperty(a.PROP.AFFECTED_TYPE);d&&""!==d.getValue()&&(c(a.PROP.AFFECTED_REGION),c(a.PROP.AFFECTED_BUTTON),c(a.PROP.AFFECTED_ITEMS),c(a.PROP.AFFECTED_DOM_OBJECT),c(a.PROP.AFFECTED_JQUERY_SELECTOR),c(a.PROP.AFFECTED_JAVASCRIPT_EXPRESSION),("TRIGGERING_ELEMENT"===d.getValue()||"EVENT_SOURCE"===d.getValue())&&c(a.PROP.AFFECTED_TYPE))}function i(){c(a.PROP.COMPUTATION_STATIC_VALUE),c(a.PROP.COMPUTATION_SQL_STATEMENT),c(a.PROP.COMPUTATION_SQL_COLON),c(a.PROP.COMPUTATION_SQL_EXPRESSION),c(a.PROP.COMPUTATION_PLSQL_EXPRESSION),c(a.PROP.COMPUTATION_PLSQL_FUNCTION_BODY),c(a.PROP.COMPUTATION_ITEM_VALUE),c(a.PROP.COMPUTATION_PREFERENCE_VALUE)}function j(){var d=b.getProperty(a.PROP.VALIDATION_REGION).getValue();""===d?(c(a.PROP.VALIDATION_TYPE),c(a.PROP.VAL_SQL_STATEMENT),c(a.PROP.VAL_SQL_EXPRESSION),c(a.PROP.VAL_PLSQL_EXPRESSION),c(a.PROP.VAL_PLSQL_FUNCTION_BODY_BOOLEAN),c(a.PROP.VAL_PLSQL_FUNCTION_BODY_VARCHAR2),c(a.PROP.VAL_PLSQL),c(a.PROP.VAL_ITEM),c(a.PROP.VAL_VALUE),c(a.PROP.VAL_REGULAR_EXPRESSION)):(c(a.PROP.VALIDATION_REGION),c(a.PROP.REGION_VALIDATION_TYPE),c(a.PROP.REGION_VAL_SQL_STATEMENT),c(a.PROP.REGION_VAL_SQL_EXPRESSION),c(a.PROP.REGION_VAL_PLSQL_EXPRESSION),c(a.PROP.REGION_VAL_PLSQL_FUNCTION_BODY_BOOLEAN),c(a.PROP.REGION_VAL_PLSQL_FUNCTION_BODY_VARCHAR2),c(a.PROP.REGION_VAL_PLSQL),c(a.PROP.REGION_VAL_COLUMN),c(a.PROP.REGION_VAL_VALUE),c(a.PROP.REGION_VAL_REGULAR_EXPRESSION)),c(a.PROP.ALWAYS_EXECUTE)}var k=b.typeId,l=apex.util.htmlBuilder();return k===a.COMP_TYPE.PAGE?c(a.PROP.TITLE):k===a.COMP_TYPE.REGION?(c(a.PROP.REGION_TYPE),e()):k===a.COMP_TYPE.PAGE_ITEM?(c(a.PROP.ITEM_LABEL),c(a.PROP.ITEM_TYPE),e()):k===a.COMP_TYPE.BUTTON?(c(a.PROP.BUTTON_LABEL),c(a.PROP.BUTTON_ACTION),e()):k===a.COMP_TYPE.DA_EVENT?f():k===a.COMP_TYPE.DA_ACTION?g():k===a.COMP_TYPE.VALIDATION?j():k===a.COMP_TYPE.PAGE_PROCESS?c(a.PROP.PAGE_PROCESS_TYPE):k===a.COMP_TYPE.PAGE_COMPUTATION?i():k===a.COMP_TYPE.BRANCH?(c(a.PROP.BRANCH_TYPE),c(a.PROP.TARGET),c(a.PROP.BRANCH_PAGE_NUMBER),c(a.PROP.BRANCH_ACCEPT_REQUEST),c(a.PROP.BRANCH_ITEM)):k===a.COMP_TYPE.IR_COLUMN?(c(a.PROP.COLUMN_HEADING),c(a.PROP.IR_COLUMN_DISPLAY_TYPE)):k===a.COMP_TYPE.CLASSIC_RPT_COLUMN?(c(a.PROP.COLUMN_HEADING),c(a.PROP.CLASSIC_REPORT_COLUMN_TYPE)):k===a.COMP_TYPE.TAB_FORM_COLUMN&&(c(a.PROP.COLUMN_HEADING),c(a.PROP.TAB_FORM_COLUMN_TYPE)),d(),l.toString()?"<ul class='tt-list'>"+l.toString()+"</ul>":null},f.getComponentIconClass=function(a,b){return/^PLUGIN_/.test(b)?"icon-"+a+"-plugin":"icon-"+a+"-"+b.toLowerCase().replace(/_/g,"-")},f.isConditional=function(b){function c(a){var c=b.getProperty(a);return c&&""!==c.getValue()}return c(a.PROP.CONDITION_TYPE)||c(a.PROP.AUTHORIZATION_SCHEME)||c(a.PROP.BUILD_OPTION)||c(a.PROP.WHEN_BUTTON_PRESSED)},f.observerIsConditional=function(b,c,d){a.observer(b,{components:c,events:[a.EVENT.CHANGE],properties:[a.PROP.CONDITION_TYPE,a.PROP.AUTHORIZATION_SCHEME,a.PROP.BUILD_OPTION,a.PROP.WHEN_BUTTON_PRESSED]},d)},f.isDisplayed=function(c){var d,e=!0;return c.isOnGlobalPage()&&(d=c.getProperty(a.PROP.CONDITION_TYPE).getValue(),"CURRENT_PAGE_EQUALS_CONDITION"===d?e=c.getProperty(a.PROP.CONDITION_PAGE).getValue()===a.getCurrentPageId():"CURRENT_PAGE_NOT_EQUAL_CONDITION"===d?e=c.getProperty(a.PROP.CONDITION_PAGE).getValue()!==a.getCurrentPageId():"CURRENT_PAGE_IN_CONDITION"===d?e=-1!==b.inArray(a.getCurrentPageId(),c.getProperty(a.PROP.CONDITION_PAGES).getValue().split(",")):"CURRENT_PAGE_NOT_IN_CONDITION"===d&&(e=-1===b.inArray(a.getCurrentPageId(),c.getProperty(a.PROP.CONDITION_PAGES).getValue().split(",")))),e},f.setPageSelection=function(c,d,e,g,h){var i,j="OK";if(c&&c===a.getCurrentAppId()){if(d&&d!==a.getCurrentPageId())return i=f.goToPage(d),void b.when(i).done(function(){e&&g&&(f.goToComponent(e,g)||(j="COMPONENT_NOT_SELECTED")),h(j)}).fail(function(a){h("user-abort"===a?"PAGE_CHANGE_ABORTED":"PAGE_NOT_CHANGED")});e&&g&&(f.goToComponent(e,g)||(j="COMPONENT_NOT_SELECTED"))}else j="APP_NOT_CHANGED";h(j)},f.goToPage=function(d){var e,h,l,m=b("#a_PageDesigner"),n=b.Deferred();return a.hasChanged()&&!window.confirm(f.msg("BEFORE_AJAX_UNSAVED_CHANGES"))?(i(),n.reject("user-abort"),n.promise()):(b(document).trigger("selectionChanged",["controller",[]]),a.clear(),b(document).trigger("modelCleared"),b("#go_to_page").val(d),j("waitSpinner"),c.delayLinger.start("main",function(){h=c.showSpinner(m),m.addClass(r)}),j("loadServerData"),p||(p=b.ajax({dataType:"json",type:"GET",url:apex_img_dir+"apex_ui/js/staticData/pd_static_data_"+gLanguage+".json?v="+gApexVersion})),e=g.process("getSharedComponentData",{},{type:"GET"}),l=g.process("getPageData",{x01:d},{type:"GET"}),b.when(p,e,l).done(function(c,e,h){k("loadServerData"),b.isEmptyObject(h[0])?f.showError(f.msg("PAGE_DOES_NOT_EXIST")):(j("set model"),a.setStaticData(c[0]),a.setSharedComponentData(e[0]),a.setComponentData(h[0]),a.setCurrentAppId($v("P4500_CURRENT_APP")),a.setCurrentPageId(d),k("set model"),j("modelReady"),b(document).trigger("modelReady"),k("modelReady"),g.process("getAdditionalData",{x01:d},{type:"GET",success:function(a){var c,d;d=f.format("COMMENTS_BADGE_TITLE",a.comments),b("#button-comments").prop("disabled",!1).attr("aria-label",d).attr("title",d).find(".a-Button-badge").text(0===a.comments?"":a.comments),gTeamDevEnabled&&(c=a.teamDev.features+a.teamDev.bugs+a.teamDev.todos+a.teamDev.feedback,d=f.format("TEAM_DEV_BADGE_TITLE",c),0===c&&(c=""),b("#menu-team-dev").prop("disabled",!1).attr("aria-label",d).attr("title",d).find(".a-Button-badge").text(c),q=a.teamDev)}}),j("selectionChanged"),b(document).trigger("selectionChanged",["controller",a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})]),k("selectionChanged"),n.resolve())}).fail(function(){n.reject()}).always(function(){c.delayLinger.finish("main",function(){h.remove(),m.removeClass(r)}),k("waitSpinner")}),n.promise())},f.goToComponent=function(c,d,e){var f=a.getComponents(c,{id:d});return 1!==f.length?!1:(b(document).trigger("selectionChanged",["controller",f,e]),b("#PDrenderingTree, #PDdynamicActionTree, #PDprocessingTree, #PDsharedCompTree").each(function(a){var c,f=b(this);return c=f.treeView("getSelectedNodes")[0],c&&c.data.componentId===d?(b("#trees").tabs("option","active",a),f.treeView("setSelectedNodes",[c],e===h),!1):void 0}),!0)},f.showSuccess=function(a){b("#pdNotificationState").addClass("is-success"),b("#pdNotificationIcon").addClass("icon-check"),f.showNotification(a)},f.showError=function(a){b("#pdNotificationState").addClass("is-error"),b("#pdNotificationIcon").addClass("icon-error"),f.showNotification(a)},f.showNotification=function(c){var d,e=b("#pdNotificationMessage");c&&(d=e.text().replace("#PD_MESSAGE#",c),e.text(d)),b("#pdNotification").addClass("is-displayed").fadeIn("slow"),b(document).on("commandHistoryChange.forMsg",function(){a.hasChanged()&&f.hideNotification()}).on("modelCleared.forMsg",function(){f.hideNotification()})},f.hideNotification=function(){b("#pdNotification").removeClass("is-displayed").fadeOut("slow",function(){b("#pdNotificationMessage").text("#PD_MESSAGE#"),b("#pdNotificationState").removeClass("is-error is-success"),b("#pdNotificationIcon").removeClass("icon-error icon-check")}),b(document).off(".forMsg")},f.setHelpText=function(a,c){var d=b("#help-container");c&&(a+='<div class="a-HelpFeedback"><a class="a-Button a-Button--small a-Button--noUI" href="https://apex.oracle.com/pls/apex/f?p=apex_help_feedback:1:::::'+c+"&p_lang="+gBuilderLang+'" target="_blank">'+f.msg("HELP.FEEDBACK")+"</a></div>"),d.html(a)},f.clearHelpText=function(){var a=b("#help-container"),c=f.msg("HELP.DEFAULT");a.html(c)},f.getPreference=function(a){var b="PD_"+a;return window.gPreferences.hasOwnProperty(b)?window.gPreferences[b]:null},f.savePreference=function(a,b){var c="PD_"+a,d=window.gPreferences[c];window.gPreferences[c]=b,d!==b&&g.process("setPreference",{x01:c,x02:b},{dataType:""})},f.saveBoolPref=function(a,b){f.savePreference(a,b?"Y":"N")},f.getBoolPref=function(a,b){var c=f.getPreference(a);return c=null===c?b:"Y"===c},b(document).ready(function(){function e(a){var c=b("#"+a);c.length&&c.splitter("option","collapsed")&&c.splitter("option","collapsed",!1)}j("readyEvent"),j("ReadyEventTotal"),b("#sp_main").show(),m(),n(),o(),a.init({isInternal:gIsInternal,isReadOnly:gIsReadOnly}),setTimeout(function(){j("pd.goToPage-total");var a=f.goToPage(b("#go_to_page").val());b.when(a).done(function(){var a=l(window.location.hash);a&&f.goToComponent(a.typeId,a.componentId),k("pd.goToPage-total"),k("ReadyEventTotal")})},0),apex.actions.add([{name:"pd-expand-restore",onLabel:f.msg("RESTORE"),offLabel:f.msg("EXPAND"),shortcut:"Alt+F11",get:function(){return this.isCenterExpanded},set:function(a){this.isCenterExpanded=a,b("#sp_main_content, #sp_glv_content, #sp_right_content").splitter("option","collapsed",this.isCenterExpanded)},isCenterExpanded:!1,updateState:function(){var a=this;this.isCenterExpanded=!0,b("#sp_main_content, #sp_glv_content, #sp_right_content").each(function(){return b(this).splitter("option","collapsed")?void 0:(a.isCenterExpanded=!1,!1)}),this.icon=this.isCenterExpanded?"icon-restore":"icon-maximize",apex.actions.update(this.name)}},{name:"pd-goto-help",label:f.msg("ACTION.GOTO_HELP"),shortcut:"Alt+F1",action:function(){return b("#editor_tabs").tabs("option","active",3),b("#help-container")[0].focus(),!0}},{name:"pd-goto-rendering-tree",label:f.msg("ACTION.GOTO_RENDERING"),shortcut:"Alt+1",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",0),b("#PDrenderingTree").treeView("focus"),!0}},{name:"pd-goto-dynamic-actions-tree",label:f.msg("ACTION.GOTO_DA"),shortcut:"Alt+2",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",1),b("#PDdynamicActionTree").treeView("focus"),!0}},{name:"pd-goto-processing-tree",label:f.msg("ACTION.GOTO_PROCESSING"),shortcut:"Alt+3",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",2),b("#PDprocessingTree").treeView("focus"),!0}},{name:"pd-goto-shared-components-tree",label:f.msg("ACTION.GOTO_SHARED"),shortcut:"Alt+4",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",3),b("#PDsharedCompTree").treeView("focus"),!0}},{name:"pd-goto-grid-layout",label:f.msg("ACTION.GOTO_GLV"),shortcut:"Alt+5",action:function(){return b("#editor_tabs").tabs("option","active",0),b("#glv").gridlayout("focus"),!0}},{name:"pd-goto-property-editor-layout",label:f.msg("ACTION.GOTO_PE"),shortcut:"Alt+6",action:function(){return e("sp_right_content"),b("#pe").propertyEditor("focus"),!0}},{name:"pd-goto-gallery-regions",label:f.msg("ACTION.GOTO_REGIONS"),shortcut:"Alt+7",action:function(){return b("#editor_tabs").tabs("option","active",0),e("sp_glv_content"),b("#gallery-tabs").tabs("option","active",0),b("#cg-regions .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-gallery-items",label:f.msg("ACTION.GOTO_ITEMS"),shortcut:"Alt+8",action:function(){return b("#editor_tabs").tabs("option","active",0),e("sp_glv_content"),b("#gallery-tabs").tabs("option","active",1),b("#cg-items .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-gallery-buttons",label:f.msg("ACTION.GOTO_BUTTONS"),shortcut:"Alt+9",action:function(){return b("#editor_tabs").tabs("option","active",0),e("sp_glv_content"),b("#gallery-tabs").tabs("option","active",2),b("#cg-buttons .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-messages",label:f.msg("ACTION.GOTO_MSGS"),shortcut:"Ctrl+F1",action:function(){return b("#editor_tabs").tabs("option","active",1),b("#messages-container").find(".a-AlertMessages-message").first().each(function(){this.focus()}),!0}},{name:"pd-page-search",label:f.msg("ACTION.PAGE_SEARCH"),shortcut:"Ctrl+Alt+F",action:function(){return b("#editor_tabs").tabs("option","active",2),b("#P4500_LOCAL_SEARCH")[0].focus(),!0}},{name:"pd-show-shortcuts",label:f.msg("KBD_SHORTCUTS"),shortcut:"Alt+Shift+F1",action:function(){var a,e,g,h=[],i={},j=c.htmlBuilder(),k=apex.actions.listShortcuts();for(a=0;a<k.length;a++)e=k[a],g=i[e.actionName],g||(h.push(e.actionName),g={actionLabel:e.actionLabel,shortcuts:[]},i[e.actionName]=g),g.shortcuts.push(e.shortcutDisplay);for(h.sort(function(a,b){return i[a].actionLabel>i[b].actionLabel?1:i[a].actionLabel<i[b].actionLabel?-1:0}),j.markup("<div").attr("id","shortcutDlg").attr("title",f.msg("KBD_SHORTCUTS")).markup(" tabindex='0'>").markup("<ul class='a-AVPList a-AVPList--shortcuts'>"),a=0;a<h.length;a++)g=i[h[a]],j.markup("<li class='a-AVPList-item'><span class='a-AVPList-label'>").content(g.actionLabel).markup("</span><span class='a-AVPList-value'>").content(g.shortcuts.join(", ")).markup("</span></li>");return j.markup("</ul></div>"),b(j.toString()).dialog({modal:!0,closeText:d.getMessage("APEX.DIALOG.CLOSE"),minWidth:300,width:460,height:380,close:function(){b(this).dialog("destroy").remove()},open:function(){this.focus()},buttons:[{text:f.msg("OK"),click:function(){b(this).dialog("close")}}]}),!0}}]),b("#helpMenu_menu").on("menucreate",function(){var a=b("#helpMenu_menu").menu("find","keyboardShortcuts");a&&(a.hide=!1,a.action="pd-show-shortcuts")}),f.clearHelpText();var g=null;b("body").on("splitterchange splittercreate",function(){var a=apex.actions.lookup("pd-expand-restore");g||(g=setTimeout(function(){g=null,a.updateState()},100))}),apex.builder.nameBuilderWindow(),b(".a-TabsContainer").tabs({heightStyle:"fill",activate:function(a,b){b.newPanel.is(".resize")&&b.newPanel.resize()}}),b("#editor_tabs .ui-tabs-nav").on("dblclick",function(){apex.actions.toggle("pd-expand-restore")}),b("#editor_tabs [aria-controls=help]").addClass("ui-tabs-helpTab"),apex.theme.pageResizeInit(),b(window).on("beforeunload",function(){return a.hasChanged()?f.msg("BEFORE_PAGE_UNLOAD_UNSAVED_CHANGES"):void 0}),b("#pdNotificationClose").on("click",function(){f.hideNotification()}),k("readyEvent")})}(pe,apex.jQuery,apex.util,apex.lang,apex.navigation,window.pageDesigner,apex.server);