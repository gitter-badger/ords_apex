!function(a,b,c,d,e,f){"use strict";function g(a){return e.getMessage("PE."+a)}function h(a){var b=g(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.format.apply(this,c)}function i(a){var b=g(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.formatNoEscape.apply(this,c)}function j(b,c){var d=a.extend({"class":"",style:""},c);b.markup("<div"),d["class"]&&b.attr("class",a.isArray(d["class"])?d["class"].join(" "):d["class"]),d.style&&b.attr("style",d.style),b.markup(">")}function k(a){a.markup("</div>")}function l(a,b,c){a.markup("<span").attr("class",b).attr("aria-hidden",!0).markup("></span>"),c&&a.markup("<span").attr("class",Ab).markup(">").content(c).markup("</span>")}function m(b,c,d){var e,f;return e=d?Jb[d]:Kb,!c&&d?void(Jb[b]=e):(f=a.extend(Object.create(e),c),f["super"]=function(){var a=Array.prototype.slice,b=f["super"];return function(c){var d,f=a.call(arguments,1),g=this["super"];return this["super"]=b,d=e[c].apply(this,f),this["super"]=g,d}}(),void(Jb[b]=f))}var n="a-PropertyEditor",o=n+"--stacked",p=n+"-propertyGroup",q=n+"-message",r=n+"-messageText",s=n+"-editParent",t=p+"-header",u=p+"-title",v=p+"-body",w="a-Property",x=w+"--stacked",y=w+"-buttonContainer",z=y+"--comboBox",A=y+"--colorPicker",B=w+"-labelContainer",C=w+"-label",D=C+"--withIcon",E=w+"-radioGroup",F=w+"-radio",G=F+"-label",H=F+"-input",I=w+"-checkboxGroup",J=w+"-checkbox",K=J+"-label",L=J+"-input",M=w+"-fieldContainer",N=M+"--comboBox",O=M+"--radioGroup",P=M+"--checkboxGroup",Q=M+"--colorPicker",R=w+"-field",S=R+"--readOnly",T=R+"--text",U=R+"--textarea",V=R+"--select",W=w+"-unitContainer",X=w+"-unit",Y=w+"-colorPreview",Z=w+"--scrollable",$="js-showAll",_="a-Button",ab=_+"--small",bb=_+"--noLabel",cb=_+"--withIcon",db=_+"--full",eb=_+"--primary",fb=_+" "+ab+" "+bb+" "+cb,gb="is-active",hb="is-focused",ib="is-error",jb="is-warning",kb="is-expanded",lb="is-variable",mb="is-empty",nb="a-Icon",ob=nb+" icon-down-arrow",pb=nb+" icon-right-arrow",qb=nb+" icon-required",rb=nb+" icon-error",sb=nb+" icon-warning",tb=nb+" icon-popup-lov",ub=nb+" icon-variable",vb=nb+" icon-quick-pick",wb=nb+" icon-color-picker",xb=nb+"--large",yb=nb+" "+xb+" icon-warning",zb=nb+" icon-open-in-dialog",Ab="u-VisuallyHidden",Bb="ui-dialog-flushBody",Cb="u-textLower",Db="u-textUpper",Eb="data-property-id",Fb="data-group-id",Gb={COMBOBOX:"COMBOBOX",NUMBER:"NUMBER",INTEGER:"INTEGER",SELECT_LIST:"SELECT LIST",TEXT:"TEXT",TEXTAREA:"TEXTAREA",YES_NO:"YES NO",CHECKBOXES:"CHECKBOXES",RADIOS:"RADIOS",COLOR:"COLOR",POPUP_LOV:"POPUP LOV"},Hb={},Ib=[],Jb={},Kb={renderDivOpen:j,renderDivClose:k,renderIcon:l,stacked:!1,noLabel:!1,labelVisible:!0,render:function(){},init:function(a,b){this.addKeyboardHandlersForVariesState(a,b),this.addTooltipsForErrors(a,b)},destroy:function(a){a.closest("div."+w).off()},validate:function(){},setValue:function(a,b,c){a.val(c),b.value=c},addValue:function(a,b,c){var d,e=!1,f=a.val(),g=f?f.split(b.metaData.multiValueDelimiter):[];for(d=0;d<g.length;d++)if(c===g[d]){e=!0;break}e||g.push(c),a.val(g.join(b.metaData.multiValueDelimiter))},getValue:function(a){var b=a.find("["+Eb+"]").val();return a.hasClass(lb)&&""===b&&(b=Hb),b},getDisplayValue:function(a){return a.value},setFocus:function(a){a[0].focus()},renderCommonAttributes:function(a,b,c){a.attr("id",b).attr(Eb,c.propertyName).optionalAttr("aria-required",c.metaData.isRequired?"true":null).optionalAttr("aria-invalid",c.errors.length>0?"true":null)},commonAttributes:function(a){var b={};return b[Eb]=a.propertyName,b["aria-required"]=a.metaData.isRequired,b["aria-invalid"]=a.errors.length>0,b},renderBaseInput:function(b,c){var d,e,f=a.extend({id:"",type:"text",value:"",inputClass:[],data:{},readonly:!1,maxLength:"",attributes:{}},c);if(b.markup("<input").attr("id",f.id).attr("type",f.type).attr("value",f.value).optionalAttr("readonly",f.readonly),f.inputClass.length>0&&b.attr("class",a.isArray(f.inputClass)?f.inputClass.join(" "):f.inputClass),f.maxLength&&b.attr("maxlength",f.maxLength),f.ariaDescribedBy&&b.attr("aria-describedby",f.ariaDescribedBy),!a.isEmptyObject(f.data))for(e in f.data)f.data.hasOwnProperty(e)&&b.attr("data-"+e,f.data[e]);if(!a.isEmptyObject(f.attributes))for(d in f.attributes)f.attributes.hasOwnProperty(d)&&b.attr(d,f.attributes[d]);b.markup(" />")},renderText:function(b,c,d,e){var f,g=d.value,h=!1,i=[],j={},k=g===Hb;e=a.extend({"class":T,type:"text",textCase:d.metaData.textCase,manualEntry:!0,attributes:{}},e),i.push(R),i.push(e["class"]),e.textCase&&i.push(this.getTextCaseClass(e.textCase)),d.metaData.isReadOnly&&(h=!0,i.push(S),k||(g=Jb[d.metaData.type].getDisplayValue(d))),e.manualEntry||(h=!0,i.push(S),k||""===d.value||(j["return-value"]=d.value,d.metaData.lovValues(function(b){var c,e=a("["+Eb+"="+d.propertyName+"]");c=b.length>0&&b[0].r===d.value?b[0].d:d.value,Jb[d.metaData.type].setValue(e,d,d.value,c)},{id:d.value}))),k&&(g="",i.push(lb)),f={id:c,type:e.type,value:g,inputClass:i,data:j,attributes:a.extend(e.attributes,this.commonAttributes(d)),readonly:h},d.metaData.maxLen&&(f.maxLength=d.metaData.maxLen),d.metaData.unit&&(f.ariaDescribedBy=f.id+"_unit"),this.renderBaseInput(b,f)},renderOption:function(a,b,c){return a.markup("<option").attr("value",b.r).optionalAttr("selected",b.r===c?"true":null),b.hasOwnProperty("isSupported")&&a.attr("data-is-supported",b.isSupported?"true":"false"),a.markup(">").content(b.d).markup("</option>"),b.r===c},renderLovValues:function(b,c,d){var e,f=c,g=!1;for(a.isFunction(f)&&(f=f()),e=0;e<f.length;e++)f[e].hasOwnProperty("group")?(b.markup("<optgroup").attr("label",f[e].group).markup(">"),this.renderLovValues(b,f[e].values,d)&&(g=!0),b.markup("</optgroup>")):this.renderOption(b,f[e],d)&&(g=!0);return g},renderIconButton:function(b,c){var d=a.extend({id:"",icon:"",text:"",dataFor:null,disabled:!1,isMenuButton:!1,addContainer:!1,containerClass:"",buttonClass:""},c);d.addContainer&&this.renderDivOpen(b,{"class":y+(d.containerClass?" "+d.containerClass:"")}),b.markup("<button type='button'").attr("id",d.id).attr("class",fb+(d.buttonClass?" "+d.buttonClass:"")+(d.isMenuButton?" js-menuButton":"")).attr("title",d.text).attr("aria-label",d.text).optionalAttr("disabled",d.disabled),d.dataFor&&b.attr("data-for",d.dataFor),d.isMenuButton&&b.attr("aria-haspopup","true").attr("aria-expanded","false").attr("data-menu",d.id+"_menu"),b.markup(">"),this.renderIcon(b,d.icon),b.markup("</button>"),d.addContainer&&this.renderDivClose(b)},addValueVariesStateStyle:function(c,d,e,f){var h=b.htmlBuilder(),i=b.htmlBuilder();c.addClass(lb),d.addClass(lb),f.renderIcon(h,ub),i.markup("<span").attr("class",Ab).markup(">").content(g("VALUE_VARIES_POSTFIX")).markup("</span>"),a("#"+e+"_label").prepend(h.toString()).append(i.toString())},removeValueVariesStateStyle:function(b,c){var d=a("#"+b.attr("id")+"_label");b.removeClass(lb),c.removeClass(lb),d.find("span.icon-variable").remove().end().find("span."+Ab).remove()},addKeyboardHandlersForVariesState:function(b,c){var d,e,f;c.metaData.isReadOnly||(d=this,e=b.closest("div."+w),f=b.attr("id"),e.on("keydown","#"+f,function(b){var g=a(this);b.which===a.ui.keyCode.ESCAPE&&c.value===Hb&&(d.addValueVariesStateStyle(g,e,f,d),setTimeout(function(){g[0].value=""},1))}).on("keypress","#"+f,function(b){var c=a(this);b.which&&c.hasClass(lb)&&d.removeValueVariesStateStyle(c,e)}))},addChangeHandlersForVariesState:function(b,c){var d,e,f;c.metaData.isReadOnly||(d=this,e=b.closest("div."+w),f=b.attr("id"),e.on("change","#"+f,function(){var b=a(this),g=b.val();b.hasClass(lb)?d.removeValueVariesStateStyle(b,e):""===g&&c.value===Hb&&d.addValueVariesStateStyle(b,e,f,d)}))},addTooltipsForErrors:function(a,b){var c=a.attr("id");a.tooltip().off("mouseover mouseout"),b.errors.length>0&&a.tooltip({items:"#"+c,content:function(a){var c,d;for(c="<ul>",d=0;d<b.errors.length;d++)c+="<li>"+b.errors[d]+"</li>";c+="</ul>",a(c)},position:{my:"left bottom",at:"left top",of:"#"+c+"_label"}}),b.warnings.length>0&&a.tooltip({items:"#"+c,content:function(a){var c,d;for(c="<ul>",d=0;d<b.warnings.length;d++)c+="<li>"+b.warnings[d]+"</li>";c+="</ul>",a(c)},position:{my:"left bottom",at:"left top",of:"#"+c+"_label"}})},initQuickPicks:function(b,c){var d,e,h,i,j,k=[];if(c.metaData.quickPicks&&(h=c.metaData.quickPicks(),i=h.length,!c.metaData.isReadOnly&&i>0)){for(c.metaData.isRequired||(c.metaData.nullText===f?(k.push({type:"action",label:g("QUICK_PICK.CLEAR"),hide:function(){return""===b.val()},action:function(){b.val("").trigger("change")}}),k.push({type:"separator",hide:function(){return""===b.val()}})):k.push({type:"action",label:c.metaData.nullText,action:function(){b.val("").trigger("change")}})),d=0;i>d;d++)k.push({type:"action",label:h[d].d,value:h[d].r,action:function(){b.val(this.value).trigger("change")}});e=b.attr("id")+"_quickPickBtn_menu",Ib.push(e),j=a("<div id='"+e+"'></div>").appendTo("body"),j.menu({items:k})}},addLabelClickHandler:function(a,b){var c=this,d=a.closest("div."+w),e=a.attr("id");d.on("click","#"+e+"_label",function(){c.setFocus(a,b)})},renderQuickPickButton:function(a,b,c,d){var e,f=d?!0:!1;c.metaData.quickPicks&&(e=c.metaData.quickPicks(),c.metaData.isReadOnly||e.length>0&&this.renderIconButton(a,{id:b+"_quickPickBtn",icon:vb,text:i("QUICK_PICK",c.metaData.prompt),isMenuButton:!0,addContainer:f,buttonClass:"a-Button--quickPick"}))},renderRadioCheckbox:function(b,c,d,e,f){var g,h,i,j,k,l;e===Gb.CHECKBOXES?(i="checkbox",j=J,k=L,l=K):(i="radio",j=F,k=H,l=G),g=a.extend({type:i,name:c+"_name",inputValue:null,inputLabel:null,currentValue:d.value!==Hb?d.value.split(":"):d.value},f),h=c+g.inputValue,this.renderDivOpen(b,{"class":j}),b.markup("<input").attr("type",g.type).attr("id",h).attr("value",g.inputValue).attr("name",g.name).attr("class",k).optionalAttr("checked",-1!==a.inArray(g.inputValue,g.currentValue)?"true":null).markup(" />"),b.markup("<label").attr("for",h).attr("class",l).markup(">").content(g.inputLabel).markup("</label>"),this.renderDivClose(b)},renderRadiosCheckboxes:function(b,c,d,e){var f,h,i=[],j=[],k=c+"_label";if(i.push(M),e===Gb.CHECKBOXES?(i.push(P),j.push(I)):e===Gb.RADIOS&&(i.push(O),j.push(E)),this.renderDivOpen(b,{"class":i}),d.metaData.isReadOnly)this.renderText(b,c,d);else{if(d.value===Hb&&j.push(lb),b.markup("<div").attr("role","group").attr("class",j.join(" ")).attr("aria-labelledby",k).attr("tabindex","-1"),this.renderCommonAttributes(b,c,d),b.markup(">"),d.metaData.type!==Gb.YES_NO)for(h=d.metaData.lovValues,a.isFunction(h)&&(h=h()),f=0;f<h.length;f++)this.renderRadioCheckbox(b,c,d,e,{inputValue:h[f].r,inputLabel:h[f].d});else this.renderRadioCheckbox(b,c,d,e,{inputValue:d.metaData.yesValue,inputLabel:g("YES")}),this.renderRadioCheckbox(b,c,d,e,{inputValue:d.metaData.noValue,inputLabel:g("NO")});this.renderDivClose(b)}this.renderDivClose(b)},getTextCaseClass:function(a){var b="";return"UPPER"===a?b=Db:"LOWER"===a&&(b=Cb),b}};m(Gb.TEXT,{render:function(a,b,c,d){this.renderDivOpen(a,{"class":M}),this.renderText(a,b,c,d),this.renderDivClose(a),this.renderQuickPickButton(a,b,c,!0)},init:function(a,b){this.initQuickPicks(a,b),this["super"]("init",a,b)}}),m(Gb.NUMBER,{init:function(b,c){c.metaData.isReadOnly||c.metaData.supportsSubstitution||b.on("keydown",function(b){var c=d.getDecimalSeparator(),e=[8,9,13,37,39,45,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,107,109,110,189];"."===c?e.push(190):","===c&&e.push(188),-1===a.inArray(b.which,e)&&b.preventDefault()}),this["super"]("init",b,c)}},Gb.TEXT),m(Gb.INTEGER,{init:function(b,c){c.metaData.isReadOnly||c.metaData.supportsSubstitution||b.on("keydown",function(b){var c=[8,9,13,37,39,45,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,107,109,189];-1===a.inArray(b.which,c)&&b.preventDefault()}),this["super"]("init",b,c)}},Gb.TEXT),m(Gb.TEXTAREA,{stacked:!0,render:function(a,b,c,d){var e,f=R+" "+U;this.renderDivOpen(a,{"class":y}),d&&this.renderIconButton(a,{id:b+"_modalBtn",icon:zb,text:i("CODE_EDITOR",c.metaData.prompt)}),this.renderQuickPickButton(a,b,c),this.renderDivClose(a),this.renderDivOpen(a,{"class":M}),e=c.value,e===Hb&&(e="",f+=" "+lb),f+=" "+this.getTextCaseClass(c.metaData.textCase),a.markup("<textarea rows=3").attr("maxlength",c.metaData.maxLen).attr("class",f).optionalAttr("readonly",c.metaData.isReadOnly?"true":null),this.renderCommonAttributes(a,b,c),a.markup(">").content(e).markup("</textarea>"),this.renderDivClose(a)},init:function(a,b){var c=50,d=150,e=a.prop("scrollHeight");e>c&&(e>d&&(e=d),a.height(e)),this.initQuickPicks(a,b),this["super"]("init",a,b)}}),m(Gb.COMBOBOX,{manualEntry:!0,render:function(a,b,c){this.renderDivOpen(a,{"class":[M,N]}),this.renderText(a,b,c,{manualEntry:this.manualEntry}),this.renderDivClose(a),this.renderIconButton(a,{id:b+"_lovBtn",icon:tb,text:i("LIST_OF_VALUES",c.metaData.prompt),addContainer:!0,containerClass:z}),this.renderQuickPickButton(a,b,c,!0)},init:function(c,d,e){function h(){var e,g=b.htmlBuilder();g.markup("<div").attr("id","lovDlg").attr("title",k.dialogTitle).markup(">").markup("</div>"),e=a(g.toString()).lovDialog({modal:!0,minWidth:520,height:500,filters:k.filters,columnDefinitions:k.columnDefinitions,filterLov:k.filterLov,dialogClass:Bb,resizable:!1,multiValue:k.multiValue,valueSelected:function(a,b){var e,g;e=b.r!==f?b.r:b[k.columnDefinitions[0].name],j.manualEntry||(g=b.d?b.d:e),d.metaData.multiValueDelimiter?j["super"]("addValue",c,d,e):j.setValue(c,d,e,g),c.trigger("change")}})}var j=this,k=a.extend({columnDefinitions:[{name:"d",title:d.metaData.prompt}],filters:[{name:"search",title:g("SEARCH"),type:"search"}],filterLov:function(b,c){a.isFunction(d.metaData.lovValues)?d.metaData.lovValues(function(a){j.manualEntry||d.metaData.isRequired||a.unshift({r:"",d:d.metaData.nullText!==f?d.metaData.nullText:g("SELECT")}),c(a,b.search)},b):c(d.metaData.lovValues,b.search)},multiValue:!1,dialogTitle:i("PICK",d.metaData.prompt)},e),l=a("#"+c.attr("id")+"_lovBtn");this["super"]("init",c,d),l.on("click",h),l.prop("disabled",d.metaData.isReadOnly),this.initQuickPicks(c,d)},setValue:function(a,b,c,d){this.manualEntry?a.val(c):(a.data("return-value",c),d&&a.val(d)),b.value=c},getValue:function(a){var b;return b=this.manualEntry?this["super"]("getValue",a):a.find("["+Eb+"]").data("return-value")}}),m(Gb.CHECKBOXES,{noLabel:!0,render:function(a,b,c){this.renderRadiosCheckboxes(a,b,c,Gb.CHECKBOXES)},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addLabelClickHandler(a,b),this.addTooltipsForErrors(a,b)},getValue:function(a){var b=[];return a.find("input").each(function(){this.checked&&b.push(this.value)}),b.join(":")},getDisplayValue:function(b){var c,d,e,f=[],g=b.value.split(":");if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c){for(e=0;e<c.length;e++)a.inArray(c[e].r,g)>-1&&f.push(c[e].d);d=f.join(":")}return d},setValue:function(b,c,d){var e=b.find("input"),f=d.split(":");e.prop("checked",!1),e.each(function(){var b=a(this);a.inArray(b.val(),f)>-1&&b.prop("checked",!0)}),c.value=d},setFocus:function(a,b){b.metaData.isReadOnly?a[0].focus():a.find(":input")[0].focus()}}),m(Gb.RADIOS,{noLabel:!0,render:function(a,b,c){this.renderRadiosCheckboxes(a,b,c,Gb.RADIOS)},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addLabelClickHandler(a,b),this.addTooltipsForErrors(a,b)},getValue:function(a){var b="";return a.find("input").each(function(){return this.checked?(b=this.value,!1):void 0}),b},getDisplayValue:function(b){var c,d,e;if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c)for(e=0;e<c.length;e++)if(c[e].r===b.value){d=c[e].d;break}return d},setValue:function(b,c,d){var e=b.find("input");e.each(function(){var b=a(this);if(b.prop("checked")){if(b.val()===d)return!1;b.prop("checked",!1).button("refresh")}else if(b.val()===d)return b.prop("checked",!0).button("refresh"),!1}),c.value=d},setFocus:function(a,b){b.metaData.isReadOnly?a[0].focus():a.find(":input")[0].focus()}}),m(Gb.YES_NO,{init:function(a,b){this["super"]("init",a,b),b.metaData.isReadOnly||a.buttonset({})},getDisplayValue:function(a){return g(a.metaData.yesValue===a.value?"YES":"NO")}},Gb.RADIOS),m(Gb.SELECT_LIST,{render:function(a,b,c,d){var e=R+" "+V,i=c.value,j=!1;this.renderDivOpen(a,{"class":M}),c.metaData.isReadOnly?this.renderText(a,b,c):(i===Hb&&(e+=" "+lb),a.markup("<select size=1").attr("class",e),this.renderCommonAttributes(a,b,c),a.markup(">"),i===Hb?(j=this.renderOption(a,{r:"",d:""},""),c.metaData.isRequired||this.renderOption(a,{r:"",d:c.metaData.nullText!==f?c.metaData.nullText:g("SELECT")},null),i=""):c.metaData.isRequired&&""!==i||(j=this.renderOption(a,{r:"",d:c.metaData.nullText!==f?c.metaData.nullText:g("SELECT")},i)),this.renderLovValues(a,c.metaData.lovValues,i)||j||this.renderOption(a,{r:i,d:h("INVALID",i)},i),a.markup("</select>")),k(a),this.renderQuickPickButton(a,b,c,!0),d&&this.renderIconButton(a,{id:b+"_btn",icon:d.icon,text:d.text,addContainer:!0})},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addTooltipsForErrors(a,b),this.initQuickPicks(a,b)},getDisplayValue:function(b){var c,d;if(""!==b.value){if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c)for(var e=0;e<c.length;e++)if(c[e].r===b.value){d=c[e].d;break}}else d=b.metaData.nullText?b.metaData.nullText:b.value;return d}}),m(Gb.COLOR,{render:function(a,b,c){var d=["#FF3B30","#FF9500","#FFCC00","#4CD964","#34AADC","#007AFF","#5856D6","#FF2D55","#FFFFFF","#C7C7CC","#8E8E93","#000000"];this.renderDivOpen(a,{"class":[M,Q]}),a.markup("<span").attr("id",b+"_preview").attr("class",Y).markup(">").markup("</span>"),this.renderText(a,b,c,{manualEntry:this.manualEntry}),this.renderDivClose(a),this.renderIconButton(a,{id:b+"_picker",icon:wb,text:i("COLOR_PICKER",c.metaData.prompt),addContainer:!0,containerClass:A}),c.metaData.quickPicks=function(){var a,b=[];for(a=0;a<d.length;a++)b.push({d:d[a],r:d[a]});return b},this.renderQuickPickButton(a,b,c,!0)},init:function(b,c){var d=this,e=b.attr("id"),f=a("#"+e+"_picker"),g=a("#"+e+"_preview");this["super"]("init",b,c),b.ColorPicker({eventName:"xxx",onSubmit:function(){b.trigger("change").ColorPickerHide()},onBeforeShow:function(){a(this).ColorPickerSetColor(this.value)},onShow:function(b){return a(b).fadeIn("fast").position({my:"right top",at:"right bottom",of:"#"+e+"_picker"}).css("z-index",200),!1},onHide:function(c){return a(c).fadeOut("fast"),b.trigger("change"),!1},onChange:function(c,d){var e=b.attr("id"),f=a("#"+e+"_preview"),g="#"+d.toUpperCase();f.css("background-color",g),b.val(g)}}).ColorPickerHide(),b.on("change",function(a){var e=a.target;e.value=e.value.toUpperCase(),d.setValue(b,c,e.value)}),f.on("click",function(a){b.ColorPickerShow(),a.preventDefault()}),g.css("background-color",b.val()),this.initQuickPicks(b,c)},setValue:function(b,c,d){var e=b.attr("id"),f=a("#"+e+"_preview");b.val(d),f.css("background-color",d),c.value=d}},Gb.TEXT),m(Gb.POPUP_LOV,{manualEntry:!1,init:function(a,b){this["super"]("init",a,b)}},Gb.COMBOBOX),a.widget("apex.propertyEditor",{version:"5.0",widgetEventPrefix:"propertyeditor",baseId:null,nextId:1,idMap:{},propMap:{},currentPropertyName:null,options:{data:{propertySet:[],componentCount:[]},idPrefix:null,showAll:!1,labelsAlwaysAbove:!1,hideDisplayGroups:!1,stackLabelsWidth:280,focusPropertyName:null,externalEdit:null,expand:null,collapse:null,activate:null,deactivate:null,change:null},_create:function(){var b=this.options;if(!b.data||!b.data.propertySet)throw"Missing required data option.";this.baseId=(b.idPrefix||this.element[0].id||"pe")+"_",this.element.addClass(n),this.options.showAll&&this.element.addClass($),this._on(this._eventHandlers),this.refresh(),this.options.labelsAlwaysAbove?this.element.addClass(o):this.element.hasClass("resize")?(this._on({resize:function(b){this.options.labelsAlwaysAbove||this.element.toggleClass(o,a(b.target).width()<this.options.stackLabelsWidth)}}),this.element.toggleClass(o,this.element.width()<this.options.stackLabelsWidth)):this.element.removeClass(o)},_eventHandlers:{click:function(b){var c=null,d=a(b.target);d.is("."+t)?c=d.parent():d.parent("."+t).length>0&&(c=d.parent().parent()),c&&this._toggle(c),d.attr("id")===this.baseId+"externalEdit"&&this.options.externalEdit()},keydown:function(b){var c=null,d=!1,e=a.ui.keyCode,f=b.keyCode,g=a(b.target);g.is("."+t)&&(f===e.HOME?c=g.parent().parent().children(":visible").first():f===e.END?c=g.parent().parent().children(":visible").last():f===e.DOWN?(c=g.parent().nextAll().filter(":visible").first(),0===c.length&&(c=g.parent().parent().children(":visible").first())):f===e.UP?(c=g.parent().prevAll().filter(":visible").first(),0===c.length&&(c=g.parent().parent().children(":visible").last())):f===e.LEFT?(this._collapse(g.parent()),d=!0):f===e.RIGHT?(this._expand(g.parent()),d=!0):(f===e.SPACE||f===e.ENTER)&&(this._toggle(g.parent()),d=!0),d&&b.preventDefault(),c&&(c.children("."+t)[0].focus(),b.preventDefault()))},"focusin div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");c.addClass(gb+" "+hb),this._activate(c)},"focusout div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");c.removeClass(gb+" "+hb)},"change div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");this._checkForChange(c)},"focusin div.a-PropertyEditor-propertyGroup-header":function(b){this._deactivate(),a(b.target).closest("div.a-PropertyEditor-propertyGroup-header").addClass(hb)},"focusout div.a-PropertyEditor-propertyGroup-header":function(b){a(b.target).closest("div.a-PropertyEditor-propertyGroup-header").removeClass(hb)}},_destroy:function(){this.element.removeClass(n+" "+$).empty()},_setOption:function(a,b){if(this._super(a,b),"data"===a){if(!b.propertySet)throw"Missing required properties.";this.refresh()}else"showAll"===a?this.element.toggleClass($,!!b):"labelsAlwaysAbove"===a&&(b?this.element.addClass(o):this.element.hasClass("resize")?this.element.toggleClass(o,this.element.width()<this.options.stackLabelsWidth):this.element.removeClass(o))},_callPropertyInit:function(a){var c=a.propertyName,d=this.element.find("["+Eb+"="+b.escapeCSS(c)+"]");Jb[a.metaData.type].init(d,a)},_renderLabel:function(a,c){var d=b.htmlBuilder(),e=c.errors.length>0,f=c.warnings.length>0,h=c.value===Hb,i=C,m=[],n=this._getId(c)+"_label";m.push(B),Jb[c.metaData.type].labelVisible?(e||f||h)&&(i+=" "+D):(i+=" "+Ab,m.push(B+"--hiddenLabel")),j(a,{"class":m}),Jb[c.metaData.type].noLabel?a.markup("<span").attr("id",n).attr("class",i).markup(">"):a.markup("<label").attr("id",n).attr("for",this._getId(c)).attr("class",i).markup(">"),Jb[c.metaData.type].labelVisible&&(e&&l(d,rb),f&&l(d,sb),c.value===Hb&&l(d,ub)),a.markup(d.html),a.content(c.metaData.prompt),Jb[c.metaData.type].labelVisible&&(e&&a.markup("<span").attr("class",Ab).markup(">").content(g("ERROR_POSTFIX")).markup("</span>"),f&&a.markup("<span").attr("class",Ab).markup(">").content(g("WARNING_POSTFIX")).markup("</span>"),c.value===Hb&&a.markup("<span").attr("class",Ab).markup(">").content(g("VALUE_VARIES_POSTFIX")).markup("</span>")),a.markup(Jb[c.metaData.type].noLabel?"</span>":"</label>"),k(a)},_countVisibleProperties:function(a){var b,c,d,e=this.options.componentCount>0;for(b=0,c=0;c<a.length;c++)d=a[c],e&&d.metaData.isUnique||this._isCommon(d)&&(b+=1);return b},_renderDisplayGroup:function(a,b,c){var d,e,f,g,h,i,j,m,n=this.options.componentCount>0,o=b.properties;if(g=o.length,m=p,this.options.hideDisplayGroups)for(d=0;g>d;d++)e=o[d],n&&e.metaData.isUnique||this._renderProperty(a,e);else{for(h=this._countVisibleProperties(o),j=!b.collapsed,j?(f=ob,m+=" "+kb):f=pb,0===h&&(m+=" "+$),i=this.baseId+"g_"+c,a.markup("<div role='group'").attr("class",m).attr(Fb,b.displayGroupId).attr("aria-labelledby",i+"_LABEL").markup(">"),a.markup("<div tabindex='0'").attr("class",t).attr("aria-controls",i).attr("aria-expanded",j?"true":"false").attr("aria-labelledby",i+"_LABEL").markup(">"),l(a,f),a.markup("<h2").attr("class",u).attr("id",i+"_LABEL").markup(">").content(b.displayGroupTitle).markup("</h2>"),k(a),a.markup("<div").attr("id",i).attr("class",v),j||a.attr("style","display:none;"),a.markup(">"),d=0;g>d;d++)e=o[d],n&&e.metaData.isUnique||this._renderProperty(a,e);k(a),k(a)}},_renderDisplayGroups:function(a){var b,c=this.options.data.propertySet;for(b=0;b<c.length;b++)this._renderDisplayGroup(a,c[b],b)},_renderProperty:function(a,b){var c,d=[w];Jb[b.metaData.type].stacked&&d.push(x),Jb[b.metaData.type].minHeight&&(c="min-height: "+Jb[b.metaData.type].minHeight+"px;"),Jb[b.metaData.type].maxHeight&&(c="max-height: "+Jb[b.metaData.type].maxHeight+"px;",d.push(Z)),Jb[b.metaData.type].height&&(c="max-height: "+Jb[b.metaData.type].height+"px;",d.push(Z)),b.errors.length>0&&d.push(ib),b.warnings.length>0&&d.push(jb),b.value===Hb&&d.push(lb),this._isCommon(b)||d.push($);var e={"class":d,style:c};j(a,e),b.metaData.isRequired&&l(a,qb,g("REQUIRED")),this._renderLabel(a,b),Jb[b.metaData.type].render(a,this._getId(b),b),b.metaData.unit&&(a.markup("<div").attr("class",W).markup(">"),a.markup("<span").attr("class",X).attr("id",this._getId(b)+"_unit").markup(">").content(b.metaData.unit).markup("</span>"),a.markup("</div>")),k(a)},_getProperty:function(a){return this.propMap[a]},_getId:function(a,b){var c;return c=this.idMap[a.propertyName],c||(c=this.baseId+this.nextId,this.nextId+=1,this.idMap[a.propertyName]=c),b&&(c+=b),c},_getElement:function(b,c){return a("#"+this._getId(b,c))},_isCommon:function(a){return a.metaData.isCommon||a.value!==a.metaData.defaultValue||a.errors.length>0||a.warnings.length>0},_activate:function(a){var b=this,c=a.find("["+Eb+"]").attr(Eb),d=this._getProperty(c);this.currentPropertyName!==c&&(this._deactivate(),this.currentPropertyName=c,setTimeout(function(){b._trigger("activate",{},d)},0))},_deactivate:function(){var a=this;this.currentPropertyName=null,setTimeout(function(){a._trigger("deactivate")},0)},_checkForChange:function(b){var d,e,f,g,h=b.find("["+Eb+"]").attr(Eb),i=this._getProperty(h),j=i.oldValue;if(c.info("propertyEditor _checkForChange",b),e=this.getValue(b,i),f=a("#"+this.idMap[h]),f.hasClass(lb)&&""===e&&(e=Hb),e!==j){if(i.value=e,i.oldValue=e,this.options.showAll){b.toggleClass($,!this._isCommon(i)),g=b.closest("div."+p);var k=g.find("div."+w).filter(":not(."+$+")").length;g.toggleClass($,0===k)}d={propertyName:h,property:this._getProperty(h),previousValue:j,property$:b},this._trigger("change",{},d)}},_expand:function(a){a.hasClass(kb)||(a.addClass(kb).children("."+v).show(),a.children("."+t).attr("aria-expanded","true").children("."+nb).removeClass(pb).addClass(ob),this._trigger("expand",{},{displayGroupId:a.attr("data-group-id")}))},_collapse:function(a){a.hasClass(kb)&&(a.removeClass(kb).children("."+v).hide(),a.children("."+t).attr("aria-expanded","false").children("."+nb).removeClass(ob).addClass(pb),this._trigger("collapse",{},{displayGroupId:a.attr("data-group-id")}))},_toggle:function(a){a.hasClass(kb)?this._collapse(a):this._expand(a)},refresh:function(){var d,e,f,h,i,j=b.htmlBuilder(),k=this.options.componentCount,l=this.options.data.propertySet,m=this.options.externalEdit;for(this.nextId=1,this.idMap={},this.propMap={},c.info("propertyEditor refresh"),this._deactivate(),d=0;d<Ib.length;d++)a("#"+Ib[d]).remove();if(Ib=[],0===k||1===k&&0===l.length?i=g("NO_COMMON_PROPERTIES"):0===l.length&&(i=g("NO_COMPONENTS_SELECTED")),i)return j.markup("<div").attr("class",q).markup(">"),j.markup("<span").attr("class",yb).markup(">"),j.markup("<span").attr("class",Ab).markup(">").content(g("WARNING")).markup("</span>").markup("</span>"),j.markup("<p").attr("class",r).markup(">").content(i).markup("</p>"),j.markup("</div>"),this.element.html(j.toString()),void this.element.addClass(mb);for(this.element.removeClass(mb),m&&j.markup("<div").attr("class",s).markup(">").markup("<button").attr("type","button").attr("id",this.baseId+"externalEdit").attr("class",_+" "+db+" "+eb).markup(">").content(g("EDIT_COMPONENT")).markup("</button>").markup("</div>"),this._renderDisplayGroups(j),this.element.children().remove(),this.element.html(j.toString()),d=0;d<l.length;d++)for(f=l[d].properties,e=0;e<f.length;e++)h=f[e],this.propMap[h.propertyName]=h,this._callPropertyInit(h);this.options.focusPropertyName&&this.focus(this.options.focusPropertyName)},getPropertyValue:function(a){var b=this._getProperty(a),c=this._getElement(b),d=b.metaData.type;return Jb[d].getValue(c.closest("div."+w))},updatePropertyValue:function(a,b,d){var e,f,g,h;c.info("propertyEditor updatePropertyValue: Property "+a+" to "+b),f=this._getProperty(a),f&&(g=this._getElement(f),h=f.metaData.type,e=f.value,b!==e&&(f.value=b,f.oldValue=b,b!==Hb?Jb[h].setValue(g,f,b):this.updateProperty(f),d||g.trigger("change")))},updateProperty:function(a){var d,e,f=this.options.data.propertySet,g=b.htmlBuilder();for(c.info("propertyEditor updateProperty: ",a),d=0;d<f.length;d++)for(e=0;e<f[d].properties.length;e++)f[d].properties[e].propertyName===a.propertyName&&(f[d].properties.splice(e,1),f[d].properties.splice(e,0,a));this._renderProperty(g,a),this._getElement(a).closest("div."+w).replaceWith(g.toString()),Jb[a.metaData.type].destroy(this._getElement(a)),this._callPropertyInit(a)},addProperty:function(d){var e,f,g,h,i,j,k,l=b.htmlBuilder(),m=b.htmlBuilder(),n=this.options.data.propertySet,o=0,p=0,q=!1,r=!1,s=a.extend({property:{},prevPropertyName:null,displayGroup:{},prevDisplayGroupId:null},d);for(c.info("propertyEditor addProperty: ",s),e=0;e<n.length;e++)if(n[e].displayGroupId===s.property.metaData.displayGroupId){p=e,q=!0;break}if(!q){for(f=0;f<n.length;f++)if(n[f].displayGroupId===s.prevDisplayGroupId){p=f+1;break}n.splice(p,0,s.displayGroup)}for(i=n[p].properties,g=0;g<i.length;g++)if(i[g].propertyName===s.property.propertyName){o=g,r=!0;break}if(!r){for(h=0;h<i.length;h++)if(i[h].propertyName===s.prevPropertyName){o=h+1;break}n[p].properties.splice(o,0,s.property),this.propMap[s.property.propertyName]=s.property,q?(this._renderProperty(l,s.property),0===o?this.element.find("div["+Fb+"="+b.escapeCSS(s.displayGroup.displayGroupId)+"]").find("div."+v).prepend(l.toString()):a("#"+this.idMap[s.prevPropertyName]).closest("div."+w).after(l.toString()),j=this._countVisibleProperties(n[p].properties),k=this.element.find("div["+Fb+"="+b.escapeCSS(s.displayGroup.displayGroupId)+"]"),j>0&&k.hasClass($)&&k.removeClass($)):(this._renderDisplayGroup(m,s.displayGroup,p),0===p?this.element.prepend(m.toString()):this.element.find("div["+Fb+"="+b.escapeCSS(s.prevDisplayGroupId)+"]").after(m.toString())),this._callPropertyInit(s.property)}},removeProperty:function(a){var b,d,e,f,g,h=!1,i=this.options.data.propertySet,j=!1;for(c.info("propertyEditor removeProperty: ",a),this.currentPropertyName===a&&this._deactivate(),b=0;b<i.length;b++)if(!j)for(h=1===i[b].properties.length?!0:!1,d=0;d<i[b].properties.length;d++)if(i[b].properties[d].propertyName===a){f=i[b].properties[d],e=this._getElement(f),g=e.closest("div."+p),h?(i.splice(b,1),g.remove()):(Jb[f.metaData.type].destroy(e),i[b].properties.splice(d,1),e.closest("div."+w).remove()),j=!0;break}},expand:function(a){var c=this.element.find("div."+p).filter("["+Fb+"="+b.escapeCSS(a)+"]");this._expand(c)},expandAll:function(){var b=this;this.element.find("div."+p).each(function(){b._expand(a(this))})},collapseAll:function(){var b=this;this.element.find("div."+p).each(function(){b._collapse(a(this))})},getValueVariesConstant:function(){return Hb},setValue:function(a,b,c){Jb[b.metaData.type].setValue(a,b,c)},getValue:function(a,b){return Jb[b.metaData.type].getValue(a)},focus:function(a){var b,c,d,e;e=a?a:this.currentPropertyName?this.currentPropertyName:this.options.data.propertySet[0].properties[0].propertyName,c=this._getProperty(e),d=this._getElement(c),b=d.closest("div."+p),b.hasClass(kb)||this._expand(b),Jb[c.metaData.type].setFocus(d,c)},saveProperty:function(a){var b,c,d;a?b=a:this.currentPropertyName&&(b=this.currentPropertyName),b&&(c=this._getProperty(b),d=this._getElement(c),d.trigger("change"))},goToGroup:function(a){var c=this.element.find("div."+p).filter("["+Fb+"="+b.escapeCSS(a)+"]").find("["+Eb+"]").first().attr(Eb);
this.focus(c)}}),a.apex.propertyEditor.PROP_TYPE=Gb,a.apex.propertyEditor.addPropertyType=m}(apex.jQuery,apex.util,apex.debug,apex.locale,apex.lang);