pe=function(a,b,c,d,e,f,g){"use strict";function h(a){var b=d.getMessage("MODEL."+a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.format.apply(this,c)}function i(a){var b=d.getMessage("MODEL."+a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.formatNoEscape.apply(this,c)}function k(a,b,c){return c?i(a,b):b}function l(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function m(a,b){for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c]);for(var c in a)a.hasOwnProperty(c)&&a[c]===g&&delete a[c]}function n(a){for(var b=a;b.length<36;)b="0"+b;return b}function o(a){return/^[ABCDEFGHIJKLMNOPQRSTUVWXYZ]+[ABCDEFGHIJKLMNOPQRSTUVWXYZ0-9_$]*$/.test(a)?a:'"'+a+'"'}function p(b,c){function e(b,c,e){var f,i,j,k=ab[e],l=k.pluginType;if(l.plugins=l.plugins||{},b!==g)for(var n=0;n<b.length;n++){if(l.plugins[b[n].name]={name:b[n].name,title:d.formatNoEscape(c,b[n].title),category:b[n].category,uiTypes:b[n].uiTypes,attributes:b[n].attributes,stdAttributes:b[n].stdAttributes,sqlMinColumns:b[n].sqlMinColumns,sqlMaxColumns:b[n].sqlMaxColumns,sqlExamples:b[n].sqlExamples,aboutUrl:b[n].aboutUrl,helpText:b[n].helpText||h("HELP.NO_TEXT"),isQuickPick:b[n].isQuickPick===!0,isLegacy:b[n].isLegacy===!0,isRequired:-1!==a.inArray("SOURCE_REQUIRED",b[n].stdAttributes)||-1!==a.inArray("LOV_REQUIRED",b[n].stdAttributes)||-1!==a.inArray("REQUIRED",b[n].stdAttributes)||-1!==a.inArray("REGION_REQUIRED",b[n].stdAttributes)},b[n].hasOwnProperty("stdAttributes")){for(var o=0;o<b[n].stdAttributes.length;o++)if(f=b[n].stdAttributes[o],l.stdAttributes.hasOwnProperty(f))for(var p=0;p<l.stdAttributes[f].length;p++)i=l.stdAttributes[f][p],k.properties[i].dependingOn[0].values.push(b[n].name);e===ib.PAGE_ITEM&&-1===a.inArray("FORMAT_MASK_DATE",b[n].stdAttributes)&&-1===a.inArray("FORMAT_MASK_NUMBER",b[n].stdAttributes)&&k.properties[jb.FORMAT_MASK].dependingOn[0].values.push(b[n].name)}if(e!==ib.REGION){for(var o=0;o<b[n].attributes.length;o++)m(b[n].attributes[o],{scope:"COMPONENT",defaultValue:"",helpText:""}),j=b[n].attributes[o],(e!==ib.REGION_COLUMN&&"COMPONENT"===j.scope||e===ib.REGION_COLUMN&&"COLUMN"===j.scope)&&(_[j.id]={id:j.id,name:e+"_"+b[n].name+"_"+j.mappingNo,prompt:j.prompt,type:j.type,multiValueDelimiter:j.multiValueDelimiter,displayLen:j.displayLen,maxLen:j.maxLen,textCase:j.textCase,unit:j.unit,hasPlSqlCheck:!1,sqlMinColumns:j.sqlMinColumns,sqlMaxColumns:j.sqlMaxColumns,dataTypes:j.dataTypes||{},displayGroupId:j.displayGroupId,lovType:j.lovType,lovComponentTypeId:j.lovComponentTypeId,lovComponentScope:j.lovComponentScope,lovValues:j.lovValues,isSearchable:j.isSearchable,legacyValues:j.legacyValues,examples:j.examples,helpText:j.helpText,isCustomPluginAttribute:/^PLUGIN/.test(b[n].name)},j.hasOwnProperty("uiTypes")&&(_[j.id].uiTypes=j.uiTypes),_[j.id].type===ob.YES_NO&&(_[j.id].yesValue="Y",_[j.id].noValue="N"),k.properties[j.id]={propertyId:j.id,displaySeq:l.attributesSeqOffset+j.displaySeq,isRequired:j.isRequired,isReadOnly:!1,isCommon:j.isCommon,nullText:j.nullText,referenceOnDelete:j.referenceOnDelete,referenceScope:j.referenceScope,supportsSubstitution:j.supportsSubstitution,defaultValue:j.defaultValue,dependingOn:[{id:l.typePropertyId,type:"EQUALS",expression:b[n].name}]},j.parentAttribute&&(k.properties[j.id].parentProperty=j.parentAttribute),j.dependingOn&&k.properties[j.id].dependingOn.push(j.dependingOn));if(e!==ib.REGION_COLUMN)for(var o=0;o<b[n].events.length;o++)cb.component.push({r:b[n].events[o].r,d:b[n].events[o].d+" ["+b[n].title+"]",uiTypes:b[n].uiTypes})}}}for(var f in b)b.hasOwnProperty(f)&&(e(b[f],c,f),f===ib.REGION&&(e(b[f],c,ib.REGION_PLUGIN_ATTR),e(b[f],c,ib.REGION_COLUMN)))}function q(){function a(a){l(a,function(a,b){b.displayPointsMap={};for(var c=0;c<b.displayPoints.length;c++)b.displayPointsMap[b.displayPoints[c].id]=b.displayPoints[c]})}for(var b in ab)if(ab.hasOwnProperty(b)){ab[b].id=b,m(ab[b],{parentId:null,isOneToOneRelation:!1,isPageComponent:!1,isSharedComponent:!1,refByProperties:[],childComponentTypes:[]}),rb[b]={};for(var c in ab[b].properties)ab[b].properties.hasOwnProperty(c)&&(ab[b].properties[c].propertyId=c,m(ab[b].properties[c],{defaultValue:"",helpText:"",dependingOn:[],refByChilds:[],refByDependingOn:[]}))}for(var b in _)if(_.hasOwnProperty(b)&&(_[b].id=b,m(_[b],{helpText:"",hasPlSqlCheck:!1,isQueryOnly:!1,isInternal:!1,isSearchable:!0,dataTypes:{},refByComponentTypes:[]}),_[b].hasOwnProperty("uiTypes")||(_[b].uiTypes=[nb.DESKTOP,nb.JQM_SMARTPHONE]),_[b].hasOwnProperty("lovValues"))){_[b].lovValuesMap={};for(var c=0;c<_[b].lovValues.length;c++)_[b].lovValuesMap[_[b].lovValues[c].r]=c}l(cb,function(a,b){if("lookupMap"!==a)for(var c=0;c<b.length;c++)cb.lookupMap[b[c].r]=b[c]}),l(eb.themes,function(b,c){a(c.templates[ib.PAGE_TEMPLATE]),a(c.templates[ib.REGION_TEMPLATE])})}function r(){var a;for(var b in _)_.hasOwnProperty(b)&&("COMPONENT"===_[b].lovType?ab[_[b].lovComponentTypeId].refByProperties.push(b):"ITEM"===_[b].type&&ab[ib.PAGE_ITEM].refByProperties.push(b));for(var c in ab)if(ab.hasOwnProperty(c)){null!==ab[c].parentId&&ab[ab[c].parentId].childComponentTypes.push(c);for(var d in ab[c].properties)if(ab[c].properties.hasOwnProperty(d)){a=ab[c].properties[d],_[d].refByComponentTypes.push(c),a.parentProperty&&a.parentProperty.id&&ab[a.parentProperty.typeId].properties[a.parentProperty.id].refByChilds.push({typeId:c,id:d});for(var b=0;b<a.dependingOn.length;b++)ab[c].properties[a.dependingOn[b].id].refByDependingOn.push(d)}}}function s(){var a,b,c="ORA_WWV_apex.builder.pageDesigner.model.componentIds";return a=localStorage[c],a=a===g?[]:a.split(","),0===a.length&&e.process("getNewComponentId",{x01:50},{success:function(b){a=b},async:!1}),b=a[0],a=a.slice(1),0===a.length?delete localStorage[c]:localStorage[c]=a.join(","),b}function t(){return eb.themes[hb.themeId]}function u(){var a,b,c=rb[ib.PAGE][gb];return a=t(),b=A()?a.defaultTemplates.page:"NORMAL"===c.getProperty(jb.PAGE_MODE).getValue()?c.getProperty(jb.PAGE_TEMPLATE).getValue()||a.defaultTemplates.page:c.getProperty(jb.DIALOG_TEMPLATE).getValue()||a.defaultTemplates.dialog,a.templates[ib.PAGE_TEMPLATE][b]}function v(a){var b=rb[ib.REGION][a].getProperty(jb.REGION_TEMPLATE).getValue(),c=t().templates[ib.REGION_TEMPLATE];return c.hasOwnProperty(b)?c[b]:c[""]}function w(a){var b=t().templates[ib.FIELD_TEMPLATE];return b.hasOwnProperty(a)?b[a]:b[""]}function x(b){var c,d,e,f=b.component.typeId,i=t().options||[],j=[],k={};if(f===ib.PAGE)e="PAGE",d=u();else if(c=b.component.getProperty(ab[b.component.typeId].properties[b.id].parentProperty.id),c&&""!==c.getValue())switch(d=t().templates[_[c.id].lovComponentTypeId][c.getValue()],_[c.id].lovComponentTypeId){case ib.REGION_TEMPLATE:e="REGION";break;case ib.REPORT_TEMPLATE:e="REPORT";break;case ib.BREADCRUMB_TEMPLATE:e="BREADCRUMB";break;case ib.LIST_TEMPLATE:e="LIST";break;case ib.FIELD_TEMPLATE:e="FIELD";break;case ib.BUTTON_TEMPLATE:e="BUTTON"}if(d===g)return{values:[],valuesMap:{},defaultValues:[],presetValues:[],groups:{}};d&&d.hasOwnProperty("options")&&(j=j.concat(d.options));for(var l=0;l<i.length;l++)-1!==a.inArray(e,i[l].types)&&j.push(i[l]);j.unshift({r:"#DEFAULT#",d:h("LOV.TEMPLATE_OPTIONS.DEFAULT"),description:h("LOV.TEMPLATE_OPTIONS.DEFAULT.DESC")});for(var l=0;l<j.length;l++)k[j[l].r]=j[l];return{values:j,valuesMap:k,defaultValues:d.defaultOptions||[],presetValues:d.presetOptions||[],groups:t().optionGroups||[]}}function y(b,c){return"ROWID"===b&&-1===a.inArray(b,c)?!1:0===c.length||b===g||a.inArray("VARCHAR2",c)>=0&&-1===a.inArray(b,["BLOB","BFILE"])||a.inArray("DATE",c)>=0&&a.inArray(b,["DATE","TIMESTAMP","TIMESTAMP_TZ","TIMESTAMP_LTZ"])>=0||a.inArray(b,c)>=0}function z(b,c){return-1!==a.inArray(b,c)}function A(){return gb===hb.globalPageId}function B(a,b){function c(a,b){-1!==d.indexOf(a)&&(d=d.replace(a,b()))}var d=b;return-1!==d.indexOf("#")&&(c("#PAGE_ID#",function(){return gb}),c("#PLEASE_CHANGE#",function(){return h("PLACEHOLDER.PLEASE_CHANGE")}),c("#PRINT_LINK_TEXT#",function(){return h("PLACEHOLDER.PRINT_LINK_TEXT")}),c("#DEFAULT_REGION_TEMPLATE#",function(){return t().defaultTemplates.region}),c("#DEFAULT_FIELD_TEMPLATE#",function(){return t().defaultTemplates.field}),c("#DEFAULT_BUTTON_TEMPLATE#",function(){return t().defaultTemplates.button}),c("#DEFAULT_REPORT_TEMPLATE#",function(){return t().defaultTemplates.report}),c("#DEFAULT_LIST_TEMPLATE#",function(){return t().defaultTemplates.list}),c("#DEFAULT_NAV_LIST_TEMPLATE#",function(){return hb.navList.templateId||""}),c("#DEFAULT_BREADCRUMB_TEMPLATE#",function(){return t().defaultTemplates.breadcrumb}),c("#DEFAULT_CALENDAR_TEMPLATE#",function(){return t().defaultTemplates.calendar}),c("#DEFAULT_NAV_LIST_POSITION#",function(){return hb.navList.position||""}),c("#PRESET_TEMPLATE_OPTIONS#",function(){var b=x(a).presetValues;return b.length>0?":"+b.join(":"):""})),d}function C(a,b,c){for(var d,e=[],f=0;f<a.length;f++)d=a[f].getProperty(b),e.push({name:a[f].getProperty(c).getValue(),label:d?d.getValue():""});return e}function D(a,b){var c,d,e=[];for(c=0;c<b.length;c++)if(d=a.getProperty(b[c])){e=d.getColumns();break}return e}function E(b){var c,d,e,f,g={NATIVE_TABFORM:ib.TAB_FORM_COLUMN,NATIVE_SQL_REPORT:ib.CLASSIC_RPT_COLUMN,NATIVE_FNC_REPORT:ib.CLASSIC_RPT_COLUMN,NATIVE_IR:ib.IR_COLUMN},h=[];return c=I(ib.REGION,{id:b}),c.length>0&&(d=c[0],e=d._properties[jb.REGION_TYPE]._value,g.hasOwnProperty(e)?(f="NATIVE_IR"===e?d.getChilds(ib.IR_ATTRIBUTES)[0].id:d.id,c=I(g[e],{parentId:f}),h=C(c,jb.COLUMN_HEADING,jb.COLUMN_NAME)):-1!==a.inArray("COLUMNS",ab[ib.REGION].pluginType.plugins[e].stdAttributes)?(c=I(ib.REGION_COLUMN,{parentId:d.id}),h=C(c,jb.COLUMN_HEADING,jb.COLUMN_NAME)):h=D(d,[jb.REGION_SQL,jb.REGION_FUNCTION_RETURNING_SQL])),h}function F(b){var c=b.propertyId,d=_[c],e=ab[b.component.typeId].properties[c],f=c;if(this.component=b.component,f instanceof F){f=a.extend(!0,{},f);for(var g in f)f.hasOwnProperty(g)&&"component"!==g&&(this[g]=f[g])}else this.id=c,this._isRequired=e.isRequired,this._isReadOnly=e.isReadOnly,d.type===ob.SQL&&(this._sqlMinColumns=d.sqlMinColumns,this._sqlMaxColumns=d.sqlMaxColumns),this._setDynamicProperties(),this.hasChanged=!1,this.errors=[],this.warnings=[],this._columns=[],this._hasOrderBy=!1,b.hasOwnProperty("server")?"object"===a.type(b.server)?(this._value=b.server.value,this._columns=b.server.columns||[],this._hasOrderBy=b.server.hasOrderBy):this._value=b.server:(this.hasChanged=!0,this._value=B(this,b.defaultValue||e.defaultValue),this._columns=b.columns||[],this._hasOrderBy=b.hasOrderBy,"UPPER"===d.textCase?this._value=this._value.toUpperCase():"LOWER"===d.textCase&&(this._value=this._value.toLowerCase()),this._setDynamicDefaultValue(),this._isRequired&&""===this._value&&this.errors.push(h("VAL.IS_REQUIRED")))}function G(b){var c,d;if(b.component instanceof G){d=a.extend(!0,{},b.component);for(var e in d)if(d.hasOwnProperty(e))if("_properties"===e){this._properties={};for(var f in d._properties)d._properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:d._properties[f]}))}else this[e]=d[e];if(b.isDetached)return;c=ab[this.typeId],this.id=c.isOneToOneRelation?b.parentId:s(),this._status=mb.CREATED,this.seq=0,this._isReadOnly=!1}else if(c=ab[b.typeId],this.id="",this.parentId="",this._status=mb.UNCHANGED,this._uiType=nb.DESKTOP,this.typeId=b.typeId,this.seq=0,this._isReadOnly=!1,this._properties={},a.isPlainObject(b.component)){this.id=b.component.id,this.parentId=b.component.parentId,this.pageId=b.component.pageId,this._uiType=b.component.uiType||this._uiType,this._lock=b.component.lock||!1;for(var f in b.component.properties)b.component.properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:f,server:b.component.properties[f]}),f===c.seqPropertyId&&(this.seq=parseInt(b.component.properties[f],10)));for(var f in c.properties)c.properties.hasOwnProperty(f)&&!this._properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:f,server:""}));if(this._cleanProperties(),b.isDetached)return}else{this.id=c.isOneToOneRelation?b.parentId:s(),this._status=mb.CREATED,gb&&(this._uiType=rb[ib.PAGE][gb]._uiType),c.isPageComponent&&(this.pageId=gb);for(var f in c.properties)c.properties.hasOwnProperty(f)&&(this._properties[f]=new F({component:this,propertyId:f}));this._cleanProperties()}if(this._status===mb.CREATED){c=ab[this.typeId],b.parentId?(this.parentId=b.parentId,c.parentPropertyId&&this._properties[c.parentPropertyId]._setValue(this.parentId,{checkReadOnly:!1})):c.parentId===ib.PAGE?this.parentId=gb:c.parentId===ib.APPLICATION&&(this.parentId=fb);for(var f in this._properties)this._properties.hasOwnProperty(f)&&(this._properties[f].hasChanged=!0,c.properties[f].hasOwnProperty("checkUniqueness")&&this._properties[f]._setUniqueValue());this._setGridProperties(),this._setProperties(b.values,{checkReadOnly:!1}),0===this.seq&&c.seqPropertyId&&this._move(b.previousComponent),P(this,wb.CREATE),b.hasOwnProperty("component")?(this._callPluginCallback({properties:b.values}),this._callComponentTypeCallback({properties:b.values})):(this._callPluginCallback({action:lb.CREATED}),this._callComponentTypeCallback({action:lb.CREATED}))}rb[this.typeId][this.id]=this}function H(a){function b(b,c){for(var d=I(b,{properties:[{id:c,value:""}]},!1),e=0;e<d.length;e++)a!==g||d[e].isOnGlobalPage()||P(d[e],wb.CHANGE),d[e]._setGridProperties(a)}b(ib.REGION,jb.PARENT_REGION),b(ib.PAGE_ITEM,jb.REGION),b(ib.BUTTON,jb.REGION)}function I(b,c,d){var e,f,h=ab[b].isPageComponent,i=[];c=c||{};for(var j in rb[b])if(rb[b].hasOwnProperty(j)){if(e=rb[b][j],e._status===mb.DELETED)continue;if(c.hasOwnProperty("id")&&c.id!==g&&j!==c.id+"")continue;if(c.hasOwnProperty("parentId")&&c.parentId!==g&&e.parentId!==c.parentId+"")continue;if(c.hasOwnProperty("pageId")&&c.pageId!==g){if(e.pageId!==c.pageId)continue}else if(h&&e.pageId!==gb&&(c.excludeGlobalPage||!e.isOnGlobalPage()))continue;if(c.hasOwnProperty("hasChanged")&&c.hasChanged!==g&&e.hasChanged()!==c.hasChanged)continue;if(c.hasOwnProperty("hasErrors")&&c.hasErrors!==g&&e.hasErrors()!==c.hasErrors)continue;if(c.hasOwnProperty("hasWarnings")&&c.hasWarnings!==g&&e.hasWarnings()!==c.hasWarnings)continue;if(c.properties&&c.properties.length>0){f=!1;for(var k=0;k<c.properties.length&&(f=!1,e._properties.hasOwnProperty(c.properties[k].id)&&(f=c.properties[k].value instanceof RegExp?!!e._properties[c.properties[k].id]._value.match(c.properties[k].value):e._properties[c.properties[k].id]._value==c.properties[k].value),f);k++);if(!f)continue}if(a.isFunction(c.filterFunction)&&!c.filterFunction.apply(e))continue;i.push(e)}return d===!0||d===g?i.sort(ab[b].seqPropertyId?function(a,b){return a.seq===b.seq?n(a.id)>n(b.id)?1:-1:a.seq-b.seq}:function(a,b){return a.getDisplayTitle().localeCompare(b.getDisplayTitle())}):a.isFunction(d)&&i.sort(d),i}function J(b,c){for(var d=[],e=0;e<b.length;e++)d=d.concat(I(b[e].typeId,b[e].filter,!1));return c===!0||c===g?d.sort(function(a,b){return ab[a.typeId].seqPropertyId&&ab[b.typeId].seqPropertyId?a.seq===b.seq?n(a.id)>n(b.id)?1:-1:a.seq-b.seq:a.getDisplayTitle().localeCompare(b.getDisplayTitle())}):a.isFunction(c)&&d.sort(c),d}function K(a,c){var d,e,f=[];if(a instanceof RegExp)e=a;else{if(""===a||a===g)return[];e=new RegExp(b.escapeRegExp(a),"i")}if(c.hasOwnProperty("typeId"))l(rb[c.typeId],function(a,b){b._status!==mb.DELETED&&l(b._properties,function(a,b){_[a].isSearchable&&b._value.match(e)&&f.push(b)})});else if(c.hasOwnProperty("properties"))for(var h=0;h<c.properties.length;h++)d=c.properties[h],_[d.id].isSearchable&&d._value.match(e)&&f.push(d);return f.sort(function(a,b){var c=a.component.getDisplayTitle(),d=b.component.getDisplayTitle();return c===d?ab[a.component.typeId].properties[a.id].displaySeq-ab[b.component.typeId].properties[b.id].displaySeq:c.localeCompare(d)}),f}function L(b,c){var d,f,g=[];if("application"===b.type){f=I(ib.APP_ITEM);for(var h=0;h<f.length;h++)g.push({name:f[h].getProperty(jb.ITEM_NAME).getValue()})}else if("page"===b.type){if(b.pageId!==gb&&b.pageId!==hb.globalPageId)return void e.process("getPageItems",{x01:b.pageId},{success:function(a){for(var b in a)g.push({name:b,label:a[b]});g.sort(function(a,b){return a.name.localeCompare(b.name)}),c(g)}});f=I(ib.PAGE_ITEM,{pageId:b.pageId}),g=C(f,jb.ITEM_LABEL,jb.ITEM_NAME)}else"columns"===b.type&&(d=b.component,-1!==a.inArray(d.typeId,[ib.REGION_PLUGIN_ATTR,ib.REGION_COLUMN,ib.IR_ATTRIBUTES,ib.CLASSIC_REPORT,ib.CLASSIC_RPT_COLUMN,ib.TABULAR_FORM,ib.TAB_FORM_COLUMN])?g=E(d.parentId):d.typeId===ib.IR_COLUMN?g=E(d.getParent().parentId):d.typeId===ib.VALIDATION?g=E(d.getProperty(jb.VALIDATION_REGION).getValue()):d.typeId===ib.PAGE_PROCESS?g=E(d.getProperty(jb.PROCESS_REGION).getValue()):d.typeId===ib.CHART_SERIES?g=D(d,[jb.PROJECT_GANTT_SOURCE_QUERY,jb.RESOURCE_GANTT_SOURCE_QUERY,jb.PIE_DOUGHNUT_SOURCE_QUERY,jb.DIAL_SOURCE_QUERY,jb.SCATTER_SOURCE_QUERY,jb.RANGE_SOURCE_QUERY,jb.CANDLESTICK_SOURCE_QUERY,jb.LINE_COL_BAR_STK_SOURCE_QUERY]):d.typeId===ib.MAP_CHART_SERIES&&(g=D(d,[jb.MAP_SOURCE_QUERY])));return c?void c(g):g}function M(a,b,c){e.process("getPages",{x01:c?"Y":"N",x02:a.show?a.show:"",x03:a.id?a.id:""},{success:b})}function N(){if(!xb)throw"Start a Transaction first!"}function O(){if(xb)throw"Finish pending Transaction first!"}function P(a,b){var c;N(),c=xb.components,c.hasOwnProperty(a.typeId)&&c[a.typeId].hasOwnProperty(a.id)?b===wb.DELETE&&(c[a.typeId][a.id].operation===wb.CREATE?delete c[a.typeId][a.id]:c[a.typeId][a.id].operation=b):(c.hasOwnProperty(a.typeId)||(c[a.typeId]={}),c[a.typeId][a.id]={oldComponent:null,newComponent:null,operation:b},b!==wb.CREATE&&(c[a.typeId][a.id].oldComponent=new G({component:a,isDetached:!0})))}function Q(b,c){function d(a,b){(c._properties.hasOwnProperty(a)||b===kb.REMOVE_PROP)&&(k.properties.hasOwnProperty(a)||(k.properties[a]=[]),k.properties[a].push(b))}function e(a,b,e){if(c[b]()){k.events.push(a);for(var f in c._properties)c._properties.hasOwnProperty(f)&&c._properties[f][e].length>0&&d(f,a)}}function f(a,d,e){c._properties[m][e].join()!==b._properties[m][e].join()&&l.push(0===c._properties[m][e].length?d:a)}function g(a,d,e){c[e]()!==b[e]()&&k.events.push(c[e]()?a:d)}var h,i,j,k,l;if(k={component:{},events:[],properties:{}},null===b||b._status===mb.DELETED)k.component=c,k.events.push(kb.CREATE),e(kb.ERRORS,"hasErrors","errors"),e(kb.WARNINGS,"hasWarnings","warnings");else if(null===c||c._status===mb.DELETED)k.component=b,k.events.push(kb.DELETE);else{k.component=c,k.events.push(kb.CHANGE),h=ab[c.typeId];for(var m in c._properties)if(c._properties.hasOwnProperty(m)){if(i=c._properties[m],l=k.properties[m]||[],b._properties.hasOwnProperty(m)){if(i._value!==b._properties[m]._value){if(l.push(kb.CHANGE),m===h.displayPropertyId?k.events.push(kb.DISPLAY_TITLE):(c.typeId===ib.PAGE&&(m===jb.PAGE_TEMPLATE||m===jb.DIALOG_TEMPLATE)||c.typeId===ib.REGION&&(m===jb.REGION_TEMPLATE||m===jb.REGION_TYPE))&&k.events.push(kb.GRID),h.pluginType&&m===h.pluginType.typePropertyId){for(var n=0;n<h.pluginType.requiredProperties.length;n++)d(h.pluginType.requiredProperties[n],kb.META_DATA);d(jb.LOV_SQL,kb.META_DATA)}-1!==a.inArray(c.typeId,[ib.REGION,ib.PAGE_ITEM,ib.BUTTON])&&-1!==a.inArray(m,[jb.PARENT_REGION,jb.REGION,jb.REGION_POSITION,jb.BUTTON_POSITION,jb.GRID_COLUMN,jb.GRID_COLUMN_SPAN])&&(d(jb.GRID_COLUMN,kb.META_DATA),d(jb.GRID_COLUMN_SPAN,kb.META_DATA),d(jb.GRID_LABEL_COLUMN_SPAN,kb.META_DATA))}if(f(kb.ERRORS,kb.NO_ERRORS,"errors"),f(kb.WARNINGS,kb.NO_WARNINGS,"warnings"),h.properties[m].refByChilds.length>0&&(i._value!==b._properties[m]._value||i._columns.length>0))for(var n=0;n<h.properties[m].refByChilds.length;n++)h.properties[m].refByChilds[n].typeId===c.typeId&&(j=h.properties[m].refByChilds[n].id,d(j,kb.META_DATA))}else l.push(kb.ADD_PROP),i.errors.length>0&&l.push(kb.ERRORS),i.warnings.length>0&&l.push(kb.WARNINGS),c.typeId!==ib.PAGE||m!==jb.PAGE_TEMPLATE&&m!==jb.DIALOG_TEMPLATE||k.events.push(kb.GRID);l.length>0&&(k.properties[m]=l)}for(var m in b._properties)b._properties.hasOwnProperty(m)&&(c._properties.hasOwnProperty(m)||d(m,kb.REMOVE_PROP));g(kb.ERRORS,kb.NO_ERRORS,"hasErrors"),g(kb.WARNINGS,kb.NO_WARNINGS,"hasWarnings")}return k}function R(b){function c(){var c,d,e,f,g,h,i=tb.slice();for(c=0;c<b.length;c++)for(g=b[c],d=0;d<i.length;d++){if(h=i[d].filter,f=!1,h.component)h.component instanceof G?h.component.typeId===g.component.typeId&&h.component.id===g.component.id&&(f=!0):h.component.typeId===g.component.typeId?f=!0:-1!==a.inArray(g.component.typeId,h.component.typeIds)&&(f=!0);else if(h.components){for(e=0;e<h.components.length;e++)if(h.components[e]instanceof G){if(h.components[e].typeId===g.component.typeId&&h.components[e].id===g.component.id){f=!0;break}}else if(h.components[e].typeId===g.component.typeId){f=!0;break}}else f=!0;if(f&&h.properties.length>0)for(f=!1,e=0;e<h.properties.length;e++)if(g.properties.hasOwnProperty(h.properties[e])){f=!0;break}if(f&&h.events.length>0)for(f=!1,e=0;e<h.events.length;e++){if(-1!==a.inArray(h.events[e],g.events)){f=!0;break}for(var j in g.properties)if(g.properties.hasOwnProperty(j)&&-1!==a.inArray(h.events[e],g.properties[j])){f=!0;break}if(f)break}f&&(i[d].sendInBulk?i[d].pendingNotifications.push(g):i[d].callback.call(this,g))}for(var c=0;c<i.length;c++)i[c].sendInBulk&&i[c].pendingNotifications.length>0&&(i[c].callback.call(this,i[c].pendingNotifications),i[c].pendingNotifications=[])}function d(){for(var a=0;a<tb.length;a++)tb[a].filter.component instanceof G&&tb[a].filter.component._status===mb.DELETED&&(tb.splice(a,1),a--)}c(),d()}function S(){for(var a in ab)if(ab.hasOwnProperty(a)&&(ab[a].isPageComponent&&gb!==g||a===ib.PAGE&&gb!==g||!ab[a].isPageComponent&&gb===g))for(var b in rb[a])if(rb[a].hasOwnProperty(b)&&rb[a][b].hasChanged())return!0;return!1}function T(a){function b(a,b,e){var f=[jb.GRID_NEW_GRID,jb.GRID_NEW_ROW,jb.GRID_COLUMN,jb.GRID_NEW_COLUMN,jb.GRID_COLUMN_SPAN,jb.GRID_ROW_SPAN,jb.GRID_COLUMN_CSS_CLASSES,jb.GRID_COLUMN_ATTRIBUTES,jb.GRID_LABEL_COLUMN_SPAN,jb.LABEL_ALIGNMENT,jb.ELEMENT_FIELD_ALIGNMENT,jb.READ_ONLY_HTML_ATTRIBUTES];if(d.hasOwnProperty("_grid")){c[e]=[];for(var g=0;g<f.length;g++)b.hasOwnProperty(f[g])&&a[e].push(f[g])}}var c,d,i={},j=!1;for(var k in ab)if(ab.hasOwnProperty(k)&&(ab[k].isPageComponent&&gb!==g||k===ib.PAGE&&gb!==g||!ab[k].isPageComponent&&gb===g))for(var l in rb[k])if(rb[k].hasOwnProperty(l)&&rb[k][l].hasChanged()){if(d=rb[k][l],d.hasErrors()&&d._status!==mb.DELETED)return void a({error:h("SAVE.FIX_ERRORS")});if(i.hasOwnProperty(k)||(i[k]={c:[],u:[],d:[]}),c={id:d.id,parentId:d.parentId,pageId:d.pageId},f.getLevel()!==f.LOG_LEVEL.OFF&&(c.displayTitle=d.getDisplayTitle()),b(c,d._properties,"gridProperties"),d._status===mb.CREATED){c.properties={};for(var m in d._properties)d._properties.hasOwnProperty(m)&&(c.properties[m]=d._properties[m]._value)}else if(d._status===mb.UPDATED){b(c,sb[k][l],"oldGridProperties"),c.properties={};for(var m in d._properties)d._properties.hasOwnProperty(m)&&(sb[k][l].hasOwnProperty(m)?sb[k][l][m]!==d._properties[m]._value&&(c.properties[m]={oldValue:sb[k][l][m],newValue:d._properties[m]._value}):c.properties[m]=d._properties[m]._value)}i[k][d._status].push(c),j=!0}j?(f.trace("saveChanges: modified components %0",i),e.process("writePageData",{x01:fb,x02:gb,f01:JSON.stringify(i)},{success:function(b){U(b,i,a)},error:function(b,c,d){a({error:d})}})):a({error:"NO_CHANGES"})}function U(a,b,c){function d(a){var b,c,d;d={},b=new G({component:rb[a.typeId][a.id],isDetached:!0});for(var e=0;e<a.errors.length;e++)c=a.errors[e].hasOwnProperty("propertyId")?a.errors[e].propertyId:ab[a.typeId].displayPropertyId,d.hasOwnProperty(c)||(d[c]=[]),d[c].push(a.errors[e].message);l(d,function(b,c){if(!rb[a.typeId][a.id]._properties.hasOwnProperty(b))throw"Error reported for property id "+b+" which doesn't exist for current component!";rb[a.typeId][a.id]._properties[b].errors=c}),rb[a.typeId][a.id]._status===mb.DELETED&&(rb[a.typeId][a.id]._status=mb.UNCHANGED),g.push(Q(b,rb[a.typeId][a.id]))}function e(a,b){for(var c,d,e,f=0;f<b.length;f++)c=b[f],d=new G({component:rb[a][c.id],isDetached:!0}),e=new G({typeId:a,component:c,isDetached:!0}),e._setGridProperties(!0),e._copyToGlobal(),V(rb[a][c.id]),g.push(Q(d,rb[a][c.id]))}function f(a,b){for(var c=0;c<b.length;c++)rb[a][b[c].id]._status===mb.DELETED&&delete rb[a][b[c].id]}var g=[];a.errors?d(a):(l(a,e),l(b,function(a,b){b.hasOwnProperty(mb.DELETED)&&f(a,b[mb.DELETED])})),R(g),c(a.errors?{error:h("SAVE.FAILED")}:{})}function V(a){function b(b,c){sb[a.typeId][a.id][b]=c._value}sb[a.typeId][a.id]={},l(rb[a.typeId][a.id]._properties,b)}function W(){function a(a,b){V(b)}l(rb,function(b,c){sb[b]={},l(c,a)})}function X(b){var c=a.Deferred();return e.process("lockPage",{x01:fb,x02:gb,x03:b},{success:function(a){rb[ib.PAGE][gb]._lock=a,a.isLockedByCurrentUser?(vb=!1,c.resolve(a)):(vb=!S(),c.reject(h("LOCKED.BY_OTHER_USER",a.owner)))}}),c.promise()}function Y(){var b=a.Deferred(),c=Z();return c?c.isLockedByCurrentUser?e.process("unlockPage",{x01:fb,x02:gb},{success:function(a){"OK"===a.status?(vb=!1,rb[ib.PAGE][gb]._lock=!1,b.resolve()):(vb=!S(),b.reject(a.reason))}}):b.reject("Page not locked by current user!"):b.reject("Page is already unlocked!"),b.promise()}function Z(){return rb[ib.PAGE][gb]._lock}var $,_,ab,bb,cb,db,eb,fb,gb,hb,ib={APPLICATION:"1000",THEME:"2000",PAGE_TEMPLATE:"2510",FIELD_TEMPLATE:"2520",BUTTON_TEMPLATE:"2530",REGION_TEMPLATE:"2540",LIST_TEMPLATE:"2550",BREADCRUMB_TEMPLATE:"2560",CALENDAR_TEMPLATE:"2570",REPORT_TEMPLATE:"2580",APP_ITEM:"3010",APP_COMPUTATION:"3020",APP_PROCESS:"3030",BUILD_OPTION:"3040",AUTHENTICATION:"3050",AUTHORIZATION:"3060",BREADCRUMB:"3510",LIST:"3520",LOV:"3530",WS_REF:"3540",WS_REF_OPER:"3541",WS_REF_OPER_P_I:"3545",WS_REF_OPER_P_O:"3546",WS_REF_OPER_P_A:"3547",WS_REF_OPER_P_H:"3548",DATA_LOAD_TABLE:"3550",TAB_SET:"3560",PAGE:"5000",REGION:"5110",PAGE_ITEM:"5120",BUTTON:"5130",DA_EVENT:"5140",DA_ACTION:"5150",VALIDATION:"5510",PAGE_COMPUTATION:"5520",PAGE_PROCESS:"5530",BRANCH:"5540",REGION_PLUGIN_ATTR:"7000",IR_ATTRIBUTES:"7010",IR_SAVED_REPORT:"7020",IR_COLUMN_GROUP:"7030",IR_COLUMN:"7040",IR_PRINT_ATTR:"7050",PAGE_PROC_WS_P_I:"7110",PAGE_PROC_WS_P_O:"7120",PAGE_PROC_WS_P_A:"7130",MAP_CHART:"7210",MAP_CHART_SERIES:"7220",CLASSIC_REPORT:"7310",CLASSIC_RPT_COLUMN:"7320",CLASSIC_RPT_PRINT:"7330",TABULAR_FORM:"7410",TAB_FORM_COLUMN:"7420",TAB_FORM_PRINT:"7430",CHART:"7510",CHART_SERIES:"7520",CLASSIC_CALENDAR:"7610",REGION_COLUMN:"7710"},jb={NAME:"1",ERROR_MESSAGE:"6",PAGE_GROUP:"9",PAGE_MODE:"10",PAGE_TEMPLATE:"11",STANDARD_TAB_SET:"12",TITLE:"13",AUTHORIZATION_SCHEME:"24",BUILD_OPTION:"38",COMPUTATION_ITEM_NAME:"51",COMPUTATION_TYPE:"52",COMPUTATION_STATIC_VALUE:"53",COMPUTATION_SQL_STATEMENT:"54",COMPUTATION_SQL_EXPRESSION:"55",COMPUTATION_PLSQL_EXPRESSION:"56",COMPUTATION_PLSQL_FUNCTION_BODY:"57",COMPUTATION_ITEM_VALUE:"58",COMPUTATION_PREFERENCE_VALUE:"59",EXECUTION_SEQUENCE:"60",COMPUTATION_POINT:"61",EVENT:"62",CUSTOM_EVENT:"63",WHEN_TYPE:"64",WHEN_REGION:"65",WHEN_BUTTON:"66",WHEN_ITEMS:"67",WHEN_DOM_OBJECT:"68",WHEN_JQUERY_SELECTOR:"69",DA_ACTION_TYPE:"82",FIRE_WHEN_EVENT_RESULT_IS:"83",FIRE_ON_PAGE_LOAD:"84",AFFECTED_TYPE:"85",AFFECTED_REGION:"86",AFFECTED_BUTTON:"87",AFFECTED_ITEMS:"88",AFFECTED_DOM_OBJECT:"89",AFFECTED_JQUERY_SELECTOR:"90",ITEM_TYPE:"93",REGION_TYPE:"94",PAGE_PROCESS_TYPE:"95",ITEM_NAME:"96",DISPLAY_SEQUENCE:"97",REGION:"98",ITEM_LABEL:"99",LABEL_ALIGNMENT:"100",FIELD_TEMPLATE:"101",VALUE_REQUIRED:"103",GRID_NEW_GRID:"104",GRID_NEW_ROW:"105",GRID_COLUMN:"106",GRID_NEW_COLUMN:"107",GRID_COLUMN_SPAN:"108",GRID_ROW_SPAN:"109",GRID_COLUMN_ATTRIBUTES:"110",FORMAT_MASK:"111",LOV_SQL:"122",ELEMENT_FIELD_ALIGNMENT:"123",ELEMENT_MAX_CHARACTERS:"125",ELEMENT_HEIGHT:"126",SOURCE_USED:"133",SOURCE_TYPE:"134",SOURCE_DB_COLUMN:"141",READ_ONLY_HTML_ATTRIBUTES:"171",BUTTON_NAME:"176",BUTTON_LABEL:"177",BUTTON_POSITION:"178",ALIGNMENT:"179",BUTTON_TEMPLATE:"182",BUTTON_IS_HOT:"183",BUTTON_TARGET:"187",PARENT_REGION:"190",REGION_POSITION:"191",PROCESS_POINT:"192",REGION_SQL:"193",REGION_PLUGIN_PLAIN:"194",REGION_TEMPLATE:"217",ITEM_DISPLAY_POSITION:"218",REGION_DISPLAY_SELECTOR:"219",REGION_FUNCTION_RETURNING_SQL:"225",BRANCH_TYPE:"226",BRANCH_POINT:"227",TARGET:"228",BRANCH_PAGE_NUMBER:"229",BRANCH_ITEM:"230",WHEN_BUTTON_PRESSED:"234",ALWAYS_EXECUTE:"245",ASSOCIATED_ITEM:"247",ASSOCIATED_COLUMN:"248",EXECUTE_CONDITION:"250",VALIDATION_REGION:"251",BUTTON_ACTION:"252",USER_INTERFACE:"253",DIALOG_TEMPLATE:"254",OVERWRITE_NAVIGATION_LIST:"255",NAVIGATION_LIST:"256",NAVIGATION_LIST_TEMPLATE:"257",COLUMN_NAME:"267",COLUMN_TYPE:"268",IR_COLUMN_DISPLAY_TYPE:"271",COLUMN_HEADING:"272",HEADING_ALIGNMENT:"275",COLUMN_ALIGNMENT:"276",ALLOW_USERS_TO_HIDE:"277",ALLOW_USERS_TO_SORT:"278",ALLOW_USERS_TO_FILTER:"279",ALLOW_USERS_TO_HIGHLIGHT:"280",ALLOW_USERS_TO_CONTROL_BREAK:"281",ALLOW_USERS_TO_AGGREGATE:"282",ALLOW_USERS_TO_COMPUTE:"283",ALLOW_USERS_TO_CHART:"284",ALLOW_USERS_TO_GROUP_BY:"285",IR_COLUMN_FILTER_TYPE:"286",HTML_EXPRESSION:"289",LINK_TEXT:"290",WHEN_NO_DATA_FOUND_MESSAGE:"297",DOWNLOAD_FORMATS:"308",LINK_ICON:"319",SHOW_DOWNLOAD:"352",PROCESS_REGION:"370",DA_EVENT:"371",TZ_DEPENDENT:"375",CHART_TITLE:"380",ALLOW_USERS_TO_PIVOT:"383",HAS_GENERIC_COLUMNS:"390",GENERIC_COLUMN_COUNT:"391",CLASSIC_REPORT_COLUMN_TYPE:"398",COLUMN_SORT_SEQUENCE:"406",DISABLE_SORT_COLUMN:"408",HEADINGS_TYPE:"427",HEADING_TYPE_PLSQL_FUNCTION_BODY:"428",NUMBER_OF_ROWS_TYPE:"433",NUMBER_OF_ROWS:"434",NUMBER_OF_ROWS_ITEM:"435",TAB_FORM_COLUMN_TYPE:"452",BRANCH_ACCEPT_REQUEST:"465",QUERY_COLUMN_ID:"466",DERIVED_COLUMN:"467",MAP_SERIES_SOURCE_TYPE:"469",MAP_SOURCE_QUERY:"470",MAP_SOURCE_FUNC_RETURNING_SQL:"471",CHART_TYPE:"473",SERIES_CHART_TYPE:"474",PROJECT_GANTT_SERIES_SOURCE_TYPE:"475",PROJECT_GANTT_SOURCE_QUERY:"476",PROJECT_GANTT_SOURCE_FUNC_RETURNING_SQL:"477",RESOURCE_GANTT_SERIES_SOURCE_TYPE:"478",RESOURCE_GANTT_SOURCE_QUERY:"479",RESOURCE_GANTT_SOURCE_FUNC_RETURNING_SQL:"480",PIE_DOUGHNUT_SERIES_SOURCE_TYPE:"481",PIE_DOUGHNUT_SOURCE_QUERY:"482",PIE_DOUGHNUT_SOURCE_FUNC_RETURNING_SQL:"483",DIAL_SERIES_SOURCE_TYPE:"484",DIAL_SOURCE_QUERY:"485",DIAL_SOURCE_FUNC_RETURNING_SQL:"486",SCATTER_SERIES_SOURCE_TYPE:"487",SCATTER_SOURCE_QUERY:"488",SCATTER_SOURCE_FUNC_RETURNING_SQL:"489",RANGE_SERIES_SOURCE_TYPE:"490",RANGE_SOURCE_QUERY:"491",RANGE_SOURCE_FUNC_RETURNING_SQL:"492",CANDLESTICK_SERIES_SOURCE_TYPE:"493",CANDLESTICK_SOURCE_QUERY:"494",CANDLESTICK_SOURCE_FUNC_RETURNING_SQL:"495",LINE_COL_BAR_STK_SERIES_SOURCE_TYPE:"496",LINE_COL_BAR_STK_SOURCE_QUERY:"497",LINE_COL_BAR_STK_SOURCE_FUNC_RETURNING_SQL:"498",SERIES_TYPE:"499",USE_CUSTOM_XML:"534",CUSTOM_XML:"535",PRINT_PAGE_SIZE:"700",PRINT_ORIENTATION:"701",PRINT_UNITS:"702",PRINT_WIDTH:"703",PRINT_HEIGHT:"704",ENABLE_PRINTING:"729",PLUGIN_ATTR_REGION_TYPE:"737",HIDDEN_REGION_TYPE:"737",IS_VISIBLE:"738",COMPUTATION_SQL_COLON:"744",PARAMETER_ID:"753",PAGE_NAVIGATION_TYPE:"754",AFFECTED_JAVASCRIPT_EXPRESSION:"755",WHEN_JAVASCRIPT_EXPRESSION:"756",NAVIGATION_LIST_POSITION:"757",GRID_LABEL_COLUMN_SPAN:"760",GRID_COLUMN_CSS_CLASSES:"763",VALIDATION_TYPE:"4960",VAL_SQL_STATEMENT:"4961",VAL_SQL_EXPRESSION:"4962",VAL_PLSQL_EXPRESSION:"4963",VAL_PLSQL_FUNCTION_BODY_BOOLEAN:"4964",VAL_PLSQL_FUNCTION_BODY_VARCHAR2:"4965",VAL_PLSQL:"4966",VAL_ITEM:"4967",VAL_VALUE:"4968",VAL_REGULAR_EXPRESSION:"4969",REGION_VALIDATION_TYPE:"4980",REGION_VAL_SQL_STATEMENT:"4981",REGION_VAL_SQL_EXPRESSION:"4982",REGION_VAL_PLSQL_EXPRESSION:"4983",REGION_VAL_PLSQL_FUNCTION_BODY_BOOLEAN:"4984",REGION_VAL_PLSQL_FUNCTION_BODY_VARCHAR2:"4985",REGION_VAL_PLSQL:"4986",REGION_VAL_COLUMN:"4987",REGION_VAL_VALUE:"4988",REGION_VAL_REGULAR_EXPRESSION:"4989",CONDITION_TYPE:"5100",CONDITION_SQL_STATEMENT:"5101",CONDITION_SQL_EXPRESSION:"5102",CONDITION_PLSQL_EXPRESSION:"5103",CONDITION_PLSQL_FUNCTION_BODY:"5104",CONDITION_VALUE1:"5105",CONDITION_ITEM1:"5106",CONDITION_LIST:"5107",CONDITION_PREFERENCE:"5108",CONDITION_PAGE:"5109",CONDITION_PAGES:"5110",CONDITION_TEXT:"5111",CONDITION_VALUE2:"5112",CONDITION_ITEM2:"5113",CONDITION_TEXT2:"5114",FORM_FETCH_TABLE_NAME:"361800327927635543",FORM_PROCESS_TABLE_NAME:"723641536018615468"},kb={CREATE:"create",CHANGE:"change",DELETE:"delete",ERRORS:"errors",NO_ERRORS:"no_errors",WARNINGS:"warnings",NO_WARNINGS:"no_warnings",ADD_PROP:"add_property",REMOVE_PROP:"remove_property",META_DATA:"meta_data",GRID:"grid",DISPLAY_TITLE:"display_title"},lb={CREATED:"created",CHANGED:"changed",REMOVED:"removed",VALIDATE:"validate"},mb={CREATED:"c",UPDATED:"u",DELETED:"d",UNCHANGED:""},nb={DESKTOP:"DESKTOP",JQM_SMARTPHONE:"JQM_SMARTPHONE"},ob={COMPONENT:"COMPONENT",COMBOBOX:"COMBOBOX",COLOR:"COLOR",CHECKBOXES:"CHECKBOXES",CSS:"CSS",JAVASCRIPT:"JAVASCRIPT",HTML:"HTML",ICON:"ICON",INTEGER:"INTEGER",LINK:"LINK",NUMBER:"NUMBER",ITEM:"ITEM",PAGE:"PAGE",PLSQL:"PLSQL",PLSQL_EXPR_VARCHAR:"PLSQL EXPRESSION VARCHAR2",PLSQL_EXPR_BOOLEAN:"PLSQL EXPRESSION BOOLEAN",PLSQL_FUNC_VARCHAR:"PLSQL FUNCTION BODY VARCHAR2",PLSQL_FUNC_BOOLEAN:"PLSQL FUNCTION BODY BOOLEAN",SELECT_LIST:"SELECT LIST",SQL:"SQL",SQL_EXPR:"SQL EXPRESSION",SUBSCRIPTION:"SUBSCRIPTION",TEXT:"TEXT",TEXTAREA:"TEXTAREA",TEXT_EDITOR:"TEXT EDITOR",SUPPORTED_UI:"SUPPORTED UI",YES_NO:"YES NO",OWNER:"OWNER",TABLE:"TABLE",COLUMN:"COLUMN",TEMPLATE_OPTIONS:"TEMPLATE OPTIONS"},pb={CHANGE:"CHANGE_ATTRIBUTE",CREATE:"CREATE",DELETE:"DELETE",DUPLICATE:"DUPLICATE",MOVE:"MOVE"},qb="1.1",rb={},sb={},tb=[],ub={isInternal:!1,isReadOnly:!1},vb=!0;
F.prototype._setDynamicProperties=function(){var b,c=ab[this.component.typeId].pluginType;c&&this.component._properties.hasOwnProperty(c.typePropertyId)&&(b=c.plugins[this.component._properties[c.typePropertyId]._value],b&&(-1!==a.inArray(this.id,c.requiredProperties)&&(this._isRequired=b.isRequired),(this.id===jb.REGION_SQL||this.id===jb.LOV_SQL)&&(this._sqlMinColumns=b.sqlMinColumns,this._sqlMaxColumns=b.sqlMaxColumns,this._sqlExamples=b.sqlExamples)))},F.prototype._setDynamicDefaultValue=function(){var b,c=ab[this.component.typeId].pluginType;c&&this.component._properties.hasOwnProperty(c.typePropertyId)&&(b=c.plugins[this.component._properties[c.typePropertyId]._value],b&&this.component.typeId===ib.DA_ACTION&&(this.id===jb.AFFECTED_TYPE?""!==this._value&&-1===a.inArray(this._value,b.stdAttributes)&&(this._value=""):this.id===jb.FIRE_ON_PAGE_LOAD&&(this._value=-1!==a.inArray("ONLOAD",b.stdAttributes)?"Y":"N")))},F.prototype._isVisible=function(){var b,c,d,e,f,g=_[this.id],h=this.component,i=ab[h.typeId].properties[this.id];if(g.hasOwnProperty("legacyValues")&&"$NOT_NULL$"!==g.legacyValues[0]&&-1===a.inArray(this._value,g.legacyValues)||-1===a.inArray(h._uiType,g.uiTypes)||g.isInternal&&!ub.isInternal)b=!1;else if(g.hasOwnProperty("legacyValues")&&"$NOT_NULL$"===g.legacyValues[0]&&""===this._value)b=!1;else if(0===i.dependingOn.length)b=!0;else for(f=0;f<i.dependingOn.length;f++){if(c=i.dependingOn[f],h._properties.hasOwnProperty(c.id))if(d=h._properties[c.id]._value,"CHECKBOXES"===_[c.id].type)switch(e=""===d?[]:d.split(":"),c.type){case"EQUALS":b=-1!==a.inArray(c.expression,e);break;case"NOT_EQUALS":b=-1===a.inArray(c.expression,e);break;case"NULL":b=0===e.length;break;case"NOT_NULL":b=e.length>0;break;case"IN_LIST":b=!1,a.each(e,function(d,e){return b=-1!==a.inArray(e,c.values),b?!1:void 0});break;case"NOT_IN_LIST":b=!0,a.each(e,function(d,e){return b=-1===a.inArray(e,c.values),b?void 0:!1})}else if("IN_LIST_LIKE"===c.type)b=!1,a.each(c.values,function(a,c){return b=0===d.search(c),b?!1:void 0});else if("NOT_IN_LIST_LIKE"===c.type)b=!0,a.each(c.values,function(a,c){return b=-1===d.search(c),b?void 0:!1});else switch(c.type){case"EQUALS":b=d===c.expression;break;case"NOT_EQUALS":b=d!==c.expression;break;case"NULL":b=""===d;break;case"NOT_NULL":b=""!==d;break;case"IN_LIST":b=-1!==a.inArray(d,c.values);break;case"NOT_IN_LIST":b=-1===a.inArray(d,c.values)}else b=!1;if(!b)break}return b},F.prototype.getValue=function(){return this._value},F.prototype.getDisplayValue=function(){var a,b,c,d=_[this.id],e=ab[this.component.typeId].properties[this.id],f=this._value,g=[];if(""!==f){if(d.type===ob.YES_NO)return h(f===d.yesValue?"LOV.YES":"LOV.NO");if(d.type===ob.SUPPORTED_UI){if("PLUGINS"===d.lovType){if(ab[this.component.typeId].pluginType.plugins.hasOwnProperty(f))return k("POSTFIX.UNSUPPORTED",ab[this.component.typeId].pluginType.plugins[f].title,!z(this.component._uiType,ab[this.component.typeId].pluginType.plugins[f].uiTypes))}else if("EVENTS"===d.lovType&&cb.lookupMap.hasOwnProperty(f))return k("POSTFIX.UNSUPPORTED",cb.lookupMap[f].d,!z(this.component._uiType,cb.lookupMap[f].uiTypes))}else if("COMPONENT"===d.lovType){if(d.lovComponentTypeId===ib.BUILD_OPTION||d.lovComponentTypeId===ib.AUTHORIZATION){if("MUST_NOT_BE_PUBLIC_USER"===f)return h("LOV.MUST_NOT_BE_PUBLIC_USER");if(/^(!|-)/.test(f)&&(f=f.substr(1),rb[d.lovComponentTypeId].hasOwnProperty(f)))return i("LOV.NOT_W_ARGUMENT",rb[d.lovComponentTypeId][f].getDisplayTitle())}if(rb[d.lovComponentTypeId].hasOwnProperty(f))return rb[d.lovComponentTypeId][f].getDisplayTitle()}else{if("STATIC"!==d.lovType){if("REGION_POSITIONS"===d.lovType||"BUTTON_POSITIONS"===d.lovType)return a="REGION_POSITIONS"===d.lovType?u().displayPointsMap:v(this.component.getProperty(jb.REGION).getValue()).displayPointsMap,a.hasOwnProperty(f)?a[f].name:i("LOV.UNKNOWN_LOOKUP",f);if("TEMPLATE_OPTIONS"===d.lovType){b=x(this).valuesMap,c=f.split(":");for(var j=0;j<c.length;j++)g.push(b.hasOwnProperty(c[j])?b[c[j]].d:i("LOV.UNKNOWN_LOOKUP",c[j]));return g.join(", ")}return f}if(d.lovValuesMap.hasOwnProperty(f))return d.lovValues[d.lovValuesMap[f]].d}return i("LOV.UNKNOWN_LOOKUP",f)}return e.nullText?e.nullText:f},F.prototype.getMetaData=function(){function a(a,c){var d;return b.component.typeId===a&&(d=b.component.getProperty(c),d&&""!==d.getValue())?!(e.dependingOn.length>0&&e.dependingOn[0].id===jb.CONDITION_TYPE&&"N"===b.component.getProperty(jb.EXECUTE_CONDITION).getValue()):!1}var b=this,c=_[this.id],d=ab[this.component.typeId],e=d.properties[this.id],f=e.referenceScope,g=this.component.isReadOnly()||this._isReadOnly;return"DEPENDS"===f&&(f=a(ib.VALIDATION,jb.VALIDATION_REGION)||a(ib.PAGE_PROCESS,jb.PROCESS_REGION)?"ROW":"COMPONENT"),this.component.typeId!==ib.CLASSIC_RPT_COLUMN&&this.component.typeId!==ib.TAB_FORM_COLUMN||this.id!==jb.DISPLAY_SEQUENCE?this.id===jb.PAGE_MODE&&""===t().defaultTemplates.dialog&&(g=!0):g=!0,{type:c.type,multiValueDelimiter:c.multiValueDelimiter,prompt:c.prompt,unit:c.unit,displayLen:c.displayLen,maxLen:c.maxLen,textCase:c.textCase,displayGroupId:c.displayGroupId,yesValue:c.yesValue,noValue:c.noValue,isLegacy:c.hasOwnProperty("legacyValues"),lovComponentScope:c.lovComponentScope,lovComponentTypeId:c.lovComponentTypeId,helpText:function(){return b._getHelpText()},displaySeq:e.displaySeq,isCommon:e.isCommon,isUnique:e.hasOwnProperty("checkUniqueness"),referenceScope:f,defaultValue:e.defaultValue,supportsSubstitution:e.supportsSubstitution,isReadOnly:g,isRequired:this._isRequired,lovValues:function(a,c){return b._getLovValues(a,c)},quickPicks:function(){return b._getQuickPicks(f)},nullText:e.nullText,parentProperty:e.parentProperty,isCustomPluginAttribute:c.isCustomPluginAttribute}},F.prototype._getLovValues=function(b,c){function d(a,b){for(var c=0;c<a.length;c++)P.push({r:b+a[c].id,d:i("LOV.NOT_W_ARGUMENT",a[c].getDisplayTitle())})}function f(a){for(var b,c=[],d=0;d<a.length;d++)b=z(F.component._uiType,a[d].uiTypes),c.push({r:a[d].r,d:k("POSTFIX.UNSUPPORTED",a[d].d,!b),isQuickPick:b?a[d].isQuickPick:!1,isSupported:b});return c}function j(a){function b(a,c,d){c.sort(function(a,b){return a.d.localeCompare(b.d)});for(var e=0;e<c.length;e++)a.push({r:c[e].r,d:d+c[e].d}),f.hasOwnProperty(c[e].r)&&b(a,f[c[e].r],d+"..")}for(var c,d,e={},f={"":[]},g=[],h=0;h<a.length;h++)(a[h].typeId!==F.component.typeId||a[h].id!==F.component.id)&&(c=a[h].getProperty(jb.PARENT_REGION).getValue(),d=a[h].isOnGlobalPage()&&""===c?"global":c,f.hasOwnProperty(d)||(f[d]=[]),f[d].push({r:a[h].id,d:a[h].getDisplayTitle()}),e[a[h].id]=!0);for(d in f)f.hasOwnProperty(d)&&""!==d&&!e.hasOwnProperty(d)&&(f[""]=f[""].concat(f[d]));return b(g,f[""],""),f.hasOwnProperty("global")&&b(g,f.global,""),g}var m,n,o,p,q,r,s,w,A,B,C,D,E,F=this,G=_[this.id],H=ab[this.component.typeId],J=H.properties[this.id],K={},N=1,O={},P=[],Q=[];if(G.type===ob.SUPPORTED_UI)"PLUGINS"===G.lovType?(l(H.pluginType.plugins,function(a,b){b.isLegacy&&F._value!==a||(r=z(F.component._uiType,b.uiTypes),B={r:a,d:k("POSTFIX.UNSUPPORTED",b.title,!r),isSupported:r},b.category!==g?(O.hasOwnProperty(b.category)||(O[b.category]=P.length,P.push({group:bb[b.category],values:[]})),P[O[b.category]].values.push(B)):P.push(B))}),l(O,function(a,b){P[b].values.sort(function(a,b){return a.d.localeCompare(b.d)})}),P.sort(function(a,b){var c=a.hasOwnProperty("d")?"d":"group",d=b.hasOwnProperty("d")?"d":"group";return a[c].localeCompare(b[d])})):"EVENTS"===G.lovType&&(P.push({group:h("LOV.BROWSER_EVENTS"),values:f(cb.browser)}),P.push({group:h("LOV.APEX_EVENTS"),values:f(cb.apex)}),cb.component.length>0&&P.push({group:h("LOV.COMPONENT_EVENTS"),values:f(cb.component)}),P.push({group:h("LOV.CUSTOM_EVENT"),values:f(cb.custom)}));else if(G.type===ob.OWNER)P=eb.schemas;else if(G.type===ob.TABLE)e.process("getDbObjects",{x01:c.type,x02:F.component._properties[J.parentProperty.id]._value,x03:"N"},{success:b});else if(G.type===ob.COLUMN){q=this._getAvailableColumns(!0);for(var R=0;R<q.length;R++)y(q[R].type,G.dataTypes)?P.push({r:q[R].name,d:q[R].name}):"ROWID"!==q[R].name&&q[R].type&&Q.push({r:q[R].name,d:q[R].name+" ("+q[R].type.toLowerCase()+")"});Q.length>0&&P.push({group:h("LOV.COLUMN_WRONG_DATA_TYPE"),values:Q})}else{if(G.type===ob.ITEM)return void L(c,b);if(G.type===ob.PAGE)return void M(c,b);if(G.lovType)if("COMPONENT"===G.lovType)if("PARENT"===G.lovComponentScope?K={parentId:F.component.parentId,excludeGlobalPage:!0}:"PAGE"===G.lovComponentScope?K={excludeGlobalPage:!0}:"PAGE_AND_GLOBAL"===G.lovComponentScope?K={}:"THEME"===G.lovComponentScope&&(K={parentId:t().id},G.id!==jb.PAGE_TEMPLATE&&G.id!==jb.DIALOG_TEMPLATE||!J.parentProperty||J.parentProperty.id!==jb.PAGE_MODE||(D=-1!==a.inArray(F.component._properties[jb.PAGE_MODE]._value,["MODAL","NON_MODAL"]),E=t().templates[ib.PAGE_TEMPLATE],K.filterFunction=function(){return E[this.id].isDialog===D})),(G.id===jb.VALIDATION_REGION||G.id===jb.PROCESS_REGION)&&(K.properties=[{id:jb.REGION_TYPE,value:"NATIVE_TABFORM"}]),m=I(G.lovComponentTypeId,K,!1),G.lovComponentTypeId===ib.REGION)P=j(m);else{for(var R=0;R<m.length;R++)(m[R].typeId!==this.component.typeId||m[R].id!==this.component.id)&&P.push({r:m[R].id,d:m[R].getDisplayTitle()});P.sort(function(a,b){return a.d.localeCompare(b.d)}),G.lovComponentTypeId===ib.BUILD_OPTION?d(m,"-"):G.lovComponentTypeId===ib.AUTHORIZATION&&(P.push({r:"MUST_NOT_BE_PUBLIC_USER",d:h("LOV.MUST_NOT_BE_PUBLIC_USER")}),d(m,"!"))}else if("STATIC"===G.lovType)if(F.id===jb.AFFECTED_TYPE){p=H.pluginType.plugins[F.component.getProperty(jb.DA_ACTION_TYPE).getValue()].stdAttributes,"DOM_OBJECT"===F._value&&p.push("DOM_OBJECT");for(var R=0;R<G.lovValues.length;R++)-1!==a.inArray(G.lovValues[R].r,p)&&P.push(G.lovValues[R])}else for(var R=0;R<G.lovValues.length;R++)G.lovValues[R].isLegacy&&F._value!==G.lovValues[R].r||G.lovValues[R].isInternal&&!ub.isInternal||P.push(G.lovValues[R]);else if("REGION_POSITIONS"===G.lovType||"BUTTON_POSITIONS"===G.lovType){"REGION_POSITIONS"===G.lovType?(n=u().displayPoints,o="REGION"):(C=this.component.getProperty(jb.REGION).getValue(),o="BUTTON",n=""!==C?v(C).displayPoints:[]);for(var R=0;R<n.length;R++)-1===a.inArray(o,n[R].types)||"BUTTON"===n[R].types[0]&&"RIGHT_OF_IR_SEARCH_BAR"===n[R].id&&""!==C&&"NATIVE_IR"!==I(ib.REGION,{id:C})[0].getProperty(jb.REGION_TYPE).getValue()||P.push({r:n[R].id,d:n[R].name,isLegacy:n[R].isLegacy})}else if("GRID_COLUMNS"===G.lovType){A=F.component._grid.maxColumns,(F.id===jb.GRID_COLUMN_SPAN||F.id===jb.GRID_LABEL_COLUMN_SPAN)&&(s=parseInt(F.component._properties[jb.GRID_COLUMN].getValue(),10),s>0&&(A-=s-1),F.id===jb.GRID_LABEL_COLUMN_SPAN&&(w=parseInt(F.component._properties[jb.GRID_COLUMN_SPAN].getValue(),10),w>0&&(A=w),N=0,A-=1));for(var R=N;A>=R;R++)P.push({r:R+"",d:R+""})}else-1!==G.lovType.indexOf("FORMAT_MASKS")?P="DATE_FORMAT_MASKS"===G.lovType?db.dates:"NUMBER_FORMAT_MASKS"===G.lovType?db.numbers:"CHART_FORMAT_MASKS"===G.lovType?db.chart:db.dates.concat(db.numbers):"DISTINCT"===G.lovType?e.process("getDistinctValues",{x01:this.component.typeId,x02:this.id},{success:function(a){function c(a){var b;if(""!==a)if(_[F.id].multiValueDelimiter){b=a.split(_[F.id].multiValueDelimiter);for(var c=0;c<b.length;c++)e[b[c]]=""}else e[a]=""}for(var d=I(F.component.typeId,{}),e={},f=0;f<d.length;f++)d[f]._properties.hasOwnProperty(F.id)&&c(d[f]._properties[F.id]._value);for(var f=0;f<a.length;f++)c(a[f]);for(var g in e)e.hasOwnProperty(g)&&P.push({d:g,r:g});P.sort(function(a,b){return a.d.localeCompare(b.d)}),b(P)}}):"MAP_REGIONS"===G.lovType?e.process("getMapRegions",{x01:F.component._properties[J.parentProperty.id]._value,x02:c.id},{success:b}):"TEMPLATE_OPTIONS"===G.lovType&&(P=x(F).values)}return a.isFunction(b)?void b(P):P},F.prototype._getQuickPicks=function(b){function c(a){var b;a.i?(b=a.isLegacy?'<img src="#IMAGE_PREFIX#'+(a.dir||"")+a.i+'.gif" alt="">':'<img src="#IMAGE_PREFIX#app_ui/img/icons/'+a.i+'.png" class="'+a.i+'" alt="">',p.push({r:b,d:a.i+(a.isLegacy?".gif":".png"),icon:"icon-link-"+a.i})):p.push({r:a.r,d:a.d||a.r})}function d(a){for(var b=0;b<a.length;b++)a[b].isQuickPick&&z(j.component._uiType,a[b].uiTypes)&&c(a[b])}var e,f,g,h,i,j=this,k=_[this.id],m=ab[this.component.typeId],n=m.properties[this.id],p=[];if(k.type===ob.SUPPORTED_UI)"PLUGINS"===k.lovType?(l(m.pluginType.plugins,function(a,b){b.isQuickPick&&z(j.component._uiType,b.uiTypes)&&!b.isLegacy&&c({r:a,d:b.title})}),p.sort(function(a,b){return a.d.localeCompare(b.d)})):"EVENTS"===k.lovType&&(d(cb.browser),d(cb.apex),d(cb.component));else if(k.lovType)if("STATIC"===k.lovType)if(j.id===jb.AFFECTED_TYPE);else for(var q=0;q<k.lovValues.length;q++)k.lovValues[q].isQuickPick&&!k.lovValues[q].isLegacy&&c(k.lovValues[q]);else if("REGION_POSITIONS"===k.lovType||"BUTTON_POSITIONS"===k.lovType){"REGION_POSITIONS"===k.lovType?(e=u().displayPoints,f="REGION"):(g=this.component.getProperty(jb.REGION).getValue(),f="BUTTON",e=""!==g?v(g).displayPoints:[]);for(var q=0;q<e.length;q++)-1!==a.inArray(f,e[q].types)&&e[q].isQuickPick&&c({r:e[q].id,d:e[q].name})}else-1!==k.lovType.indexOf("FORMAT_MASKS");else if(-1!==a.inArray(m.id,[ib.IR_ATTRIBUTES,ib.IR_COLUMN,ib.CLASSIC_RPT_COLUMN,ib.TAB_FORM_COLUMN,ib.VALIDATION,ib.PAGE_PROCESS,ib.REGION_PLUGIN_ATTR,ib.REGION_COLUMN]))if(k.id===jb.LINK_TEXT&&c({r:"#"+j.component.getProperty(jb.COLUMN_NAME).getValue()+"#"}),k.id===jb.LINK_ICON||k.id===jb.LINK_TEXT)c({i:"apex-edit-pencil"}),c({i:"apex-edit-pencil-alt"}),c({i:"apex-edit-page"}),c({i:"apex-edit-view"}),c({i:"pencil16x16",dir:"menu/",isLegacy:!0}),c({i:"e2",isLegacy:!0}),c({i:"small_page",dir:"ws/",isLegacy:!0}),c({i:"magnifying_glass_white_bg",isLegacy:!0});else if(n.supportsSubstitution&&"ROW"===b&&-1!==a.inArray(k.type,[ob.TEXT,ob.TEXTAREA,ob.HTML])){h=L({type:"columns",component:j.component}),i=-1!==a.inArray(m.id,[ib.IR_ATTRIBUTES,ib.IR_COLUMN,ib.CLASSIC_RPT_COLUMN,ib.TAB_FORM_COLUMN])?{prefix:"#",postfix:"#",enquote:!1}:{prefix:"&",postfix:".",enquote:!0};for(var q=0;q<h.length;q++)c({r:i.prefix+(i.enquote?o(h[q].name):h[q].name)+i.postfix,d:h[q].name})}return p},F.prototype._getHelpText=function(){function c(c){var d,e="<dl>";d=a.map(k.pluginType.plugins,function(a,b){return 0===b.indexOf(c)&&z(i.component._uiType,a.uiTypes)&&!a.isLegacy?a:void 0}).sort(function(a,b){return a.title.localeCompare(b.title)});for(var f=0;f<d.length;f++)e+="<dt>"+b.escapeHTML(d[f].title)+"</dt>",e+="<dd>"+d[f].helpText,d[f].aboutUrl&&(e+=" "+h("HELP.ABOUT_PLUGIN",d[f].aboutUrl)),e+="</dd>";return e+="</dl>"}function d(){var a,c=i.getMetaData().lovValues();a="<p>"+h("HELP.AVAILABLE_OPTIONS")+"</p><dl>",l.nullText&&(a+="<dt>"+l.nullText+"</dt>",l.nullHelpText&&(a+="<dd>"+l.nullHelpText+"</dd>"));for(var d=0;d<c.length;d++)a+="<dt>"+b.escapeHTML(c[d].d)+"</dt>",(c[d].helpText||c[d].isLegacy)&&(a+="<dd>",c[d].helpText&&(a+=c[d].helpText),c[d].isLegacy&&(a+="<p><em>"+h("HELP.DEPRECATED.LOV_VALUE",qb)+"</em></p>"),a+="</dd>");return a+="</dl>"}function e(){function a(a){for(var c=0;c<a.length;c++)e+="<dt>"+b.escapeHTML(a[c].name)+"</dt>",a[c].helpText&&(e+="<dd>"+a[c].helpText+"</dd>")}var c,d,e,f,g=x(i),j=[],k={},l=[];for(f=0;f<g.values.length;f++)g.values[f].groupId?(c=g.values[f].groupId,k.hasOwnProperty(c)?d=k[c]:(j.push({title:g.groups[c].title,seq:g.groups[c].seq,helpText:g.groups[c].helpText,lovValues:[]}),d=j.length-1,k[c]=d),j[d].lovValues.push({name:g.values[f].d,helpText:g.values[f].helpText})):l.push({name:g.values[f].d,helpText:g.values[f].helpText});for(j.sort(function(a,b){return a.seq===b.seq?a.title.localeCompare(b.title):a.seq-b.seq}),e="<p>"+h("HELP.AVAILABLE_OPTIONS")+"</p><dl>",a(l),f=0;f<j.length;f++)e+="<dt>"+b.escapeHTML(j[f].title)+"</dt><dd>",j[f].helpText&&(e+="<p>"+j[f].helpText+"</p>"),e+="<dl>",a(j[f].lovValues),e+="</dl></dd>";return e+="</dl>"}var f,i=this,j=_[this.id],k=ab[this.component.typeId],l=k.properties[this.id];return f="<p>"+(l.helpText||j.helpText)+"</p>",k.pluginType&&this.id===k.pluginType.typePropertyId&&(f=f.replace(/#NATIVE_PLUGINS#/,c("NATIVE")).replace(/#CUSTOM_PLUGINS#/,c("PLUGIN"))),j.legacyValues&&(f="<p><em>"+h("HELP.DEPRECATED.ATTRIBUTE",qb)+"</em></p>"),"STATIC"===j.lovType?/#LOV_VALUES#/.test(f)?f=f.replace(/#LOV_VALUES#/,d()):f+=d():"TEMPLATE_OPTIONS"===j.lovType&&(f+=e()),(this._sqlExamples!==g||j.examples!==g)&&(f+="<h4>"+h("HELP.EXAMPLES")+"</h4><p>"+(this._sqlExamples||j.examples)+"</p>"),-1===a.inArray(j.type,[ob.CHECKBOXES,ob.LINK,ob.COMPONENT,ob.SELECT_LIST,ob.SUPPORTED_UI,ob.SUBSCRIPTION,ob.YES_NO,ob.OWNER,ob.TABLE,ob.COLUMN,ob.TEMPLATE_OPTIONS])&&(f+="<h4>"+h("HELP.ADDITIONAL_INFO")+"</h4>",f+="<ul><li>"+h("HELP.TYPE")+": "+h("HELP.PROP_TYPE."+j.type),j.multiValueDelimiter&&(f+=" ("+h("HELP.MULTIPLE.TEXT",h("HELP.MULTIPLE."+j.multiValueDelimiter))+")"),f+="</li>",("SQL"===j.type.substr(0,3)||"PLSQL"===j.type.substr(0,5))&&(f+="<li>"+h("HELP.BIND_VARIABLES")+": "+h("HELP.REF_SCOPE."+i.getMetaData().referenceScope)+"</li>"),l.supportsSubstitution&&(f+="<li>"+h("HELP.SUBSTITUTIONS")+": "+h("HELP.REF_SCOPE."+i.getMetaData().referenceScope)+"</li>"),j.type===ob.SQL?(f+="<li>"+h("HELP.MIN_COLUMNS")+": "+this._sqlMinColumns+"</li>",this._sqlMaxColumns>0&&this._sqlMaxColumns<999&&(f+="<li>"+h("HELP.MAX_COLUMNS")+": "+this._sqlMaxColumns+"</li>")):(j.type===ob.INTEGER||j.type===ob.NUMBER)&&(j.minValue!==g&&(f+="<li>"+h("HELP.MIN_VALUE")+": "+j.minValue+"</li>"),j.maxValue!==g&&(f+="<li>"+h("HELP.MAX_VALUE")+": "+j.maxValue+"</li>")),j.restrictedChars!==g&&(f+="<li>"+h("HELP.RESTRICTED_CHARS_LABEL")+": "+h("HELP.RESTRICTED_CHARS."+j.restrictedChars)+"</li>"),f+="</ul>"),f},F.prototype.getColumns=function(a){var b=[];if(0===this.errors.length&&0===this.warnings.length)if(a)b=this._columns;else for(var c=0;c<this._columns.length;c++)("ROWID"!==this._columns[c].name||0!==c)&&b.push(this._columns[c]);return b},F.prototype.hasOrderBy=function(){return 0===this.errors.length&&this._hasOrderBy},F.prototype._getAvailableColumns=function(a){var b=ab[this.component.typeId].properties[this.id],c=b.parentProperty,d=this.component,e=[];if(b.hasOwnProperty("parentProperty"))for(;d!==g;){if(d.typeId===c.typeId){if(_[c.id].lovComponentTypeId===ib.REGION){e=E(this.component._properties[c.id]._value);break}e=d._properties[c.id].getColumns(a);break}d=d.getParent()}return e},F.prototype._checkColumn=function(a){for(var b=this._getAvailableColumns(!0),c=0;c<b.length;c++)if(b[c].name===a)return y(b[c].type,_[this.id].dataTypes)?"":h("VAL.COLUMN_HAS_WRONG_DATA_TYPE");return h("VAL.COLUMN_NOT_FOUND")},F.prototype.validate=function(d){function f(a){a.error&&x.errors.push(a.error),a.warning&&x.warnings.push(a.warning)}var i,j,k,l,m,n,o=/^&((\w+)|("[^\n\r"&]+"))\.$/,p={US_ONLY:/[^a-zA-Z0-9 ]/,US_ONLY_NO_SPACE:/[^a-zA-Z0-9]/,US_ONLY_UNDERSCORE_NO_SPACE:/[^a-zA-Z0-9_]/,WEB_SAFE:/[<>"]/,NO_SPECIAL_CHAR:/[&<>"\/;,*|=%]|(--)/,NO_SPECIAL_CHAR_NL:/[&<>"\/;,*|=%\n\r]|(--)/,SAFE_COMPONENT_NAME:/[ :&,.+?^'"\n\r]/},q={decimal:c.getDecimalSeparator(),group:c.getGroupSeparator()},r=d,s=this,t=ab[this.component.typeId],u=t.properties,v=u[this.id],w=_[this.id],x={errors:[],warnings:[],columns:this._columns,hasOrderBy:this._hasOrderBy};if(this._isRequired&&""===a.trim(r))x.errors.push(h("VAL.IS_REQUIRED"));else if(""!==a.trim(r))if(w.restrictedChars&&p[w.restrictedChars].test(r))x.errors.push(h("VAL.HAS_RESTRICTED_CHAR",r.match(p[w.restrictedChars])));else if((w.type===ob.NUMBER||w.type===ob.INTEGER)&&v.supportsSubstitution&&o.test(r));else if(r.length>w.maxLen)x.errors.push(h("VAL.VALUE_TOO_LONG",r.length-w.maxLen));else{if(w.type===ob.NUMBER||w.type===ob.INTEGER)w.type===ob.NUMBER?("."!==q.decimal&&(r=r.replace(new RegExp(b.escapeRegExp(q.group),"g"),"!"),r=r.replace(new RegExp(b.escapeRegExp(q.decimal),"g"),".")),i=Number(r),k=h("VAL.MUST_BE_NUMERIC")):(i=parseInt(r,10),k=h("VAL.MUST_BE_INTEGER")),isNaN(i)||i!=r?x.errors.push(k):(w.minValue!==g||w.maxValue!==g)&&(i<w.minValue?x.errors.push(h("VAL.VALUE_LESS_MIN_VALUE",w.minValue)):i>w.maxValue&&x.errors.push(h("VAL.VALUE_GREATER_MAX_VALUE",w.maxValue)));else if(-1!==a.inArray(s.id,[jb.REGION_SQL,jb.REGION_FUNCTION_RETURNING_SQL])&&s.component.getProperty(jb.GENERIC_COLUMN_COUNT)){j=s.component.getProperty(jb.GENERIC_COLUMN_COUNT).getValue(),x.columns=[],x.hasOrderBy=!1;for(var y=1;j>=y;y++)x.columns.push({name:"COL"+(10>y?"0":"")+y,type:"VARCHAR2",isRequired:!1,maxLen:4e3})}else-1!==a.inArray(w.type,[ob.TABLE,ob.SQL,ob.SQL_EXPR,ob.PLSQL,ob.PLSQL_EXPR_VARCHAR,ob.PLSQL_EXPR_BOOLEAN,ob.PLSQL_FUNC_VARCHAR,ob.PLSQL_FUNC_BOOLEAN])||w.hasPlSqlCheck?(w.type===ob.TABLE&&(n=this.component._properties[v.parentProperty.id]._value),e.process("validateProperty",{x01:this.id,x02:w.type,x03:this._sqlMinColumns,x04:this._sqlMaxColumns,x05:r,x06:n},{success:function(b){x.columns=b.columns||[],x.hasOrderBy=b.hasOrderBy,"OK"!==b.result&&(a.inArray(w.type,[ob.SQL,ob.TABLE])>=0&&v.refByChilds.length>0||s.id===jb.REGION_FUNCTION_RETURNING_SQL?x.errors.push(b.result):x.warnings.push(b.result))},async:!1})):w.type===ob.COLUMN&&(k=this._checkColumn(r),""!==k&&x.errors.push(k));v.checkUniqueness&&(l={properties:[{id:this.id,value:r}]},"PARENT"===v.checkUniqueness?l.parentId=this.component.parentId:"PAGE"===v.checkUniqueness&&(l.pageId=gb),m=I(this.component.typeId,l),I(this.component.typeId,l).length>0&&m[0].id!==this.component.id&&x.errors.push(h("VAL.MUST_BE_UNIQUE"))),0===x.errors.length&&f(this.component._callPluginCallback({action:lb.VALIDATE,property:this,value:r})),0===x.errors.length&&f(this.component._callComponentTypeCallback({action:lb.VALIDATE,property:this,value:r}))}return x},F.prototype._setValue=function(c,d){function e(){-1!==a.inArray(v.type,[ob.NUMBER,ob.INTEGER,ob.LINK,ob.ITEM,ob.PAGE,ob.TABLE])&&(p=a.trim(p)),"UPPER"===v.textCase?p=p.toUpperCase():"LOWER"===v.textCase&&(p=p.toLowerCase())}function f(a){function b(a){delete o._properties[a];for(var c=0;c<t[a].refByDependingOn.length;c++)b(t[a].refByDependingOn[c])}for(var c,d=0;d<t[a].refByDependingOn.length;d++)c=t[a].refByDependingOn[d],o._properties.hasOwnProperty(c)?o._properties[c]=new F({component:o,propertyId:c,defaultValue:o._properties[c]._value,columns:o._properties[c]._columns,hasOrderBy:o._properties[c]._hasOrderBy}):c===jb.GRID_LABEL_COLUMN_SPAN||c===jb.READ_ONLY_HTML_ATTRIBUTES?o._setGridProperties(!0):o._properties[c]=new F({component:o,propertyId:c}),o._properties.hasOwnProperty(c)&&o._properties[c]._isVisible()?f(c):b(c)}function i(){function a(a,b){var c,d;a._properties.hasOwnProperty(b)&&(c=a._properties[b],d=a===o?"_setValue":"setValue",_[b].type===ob.COLUMN&&""!==n._value&&""!==c._value?c._checkColumn(c._value)===h("VAL.COLUMN_NOT_FOUND")?c[d]("",l):c[d](c._value,l):c[d](B(c,ab[a.typeId].properties[b].defaultValue),l))}var b;if(0===n.errors.length&&0===n.warnings.length||1===n.errors.length&&n.errors[0]===h("VAL.IS_REQUIRED"))for(var c=0;c<u.refByChilds.length;c++)if(u.refByChilds[c].typeId===o.typeId)a(o,u.refByChilds[c].id);else{b=o.getChildrenUntil(u.refByChilds[c].typeId);for(var d=0;d<b.length;d++)a(b[d],u.refByChilds[c].id)}}function j(){-1!==a.inArray(n.id,[jb.GRID_NEW_GRID,jb.GRID_NEW_ROW,jb.GRID_COLUMN,jb.GRID_NEW_COLUMN,jb.GRID_COLUMN_SPAN])||o.typeId===ib.REGION&&-1!==a.inArray(n.id,[jb.REGION_POSITION,jb.PARENT_REGION,jb.REGION_TEMPLATE])||o.typeId===ib.BUTTON&&-1!==a.inArray(n.id,[jb.BUTTON_POSITION,jb.REGION])||o.typeId===ib.PAGE_ITEM&&-1!==a.inArray(n.id,[jb.REGION,jb.ITEM_TYPE,jb.FIELD_TEMPLATE])?o._setGridProperties():o.typeId===ib.PAGE&&-1!==a.inArray(n.id,[jb.PAGE_TEMPLATE,jb.DIALOG_TEMPLATE])&&H()}function k(a,c){var d,e,f,g,h,i,j,k,l=b.escapeRegExp(a),m=[];for(i=0;i<ab[ib.PAGE_ITEM].refByProperties.length;i++)if(d=_[ab[ib.PAGE_ITEM].refByProperties[i]],"ITEM"===d.type)for(d.multiValueDelimiter?(f=new RegExp("(^|"+d.multiValueDelimiter+"|\\s)"+l+"($|"+d.multiValueDelimiter+"|\\s)","i"),g={properties:[{id:d.id,value:f}]}):(f=new RegExp("^"+l+"$","i"),g={properties:[{id:d.id,value:f}]}),j=0;j<d.refByComponentTypes.length;j++)for(e=ab[d.refByComponentTypes[j]].properties[d.id],m=I(d.refByComponentTypes[j],g,!1),k=0;k<m.length;k++)h=m[k].getProperty(d.id),h.setValue(d.multiValueDelimiter?h.getValue().replace(f,"$1"+c+"$2"):c)}var l,m,n=this,o=this.component,p=c+"",q=this._value,r=ab[o.typeId],s=r.pluginType,t=r.properties,u=t[this.id],v=_[n.id],w=g,x=g;if(d=a.extend({checkReadOnly:!0},d),l=a.extend({},{},d),d.checkReadOnly){if(vb)throw"Page is read only!";if(o.isReadOnly())throw"Component is read only!";if(n._isReadOnly)throw"Property '"+n.getMetaData().prompt+"' ("+n.id+") is read only for this component!"}(p!==n._value||0!==n.errors.length||0!==n.warnings.length||d.forceSetValue)&&(e(),m=this.validate(p),s&&n.id===s.typePropertyId&&p!==q&&this.component._callPluginCallback({action:lb.REMOVED}),n._value=p,n.hasChanged=!0,n.errors=m.errors,n.warnings=m.warnings,n._columns=m.columns,n._hasOrderBy=m.hasOrderBy,0===n.errors.length&&n.id===r.seqPropertyId&&(w=parseInt(p,10)),n.id===r.parentPropertyId&&(x=p),o._setHasChanged({seq:w,parentId:x}),f(n.id),i(),n.id===jb.ITEM_NAME&&k(q,p),j(),o._setHasChanged())},F.prototype.setValue=function(a,b){var c;if(this.component._status===mb.DELETED)throw"Component has been deleted!";return P(this.component,wb.CHANGE),c=this._value,this._setValue(a,{checkReadOnly:!0,forceSetValue:b}),this.component._callPluginCallback({property:this,oldValue:c}),this.component._callComponentTypeCallback({property:this,oldValue:c}),this},F.prototype._setUniqueValue=function(){var a=ab[this.component.typeId].properties[this.id].checkUniqueness,b={properties:[{id:this.id,value:""}]},c=this.getValue();"PARENT"===a?b.parentId=this.component.parentId:"PAGE"===a&&(b.pageId=gb),b.properties[0].value=c;for(var d=1;1e4>d;d++){if(0===I(this.component.typeId,b,!1).length)return void(this._value=b.properties[0].value);b.properties[0].value=c+"_"+d}throw"Unable to generate a unique value for property '"+this.getMetaData().prompt+"' ("+this.id+")!"},G.prototype._callPluginCallback=function(b){var c,d,e,f,h=ab[this.typeId],i=h.pluginType,j=b.action;if(i&&(c=b.action===lb.VALIDATE&&b.property.id===i.typePropertyId?i.plugins[b.value]:i.plugins[this._properties[i.typePropertyId]._value])){if(j===g){if(b.property&&b.property.id===i.typePropertyId)j=lb.CREATED;else if(b.properties)for(var k=0;k<b.properties.length;k++)if(b.properties[k].id===i.typePropertyId){j=lb.CREATED;break}j===g&&(j=lb.CHANGED)}if(h.id!==ib.REGION||j!==lb.CREATED&&j!==lb.REMOVED||(j===lb.CREATED&&-1===a.inArray(c.name,["NATIVE_SQL_REPORT","NATIVE_FNC_REPORT","NATIVE_TABFORM"])?(d=ab[ib.REGION_PLUGIN_ATTR].pluginType.plugins[c.name],(d.attributes.length>0||-1!==a.inArray("FETCHED_ROWS",d.stdAttributes)||-1!==a.inArray("NO_DATA_FOUND_MESSAGE",d.stdAttributes)||-1!==a.inArray("COLUMN_HEADING",d.stdAttributes)||"NATIVE_BREADCRUMB"===c.name||"NATIVE_LIST"===c.name)&&new G({typeId:ib.REGION_PLUGIN_ATTR,parentId:this.id,values:[{id:jb.HIDDEN_REGION_TYPE,value:c.name}]})):j===lb.REMOVED&&(e=this.getChilds(ib.REGION_PLUGIN_ATTR),1===e.length&&e[0].remove())),a.isFunction(c.callback)&&(j===lb.VALIDATE?f=c.callback.apply(this,[j,b.property,b.value]):j===lb.CREATED||j===lb.REMOVED?c.callback.apply(this,[j]):j===lb.CHANGED&&b.property&&c.callback.apply(this,[j,b.property]),b.properties))for(var k=0;k<b.properties.length;k++)b.properties[k].id!==i.typePropertyId&&c.callback.apply(this,[lb.CHANGED,this.getProperty(b.properties[k].id),b.properties[k].oldValue])}return f||{}},G.prototype._callComponentTypeCallback=function(b){var c,d=ab[this.typeId];if(a.isFunction(d.callback))if(b.action===lb.VALIDATE)c=d.callback.apply(this,[b.action,b.property,b.value]);else if(b.action)d.callback.apply(this,[b.action]);else if(b.property)d.callback.apply(this,[lb.CHANGED,b.property,b.oldValue]);else if(a.isArray(b.properties))for(var e=0;e<b.properties.length;e++)d.callback.apply(this,[lb.CHANGED,this.getProperty(b.properties[e].id),b.properties[e].oldValue]);return c||{}},G.prototype.isOnGlobalPage=function(){return this.pageId===hb.globalPageId&&this.pageId!==gb},G.prototype.isReadOnly=function(){return vb||this._isReadOnly||this.isOnGlobalPage()||ab[this.typeId].isSharedComponent},G.prototype.hasChanged=function(){return this._status!==mb.UNCHANGED},G.prototype.hasErrors=function(){for(var a in this._properties)if(this._properties.hasOwnProperty(a)&&this._properties[a].errors.length>0)return!0;return!1},G.prototype.hasWarnings=function(){for(var a in this._properties)if(this._properties.hasOwnProperty(a)&&this._properties[a].warnings.length>0)return!0;return!1},G.prototype._setHasChanged=function(a){var b=this;a=a||{},a.status===mb.DELETED?b._status=mb.DELETED:b._status===mb.UNCHANGED&&(b._status=mb.UPDATED),a.seq!==g&&(b.seq=a.seq),a.parentId!==g&&(b.parentId=a.parentId)},G.prototype._deleteProperty=function(a){var b=ab[this.typeId].properties[a];delete this._properties[a];for(var c=0;c<b.refByDependingOn.length;c++)this._deleteProperty(b.refByDependingOn[c])},G.prototype._cleanProperties=function(){for(var a in this._properties)this._properties.hasOwnProperty(a)&&(this._properties[a]._isVisible()||this._deleteProperty(a))},G.prototype._getGridParams=function(){function b(b){var c,d,e,g=I(ib.REGION,{id:b})[0],h=a.extend({},g._grid);return h.hasGridSupport&&!i.alwaysUseMaxColumns&&(c=g._properties[jb.GRID_COLUMN].getValue(),d=g._properties[jb.GRID_COLUMN_SPAN],i.grid.hasColumnSpan&&d&&(e=d.getValue()),e>0?(h.maxColumns=parseInt(e,10),f.trace("_getGridParams: Region %O uses column span, reduce max columns to %i",g,h.maxColumns)):c>0&&(h.maxColumns-=parseInt(c,10)-1,f.trace("_getGridParams: Region %O uses column positioning, reduce max columns to %i",g,h.maxColumns))),h}var c,d,e,h,i=u(),j={};return this.typeId===ib.REGION?""===this._properties[jb.PARENT_REGION]._value?e=this._properties[jb.REGION_POSITION]._value:(c=this._properties[jb.PARENT_REGION]._value,e="SUB_REGIONS"):this.typeId===ib.PAGE_ITEM?this.parentId&&(c=this.parentId,e="BODY"):this.typeId===ib.BUTTON&&this.parentId&&(c=this.parentId,e=this._properties[jb.BUTTON_POSITION]._value),h=c===g?i.displayPointsMap[e]:v(c).displayPointsMap[e],h===g?(h={hasGridSupport:!0,maxFixedGridColumns:i.grid.maxColumns,isUnknown:!0},f.warn("_getGridParams: Component %O uses unknown display point %s! Fallback to default values",this,e)):(i.grid.alwaysUseMaxColumns||h.maxFixedGridColumns===g)&&(h.maxFixedGridColumns=i.grid.maxColumns),h.isUnknown&&(j.isUnknown=!0),c!==g?(d=b(c),j.pageDisplayPointhasGridSupport=d.pageDisplayPointhasGridSupport,j.hasGridSupport=d.pageDisplayPointhasGridSupport?h.hasGridSupport:!1,"FIXED"!==i.grid.type||i.grid.alwaysUseMaxColumns?j.maxColumns=i.grid.maxColumns:(j.maxColumns=h.maxFixedGridColumns<0?Math.max(d.maxColumns+h.maxFixedGridColumns,0):h.maxFixedGridColumns>0?Math.min(h.maxFixedGridColumns,d.maxColumns):d.maxColumns,j.maxColumns<2&&(j.hasGridSupport=!1,f.warn("_getGridParams: Component %O, disable grid support because there are no more grid columns available!",this)))):(j.hasGridSupport=h.hasGridSupport,j.pageDisplayPointhasGridSupport=h.hasGridSupport,j.hasGridSupport&&(j.maxColumns=h.maxFixedGridColumns)),f.trace("_getGridParams: Component %O returned grid params %O",this,j),j},G.prototype._setGridProperties=function(b){function c(a,b){b?(h._properties.hasOwnProperty(a)||(h._properties[a]=new F({component:h,propertyId:a})),h._properties[a]._isVisible()||h._deleteProperty(a)):h._deleteProperty(a)}function d(a){var b=h._properties[a];return b?b.getValue():""}function e(a,c){for(var d=I(a,{properties:[{id:c,value:h.id}]}),e=0;e<d.length;e++)b!==g||d[e].isOnGlobalPage()||(P(d[e],wb.CHANGE),d[e]._setHasChanged()),d[e]._setGridProperties(b)}var f,h=this,i=u(),j=!1,k=!1;-1!==a.inArray(this.typeId,[ib.REGION,ib.PAGE_ITEM,ib.BUTTON])&&(this._grid=this._getGridParams(),this._grid.hasGridSupport?(c(jb.GRID_NEW_GRID,i.grid.hasNewGrid),c(jb.GRID_NEW_ROW,!i.grid.hasNewGrid||"N"===d(jb.GRID_NEW_GRID)),c(jb.GRID_COLUMN,!0),c(jb.GRID_NEW_COLUMN,""===d(jb.GRID_COLUMN)&&"N"===d(jb.GRID_NEW_ROW)),j="Y"===d(jb.GRID_NEW_GRID)||"Y"===d(jb.GRID_NEW_ROW)||""!==d(jb.GRID_COLUMN)||"Y"===d(jb.GRID_NEW_COLUMN),c(jb.GRID_COLUMN_SPAN,j&&i.grid.hasColumnSpan),c(jb.GRID_COLUMN_CSS_CLASSES,j&&i.grid.hasColumnCssClasses),c(jb.GRID_COLUMN_ATTRIBUTES,j&&i.grid.hasColumnAttributes)):(this._deleteProperty(jb.GRID_NEW_GRID),this._deleteProperty(jb.GRID_NEW_ROW),this._deleteProperty(jb.GRID_COLUMN),this._deleteProperty(jb.GRID_NEW_COLUMN),this._deleteProperty(jb.GRID_COLUMN_SPAN),this._deleteProperty(jb.GRID_COLUMN_CSS_CLASSES),this._deleteProperty(jb.GRID_COLUMN_ATTRIBUTES)),(this.typeId===ib.PAGE_ITEM||this.typeId===ib.BUTTON)&&(k=this._grid.hasGridSupport&&j&&"TABLE"===i.grid.type,c(jb.GRID_ROW_SPAN,k),c(jb.ELEMENT_FIELD_ALIGNMENT,k),this.typeId===ib.PAGE_ITEM&&(c(jb.LABEL_ALIGNMENT,k),c(jb.READ_ONLY_HTML_ATTRIBUTES,k&&i.grid.hasColumnAttributes),f=w(d(jb.FIELD_TEMPLATE)),c(jb.GRID_LABEL_COLUMN_SPAN,this._grid.hasGridSupport&&j&&f.hasLabelColumnSpan))),this.typeId===ib.REGION&&(e(ib.REGION,jb.PARENT_REGION),e(ib.PAGE_ITEM,jb.REGION),e(ib.BUTTON,jb.REGION)))
},G.prototype._setProperties=function(a,b){var c;a=a||[];for(var d=0;d<a.length;d++){if(!_.hasOwnProperty(a[d].id))throw"Property "+a[d].id+" doesn't exist!";if(!this._properties.hasOwnProperty(a[d].id))throw"Property '"+_[a[d].id].prompt+"' ("+a[d].id+") not available for this component!";c=this._properties[a[d].id],a[d].oldValue=c._value,c._setValue(a[d].value,b)}},G.prototype.getProperty=function(a){return this._properties[a]},G.prototype.getProperties=function(){var a=[];return l(this._properties,function(b,c){a.push(c)}),a},G.prototype.duplicate=function(a){if(this._status===mb.DELETED)throw"Component has been deleted!";return this._duplicate(a)},G.prototype._duplicate=function(a,b){var c,d=ab[this.typeId],e=[];c=new G({component:this,previousComponent:this,values:a,parentId:b||this.parentId});for(var f=0;f<d.childComponentTypes.length;f++)if(d.childComponentTypes[f]!==ib.IR_SAVED_REPORT){e=I(d.childComponentTypes[f],{parentId:this.id},!1);for(var h=0;h<e.length;h++)e[h]._duplicate(g,c.id)}return c},G.prototype.remove=function(){this._remove(!1)},G.prototype._remove=function(a){function c(a,b,c){var d,e=b.split(c),f=new RegExp("^\\s*"+a+"\\s*$","i");for(d=0;d<e.length;d++)if(f.test(e[d])){e.splice(d,1);break}return e.join(c)}var d,e,f,g,h,j,k=ab[this.typeId],l=this,m=[],n=[];if(this._status!==mb.DELETED){if(vb)throw"Page is read only!";if(this.isReadOnly())throw"Component is read only!";P(this,wb.DELETE);for(var o=0;o<k.childComponentTypes.length;o++){m=I(k.childComponentTypes[o],{parentId:this.id},!1);for(var p=0;p<m.length;p++)m[p]._remove(!0)}g=this.typeId===ib.BUILD_OPTION||this.typeId===ib.AUTHORIZATION?new RegExp("^[-!]?"+b.escapeRegExp(this.id)+"$"):this.id,this.typeId===ib.PAGE_ITEM&&(h=b.escapeRegExp(this.getProperty(jb.ITEM_NAME).getValue()));for(var o=0;o<k.refByProperties.length;o++){d=_[k.refByProperties[o]],"COMPONENT"===d.lovType?f={properties:[{id:d.id,value:g}]}:"ITEM"===d.type&&(f=d.multiValueDelimiter?{properties:[{id:d.id,value:new RegExp("(^|"+d.multiValueDelimiter+"|\\s)"+h+"($|"+d.multiValueDelimiter+"|\\s)","i")}]}:{properties:[{id:d.id,value:new RegExp("^"+h+"$","i")}]});for(var p=0;p<d.refByComponentTypes.length;p++)if(ab[d.refByComponentTypes[p]].parentId!==this.typeId){e=ab[d.refByComponentTypes[p]].properties[d.id],n=I(d.refByComponentTypes[p],f,!1);for(var q=0;q<n.length;q++)if("WEAK_NULL"===e.referenceOnDelete||"DB_NULL"===e.referenceOnDelete)j=n[q].getProperty(d.id),j.setValue("ITEM"===d.type&&d.multiValueDelimiter?c(h,j.getValue(),d.multiValueDelimiter):"");else{if("WEAK_CASCADE"!==e.referenceOnDelete&&"DB_CASCADE"!==e.referenceOnDelete)throw i("DEL.REFERENCE_EXISTS",n[q].getDisplayTitle());"ITEM"===d.type&&d.multiValueDelimiter?(j=n[q].getProperty(d.id),j.setValue(c(h,j.getValue(),d.multiValueDelimiter)),""===j.getValue()&&n[q]._remove(!0)):n[q]._remove(!0)}}}this._status===mb.CREATED||a?delete rb[this.typeId][this.id]:this._setHasChanged({status:mb.DELETED}),l._callPluginCallback({action:lb.REMOVED}),l._callComponentTypeCallback({action:lb.REMOVED})}},G.prototype.move=function(a,b){if(this._status===mb.DELETED)throw"Component has already been deleted!";if(vb)throw"Page is read only!";if(this.isReadOnly())throw"Component is read only!";P(this,wb.CHANGE),this._setProperties(b),this._move(a),this._callPluginCallback({properties:b}),this._callComponentTypeCallback({properties:b})},G.prototype._move=function(a){var b,c,d,e=this.typeId===ib.CLASSIC_RPT_COLUMN||this.typeId===ib.TAB_FORM_COLUMN?1:10,f=ab[this.typeId].seqPropertyId,h=a,i=!0;if(b=this.getSiblings(!0),b.length>0&&h){if(h instanceof G)for(d=0;d<b.length;d++)if(b[d].id===h.id&&b[d].typeId===h.typeId){this.seq=h.seq+e,i=!1;break}("last"===h||i)&&b[b.length-1].id!==this.id&&(h=b[b.length-1],this.seq=h.seq+e,i=!1)}for(i&&(h=g,this.seq=e),c=this.seq,this._properties[f]._setValue(this.seq,{checkReadOnly:!1}),d=0;d<b.length;d++)i?b[d].isReadOnly()?c=b[d].seq:b[d].id!==this.id&&(c+=e,b[d].getProperty(f).setValue(c)):b[d].id===h.id&&(i=!0)},G.prototype.getSiblings=function(b){var c,d,e,f=[];if(-1!==a.inArray(this.typeId,[ib.REGION,ib.PAGE_ITEM,ib.BUTTON])?(this.typeId===ib.REGION?(f[0]={typeId:ib.REGION,filter:{properties:[]}},this._properties.hasOwnProperty(jb.REGION_POSITION)&&f[0].filter.properties.push({id:jb.REGION_POSITION,value:this._properties[jb.REGION_POSITION]._value}),f[0].filter.properties.push({id:jb.PARENT_REGION,value:this._properties[jb.PARENT_REGION]._value})):this.typeId===ib.PAGE_ITEM||this.typeId===ib.BUTTON&&"BODY"===this._properties[jb.BUTTON_POSITION]._value?(f.push({typeId:ib.PAGE_ITEM,filter:{parentId:this.parentId}}),f.push({typeId:ib.BUTTON,filter:{parentId:this.parentId,properties:[{id:jb.BUTTON_POSITION,value:"BODY"}]}})):this.typeId===ib.BUTTON&&f.push({typeId:ib.BUTTON,filter:{parentId:this.parentId,filterFunction:function(){return"BODY"!==this.getProperty(jb.BUTTON_POSITION).getValue}}}),e=J(f)):(c={parentId:this.parentId,properties:[]},this.typeId===ib.PAGE_COMPUTATION||this.typeId===ib.APP_COMPUTATION?d=jb.COMPUTATION_POINT:this.typeId===ib.PAGE_PROCESS||this.typeId===ib.APP_PROCESS?d=jb.PROCESS_POINT:this.typeId===ib.BRANCH?d=jb.BRANCH_POINT:this.typeId===ib.DA_ACTION&&(d=jb.FIRE_WHEN_EVENT_RESULT_IS),d&&c.properties.push({id:d,value:this._properties[d]._value}),e=I(this.typeId,c)),!b)for(var g=0;g<e.length;g++)if(e[g].id===this.id){e.splice(g,1);break}return e},G.prototype.getParent=function(){return this.parentId?I(ab[this.typeId].parentId,{id:this.parentId},!1)[0]:g},G.prototype.getChilds=function(b,c,d){var e=a.extend(!0,{},c);return e.parentId=this.id,I(b,e,d)},G.prototype.getChildrenUntil=function(b,c,d){function e(a){if(ab[a].parentId===g)throw"Component Type Id "+a+" is not a child type of component type id "+h.typeId;return ab[a].parentId===h.typeId?a:e(ab[a].parentId)}var f,h=this,i=a.extend(!0,{},c),k=[];if(i.parentId=h.id,ab[b].parentId===h.typeId)return I(b,i,d);f=I(e(ab[b]),i,d);for(var l=0;j<f.length;l++)k=k.concat(f[l].getChildrenUntil(b,i,d));return k},G.prototype.getDisplayTitle=function(){return ab[this.typeId].displayPropertyId?k("POSTFIX.GLOBAL_PAGE",this.getProperty(ab[this.typeId].displayPropertyId).getDisplayValue(),this.isOnGlobalPage()):""},G.prototype.setDisplayTitle=function(a){return this.getProperty(ab[this.typeId].displayPropertyId).setValue(a)},G.prototype._copyToGlobal=function(){var a=this,b=rb[this.typeId][this.id];l(a,function(c){"_properties"===c?(b._properties={},l(a._properties,function(a,c){b._properties[a]=new F({component:b,propertyId:c})})):b[c]=a[c]})};var wb={CREATE:"create",DELETE:"delete",CHANGE:"change"},xb=null,yb=function(){var b={_forEach:function(a){for(var b in this.components)if(this.components.hasOwnProperty(b))for(var c in this.components[b])this.components[b].hasOwnProperty(c)&&a.call(this.components[b][c],b,c)},_restore:function(a,b,c,d){var e=null;return rb[a].hasOwnProperty(b)&&(e=new G({component:rb[a][b],isDetached:!0})),c===wb.CREATE?d._status!==mb.CREATED&&rb[a].hasOwnProperty(b)?rb[a][b]._status=d._status:rb[a][b]=new G({component:d,isDetached:!0}):c===wb.DELETE?e._status===mb.CREATED?delete rb[a][b]:rb[a][b]._status=mb.DELETED:d._copyToGlobal(),Q(e,rb[a][b]||null)},_undo:function(){var a=this,b=[];return this._forEach(function(c,d){var e;switch(this.operation){case wb.CREATE:e=wb.DELETE;break;case wb.DELETE:e=wb.CREATE;break;case wb.CHANGE:e=wb.CHANGE}b.push(a._restore(c,d,e,this.oldComponent))}),b},execute:function(){var a=[];N(),this._forEach(function(b,c){this.operation!==wb.DELETE&&(this.newComponent=new G({component:rb[b][c],isDetached:!0})),a.push(Q(this.oldComponent,this.newComponent))}),R(a),xb=null},undo:function(){O(),R(this._undo())},redo:function(){var a=this,b=[];O(),this._forEach(function(c,d){b.push(a._restore(c,d,this.operation,this.newComponent))}),R(b)},cancel:function(){N(),this._undo(),xb=null},label:function(){return this._label}};return{start:function(a,c){var d;if(vb)throw"Page is read only!";return O(),d=Object.create(b),d._label=c||"",d.widget=a,d.components={},xb=d,d},message:function(b){var c,d,e,f=".MULTIPLE",g=a.extend({action:"",component:null,property:null,count:1},b),h="TRANSACTION."+g.action;switch(g.action){case pb.CHANGE:c=1===g.count?g.component.getDisplayTitle():i("MULTIPLE_COMPONENTS"),e=i(h,c,g.property.getMetaData().prompt);break;case pb.CREATE:1===g.count?(d="string"==typeof g.component?g.component:g.component.typeId,c=ab[d].title.singular):c=i("MULTIPLE_COMPONENTS"),e=i(h,c);break;default:1===g.count?c=g.component.getDisplayTitle():(h+=f,c=g.count),e=i(h,c)}return e}}}();return{COMP_TYPE:ib,PROP:jb,PROP_TYPE:ob,EVENT:kb,CALLBACK_ACTION:lb,MESSAGE_ACTION:pb,Component:G,getComponents:I,getComponentsAdvanced:J,fullTextSearch:K,getItemsLov:L,getPagesLov:M,transaction:yb,hasChanged:S,saveChanges:T,getPageLockState:Z,lockPage:X,unlockPage:Y,getTemplateOptions:x,getTheme:t,getRegionTemplate:v,enquoteIdentifier:o,setStaticData:function(b){b=a.extend(!0,{displayGroups:{},properties:{},componentTypes:{},plugins:{},pluginCategories:{},events:{browser:[],apex:[],component:[],custom:[],lookupMap:{}},text:{},formatMasks:{numbers:[],dates:[]}},b),$=b.displayGroups,_=b.properties,ab=b.componentTypes,bb=b.pluginCategories,cb=b.events,db=b.formatMasks,p(b.plugins,"%0")},setSharedComponentData:function(b){a.extend(!0,{plugins:{}},b),eb=b;for(var c in eb.componentTypes)eb.componentTypes.hasOwnProperty(c)&&(ab[c].createUrl=eb.componentTypes[c].createUrl,ab[c].editUrl=eb.componentTypes[c].editUrl,ab[c].copyUrl=eb.componentTypes[c].copyUrl);for(var c in eb.userInterfaces)eb.userInterfaces.hasOwnProperty(c)&&(eb.userInterfaces[c].id=c,m(eb.userInterfaces[c],{globalPageId:""}));p(b.plugins,d.getMessage("MODEL.POSTFIX.PLUGIN"));for(var c in eb.themes)eb.themes.hasOwnProperty(c)&&(eb.themes[c].templates[ib.REGION_TEMPLATE][""]=eb.themes[c].templates[ib.REGION_TEMPLATE][0],delete eb.themes[c].templates[ib.REGION_TEMPLATE][0],eb.themes[c].templates[ib.FIELD_TEMPLATE][""]=eb.themes[c].templates[ib.FIELD_TEMPLATE][0],delete eb.themes[c].templates[ib.FIELD_TEMPLATE][0],m(eb.themes[c].defaultTemplates,{page:"",dialog:"",region:"",field:"",button:"",report:"",ir:"",list:"",breadcrumb:"",calendar:""}));q(),r(),a(document).trigger("modelConfigLoaded");for(var e in b.components)if(b.components.hasOwnProperty(e))for(var c=0;c<b.components[e].length;c++)new G({typeId:e,component:b.components[e][c]})},setComponentData:function(a){for(var b in a)if(a.hasOwnProperty(b))for(var c=0;c<a[b].length;c++)new G({typeId:b,component:a[b][c]})},setComponentTypeCallback:function(a,b){ab[a].callback=b},setPluginCallback:function(a,b,c){ab[a].pluginType.plugins[b].callback=c},getPageTemplate:u,getNavListTemplateId:function(){var a=rb[ib.PAGE][gb],b="";return A()||"L"!==a.getProperty(jb.PAGE_NAVIGATION_TYPE).getValue()||(a.getProperty(jb.NAVIGATION_LIST_TEMPLATE)?b=a.getProperty(jb.NAVIGATION_LIST_TEMPLATE).getValue():hb.navList&&(b=hb.navList.templateId||"")),b},getNavListId:function(){var a=rb[ib.PAGE][gb],b="";return A()||"L"!==a.getProperty(jb.PAGE_NAVIGATION_TYPE).getValue()||(a.getProperty(jb.NAVIGATION_LIST)?b=a.getProperty(jb.NAVIGATION_LIST).getValue():hb.navList&&(b=hb.navList.listId||"")),b},getTabSetId:function(){var a=rb[ib.PAGE][gb],b="";return A()||"T"!==a.getProperty(jb.PAGE_NAVIGATION_TYPE).getValue()||(b=a.getProperty(jb.STANDARD_TAB_SET).getValue()),b},getRegionTemplates:function(){return t().templates[ib.REGION_TEMPLATE]},getButtonTemplates:function(){return t().templates[ib.BUTTON_TEMPLATE]},getThemeIcons:function(){return t().icons||{}},getParsingSchema:function(){return eb.parsingSchema},getPrimaryLanguage:function(){return eb.primaryLanguage},getDisplayGroup:function(a){return $[a]},getComponentType:function(a){return ab[a]},getProperty:function(a){return _[a]},getPluginProperty:function(a,b,c){var d=(a===ib.REGION?ib.REGION_PLUGIN_ATTR:a)+"_"+b+"_"+c;for(var e in _)if(_.hasOwnProperty(e)&&_[e].name===d)return _[e];return g},getLovTitle:function(a,b,c){var d=ab[a].properties[b].nullText||"",e=_[b];return"STATIC"===e.lovType?e.lovValuesMap.hasOwnProperty(c)&&(d=e.lovValues[e.lovValuesMap[c]].d):"EVENTS"===e.lovType&&cb.lookupMap.hasOwnProperty(c)&&(d=cb.lookupMap[c].d),d},getErrorComponents:function(){var a,b={};for(var c in ab)ab.hasOwnProperty(c)&&(a=I(c,{hasErrors:!0}),a.length>0&&(b[c]=a));return b},observer:function(b,c,d,e){tb.push({widget:b,filter:a.extend({},{properties:[],events:[]},c),callback:d,sendInBulk:e,pendingNotifications:[]})},unobserver:function(a,b,c){for(var d,e,f=0;f<tb.length;f++)tb[f].widget===a&&(d=tb[f].filter,b.hasOwnProperty("component")?b.component instanceof G&&d.component instanceof G?b.component.typeId===d.component.typeId&&b.component.id===d.component.id&&(e=!0):b.component.typeId===d.component.typeId&&(e=!0):e=!0,e&&b.hasOwnProperty("properties")&&(e=d.properties.join(",")===b.properties.join(",")),e&&b.hasOwnProperty("events")&&(e=d.events.join(",")===b.events.join(",")),e&&c&&(e=tb[f].callback===c),e&&(tb.splice(f,1),f--))},setCurrentAppId:function(a){fb=a},getCurrentAppId:function(){return fb},setCurrentPageId:function(a){var b=rb[ib.PAGE][a]._lock;gb=a+"",hb=eb.userInterfaces[rb[ib.PAGE][gb].getProperty(jb.USER_INTERFACE).getValue()],vb=ub.isReadOnly||b!==!1&&!b.isLockedByCurrentUser?!0:!1,H(!0),W()},getCurrentPageId:function(){return gb},getGlobalPageId:function(){return hb.globalPageId},isGlobalPage:A,isPageReadOnly:function(){return vb},clear:function(){$=g,_=g,ab=g,bb=g,cb=g,db=g,eb=g,rb={},sb={},fb=g,gb=g,hb=g,vb=!0;for(var a=0;a<tb.length;a++)tb[a].filter.component instanceof G&&(tb.splice(a,1),a--)},init:function(a){ub=a},getAll:function(){return{displayGroups:$,properties:_,componentTypes:ab,pluginCategories:bb,sharedComponents:eb,components:rb,baseComponents:sb,observers:tb}}}}(apex.jQuery,apex.util,apex.locale,apex.lang,apex.server,apex.debug);
!function(a,b,c,d,e,f,g,h){"use strict";function i(a){return f.getMessage("MODEL.CALLBACKS."+a)}function j(a){var b=i(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return f.format.apply(this,c)}function k(a,b){for(var c=a.getChilds(b),d=0;d<c.length;d++)c[d].remove()}function l(a){return d.escapeHTML((a.substr(0,1).toUpperCase()+a.substr(1).toLowerCase()).replace(/_/g," "))}function m(){return a.getComponents(a.COMP_TYPE.PAGE_PROCESS,{properties:[{id:a.PROP.PAGE_PROCESS_TYPE,value:new RegExp("^(NATIVE_FORM_FETCH|NATIVE_FORM_PROCESS)$")}]})}function n(b,c,d,e){function f(a,b){var c,d=[];for(c=0;c<a.length;c++)d.push({name:a[c].name,type:a[c].type,no:c+1,regionColumn:null}),b&&b(d[c]);return d}function g(b,c,d,e){var f,g,h,i,j=c.getChilds(d);for(f=0;f<j.length;f++){for(h=!1,i=j[f].getProperty(a.PROP.COLUMN_NAME).getValue(),g=0;g<b.length;g++)if(b[g].name===i&&(!e.compareCheck||e.compareCheck(b[g],j[f]))){b[g].regionColumn=j[f],h=!0;break}h||e.removeCheck&&!e.removeCheck(j[f])||j[f].remove()}}function h(b,c,d,e){var f,g,h,i=c.getChilds(d);for(i.length>0&&(g=i[i.length-1]),f=0;f<b.length;f++)b[f].regionColumn?e.update(b[f].regionColumn,b[f]):(h=[],h.push({id:a.PROP.COLUMN_NAME,value:b[f].name}),e.add(h,b[f]),g=new a.Component({previousComponent:g,typeId:d,parentId:c.id,values:h}))}var i;i=b.getProperty(a.PROP.REGION_SQL)?b.getProperty(a.PROP.REGION_SQL).getColumns():b.getProperty(a.PROP.REGION_FUNCTION_RETURNING_SQL).getColumns(),i.length>0&&(i=f(i,e.setSqlColumn),g(i,c,d,{compareCheck:e.compareCheck,removeCheck:e.removeCheck}),h(i,c,d,{add:e.add,update:e.update}))}function o(b,c){function d(a){var b,c;for(b=0;b<e.length;b++)c=e[b].getProperty(a),parseInt(c.getValue(),10)!==b+1&&c.setValue(b+1)}var e;e=b.getChilds(c),d(a.PROP.DISPLAY_SEQUENCE),e=e.sort(function(b,c){var d="Y"===b.getProperty(a.PROP.DERIVED_COLUMN).getValue(),e="Y"===c.getProperty(a.PROP.DERIVED_COLUMN).getValue();return d&&!e?1:!d&&e?-1:parseInt(b.getProperty(a.PROP.QUERY_COLUMN_ID).getValue(),10)-parseInt(c.getProperty(a.PROP.QUERY_COLUMN_ID).getValue(),10)}),d(a.PROP.QUERY_COLUMN_ID)}function p(b,c){"Y"===c.getValue()&&g.process("getChartXML",{x01:b.parentId},{dataType:"text",async:!1,success:function(c){var d=b.getProperty(a.PROP.CUSTOM_XML);d.setValue(c)}})}function q(b){return b.getProperty(a.PROP.REGION_SQL)?b.getProperty(a.PROP.REGION_SQL).hasOrderBy():b.getProperty(a.PROP.REGION_FUNCTION_RETURNING_SQL).hasOrderBy()}function r(c,d,e,f,g){function h(a){k(a,f),k(a,g)}var i,j;if(c===a.CALLBACK_ACTION.CREATED||c===a.CALLBACK_ACTION.CHANGED&&-1!==b.inArray(d.id,[a.PROP.REGION_SQL,a.PROP.REGION_FUNCTION_RETURNING_SQL])){if(c===a.CALLBACK_ACTION.CREATED&&new a.Component({typeId:f,parentId:e.id}),n(e,e,g,{removeCheck:function(b){return"N"===b.getProperty(a.PROP.DERIVED_COLUMN).getValue()},add:function(b,c){b.push({id:a.PROP.QUERY_COLUMN_ID,value:c.no}),"BLOB"===c.type&&b.push({id:a.PROP.CLASSIC_REPORT_COLUMN_TYPE,value:"IMAGE"}),b.push({id:a.PROP.COLUMN_HEADING,value:l(c.name)})},update:function(b,c){var d=b.getProperty(a.PROP.QUERY_COLUMN_ID);parseInt(d.getValue(),10)!==c.no&&d.setValue(c.no)}}),o(e,g),q(e)){i=e.getChilds(g,{filterFunction:function(){var b=this.getProperty(a.PROP.COLUMN_SORT_SEQUENCE),c=this.getProperty(a.PROP.DISABLE_SORT_COLUMN);return b&&""!==b.getValue()||c&&"N"===c.getValue()}});for(var m=0;m<i.length;m++)i[m].getProperty(a.PROP.COLUMN_SORT_SEQUENCE).setValue(""),i[m].getProperty(a.PROP.DISABLE_SORT_COLUMN).setValue("Y")}}else c===a.CALLBACK_ACTION.CHANGED&&-1!==b.inArray(d.id,[a.PROP.HAS_GENERIC_COLUMNS,a.PROP.GENERIC_COLUMN_COUNT])?(j=d.component.getProperty(a.PROP.REGION_SQL),j||(j=d.component.getProperty(a.PROP.REGION_FUNCTION_RETURNING_SQL)),j.setValue(j.getValue(),!0)):c===a.CALLBACK_ACTION.REMOVED&&h(e)}function s(b,c,d){var e;e=this.typeId===a.COMP_TYPE.CLASSIC_REPORT?a.COMP_TYPE.CLASSIC_RPT_PRINT:a.COMP_TYPE.TAB_FORM_PRINT,b===a.CALLBACK_ACTION.CREATED?"Y"===this.getProperty(a.PROP.ENABLE_PRINTING).getValue()&&new a.Component({typeId:e,parentId:this.id}):b===a.CALLBACK_ACTION.CHANGED&&c.id===a.PROP.ENABLE_PRINTING&&c.getValue()!==d&&("Y"===c.getValue()?new a.Component({typeId:e,parentId:this.id}):k(this,e))}function t(b,c){var d,e;b===a.CALLBACK_ACTION.CREATED||b===a.CALLBACK_ACTION.CHANGED&&c.id===a.PROP.REGION_SQL?(b===a.CALLBACK_ACTION.CREATED?(d=new a.Component({typeId:a.COMP_TYPE.IR_ATTRIBUTES,parentId:this.id}),e=a.getTheme().defaultTemplates.ir,e&&this.getProperty(a.PROP.REGION_TEMPLATE).setValue(e)):d=this.getChilds(a.COMP_TYPE.IR_ATTRIBUTES)[0],n(this,d,a.COMP_TYPE.IR_COLUMN,{setSqlColumn:function(a){a.isTzDependent="N","VARCHAR2"===a.type?a.type="STRING":"TIMESTAMP"===a.type||"TIMESTAMP_TZ"===a.type?a.type="DATE":"TIMESTAMP_LTZ"===a.type?(a.type="DATE",a.isTzDependent="Y"):"NUMBER"!==a.type&&"DATE"!==a.type&&"CLOB"!==a.type&&(a.type="OTHER")},compareCheck:function(b,c){return b.type===c.getProperty(a.PROP.COLUMN_TYPE).getValue()},add:function(b,c){var d="D";b.push({id:a.PROP.COLUMN_TYPE,value:c.type}),"DATE"===c.type?(b.push({id:a.PROP.TZ_DEPENDENT,value:c.isTzDependent}),b.push({id:a.PROP.COLUMN_ALIGNMENT,value:"CENTER"})):"NUMBER"===c.type?b.push({id:a.PROP.COLUMN_ALIGNMENT,value:"RIGHT"}):("CLOB"===c.type||"OTHER"===c.type)&&(b.push({id:a.PROP.ALLOW_USERS_TO_SORT,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_CONTROL_BREAK,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_AGGREGATE,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_COMPUTE,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_CHART,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_GROUP_BY,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_PIVOT,value:"N"}),d="N","OTHER"===c.type&&(b.push({id:a.PROP.ALLOW_USERS_TO_FILTER,value:"N"}),b.push({id:a.PROP.ALLOW_USERS_TO_HIGHLIGHT,value:"N"}))),b.push({id:a.PROP.IR_COLUMN_FILTER_TYPE,value:d}),b.push({id:a.PROP.COLUMN_HEADING,value:l(c.name)})},update:function(b,c){var d;"DATE"===c.type&&(d=b.getProperty(a.PROP.TZ_DEPENDENT),c.isTzDependent!==d.getValue()&&d.setValue(c.isTzDependent))}})):b===a.CALLBACK_ACTION.REMOVED&&k(this,a.COMP_TYPE.IR_ATTRIBUTES)}function u(c,d,e){function f(a,c){var d="Y"===a.getValue(),e=d?c.getValue().split(":"):[];return d&&(-1!==b.inArray("XLS",e)||-1!==b.inArray("PDF",e)||-1!==b.inArray("RTF",e))}c===a.CALLBACK_ACTION.CREATED?f(this.getProperty(a.PROP.SHOW_DOWNLOAD),this.getProperty(a.PROP.DOWNLOAD_FORMATS))&&new a.Component({typeId:a.COMP_TYPE.IR_PRINT_ATTR,parentId:this.id}):c!==a.CALLBACK_ACTION.CHANGED||d.id!==a.PROP.DOWNLOAD_FORMATS&&d.id!==a.PROP.SHOW_DOWNLOAD||d.getValue()===e||(f(this.getProperty(a.PROP.SHOW_DOWNLOAD),this.getProperty(a.PROP.DOWNLOAD_FORMATS))?0===a.getComponents(a.COMP_TYPE.IR_PRINT_ATTR,{parentId:this.id}).length&&new a.Component({typeId:a.COMP_TYPE.IR_PRINT_ATTR,parentId:this.id}):k(this,a.COMP_TYPE.IR_PRINT_ATTR))}function v(b,c){r(b,c,this,a.COMP_TYPE.CLASSIC_REPORT,a.COMP_TYPE.CLASSIC_RPT_COLUMN)}function w(b,c){var d,e=this;if(b===a.CALLBACK_ACTION.CREATED)alert(j("TABFORM.WARNING"));else if(b===a.CALLBACK_ACTION.VALIDATE&&c.id===a.PROP.REGION_TYPE&&(d=a.getComponents(a.COMP_TYPE.REGION,{properties:[{id:a.PROP.REGION_TYPE,value:"NATIVE_TABFORM"}],filterFunction:function(){return this.id!==e.id}}),d.length>0))return{error:j("TABFORM.ONLY_ONE_PER_PAGE")};r(b,c,this,a.COMP_TYPE.TABULAR_FORM,a.COMP_TYPE.TAB_FORM_COLUMN)}function x(b,c,d,e,f){var g=b.getParent();return d===a.CALLBACK_ACTION.VALIDATE&&(e.id===a.PROP.DISABLE_SORT_COLUMN&&"N"===f||e.id===a.PROP.COLUMN_SORT_SEQUENCE&&""!==f)&&q(g)?{error:j("CLASSIC_RPT_TABFORM_COLUMN.NO_SORTING")}:void(d===a.CALLBACK_ACTION.CHANGED&&e.id===a.PROP.COLUMN_SORT_SEQUENCE&&""===e.getValue()&&q(g)&&"N"===b.getProperty(a.PROP.DISABLE_SORT_COLUMN).getValue()?b.getProperty(a.PROP.DISABLE_SORT_COLUMN).setValue("Y"):g&&d===a.CALLBACK_ACTION.REMOVED&&o(g,c))}function y(b,c,d){return x(this,a.COMP_TYPE.CLASSIC_RPT_COLUMN,b,c,d)}function z(b,c,d){return x(this,a.COMP_TYPE.TAB_FORM_COLUMN,b,c,d)}function A(c,d){var e=a.getComponentType(a.COMP_TYPE.REGION).pluginType.plugins[this.getProperty(a.PROP.REGION_TYPE).getValue()],f=-1!==b.inArray("VALUE_ALIGNMENT",e.stdAttributes);c===a.CALLBACK_ACTION.CREATED||c===a.CALLBACK_ACTION.CHANGED&&d.id===a.PROP.REGION_SQL?n(this,this,a.COMP_TYPE.REGION_COLUMN,{add:function(c,d){c.push({id:a.PROP.HIDDEN_REGION_TYPE,value:e.name}),c.push({id:a.PROP.COLUMN_TYPE,value:d.type}),"ROWID"===d.type?c.push({id:a.PROP.IS_VISIBLE,value:"N"}):-1!==b.inArray("COLUMN_HEADING",e.stdAttributes)&&c.push({id:a.PROP.COLUMN_HEADING,value:l(d.name)}),f&&(-1!==b.inArray(d.type,["DATE","TIMESTAMP","TIMESTAMP_TZ","TIMESTAMP_LTZ"])?c.push({id:a.PROP.COLUMN_ALIGNMENT,value:"CENTER"}):"NUMBER"===d.type&&c.push({id:a.PROP.COLUMN_ALIGNMENT,value:"RIGHT"}))},update:function(b,c){var d=b.getProperty(a.PROP.COLUMN_TYPE);d.getValue()!==c.type&&d.setValue(c.type)}}):c===a.CALLBACK_ACTION.REMOVED&&k(this,a.COMP_TYPE.REGION_COLUMN)}function B(b){var c;b===a.CALLBACK_ACTION.CREATED?(c=new a.Component({typeId:a.COMP_TYPE.MAP_CHART,parentId:this.id,values:[{id:a.PROP.CHART_TITLE,value:this.getDisplayTitle()}]}),new a.Component({typeId:a.COMP_TYPE.MAP_CHART_SERIES,parentId:c.id})):b===a.CALLBACK_ACTION.REMOVED&&k(this,a.COMP_TYPE.MAP_CHART)}function C(b){b===a.CALLBACK_ACTION.CREATED?new a.Component({typeId:a.COMP_TYPE.CHART,parentId:this.id,values:[{id:a.PROP.CHART_TITLE,value:this.getDisplayTitle()}]}):b===a.CALLBACK_ACTION.REMOVED&&k(this,a.COMP_TYPE.CHART)}function D(c,d){function e(a,b){for(var c,d=0;d<b.length;d++)if(c=a.getProperty(b[d]),c!==h)return c.getValue()}function f(a,b,c){for(var d,e=0;e<b.length;e++)if(d=a.getProperty(b[e]),d!==h)return void d.setValue(c)}var g,i,j,k,l=[a.PROP.PROJECT_GANTT_SERIES_SOURCE_TYPE,a.PROP.RESOURCE_GANTT_SERIES_SOURCE_TYPE,a.PROP.PIE_DOUGHNUT_SERIES_SOURCE_TYPE,a.PROP.DIAL_SERIES_SOURCE_TYPE,a.PROP.SCATTER_SERIES_SOURCE_TYPE,a.PROP.RANGE_SERIES_SOURCE_TYPE,a.PROP.CANDLESTICK_SERIES_SOURCE_TYPE,a.PROP.LINE_COL_BAR_STK_SERIES_SOURCE_TYPE],m=[a.PROP.PROJECT_GANTT_SOURCE_QUERY,a.PROP.RESOURCE_GANTT_SOURCE_QUERY,a.PROP.PIE_DOUGHNUT_SOURCE_QUERY,a.PROP.DIAL_SOURCE_QUERY,a.PROP.SCATTER_SOURCE_QUERY,a.PROP.RANGE_SOURCE_QUERY,a.PROP.CANDLESTICK_SOURCE_QUERY,a.PROP.LINE_COL_BAR_STK_SOURCE_QUERY],n=[a.PROP.PROJECT_GANTT_SOURCE_FUNC_RETURNING_SQL,a.PROP.RESOURCE_GANTT_SOURCE_FUNC_RETURNING_SQL,a.PROP.PIE_DOUGHNUT_SOURCE_FUNC_RETURNING_SQL,a.PROP.DIAL_SOURCE_FUNC_RETURNING_SQL,a.PROP.SCATTER_SOURCE_FUNC_RETURNING_SQL,a.PROP.RANGE_SOURCE_FUNC_RETURNING_SQL,a.PROP.CANDLESTICK_SOURCE_FUNC_RETURNING_SQL,a.PROP.LINE_COL_BAR_STK_SOURCE_FUNC_RETURNING_SQL],o=this.getProperty(a.PROP.CHART_TYPE).getValue();if(c===a.CALLBACK_ACTION.CREATED)new a.Component({typeId:a.COMP_TYPE.CHART_SERIES,parentId:this.id,values:[{id:a.PROP.SERIES_CHART_TYPE,value:o}]});else if(c===a.CALLBACK_ACTION.CHANGED)if(d.id===a.PROP.CHART_TYPE){g=this.getChilds(a.COMP_TYPE.CHART_SERIES);for(var q=0;q<g.length;q++)i=e(g[q],l),j=e(g[q],m),k=e(g[q],n),g[q].getProperty(a.PROP.SERIES_CHART_TYPE).setValue(o),f(g[q],l,i),f(g[q],m,j),f(g[q],n,k);if(-1===b.inArray(o,["COLUMN","STACKED_COLUMN","STACKED_COLUMN_PCT","BAR","STACKED_BAR","STACKED_BAR_PCT","LINE"]))for(var q=1;q<g.length;q++)g[q].remove();"LINE"===o&&1===g.length&&g[0].getProperty(a.PROP.SERIES_TYPE).setValue("Line")}else d.id===a.PROP.USE_CUSTOM_XML&&p(this,d)}function E(b,c){var d,e=this;if(b===a.CALLBACK_ACTION.CREATED)new a.Component({typeId:a.COMP_TYPE.CLASSIC_CALENDAR,parentId:this.id}),alert(j("LEGACY_CALENDAR.WARNING"));else if(b===a.CALLBACK_ACTION.VALIDATE&&c.id===a.PROP.REGION_TYPE){if(d=a.getComponents(a.COMP_TYPE.REGION,{properties:[{id:a.PROP.REGION_TYPE,value:"NATIVE_CALENDAR"}],filterFunction:function(){return this.id!==e.id}}),d.length>0)return{error:j("LEGACY_CALENDAR.ONLY_ONE_PER_PAGE")}}else b===a.CALLBACK_ACTION.REMOVED&&k(this,a.COMP_TYPE.CLASSIC_CALENDAR)}function F(b,c){var d=a.getPluginProperty(a.COMP_TYPE.DA_ACTION,"NATIVE_SET_VALUE",1).id,e=this.getProperty(a.PROP.FIRE_ON_PAGE_LOAD);b===a.CALLBACK_ACTION.CHANGED&&c.id===d&&"DIALOG_RETURN_ITEM"===c.getValue()&&"Y"===e.getValue()&&e.setValue("N")}function G(b,c,d){function e(){k(m,a.COMP_TYPE.PAGE_PROC_WS_P_I),k(m,a.COMP_TYPE.PAGE_PROC_WS_P_O),k(m,a.COMP_TYPE.PAGE_PROC_WS_P_A)}function f(b,c,d){for(var e=a.getComponents(c,{parentId:b}),f=0;f<e.length;f++)new a.Component({typeId:d,parentId:m.id,values:[{id:a.PROP.PARAMETER_ID,value:e[f].id},{id:a.PROP.NAME,value:e[f].getProperty(a.PROP.NAME).getValue()}]})}var g,h,i=this.getProperty(a.PROP.PAGE_PROCESS_TYPE).getValue(),j=a.getPluginProperty(a.COMP_TYPE.PAGE_PROCESS,i,1).id,l=a.getPluginProperty(a.COMP_TYPE.PAGE_PROCESS,i,2).id,m=this;(b===a.CALLBACK_ACTION.CREATED||b===a.CALLBACK_ACTION.CHANGED)&&(g=this.getProperty(j).getValue(),h=this.getProperty(l).getValue()),b===a.CALLBACK_ACTION.CREATED&&""!==g||b===a.CALLBACK_ACTION.CHANGED&&c.id===j&&g!==d?(b===a.CALLBACK_ACTION.CHANGED&&e(),""!==g&&(f(g,a.COMP_TYPE.WS_REF_OPER_P_I,a.COMP_TYPE.PAGE_PROC_WS_P_I),f(g,a.COMP_TYPE.WS_REF_OPER_P_H,a.COMP_TYPE.PAGE_PROC_WS_P_I),"ITEMS"===h&&f(g,a.COMP_TYPE.WS_REF_OPER_P_O,a.COMP_TYPE.PAGE_PROC_WS_P_O),f(g,a.COMP_TYPE.WS_REF_OPER_P_A,a.COMP_TYPE.PAGE_PROC_WS_P_A))):b===a.CALLBACK_ACTION.CHANGED&&c.id===l&&h!==d?(k(m,a.COMP_TYPE.PAGE_PROC_WS_P_O),"ITEMS"===h&&f(g,a.COMP_TYPE.WS_REF_OPER_P_O,a.COMP_TYPE.PAGE_PROC_WS_P_O)):b===a.CALLBACK_ACTION.REMOVED&&e()}function H(c,d){var e,f,g=this.getProperty(a.PROP.ITEM_TYPE).getValue();g!==O.SELECT_LIST||c!==a.CALLBACK_ACTION.CREATED&&c!==a.CALLBACK_ACTION.CHANGED?c===a.CALLBACK_ACTION.CREATED&&(-1!==b.inArray(g,[O.RICH_TEXT_EDITOR,O.TEXTAREA,O.SHUTTLE])?this.getProperty(a.PROP.ELEMENT_HEIGHT).setValue(5):g===O.FILE&&0===m().length&&this.getProperty(a.getPluginProperty(a.COMP_TYPE.PAGE_ITEM,O.FILE,1).id).setValue("APEX_APPLICATION_TEMP_FILES")):(e=this.getProperty(a.getPluginProperty(a.COMP_TYPE.PAGE_ITEM,O.SELECT_LIST,2).id),!e||c!==a.CALLBACK_ACTION.CREATED&&d.id!==e.id||(f="Y"===e.getValue()?5:1,this.getProperty(a.PROP.ELEMENT_HEIGHT).setValue(f)))}function I(b,c,d){var e,f,g,h,i,j,k,n,o,p,q=/^(P\d+_)/;if(b===a.CALLBACK_ACTION.CREATED)i=this.getProperty(a.PROP.SOURCE_TYPE),i&&"DB_COLUMN"===i.getValue()&&0===m().length&&i.setValue("ALWAYS_NULL");else if(b===a.CALLBACK_ACTION.CHANGED)if(c.id===a.PROP.ITEM_NAME)e=d.replace(q,""),f=c.getValue().replace(q,""),g=this.getProperty(a.PROP.ITEM_LABEL),!g||l(e)!==g.getValue()&&""!==g.getValue()||g.setValue(l(f)),h=this.getProperty(a.PROP.SOURCE_DB_COLUMN),!h||d.replace(q,"")!==h.getValue()&&""!==h.getValue()||h.setValue(c.getValue().replace(q,""));else if(c.id===a.PROP.SOURCE_TYPE)j=this.getProperty(a.PROP.SOURCE_USED),j.setValue(j&&"DB_COLUMN"===c.getValue()?"NO":"YES");else if(c.id===a.PROP.SOURCE_DB_COLUMN&&(f=c.getValue(),o=m(),o.length>0)){p="NATIVE_FORM_FETCH"===o[0].getProperty(a.PROP.PAGE_PROCESS_TYPE).getValue()?o[0].getProperty(a.PROP.FORM_FETCH_TABLE_NAME).getColumns():o[0].getProperty(a.PROP.FORM_PROCESS_TABLE_NAME).getColumns();for(var r=0;r<p.length;r++)p[r].name===f&&(k=this.getProperty(a.PROP.VALUE_REQUIRED),k&&k.setValue(p[r].isRequired?"Y":"N"),n=this.getProperty(a.PROP.ELEMENT_MAX_CHARACTERS),n&&n.setValue(p[r].hasOwnProperty("maxLen")?p[r].maxLen+"":""))}}function J(b,c,d){var e=this.getProperty(a.PROP.BUTTON_LABEL),f=l(this.getProperty(a.PROP.BUTTON_NAME).getValue());b===a.CALLBACK_ACTION.CREATED?e.setValue(f):b===a.CALLBACK_ACTION.CHANGED&&c.id===a.PROP.BUTTON_NAME&&(e=this.getProperty(a.PROP.BUTTON_LABEL),(l(d)===e.getValue()||""===e.getValue())&&e.setValue(f))}function K(b,c,d){""!==this.getProperty(a.PROP.PARENT_REGION).getValue()&&(b===a.CALLBACK_ACTION.CREATED||b===a.CALLBACK_ACTION.CHANGED&&c.id===a.PROP.PARENT_REGION&&""===d)&&this.getProperty(a.PROP.REGION_DISPLAY_SELECTOR).setValue("N")}function L(b,c){b===a.CALLBACK_ACTION.CHANGED&&c.id===a.PROP.USE_CUSTOM_XML&&p(this,c)}function M(c,d){var f,g,h,i=e.getDecimalSeparator(),j={LETTER:{units:"INCHES",width:"8"+i+"5",height:"11"},LEGAL:{units:"INCHES",width:"8"+i+"5",height:"14"},TABLOID:{units:"INCHES",width:"8.5",height:"17"},A4:{units:"MILLIMETERS",width:"210",height:"297"},A3:{units:"MILLIMETERS",width:"297",height:"420"}};c===a.CALLBACK_ACTION.CREATED?(f=-1!==b.inArray(a.getPrimaryLanguage(),["en","en-us","en-ca","fr-ca"])?"LETTER":"A4",this.getProperty(a.PROP.PRINT_PAGE_SIZE).setValue(f),this.getProperty(a.PROP.PRINT_UNITS).setValue(j[f].units),this.getProperty(a.PROP.PRINT_WIDTH).setValue(j[f].width),this.getProperty(a.PROP.PRINT_HEIGHT).setValue(j[f].height)):c===a.CALLBACK_ACTION.CHANGED&&(d.id===a.PROP.PRINT_PAGE_SIZE&&"CUSTOM"!==d.getValue()?(f=j[d.getValue()],this.getProperty(a.PROP.PRINT_UNITS).setValue(f.units),"VERTICAL"===this.getProperty(a.PROP.PRINT_ORIENTATION).getValue()?(this.getProperty(a.PROP.PRINT_WIDTH).setValue(f.width),this.getProperty(a.PROP.PRINT_HEIGHT).setValue(f.height)):(this.getProperty(a.PROP.PRINT_WIDTH).setValue(f.height),this.getProperty(a.PROP.PRINT_HEIGHT).setValue(f.width))):d.id===a.PROP.PRINT_ORIENTATION&&(g=this.getProperty(a.PROP.PRINT_WIDTH).getValue(),h=this.getProperty(a.PROP.PRINT_HEIGHT).getValue(),this.getProperty(a.PROP.PRINT_WIDTH).setValue(h),this.getProperty(a.PROP.PRINT_HEIGHT).setValue(g)))}function N(b,c){var d,e;(b===a.CALLBACK_ACTION.CREATED||b===a.CALLBACK_ACTION.CHANGED&&c.id===a.PROP.WHEN_BUTTON)&&(d=this.getProperty(a.PROP.WHEN_BUTTON),/^apex/.test(this.getProperty(a.PROP.EVENT).getValue())||!d||d.getMetaData().isReadOnly||""===d.getValue()||(e=a.getComponents(a.COMP_TYPE.BUTTON,{id:d.getValue()})[0].getProperty(a.PROP.BUTTON_ACTION),"DEFINED_BY_DA"!==e.getValue()&&e.setValue("DEFINED_BY_DA")))}var O={SELECT_LIST:"NATIVE_SELECT_LIST",RICH_TEXT_EDITOR:"NATIVE_RICH_TEXT_EDITOR",TEXTAREA:"NATIVE_TEXTAREA",SHUTTLE:"NATIVE_SHUTTLE",FILE:"NATIVE_FILE"};b(document).on("modelConfigLoaded",function(){var c=a.getComponentType(a.COMP_TYPE.REGION).pluginType.plugins;a.setComponentTypeCallback(a.COMP_TYPE.PAGE_ITEM,I),a.setComponentTypeCallback(a.COMP_TYPE.BUTTON,J),a.setComponentTypeCallback(a.COMP_TYPE.REGION,K),a.setComponentTypeCallback(a.COMP_TYPE.DA_EVENT,N),a.setComponentTypeCallback(a.COMP_TYPE.CHART,D),a.setComponentTypeCallback(a.COMP_TYPE.CLASSIC_REPORT,s),a.setComponentTypeCallback(a.COMP_TYPE.CLASSIC_RPT_COLUMN,y),a.setComponentTypeCallback(a.COMP_TYPE.TABULAR_FORM,s),a.setComponentTypeCallback(a.COMP_TYPE.TAB_FORM_COLUMN,z),a.setComponentTypeCallback(a.COMP_TYPE.IR_ATTRIBUTES,u),a.setComponentTypeCallback(a.COMP_TYPE.IR_PRINT_ATTR,M),a.setComponentTypeCallback(a.COMP_TYPE.CLASSIC_RPT_PRINT,M),a.setComponentTypeCallback(a.COMP_TYPE.TAB_FORM_PRINT,M),a.setComponentTypeCallback(a.COMP_TYPE.MAP_CHART,L);for(var d in c)c.hasOwnProperty(d)&&-1!==b.inArray("COLUMNS",c[d].stdAttributes)&&a.setPluginCallback(a.COMP_TYPE.REGION,d,A);a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_IR",t),a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_SQL_REPORT",v),a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_FNC_REPORT",v),a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_TABFORM",w),a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_FLASH_MAP",B),a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_FLASH_CHART5",C),a.setPluginCallback(a.COMP_TYPE.REGION,"NATIVE_CALENDAR",E),a.setPluginCallback(a.COMP_TYPE.DA_ACTION,"NATIVE_SET_VALUE",F),a.setPluginCallback(a.COMP_TYPE.PAGE_ITEM,O.RICH_TEXT_EDITOR,H),a.setPluginCallback(a.COMP_TYPE.PAGE_ITEM,O.TEXTAREA,H),a.setPluginCallback(a.COMP_TYPE.PAGE_ITEM,O.SHUTTLE,H),a.setPluginCallback(a.COMP_TYPE.PAGE_ITEM,O.SELECT_LIST,H),a.setPluginCallback(a.COMP_TYPE.PAGE_ITEM,O.FILE,H),a.setPluginCallback(a.COMP_TYPE.PAGE_PROCESS,"NATIVE_WEB_SERVICE",G),a.setPluginCallback(a.COMP_TYPE.PAGE_PROCESS,"NATIVE_WEB_SERVICE_LEGACY",G)})}(pe,apex.jQuery,apex.debug,apex.util,apex.locale,apex.lang,apex.server);
!function(a,b,c){"use strict";var d="messages_",e={ERROR:"error",WARNING:"warning"},f={ERROR:"icon-remove-sign",WARNING:"icon-warning-sign"};b.widget("apex.peMessagesView",{options:{},_create:function(){var c,e=this;this.element.empty(),c=b("<div>",{"class":"a-AlertMessages"}).appendTo(this.element),this._container$=b("<ul></ul>",{"class":"a-AlertMessages-list"}).appendTo(c).on("click","a",this._goToComponent),b(document).on("modelReady",function(){a.observer(d+this.uuid,{events:[a.EVENT.ERRORS,a.EVENT.NO_ERRORS,a.EVENT.WARNINGS,a.EVENT.NO_WARNINGS,a.EVENT.DELETE,a.EVENT.REMOVE_PROP]},function(a){e._update(a)}),b(document).one("modelCleared",function(){e._container$.empty(),b.isFunction(e.options.badge)?e.options.badge(""):b(e.options.badge).text("")})})},_init:function(){},_destroy:function(){this.element.empty(),b(document).off("modelReady"),b(document).off("modelCleared"),a.unobserver(d+this.uuid)},_update:function(d){function g(b,d,e,f,g){for(var h='<li class="a-AlertMessages-item" data-typeid="#TYPEID#" data-componentid="#COMPONENTID#" data-propertyid="#PROPERTYID#">  <a href="#" class="a-MediaBlock a-AlertMessages-message is-#CSS_CLASS#">    <div class="a-MediaBlock-graphic">      <span class="a-FAIcon a-FAIcon--medium a-FAIcon--#CSS_CLASS# #ICON_CLASS#"></span>    </div>    <div class="a-MediaBlock-content">      <h5 class="a-AlertMessages-propertyTitle">#COMPONENT_TYPE# &rarr; #COMPONENT# &rarr; #DISPLAY_GROUP# &rarr; #PROPERTY#</h5>      <p class="a-AlertMessages-messageDescription">#MESSAGE#</p>    </div>  </a></li>',i="",j=0;j<e.length;j++)i+=h.replace(/#CSS_CLASS#/g,f).replace(/#ICON_CLASS#/g,g).replace("#TYPEID#",b.typeId).replace("#COMPONENTID#",b.id).replace("#PROPERTYID#",d.id).replace("#COMPONENT_TYPE#",c.escapeHTML(a.getComponentType(b.typeId).title.singular)).replace("#COMPONENT#",c.escapeHTML(b.getDisplayTitle())).replace("#DISPLAY_GROUP#",c.escapeHTML(a.getDisplayGroup(d.getMetaData().displayGroupId).title)).replace("#PROPERTY#",c.escapeHTML(d.getMetaData().prompt)).replace("#MESSAGE#",e[j]);this._container$.append(i)}var h,i,j=d.component,k="li[data-typeid='"+j.typeId+"'][data-componentid='"+j.id+"']",l=this.options.badge;if(b.inArray(a.EVENT.DELETE,d.events)>=0)this._container$.find(k).remove();else for(var m in d.properties)d.properties.hasOwnProperty(m)&&(this._container$.find(k+"[data-propertyid='"+m+"']").remove(),-1===b.inArray(a.EVENT.REMOVE_PROP,d.properties[m])&&(h=j.getProperty(m),g.call(this,j,h,h.errors,e.ERROR,f.ERROR),g.call(this,j,h,h.warnings,e.WARNING,f.WARNING)));i=this._container$.find("li").length,b.isFunction(l)?l(i):b(l).text(i>0?i:"")},_goToComponent:function(){var c=b(this).closest("li"),d=a.getComponents(c.data("typeid"),{id:c.data("componentid")})[0];window.pageDesigner.goToComponent(d.typeId,d.id,c.data("propertyid"))}})}(pe,apex.jQuery,apex.util);
!function(a,b,c,d){"use strict";function e(b,d){var e='<li class="a-AlertMessages-item" data-typeid="#TYPEID#" data-componentid="#COMPONENTID#" data-propertyid="#PROPERTYID#">  <a href="#" class="a-MediaBlock a-AlertMessages-message">    <div class="a-MediaBlock-graphic">      <span class="#ICON_CLASS#"></span>    </div>    <div class="a-MediaBlock-content">      <h5 class="a-AlertMessages-propertyTitle">#COMPONENT_TYPE# &rarr; #COMPONENT# &rarr; #DISPLAY_GROUP# &rarr; #PROPERTY#</h5>      <p class="a-AlertMessages-messageDescription"><pre>#VALUE#</pre></p>    </div>  </a></li>',f=b.component,i=b.getMetaData(),j=b.getDisplayValue();return j=c.escapeHTML(j.replace(d,"~~peSearchHitBegin~~$&~~peSearchHitEnd~~")),j=j.replace(/~~peSearchHitBegin~~/g,'<span class="a-Search-term">').replace(/~~peSearchHitEnd~~/g,"</span>"),e.replace(/#CSS_CLASS#/g,g.WARNING).replace(/#ICON_CLASS#/g,h.SEARCH).replace("#TYPEID#",f.typeId).replace("#COMPONENTID#",f.id).replace("#PROPERTYID#",b.id).replace("#COMPONENT_TYPE#",c.escapeHTML(a.getComponentType(f.typeId).title.singular)).replace("#COMPONENT#",c.escapeHTML(f.getDisplayTitle())).replace("#DISPLAY_GROUP#",c.escapeHTML(a.getDisplayGroup(i.displayGroupId).title)).replace("#PROPERTY#",c.escapeHTML(i.prompt)).replace("#VALUE#",j)}var f="search_",g={WARNING:"warning"},h={SEARCH:"a-Icon icon-search",WARNING:"icon-warning-sign"},i=null;b.widget("apex.peSearch",{options:{},_create:function(){var c,d=this;this.element.empty(),c=b("<div>",{"class":"a-AlertMessages"}).appendTo(this.element),this._container$=b("<ul></ul>",{"class":"a-AlertMessages-list"}).appendTo(c).on("click","a",this._goToComponent),b(document).on("modelReady",function(){a.observer(f+this.uuid,{events:[a.EVENT.CHANGE,a.EVENT.DELETE,a.EVENT.REMOVE_PROP]},function(a){d._update(a)}),b(document).one("modelCleared",function(){d._container$.empty(),i=null})})},_init:function(){},_destroy:function(){this.element.empty(),b(document).off("modelReady"),b(document).off("modelCleared"),a.unobserver(f+this.uuid)},search:function(b){function f(b,c){var d,g,h,i,j="";for(d=a.fullTextSearch(c,{typeId:b}),h=0,i=d.length;i>h;h++)j+=e(d[h],c);for(g=a.getComponentType(b),h=0,i=g.childComponentTypes.length;i>h;h++)j+=f(g.childComponentTypes[h],c);return j}i=b instanceof RegExp?b:""!==b&&b!==d?new RegExp(c.escapeRegExp(b),"gi"):null,this._container$.empty(),null!==i&&this._container$.append(f(a.COMP_TYPE.PAGE,i))},clear:function(){i=null,this._container$.empty()},_update:function(c){var d,f,g=i,h=c.component,j="li[data-typeid='"+h.typeId+"'][data-componentid='"+h.id+"']";if(null!==g)if(b.inArray(a.EVENT.DELETE,c.events)>=0)this._container$.find(j).remove();else for(var k in c.properties)c.properties.hasOwnProperty(k)&&(d=this._container$.find(j+"[data-propertyid='"+k+"']"),b.inArray(a.EVENT.REMOVE_PROP,c.properties[k])>=0?d.remove():b.inArray(a.EVENT.CHANGE,c.properties[k])>=0&&d.length>0&&(f=[c.component.getProperty(k)],f=a.fullTextSearch(g,{properties:f}),f.length>0?d.replaceWith(e(f[0],g)):d.remove()))},_goToComponent:function(){var c=b(this).closest("li"),d=a.getComponents(c.data("typeid"),{id:c.data("componentid")})[0];window.pageDesigner.goToComponent(d.typeId,d.id,c.data("propertyid"))}})}(pe,apex.jQuery,apex.util);
!function(a,b,c,d,e){"use strict";function f(a){return c.getMessage(a)}function g(a,b,c){var d,e,f,g,h=a.scrollTop;return a.selectionStart||0===a.selectionStart?(f=a.selectionStart,d=a.value.substring(0,f),e=a.value.substring(a.selectionEnd),b?(g="	",f+=1):(g=L.substring(0,c),f+=c),a.value=d+g+e,a.selectionStart=a.selectionEnd=f,a.scrollTop=h,!0):!1}function h(a,b,c){var d,e=[0],f=a.value;return a.selectionStart||0===a.selectionStart?(f.replace(/\n/gm,function(a,b){e.push(b+1)}),b>=e.length&&(b=e.length-1),d=b===e.length-1?f.length-e[b]:e[b+1]-e[b]-1,c>d&&(c=d),void(a.selectionStart=a.selectionEnd=e[b]+c)):!1}function i(a,b){function c(a){var b,c=a.split("-"),d=c.pop();return c.sort(function(a,b){return P[a]-P[b]}),c.push(d),b=c.join("+").replace("Cmd+","Meta+"),Q&&(b=b.replace("Meta+","⌘+").replace("Alt+","Option+")),b}var d,e,f,g;if(!a)return null;for(g=["extraKeys",a.getOption("keyMap")],e=0;e<g.length;e++){f="extraKeys"===g[e]?a.getOption("extraKeys"):CodeMirror.keyMap[g[e]];for(d in f)if(f.hasOwnProperty(d))if("fallthrough"===d)g=g.concat(f[d]);else if(f[d]===b)return c(d)}return null}function j(a){var b,c;for(b=0;b<O.length;b++)if(c=O[b],c.name===a)return c;return null}function k(b){var c=j(b);c.loaded||(a("head").append('<link type="text/css" href="'+N+"/theme/"+(c.fileName||c.name)+'.css" rel="stylesheet"/>'),c.loaded=!0)}function l(a,b,c){function d(a){for(var c,d,f=[],g=0;g<a.length;g++){c=a[g];for(var h=0;h<c.completions.length;h++)d=c.completions[h],f.push({text:d.r||d,displayText:(d.d||d)+" ("+c.title+")",className:c.className,type:c.type,hint:e})}f.sort(function(a,b){return a.displayText.toLowerCase().localeCompare(b.displayText.toLowerCase())}),b({list:f,from:CodeMirror.Pos(k.line,l.start),to:CodeMirror.Pos(k.line,l.end)})}function e(a,b,c){var d,e,f,g,h,i=c.text,j={};if("package"===c.type)i+=".";else if("procedure"===c.type||"function"===c.type)i+="()",d={line:b.from.line,ch:b.from.ch+i.length-1};else if("template"===c.type){if(e=i.match(/\$[a-z]{1,}\$/g)){for(var k=0;k<e.length;k++)f=e[k].substr(1,e[k].length-2),j.hasOwnProperty(f)||"cursor"===f||(j[f]=window.prompt(f));for(f in j)j.hasOwnProperty(f)&&(i=i.replace(new RegExp("\\$"+f+"\\$","gi"),j[f]))}b.from.ch>0&&(i=i.replace(/\n/g,"\n"+new Array(b.from.ch+1).join(" "))),g=i.indexOf("$cursor$"),-1!==g&&(h=i.lastIndexOf("\n",g),d=-1!==h?{line:b.from.line+(i.substr(0,g).match(/\n/g)||[]).length,ch:g-h-1}:{line:b.from.line,ch:b.from.ch+g},i=i.replace(/\$cursor\$/,""))}a.replaceRange(i,b.from,b.to),d&&a.doc.setCursor(d)}function f(b){var c=a.getTokenAt({line:k.line,ch:b.start});return"."===b.string?c:"."===c.string?f(c):null}var g,h,i,j,k=a.getCursor(),l=a.getTokenAt(k),m=l.string.trim();g=f(l),g&&""!==g.string?(h=g.string,i="",g=f(g),g&&(i=g.string),"."===m&&(m="",l.start++)):0===m.indexOf(":")||0===m.indexOf("&")?(j="item",m=m.substr(1),l.start++):j="",(h||m)&&c.dataCallback({type:j,search:m,parent:h,grantParent:i},d)}function m(a,b,d,e,f,g){a.markup("<button").attr("id",b).optionalAttr("title",d?c.formatMessage("CODE_EDITOR.SHORTCUT_TITLE",e,d):null).optionalBoolAttr("disabled",g).attr("class","a-Button"+(f?" "+f:"")).markup(" type='button'>").content(e).markup("</button>")}function n(a,b,d,e,f,g,h){var i=d?c.formatMessage("CODE_EDITOR.SHORTCUT_TITLE",f,d):f;a.markup("<button").attr("id",b).attr("title",i).attr("aria-label",i).optionalBoolAttr("disabled",h).attr("class","a-Button a-Button--noLabel a-Button--withIcon"+(g?" "+g:"")).markup(" type='button'>").markup("<span class='a-Icon ").attr(e).markup("' aria-hidden='true'></span></button>")}function o(a,b){return"string"==typeof a?a=new RegExp(a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),b?"gi":"g"):a.global||(a=new RegExp(a.source,a.ignoreCase?"gi":"g")),{token:function(b){a.lastIndex=b.pos;var c=a.exec(b.string);return c&&c.index===b.pos?(b.pos+=c[0].length,"searching"):void(c?b.pos=c.index:b.skipToEnd())}}}function p(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function q(a){return a.state.search||(a.state.search=new p)}function r(b,c){var d=q(b),e=a(b.display.wrapper).parent();return d.query?void s(b,c):void e.codeEditor("showSearchBar",!1,b.getSelection())}function s(a,b){a.operation(function(){var c=q(a),d=a.getSearchCursor(c.query,b?c.posFrom:c.posTo,c.isCaseInsensitive);(d.find(b)||(d=a.getSearchCursor(c.query,b?CodeMirror.Pos(a.lastLine()):CodeMirror.Pos(a.firstLine(),0),c.isCaseInsensitive),d.find(b)))&&(a.setSelection(d.from(),d.to()),a.scrollIntoView({from:d.from(),to:d.to()}),c.posFrom=d.from(),c.posTo=d.to())})}function t(a){a.operation(function(){var b=q(a);b.query&&(b.query=null,a.removeOverlay(b.overlay))})}function u(b){var c=a(b.display.wrapper).parent();b.getOption("readOnly")||c.codeEditor("showSearchBar",!0,b.getSelection())}var v="a-CodeEditor",w="a-CodeEditor--textarea",x="is-active",y="a-CodeEditor-searchBar",z="."+y,A="a-CodeEditor-replace",B="."+A,C="a-CodeEditor-notification",D="."+C,E="a-CodeEditor-message",F="."+E,G="a-CodeEditor-toolbar",H="."+G,I=".CodeMirror",J=["usePlainTextArea","theme","indentUnit","tabSize","indentWithTabs","lineNumbers","ruler"],K=a.ui.keyCode,L="                                        ",M=[{color:"#ccc",column:80,lineStyle:"dashed"}],N="",O=[{name:"default",loaded:!0},{name:"3024-day",loaded:!1},{name:"3024-night",loaded:!1},{name:"ambiance-mobile",loaded:!1},{name:"ambiance",loaded:!1},{name:"base16-dark",loaded:!1},{name:"base16-light",loaded:!1},{name:"blackboard",loaded:!1},{name:"cobalt",loaded:!1},{name:"eclipse",loaded:!1},{name:"elegant",loaded:!1},{name:"erlang-dark",loaded:!1},{name:"lesser-dark",loaded:!1},{name:"mbo",loaded:!1},{name:"midnight",loaded:!1},{name:"monokai",loaded:!1},{name:"mdn-like",loaded:!1},{name:"neat",loaded:!1},{name:"neo",loaded:!1},{name:"night",loaded:!1},{name:"paraiso-dark",loaded:!1},{name:"paraiso-light",loaded:!1},{name:"pastel-on-dark",loaded:!1},{name:"rubyblue",loaded:!1},{name:"solarized dark",fileName:"solarized",loaded:!1},{name:"solarized light",fileName:"solarized",loaded:!1},{name:"the-matrix",loaded:!1},{name:"tomorrow-night-eighties",loaded:!1},{name:"twilight",loaded:!1},{name:"vibrant-ink",loaded:!1},{name:"xq-dark",loaded:!1},{name:"xq-light",loaded:!1}],P={Ctrl:1,Alt:2,Cmd:3,Shift:4},Q=navigator.appVersion.indexOf("Mac")>=0;a("link").each(function(){var b="stylesheet"===a(this).attr("rel")?a(this).attr("href"):"",c=b.indexOf("/codemirror-custom");c>=0&&(N=b.substring(0,c))}),a.widget("apex.codeEditor",{version:"5.0",widgetEventPrefix:"codeEditor",options:{mode:"javascript",readOnly:!1,autofocus:!1,lineWrapping:null,wrapIndent:null,errors:[],warnings:[],usePlainTextArea:!1,theme:"default",indentUnit:4,tabSize:4,indentWithTabs:!1,lineNumbers:!0,ruler:!0,codeComplete:null,validateCode:null,queryBuilder:null,settingsChanged:null},_errorLineWidgets:[],_warningLineWidgets:[],wrappedTextArea:!1,settingsMenu$:null,_create:function(){var b,c,d,f,g=this.options;this.element.addClass(v),this.baseId=this.element[0].id||"aCE",null===g.lineWrapping&&(g.lineWrapping="text/css"===g.mode||"text/html"===g.mode||"text/xml"===g.mode||"text/text"===g.mode?!0:!1),g.lineWrapping&&null===g.wrapIndent&&(g.wrapIndent="text/css"===g.mode||"text/html"===g.mode||"text/xml"===g.mode?!0:!1),g.usePlainTextArea?(1===this.element.children("textarea").length?(this._textarea=this.element.children("textarea"),this._textarea.attr("wrap","soft").attr("autocorrect","off").attr("autocapitalize","off").attr("spellcheck","false"),this.textareaSavedStyle=this._textarea.attr("style")||"",this.wrappedTextArea=!0):(this._textarea=a("<textarea wrap='soft' autocorrect='off' autocapitalize='off' spellcheck='false' ></textarea>"),this.element.empty().append(this._textarea)),this.element.addClass(w),g.value!==e&&this._textarea.val(g.value),this._textarea.css({resize:"none",whiteSpace:g.lineWrapping?"pre-wrap":"pre",wordWrap:g.lineWrapping?"break-word":"normal"}),g.readOnly&&this._textarea.attr("readonly",!0),g.autofocus&&this._textarea[0].focus()):(b={mode:g.mode,theme:g.theme,lineWrapping:g.lineWrapping,indentUnit:g.indentUnit,tabSize:g.tabSize,indentWithTabs:g.indentWithTabs,readOnly:g.readOnly,autofocus:g.autofocus,lineNumbers:g.lineNumbers,styleActiveLine:!0,matchBrackets:!0,autoCloseBrackets:!0,autoCloseTags:!0,rulers:g.ruler?M:[],extraKeys:{"Ctrl-Space":"autocomplete",Tab:function(a){a.somethingSelected()?a.indentSelection("add"):g.indentWithTabs?a.replaceSelection("	","end","+input"):a.replaceSelection(L.substring(0,g.tabSize),"end","+input")},"Shift-Tab":"indentLess"}},k(g.theme),1===this.element.children("textarea").length?(this.wrappedTextArea=!0,this._editor=CodeMirror.fromTextArea(this.element.children("textarea")[0],b),g.value&&this.setValue(g.value)):(this.element.empty(),b.value=g.value,this._editor=CodeMirror(this.element[0],b)),g.wrapIndent&&(c=this._editor.defaultCharWidth(),f=4,this._editor.on("renderLine",function(a,b,e){d=CodeMirror.countColumn(b.text,null,a.getOption("tabSize"))*c,e.style.textIndent="-"+d+"px",e.style.paddingLeft=f+d+"px"})),this._editor.refresh(),CodeMirror.commands.autocomplete=function(a){var b,c=a.doc.modeOption,d={};switch(c){case"text/javascript":b=CodeMirror.hint.javascript;break;case"text/css":b=CodeMirror.hint.css;break;case"text/html":b=CodeMirror.hint.html;break;case"text/xml":b=CodeMirror.hint.xml;break;case"text/x-plsql":b=l,d={async:!0,dataCallback:g.codeComplete}}b&&CodeMirror.showHint(a,b,d)},this._errorLineWidgets=[],this._warningLineWidgets=[],this._addMessages(this._errorLineWidgets,g.errors,"is-error"),this._addMessages(this._warningLineWidgets,g.warnings,"is-warning")),delete g.value,g.autofocus&&this.element.addClass(x),this._initToolbar(),this._initMessageBar(),this._editor?this._initSearchBar():this._makeNotificationMessage(),this._resize(),this._on(this._eventHandlers)},_eventHandlers:{resize:function(a){this._resize(),a.stopPropagation()},keydown:function(b){var c,d,e=a(b.target),f=b.which;("TEXTAREA"===b.target.nodeName||0!==e.closest(I).length)&&(!this._textarea||f!==K.TAB||b.shiftKey||b.ctrlKey||b.altKey?117===f&&!b.ctrlKey&&b.altKey&&(b.shiftKey?this.element.children(H).find("button").last()[0].focus():(c=a(":tabbable"),d=c.index(this.element.find("textarea:tabbable")),d>=0&&d<c.length?d+=1:c.length>0&&(d=0),d>=0&&c[d].focus())):!this.options.readOnly&&g(this._textarea[0],this.options.indentWithTabs,this.options.tabSize)&&b.preventDefault())},focusin:function(){this.element.addClass(x)},focusout:function(){this.element.removeClass(x)}},_destroy:function(){this.element.find(H+","+D+","+z).remove(),this.element.removeClass(v+" "+w+" "+x),this.wrappedTextArea?this._editor?(a(this._editor.getWrapperElement()).remove(),a(this.element.find("textarea").show())):this._textarea&&this.textareaSavedStyle!==e&&this._textarea.attr("style",this.textareaSavedStyle):this.element.empty(),this.settingsMenu$&&this.settingsMenu$.remove()},_setOption:function(a,b){var c=this,d=this.options.usePlainTextArea;this._super(a,b),"errors"===a||"warnings"===a?this._textarea?this._makeNotificationMessage():"errors"===a?this._addMessages(this._errorLineWidgets,b,"is-error"):"warnings"===a&&this._addMessages(this._warningLineWidgets,b,"is-warning"):"readOnly"===a?(this._textarea?this._textarea.attr("readonly",b):this._editor.setOption(a,b),this._updateToolbarButtons()):"validateCode"===a||"queryBuilder"===a?(this.element.find(H).remove(),this._initToolbar()):"usePlainTextArea"===a&&b!==d?setTimeout(function(){var a=c.element,d=c.options,e=c.getValue();d.usePlainTextArea=b,c.element.codeEditor("destroy"),d.value=e,a.codeEditor(d)},10):"ruler"===a&&this._editor?this._editor.setOption("rulers",b?M:[]):this._editor&&("theme"===a&&k(b),this._editor.setOption(a,b))},setValue:function(a){this._textarea?this._textarea.val(a):this._editor.doc.setValue(a)},getValue:function(){return this._textarea?this._textarea.val():this._editor.doc.getValue()},focus:function(){this._textarea?this._textarea[0].focus():this._editor.focus()},setCursor:function(a,b){this._textarea?(h(this._textarea[0],a,b),this._textarea[0].focus()):this._editor.doc.setCursor(a,b)},showNotification:function(a){this.element.children(z).hide(),this.element.children(D).show().children(F).first().html(a),this._resize()},showSearchBar:function(b,c){var d;this._editor&&(d=1===this.element.children(z).filter(":visible").length,this.element.children(z).show().find(B).toggle(b),this.element.children(D).hide(),!d||c?a("#"+this.baseId+"_findText").val(c).focus():a("#"+this.baseId+"_findText").focus()[0].select(),this.lastSearchText=null,this._resize())},changeGeneration:function(){return this._textarea?(this._originalValue=this._textarea.val(),1):this._editor.doc.changeGeneration()},isClean:function(a){return this._textarea?this._textarea.val()===this._originalValue:this._editor.doc.isClean(a)},getSettingsString:function(){var b=this.options,c="|";return a.each(J,function(a,d){var e=b[d];"boolean"==typeof e&&(e=e.toString().substr(0,1)),c+=e+"|"}),c},_resize:function(){var c,d=this.element.height(),e=this.element.width(),f=this.element.children(H).outerHeight();this.element.children(z+","+D).filter(":visible").each(function(){f+=a(this).outerHeight()}),this._editor?(c=this.element.find(I),c.height(d-f),c.width(e),this._editor.refresh()):(b.setOuterHeight(this._textarea,d-f),b.setOuterWidth(this._textarea,e))},_validateCode:function(){var d=this.options.validateCode,e=this;d&&d(this.getValue(),function(d){d=a.extend({},{errors:[],warnings:[]},d),e._setOption("errors",d.errors),e._setOption("warnings",d.warnings),d.errors.length>0||d.warnings.length>0?(e._editor&&(e.element.children(D).hide().children(F).first().empty(),e._resize()),e.focus()):e.showNotification("<ul><li class='is-success'>"+b.escapeHTML(c.getMessage("CODE_EDITOR.VALIDATION_SUCCESS"))+"</li></ul>")})},_queryBuilder:function(){var a=this.options.queryBuilder;a&&a(this,this.getValue())},_addMessages:function(b,c,d){var e,f,g,h,i=Math.max(0,this._editor.doc.lineCount()-1),j=0,k=0;for(h=0;h<b.length;h++)this._editor.removeLineWidget(b[h]);for(b.length=0,h=0;h<c.length;h++)/^ORA-06550:/.test(c[h])?(e=c[h].match(/\d{1,}/g),j=parseInt(e[1],10)-1,k=parseInt(e[2],10)-1,isNaN(j)&&(j=0),isNaN(k)&&(k=0)):(j=0,k=0),f=a("<div></div>").addClass(d).text(c[h]),j>i?(g=!1,j=i):g=!0,b.push(this._editor.addLineWidget(j,f[0],{coverGutter:!1,noHScroll:!0,above:g,showIfHidden:!0})),0===h&&this._editor.doc.setCursor({line:j,ch:k})},_makeNotificationMessage:function(){var a,c="",d=this.options;if(d.errors.length>0||d.warnings.length>0){for(c="<ul>",a=0;a<d.errors.length;a++)c+="<li class='is-error'>"+b.escapeHTML(d.errors[a])+"</li>";for(a=0;a<d.warnings.length;a++)c+="<li class='is-warning'>"+b.escapeHTML(d.warnings[a])+"</li>";c+="</ul>",this.element.children(z).hide(),this.element.children(D).show().children(F).first().html(c),this._resize()}else this.element.children(D).is(":visible")&&(this.element.children(D).hide().children(F).first().empty(),this._resize())},_initToolbar:function(){function c(a,b,c,d,e,f){var g=i(j._editor,b);n(a,j.baseId+"_"+b,g,c,d,e,f)}function d(b){a("#"+j.baseId+"_"+b).click(function(){j._editor&&(j._editor.focus(),setTimeout(function(){j._editor.execCommand(b)},10))})}function e(){var a,b,c=[];for(a=0;a<O.length;a++)b=O[a],c.push({label:b.name.replace("-"," "),value:b.name});return c}function g(){return[{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"8",value:"8"}]}function h(){var b=j.element[0];j._trigger("settingsChanged",a.Event("click",{target:b}))}var j=this,k=this.options,l=b.htmlBuilder();l.markup("<div class='"+G+"'>"),c(l,"undo","icon-undo",f("CODE_EDITOR.UNDO"),"a-Button--pillStart",!!k.usePlainTextArea),c(l,"redo","icon-redo",f("CODE_EDITOR.REDO"),"a-Button--pillEnd a-Button--gapRight",!!k.usePlainTextArea),c(l,"find","icon-cm-find",f("CODE_EDITOR.FIND"),"a-Button--pillStart",!!k.usePlainTextArea),c(l,"replace","icon-cm-replace",f("CODE_EDITOR.REPLACE"),"a-Button--pillEnd a-Button--gapRight",!!k.usePlainTextArea),k.queryBuilder&&c(l,"queryBuilder","icon-cm-query-builder",f("CODE_EDITOR.QUERY_BUILDER"),null,!1),c(l,"autocomplete","icon-cm-autocomplete",f("CODE_EDITOR.HINT"),null,!!k.usePlainTextArea),k.validateCode&&c(l,"validate","icon-cm-validate",f("CODE_EDITOR.VALIDATE"),null,!1),l.markup("<button").attr("id",this.baseId+"_settings").attr("title",f("CODE_EDITOR.SETTINGS")).attr("aria-label",f("CODE_EDITOR.SETTINGS")).attr("data-menu",this.baseId+"_settingsMenu").markup(" class='a-Button a-Button--noLabel a-Button--iconTextButton js-menuButton u-pullRight' type='button' aria-haspopup='true' aria-expanded='false'>").markup("<span class='a-Icon icon-gear' aria-hidden='true'></span><span class='a-Icon icon-menu-drop-down' aria-hidden='true'></span></button>").markup("</div>"),this.element.prepend(l.toString()),d("undo"),d("redo"),d("find"),d("replace"),d("autocomplete"),k.validateCode&&a("#"+j.baseId+"_validate").click(function(){j._validateCode()}),k.queryBuilder&&a("#"+j.baseId+"_queryBuilder").click(function(){j._queryBuilder()}),this.settingsMenu$=a(b.htmlBuilder().markup("<div style='display:none'").attr("id",this.baseId+"_settingsMenu").markup("></div>").toString()).appendTo("body"),this.settingsMenu$.menu({items:[{type:"toggle",labelKey:"CODE_EDITOR.USE_PLAIN_TEXT_EDITOR",get:function(){return k.usePlainTextArea},set:function(a){j._setOption("usePlainTextArea",a),h()}},{type:"toggle",labelKey:"CODE_EDITOR.INDENT_WITH_TABS",get:function(){return!k.indentWithTabs},set:function(a){j._setOption("indentWithTabs",!a),h()}},{type:"subMenu",labelKey:"CODE_EDITOR.TAB_SIZE",disabled:function(){return k.usePlainTextArea&&k.indentWithTabs},menu:{items:[{type:"radioGroup",get:function(){return""+k.tabSize},set:function(a){j._setOption("tabSize",parseInt(a,10)),h()},choices:g()}]}},{type:"subMenu",labelKey:"CODE_EDITOR.INDENT_SIZE",disabled:function(){return k.usePlainTextArea},menu:{items:[{type:"radioGroup",get:function(){return""+k.indentUnit},set:function(a){j._setOption("indentUnit",parseInt(a,10)),h()},choices:g()}]}},{type:"subMenu",labelKey:"CODE_EDITOR.THEMES",disabled:function(){return k.usePlainTextArea},menu:{items:[{type:"radioGroup",get:function(){return k.theme},set:function(a){j._setOption("theme",a),h()},choices:e()}]}},{type:"toggle",labelKey:"CODE_EDITOR.SHOW_LINE_NUMBERS",disabled:function(){return k.usePlainTextArea},get:function(){return k.lineNumbers},set:function(a){j._setOption("lineNumbers",a),h()}},{type:"toggle",labelKey:"CODE_EDITOR.SHOW_RULER",disabled:function(){return k.usePlainTextArea},get:function(){return k.ruler},set:function(a){j._setOption("ruler",a),h()}}]}),this._editor&&this._editor.on("change",function(){j._updateToolbarButtons()}),this._updateToolbarButtons()},_updateToolbarButtons:function(){var b={undo:0,redo:0},c=this.options,d=c.usePlainTextArea||c.readOnly;this._editor&&(b=this._editor.historySize()),a("#"+this.baseId+"_replace")[0].disabled=d,a("#"+this.baseId+"_autocomplete")[0].disabled=d,c.validateCode&&(a("#"+this.baseId+"_validate")[0].disabled=c.readOnly),c.queryBuilder&&(a("#"+this.baseId+"_queryBuilder")[0].disabled=c.readOnly),a("#"+this.baseId+"_undo")[0].disabled=0===b.undo,a("#"+this.baseId+"_redo")[0].disabled=0===b.redo},_initMessageBar:function(){var c=this,d=b.htmlBuilder(),e=this.baseId+"_mClose";d.markup("<div class='"+C+"' style='display:none;'><div class='"+E+"'></div>"),n(d,e,null,"ui-icon-closethick",f("CODE_EDITOR.CLOSE"),"a-Button--small a-CodeEditor-searchBar-closeButton",!1),d.markup("</div>"),this.element.children(H).after(d.toString()),a("#"+e).click(function(){a(this).parent().hide(),c._resize()})},_initSearchBar:function(){function c(b){a("#"+g.baseId+"_"+b).click(function(){g._editor.focus(),setTimeout(function(){g._editor.execCommand(b)},10)})}function d(){g.element.children(z).hide(),g._resize(),g.focus(),g._editor.execCommand("clearSearch")}function e(){g._editor.setSearchState(a("#"+h).val(),a("#"+l)[0].checked,!a("#"+k)[0].checked)}var g=this,h=this.baseId+"_findText",j=this.baseId+"_replaceText",k=this.baseId+"_caseCb",l=this.baseId+"_reCb",o=this.baseId+"_sClose",p=b.htmlBuilder();p.markup("<div class='"+y+"' style='display:none;'><label class='a-CodeEditor-searchBar-label'").attr("for",h).markup(">").content(f("CODE_EDITOR.FIND_INPUT")).markup("</label><input class='a-CodeEditor-searchBar-textInput' type='text'").attr("id",h).markup(">"),n(p,g.baseId+"_findNext",i(g._editor,"findNext"),"icon-down-chevron",f("CODE_EDITOR.FIND_NEXT"),"a-Button--small a-Button--pillStart"),n(p,g.baseId+"_findPrev",i(g._editor,"findPrev"),"icon-up-chevron",f("CODE_EDITOR.FIND_PREV"),"a-Button--small a-Button--pillEnd"),p.markup("<div class='a-CodeEditor-searchBar-checkboxGroup'><input type='checkbox'").attr("id",k).markup("><label class='a-CodeEditor-searchBar-label'").attr("for",k).markup(">").content(f("CODE_EDITOR.MATCH_CASE")).markup("</label><input type='checkbox'").attr("id",l).markup("><label class='a-CodeEditor-searchBar-label'").attr("for",l).markup(">").content(f("CODE_EDITOR.MATCH_RE")).markup("</label></div><div class='"+A+"'><label class='a-CodeEditor-searchBar-label'").attr("for",j).markup(">").content(f("CODE_EDITOR.REPLACE_INPUT")).markup("</label><input class='a-CodeEditor-searchBar-textInput' type='text'").attr("id",j).markup(">"),m(p,g.baseId+"_replaceNext",null,f("CODE_EDITOR.REPLACE"),"a-Button--small a-Button--pillStart"),m(p,g.baseId+"_replaceAll",null,f("CODE_EDITOR.REPLACE_ALL"),"a-Button--small a-Button--pill"),m(p,g.baseId+"_replaceSkip",null,f("CODE_EDITOR.REPLACE_SKIP"),"a-Button--small a-Button--pillEnd"),p.markup("</div>"),n(p,o,null,"ui-icon-closethick",f("CODE_EDITOR.CLOSE"),"a-Button--small a-CodeEditor-searchBar-closeButton",!1),p.markup("</div>"),this.element.children(H).after(p.toString()),this.element.children(z).keydown(function(b){b.which===a.ui.keyCode.ESCAPE&&(b.preventDefault(),d())}),c("findNext"),c("findPrev"),a("#"+g.baseId+"_replaceSkip").click(function(){g._editor.focus(),setTimeout(function(){g._editor.execCommand("findNext")},10)}),a("#"+g.baseId+"_replaceNext").click(function(){g._editor.focus(),setTimeout(function(){g._editor.doReplace(a("#"+j).val(),!1)},10)}),a("#"+g.baseId+"_replaceAll").click(function(){g._editor.focus(),setTimeout(function(){g._editor.doReplace(a("#"+j).val(),!0)},10)}),a("#"+o).click(d),g.lastSearchText=null,a("#"+h).keydown(function(b){var c,d=b.which;(d===a.ui.keyCode.ENTER||d===a.ui.keyCode.DOWN||d===a.ui.keyCode.UP)&&(b.preventDefault(),c=a(this).val(),c!==g.lastSearchText&&(e(),g.lastSearchText=c),setTimeout(function(){g._editor.execCommand(d===a.ui.keyCode.UP?"findPrev":"findNext")},10))}).blur(function(){e()}),a("#"+l+",#"+k).click(function(){e()})}}),a.apex.codeEditor.optionsFromSettingsString=function(b){var c=b.split("|"),e={};return c.length!==J.length+2?(b.length>0&&d.warn("CodeEditor: Bad input ignored:",b),e):(c=c.splice(1,J.length+1),a.each(J,function(a,b){var f=c[a],g=b;if("theme"===g){if(!j(f))return void d.warn("CodeEditor: Bad theme ignored: "+f)}else if("indentUnit"===g||"tabSize"===g){if(f=parseInt(f,10),isNaN(f))return void d.warn("CodeEditor: Bad number ignored: "+f)}else if("t"===f)f=!0;else{if("f"!==f)return void d.warn("CodeEditor: Bad Boolean ignored: "+f);f=!1}e[g]=f}),e)},CodeMirror.defineExtension("setSearchState",function(a,b,c){var d=this,e=q(this);return!a&&e.query?void t(this):void this.operation(function(){b?(a=new RegExp(a,c?"i":""),a.test("")&&(a=/x^/)):""===a&&(a=/x^/),e.query=a,e.isCaseInsensitive=c,d.removeOverlay(e.overlay,c),e.overlay=o(e.query,c),d.addOverlay(e.overlay),e.posFrom=e.posTo=d.getCursor()})}),CodeMirror.defineExtension("doReplace",function(a,b){function c(a,b){return e[b]}var d,e,f=this,g=q(this);this.operation(b?function(){for(d=f.getSearchCursor(g.query,CodeMirror.Pos(f.firstLine(),0),g.isCaseInsensitive);d.findNext();)"string"!=typeof g.query?(e=f.getRange(d.from(),d.to()).match(g.query),d.replace(a.replace(/\$(\d)/g,c))):d.replace(a)}:function(){d=f.getSearchCursor(g.query,g.posFrom,g.isCaseInsensitive),d.atOccurrence||d.findNext(),"string"!=typeof g.query?(e=f.getRange(d.from(),d.to()).match(g.query),d.replace(a.replace(/\$(\d)/g,c))):d.replace(a),s(f)})}),CodeMirror.commands.find=function(a){t(a),r(a)},CodeMirror.commands.findNext=r,CodeMirror.commands.findPrev=function(a){r(a,!0)},CodeMirror.commands.clearSearch=t,CodeMirror.commands.replace=u,CodeMirror.commands.replaceAll=u}(apex.jQuery,apex.util,apex.lang,apex.debug);
window.componentGallery={},function(a,b,c,d,e){"use strict";function f(a){var b,c=a.split(":"),d=x[w[c[0]]];if(d&&(b=d[c[1]]),!b)throw"Invalid component data key";return b}function g(a,c,d){var e,f=b.isPageReadOnly();e=y[d.type],f||(e+=" is-draggable"),a.markup("<li").attr("class",e).optionalAttr("aria-grabbed",f?null:"false").attr("data-component",d.type+":"+c).markup("><span class='a-Icon ").attr(d.iconClass).markup("'></span><span class='a-Gallery-componentName'>").content(d.title).markup("</span></li>")}function h(a,b,c){var f=d.htmlBuilder();return b=b||"",/^\s</.test(b)||(b="<p>"+b+"</p>"),f.markup("<span class='tt-title'>").content(a).markup("</span>").markup(b),c||f.markup("<p>").content(e.formatMessageNoEscape("PD.GAL.NOT_SUPPORTED",u)).markup("</p>"),f.toString()}function i(){var a,d,f,g,i,j=b.getComponentType(b.COMP_TYPE.REGION).pluginType.plugins;for(a in j)if(j.hasOwnProperty(a)){if(d=j[a],d.isLegacy||"NATIVE_DATA_UPLOAD_COLUMN_MAPPING"===d.name)continue;g=-1!==c.inArray(t,d.uiTypes),i=b.getTheme().defaultTemplates["NATIVE_IR"===a?"ir":"region"],f={type:o,iconClass:window.pageDesigner.getComponentIconClass(o,a),title:g?d.title:e.formatMessage("PD.UNSUPPORTED",d.title),isSupported:g,tooltip:h(d.title,d.helpText,g),values:[{id:b.PROP.REGION_TYPE,value:a},{id:b.PROP.REGION_TEMPLATE,value:i}]},x.regions.push(f)}}function j(){var a,d,f,g,i=b.getComponentType(b.COMP_TYPE.PAGE_ITEM).pluginType.plugins;for(a in i)if(i.hasOwnProperty(a)){if(d=i[a],d.isLegacy)continue;g=-1!==c.inArray(t,d.uiTypes),f={type:p,iconClass:window.pageDesigner.getComponentIconClass(p,a),title:g?d.title:e.formatMessage("PD.UNSUPPORTED",d.title),isSupported:g,tooltip:h(d.title,d.helpText,g),values:[{id:b.PROP.ITEM_TYPE,value:a}]},x.items.push(f)}}function k(){function a(a,c,d){f={type:q,iconClass:window.pageDesigner.getComponentIconClass(q,"Y"===d?"hot":"normal"),title:a,isSupported:!0,tooltip:h(a,"",!0),values:[{id:b.PROP.BUTTON_TEMPLATE,value:c},{id:b.PROP.BUTTON_IS_HOT,value:d}]},x.buttons.push(f)}var c,d,f,g=b.getButtonTemplates();for(c in g)g.hasOwnProperty(c)&&(d=g[c],a(d.name,c,"N"),d.hasHotTemplate&&a(e.formatMessage("PD.GAL.HOT_BTN",d.name),c,"Y"))}function l(){var a=b.getComponents(b.COMP_TYPE.PAGE)[0];t=a._uiType,u=a.getProperty(b.PROP.USER_INTERFACE).getDisplayValue(),i(),j(),k(),c.each(["regions","items","buttons"],function(a,b){x[b].sort(function(a,b){return a.title.localeCompare(b.title)})}),m()}function m(){var a=c("#glv"),e=b.isPageReadOnly(),h=d.htmlBuilder();c.each(["regions","items","buttons"],function(b,d){var i,j,k=x[d],l=c("#cg-"+d+" ul").first();for(h.clear(),i=0;i<k.length;i++)j=k[i],(j.isSupported||v)&&g(h,i,j);l.html(h.toString()).iconList("refresh"),e||c("#cg-"+d+" li").draggable({addClasses:!1,appendTo:"#glv-viewport",cursor2:"default",cursorAt:{left:2,top:2},delay:10,distance:5,opacity:.9,revert:!1,helper:function(){var b=c(this),d=b.attr("data-component"),e=f(d);return a.gridlayout("makeHelper",e.type,e.iconClass,e.title,d)},connectToGridlayout:"#glv",containment:"document",zIndex:1e3,start:function(){0!==c("#editor_tabs").tabs("option","active")&&c("#editor_tabs").tabs("option","active",0),apex.tooltipManager.disableTooltips()},stop:function(){apex.tooltipManager.enableTooltips()}})})}function n(){c.each(["regions","items","buttons"],function(a,b){var d=c("#cg-"+b+" ul").first();x[b]=[],d.empty().iconList("refresh")})}var o="region",p="item",q="button",r="GAL_SHOW_UNSUP",s="GAL_CUR_TAB",t=null,u="",v=!1,w={region:"regions",item:"items",button:"buttons"},x={regions:[],items:[],buttons:[]},y={region:"a-Gallery-region",item:"a-Gallery-pageItem",button:"a-Gallery-button"};a.getComponentData=f,c(document).ready(function(){var a,d=!1;v="Y"===window.pageDesigner.getPreference(r);var e={menubar:!1,items:[{id:"addTo",type:"subMenu",disabled:!0,labelKey:"PD.GAL.MI.ADD2",menu:{items:[]}},{type:"toggle",labelKey:"PD.GAL.MI.SHOW_UNSUP",get:function(){return v},set:function(a){v=a,m(),window.pageDesigner.savePreference(r,v?"Y":"N")}}],beforeOpen:function(a,d){var e,g,h,i,j=c("#glv"),k=d.menuElement.menu("find","addTo"),l=d.selection;1!==l.length||b.isPageReadOnly()?k.menu.items=[]:(e=l.eq(0),i=e.attr("data-component"),g=f(i),h=function(){window.pageDesigner.glvMenuAddAction.call(this,i)},k.menu.items=window.pageDesigner.glvMakeTargetMenu(j.gridlayout("getDropTargets",g.type,"add"),h)),k.disabled=0===k.menu.items.length}};c("#cg-regions ul, #cg-items ul, #cg-buttons ul").addClass("a-Gallery").each(function(){c(this).iconList({multiple:!1,contextMenu:e,contextMenuId:"galleryMenu-"+c(this).parent().parent()[0].id})}).tooltip({items:"li",show:apex.tooltipManager.defaultShowOption(),position:{my:"left-20 top-20",at:"right bottom",collision:"flipfit"},content:function(){var a=f(c(this).attr("data-component"));return a.tooltip}}),c("#gallery-tabs").on("tabsactivate",function(a,b){c("#galleryMenuBtn").attr("data-menu","galleryMenu-"+b.newPanel[0].id),d||window.pageDesigner.savePreference(s,b.newTab.parent().children().index(b.newTab[0])),d=!1}),c("#galleryMenuBtn").attr("data-menu","galleryMenu-cg-regions"),a=parseInt(window.pageDesigner.getPreference(s),10),!isNaN(a)&&a>0&&setTimeout(function(){d=!0,c("#gallery-tabs").tabs("option","active",a)},10),c("#gallery-tabs .u-ScrollingViewport.resize").resize(function(){c(this).children(".a-IconList").resize()})}),c(document).on("modelReady",function(){l()}),c(document).on("modelCleared",function(){n()})}(window.componentGallery,pe,apex.jQuery,apex.util,apex.lang);
window.pageDesigner={},function(a,b,c,d,e,f,g,h){"use strict";function i(){a.getCurrentPageId()!==b.trim(b("#go_to_page").val())&&b("#go_to_page").val(a.getCurrentPageId())}function j(a){apex.debug.getLevel()===apex.debug.LOG_LEVEL.ENGINE_TRACE&&console.time(a)}function k(a){apex.debug.getLevel()===apex.debug.LOG_LEVEL.ENGINE_TRACE&&console.timeEnd(a)}function l(a){var b,c=/^[0-9:]+$/,d=null;return"#"===a.charAt(0)&&(a=a.substring(1)),c.test(a)&&(b=a.split(":"),2===b.length&&(d={typeId:b[0],componentId:b[1]})),d}function m(){function g(d){var e=b("#a_PageDesigner");c.delayLinger.start("main",function(){m=c.showSpinner(e),e.addClass(r)}),b.each(["pd-undo","pd-redo","pd-save-page","pd-save-run-page"],function(a,b){apex.actions.disable(b)}),b(".a-TreeView").treeView("disable"),b("#glv").gridlayout("disable"),b("#pe").propertyEditor("disable"),a.saveChanges(function(a){b.each(["pd-undo","pd-redo","pd-save-page","pd-save-run-page"],function(a,b){apex.actions.enable(b)}),b(".a-TreeView").treeView("enable"),b("#glv").gridlayout("enable"),b("#pe").propertyEditor("enable"),c.delayLinger.finish("main",function(){m.remove(),e.removeClass(r)}),d(a)})}function j(b){var c;for(c=0;c<b.length;c++)b[c].hasOwnProperty("menu")?j(b[c].menu.items):b[c].action=function(){a.hasChanged()?window.confirm(f.msg("BEFORE_AJAX_UNSAVED_CHANGES"))&&e.redirect(this.href):e.redirect(this.href)}}function k(){var b=a.getPageLockState();b?b.isLockedByCurrentUser?o.attr("title",f.msg("PAGE_LOCKED_BY_YOU")).attr("aria-label",f.msg("PAGE_LOCKED_BY_YOU")).removeClass("is-locked").addClass("is-active is-locked-by-self").find(".a-Icon")[0].className="a-Icon icon-lock":o.attr("title",f.format("PAGE_LOCKED_BY",b.owner)).attr("aria-label",f.format("PAGE_LOCKED_BY",b.owner)).removeClass("is-locked-by-self").addClass(" is-active is-locked").find(".a-Icon")[0].className="a-Icon icon-lock-user":o.attr("title",f.msg("PAGE_UNLOCKED")).attr("aria-label",f.msg("PAGE_UNLOCKED")).removeClass("is-active is-locked is-locked-by-self").find(".a-Icon")[0].className="a-Icon icon-unlock"}var l,m,n=b("#createMenu_menu"),o=(b("<div id='pdSettingsMenu'></div>").appendTo("body"),b("#button-lock")),p=b("#lockDialog"),s=b("#runDialogOpenMsg"),t=b("#runDialogFocusMsg");apex.commandHistory.setErrorHandler(function(a,b){var c={execute:"CMD.EXECUTE_FAILED",undo:"CMD.UNDO_FAILED",redo:"CMD.REDO_FAILED"};f.showError(f.format(c[a],b.label()))}),apex.actions.add([{name:"pd-undo",label:null,title:null,icon:"icon-undo",shortcut:"Ctrl+Z",action:function(){apex.commandHistory.undo()}},{name:"pd-redo",label:null,title:null,icon:"icon-redo",shortcut:"Ctrl+Y",action:function(){apex.commandHistory.redo()}},{name:"pd-save-page",label:null,disabled:!0,shortcut:"Ctrl+Alt+S",action:function(a){b(a.target).closest(".a-Property").length&&b("#pe").propertyEditor("saveProperty"),g(function(a){apex.commandHistory.clear(),b(document).trigger("commandHistoryChange"),a.error?"NO_CHANGES"!==a.error&&f.showError(a.error):f.showSuccess(f.msg("CHANGES_SAVED"))})}},{name:"pd-save-run-page",label:null,title:null,icon:"icon-run-page",disabled:!0,shortcut:"Ctrl+Alt+R",action:function(h,i){function j(){return c.makeApplicationUrl({pageId:"RUN_PAGE",request:"BRANCH_TO_PAGE_ACCEPT",debug:"NO",itemNames:["FB_FLOW_ID","FB_FLOW_PAGE_ID","F4000_P1_FLOW"],itemValues:[o,p,o]})}function k(a,b){a.dialog({modal:!0,title:f.msg(b?"FOCUS_PAGE":"RUN_PAGE"),closeText:d.getMessage("APEX.DIALOG.CLOSE"),dialogClass:"ui-dialog--pageDesignerAlert",width:400,height:240,minWidth:400,minHeight:240,position:{my:"right top",at:"right-20 bottom+20",of:i},buttons:[{text:f.msg("TRY_AGAIN"),"class":"a-Button--hot",click:function(){a.dialog("close"),b?e.openInNewWindow("",apex.builder.getAppUnderTestWindowName(o)):m()}}]})}function l(){n=!1,b(window).on("blur.runcheck",function(){b(window).off(".runcheck"),n=!0}),q=setTimeout(function(){q=null,n||k(t,!0),b(window).off(".runcheck")},800)}function m(){var c=a.getComponents(a.COMP_TYPE.PAGE)[0],d={},g=$v("P0_WINDOW_MGMT_MODE")||"FOCUS";a.isGlobalPage()?f.showSuccess(f.msg("CHANGES_SAVED_GLOBAL_PAGE")):"NORMAL"===c.getProperty(a.PROP.PAGE_MODE).getValue()?"NONE"===g||/^4\d\d\d$/.test(o)?e.redirect(j()):("BROWSER"===g?d.favorTabbedBrowsing=!0:l(),e.openInNewWindow(j(),apex.builder.getAppUnderTestWindowName(o),d)||(clearTimeout(q),b(window).off(".runcheck"),k(s))):f.showSuccess(f.msg("CHANGES_SAVED_DIALOG_PAGE"))}var n,o=a.getCurrentAppId(),p=a.getCurrentPageId(),q=null;b(h.target).closest(".a-Property").length&&b("#pe").propertyEditor("saveProperty"),a.hasChanged()?g(function(a){apex.commandHistory.clear(),b(document).trigger("commandHistoryChange"),a.error?"NO_CHANGES"!==a.error&&f.showError(a.error):m()}):m()}}]),b(document).on("commandHistoryChange",function(){var a,b;b=apex.actions.lookup("pd-undo"),b.disabled=!apex.commandHistory.canUndo(),apex.commandHistory.canUndo()?(a=d.formatMessageNoEscape("PD.UNDO",apex.commandHistory.undoLabel()),b.title=a):b.title="",apex.actions.update("pd-undo"),b=apex.actions.lookup("pd-redo"),b.disabled=!apex.commandHistory.canRedo(),apex.commandHistory.canRedo()?(a=d.formatMessageNoEscape("PD.REDO",apex.commandHistory.redoLabel()),b.title=a):b.title="",apex.actions.update("pd-redo")}).trigger("commandHistoryChange"),o.attr("disabled",!0).click(function(){var c,e,g=!1,h=a.getPageLockState();e=[{text:f.msg("CANCEL"),click:function(){p.dialog("close")}}],b("#lockDialogIntroUnlocked, #lockDialogIntroLocked, #lockDialogIntroOwned").hide(),apex.item("P4500_DLG_LOCK_OWNER").hide(),!h||h.isLockedByCurrentUser?(e.push({click:function(){p.dialog("close"),a.lockPage($v("P4500_DLG_LOCK_COMMENT")).fail(function(a){f.showError(a)}).always(function(){k()})}}),h?(c=f.msg("UNLOCK_PAGE"),e[1].text=f.msg("APPLY_CHANGES"),b("#lockDialogIntroOwned").show(),e.push({text:f.msg("UNLOCK"),"class":"a-Button--hot",click:function(){p.dialog("close"),a.unlockPage().fail(function(a){f.showError(a)}).always(function(){k()})}})):(c=f.msg("LOCK_PAGE"),e[1].text=f.msg("LOCK"),e[1]["class"]="a-Button--hot",b("#lockDialogIntroUnlocked").show())):(c=f.msg("PAGE_LOCKED"),b("#lockDialogIntroLocked").show(),apex.item("P4500_DLG_LOCK_OWNER").show(),$s("P4500_DLG_LOCK_OWNER",h.owner),g=!0,e[0].text=f.msg("OK")),b("#P4500_DLG_LOCK_COMMENT").val(h.comment).attr("readOnly",g),p.dialog({modal:!0,title:c,closeText:d.getMessage("APEX.DIALOG.CLOSE"),dialogClass:"ui-dialog--pageDesignerLock",width:600,height:340,minHeight:340,minWidth:600,buttons:e})}),n.on("menucreate",function(){var a=n.menu("find","teamDev");a&&(a.hide=!gTeamDevEnabled),j(n.menu("option").items)}),n.on("apexafterclosedialog",function(a,b){b.hasOwnProperty("FB_FLOW_PAGE_ID")&&f.goToPage(b.FB_FLOW_PAGE_ID)}),gTeamDevEnabled&&(l=b("<div id='teamDevMenu'></div>").appendTo("body"),l.menu({menubar:!1,items:[{type:"action",labelKey:"PD.FEATURES",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"9000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_MODULE","IRLT_PERCENT_COMPLETE"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"100"]}))}},{type:"action",labelKey:"PD.TODOS",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"3000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_PCT_COMPLETE"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"100"]}))}},{type:"action",labelKey:"PD.BUGS",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"3500",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_BUG_PCT_COMPLETE"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"100"]}))}},{type:"action",labelKey:"PD.FEEDBACK_ENTRIES",action:function(){e.redirect(c.makeApplicationUrl({appId:"4800",pageId:"8000",request:"BUILDER",clearCache:"RIR",itemNames:["IR_APPLICATION_ID","IR_PAGE_ID","IRLT_FEEDBACK_STATUS_ID"],itemValues:[a.getCurrentAppId(),a.getCurrentPageId(),"3"]}))}}],beforeOpen:function(a,b){var c,d,e=b.menu.items,g=[["FEATURES_N","features"],["TODOS_N","todos"],["BUGS_N","bugs"],["FEEDBACK_ENTRIES_N","feedback"]];for(c=0;c<g.length;c++)d=g[c],q[d[1]]!==h&&(e[c].label=f.format(d[0],q[d[1]]),delete e[c].labelKey)}})),b("#button-comments").prop("disabled",!0),b("#go_to_page").on("keypress",function(a){13===a.which&&f.goToPage(b("#go_to_page").val())}).on("focus",function(){this.select()}),b("#a_PageDesigner").on("focusin",function(){i()}),b("#go_to_page_button").click(function(){f.goToPage(b("#go_to_page").val())}),b("#go_to_page_lov").on("click",function(){var d=c.htmlBuilder(),e={columnDefinitions:[{name:"id",title:f.msg("PAGE_NUMBER")},{name:"name",title:f.msg("PAGE_NAME")},{name:"userInterface",title:f.msg("USER_INTERFACE")},{name:"group",title:f.msg("GROUP")}],filters:[{name:"show",title:f.msg("PAGE_PICKER.SHOW"),type:"buttonset",defaultValue:"all",lov:[{display:f.msg("ALL_PAGES"),value:"all"},{display:f.msg("PAGE_PICKER.RECENTLY_EDITED"),value:"recent"}]},{name:"search",title:f.msg("SEARCH"),type:"search"}],filterLov:function(b,c){var d={};"current_ui"===b.show?d={show:"user_interface_id",id:a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.USER_INTERFACE).getValue()}:"current_group"===b.show?d={show:"group_id",id:a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.PAGE_GROUP).getValue()}:"recent"===b.show&&(d={show:"recent"}),a.getPagesLov(d,function(a){c(a,b.search)},"Y")}};a.getCurrentPageId()!==h&&(a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.PAGE_GROUP).getValue()&&e.filters[0].lov.unshift({display:f.msg("CURRENT_GROUP"),value:"current_group"}),e.filters[0].lov.unshift({display:f.msg("CURRENT_UI"),value:"current_ui"}),e.filters[0].defaultValue="current_ui"),d.markup("<div").attr("id","goToPageDlg").attr("title",f.msg("PAGE_FINDER")).markup(">").markup("</div>"),b(d.toString()).lovDialog({modal:!0,minWidth:750,height:500,filters:e.filters,columnDefinitions:e.columnDefinitions,filterLov:e.filterLov,dialogClass:f.CSS.DIALOG_FLUSH_BODY,resizable:!1,multiValue:!1,valueSelected:function(a,b){f.goToPage(b.id)}})}),b(document).on("modelConfigLoaded",function(){a.getComponentType(a.COMP_TYPE.BREADCRUMB).editUrl="f?p=4000:287:%session%:::RP,287:FB_FLOW_ID,FB_FLOW_PAGE_ID,P287_PAGE,F4000_P287_MENU_ID:%application_id%,%page_id%,%page_id%,%pk_value%",a.getComponentType(a.COMP_TYPE.LIST).editUrl="f?p=4000:4050:%session%:::RP,4050:FB_FLOW_ID,FB_FLOW_PAGE_ID,F4000_P4050_LIST_ID:%application_id%,%page_id%,%pk_value%"}),b(document).on("modelReady",function(){(!a.isPageReadOnly()||a.getPageLockState())&&(o.attr("disabled",!1),k()),b.each(["pd-save-page","pd-save-run-page"],function(a,b){apex.actions.enable(b)}),b(document).one("modelCleared",function(){apex.commandHistory.clear(),b(document).trigger("commandHistoryChange"),o.attr("disabled",!0),b.each(["pd-save-page","pd-save-run-page"],function(a,b){apex.actions.disable(b)}),b("#button-comments").prop("disabled",!0).find(".a-Button-badge").text(""),gTeamDevEnabled&&(b("#menu-team-dev").prop("disabled",!0).find(".a-Button-badge").text(""),q={})})})}function n(){var a=b('<span class="a-AlertBadge"></span>').appendTo(b('#editor_tabs a[href="#messages"]'));b("#messages-container").peMessagesView({badge:a})}function o(){var a=b("#search-container").peSearch();b("#P4500_LOCAL_SEARCH,#P4500_MATCH_CASE,#P4500_IS_REGEXP").on("change",function(){var b=$v("P4500_LOCAL_SEARCH"),d=("Y"===$v("P4500_MATCH_CASE")?"":"i")+"g",e="Y"===$v("P4500_IS_REGEXP");""!==b?(b=e?new RegExp(b,d):new RegExp(c.escapeRegExp(b),d),a.peSearch("search",b)):a.peSearch("clear")}),b("#CLEAR_PAGE_SEARCH").on("click",function(){$s("P4500_LOCAL_SEARCH","","",!0),$s("P4500_MATCH_CASE","","",!0),$s("P4500_IS_REGEXP","","",!0),a.peSearch("clear")}),b(document).on("pageSearch",function(a,c){b("#editor_tabs").tabs({active:2}),$s("P4500_MATCH_CASE","","",!0),$s("P4500_IS_REGEXP","","",!0),$s("P4500_LOCAL_SEARCH",c)})}var p,q,r="is-processing";f.CSS={IS_ERROR:"is-error",IS_WARNING:"is-warning",IS_CONDITIONAL:"is-conditional",DIALOG_FLUSH_BODY:"ui-dialog-flushBody"},f.SETTINGS={COMPONENT_TITLE:{LABEL:"l",NAME:"n"}},f.settingsState={componentTitle:f.SETTINGS.COMPONENT_TITLE.NAME},f.msg=function(a){return d.getMessage("PD."+a)},f.format=function(a){var b=f.msg(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.format.apply(this,c)},f.tooltipContentForComponent=function(b){function c(a,c){var d,e=b.getProperty(a);!e||c!==h&&e.getValue()===c||(d=e.getDisplayValue(),""!==d&&l.markup("<li><span class='tt-label'>").content(e.getMetaData().prompt).markup(": </span><span class='tt-value'>").content(d).markup("</span></li>"))}function d(){var d=b.getProperty(a.PROP.CONDITION_TYPE);c(a.PROP.WHEN_BUTTON_PRESSED),d&&""!==d.getValue()&&(c(a.PROP.CONDITION_TYPE),c(a.PROP.CONDITION_SQL_STATEMENT),c(a.PROP.CONDITION_SQL_EXPRESSION),c(a.PROP.CONDITION_PLSQL_EXPRESSION),c(a.PROP.CONDITION_PLSQL_FUNCTION_BODY),c(a.PROP.CONDITION_VALUE1),c(a.PROP.CONDITION_ITEM1),c(a.PROP.CONDITION_LIST),c(a.PROP.CONDITION_PREFERENCE),c(a.PROP.CONDITION_PAGE),c(a.PROP.CONDITION_PAGES),c(a.PROP.CONDITION_TEXT),c(a.PROP.CONDITION_VALUE2),c(a.PROP.CONDITION_ITEM2),c(a.PROP.CONDITION_TEXT2)),c(a.PROP.AUTHORIZATION_SCHEME),c(a.PROP.BUILD_OPTION)}function e(){c(a.PROP.GRID_NEW_GRID,"N"),c(a.PROP.GRID_NEW_ROW,"N"),c(a.PROP.GRID_COLUMN,""),c(a.PROP.GRID_NEW_COLUMN,"N"),c(a.PROP.GRID_COLUMN_SPAN,"")}function f(){var d=b.getProperty(a.PROP.WHEN_TYPE);c(a.PROP.EVENT),c(a.PROP.CUSTOM_EVENT),d&&""!==d.getValue()&&(c(a.PROP.WHEN_REGION),c(a.PROP.WHEN_BUTTON),c(a.PROP.WHEN_ITEMS),c(a.PROP.WHEN_DOM_OBJECT),c(a.PROP.WHEN_JQUERY_SELECTOR),c(a.PROP.WHEN_JAVASCRIPT_EXPRESSION))}function g(){var d=b.getProperty(a.PROP.AFFECTED_TYPE);d&&""!==d.getValue()&&(c(a.PROP.AFFECTED_REGION),c(a.PROP.AFFECTED_BUTTON),c(a.PROP.AFFECTED_ITEMS),c(a.PROP.AFFECTED_DOM_OBJECT),c(a.PROP.AFFECTED_JQUERY_SELECTOR),c(a.PROP.AFFECTED_JAVASCRIPT_EXPRESSION),("TRIGGERING_ELEMENT"===d.getValue()||"EVENT_SOURCE"===d.getValue())&&c(a.PROP.AFFECTED_TYPE))}function i(){c(a.PROP.COMPUTATION_STATIC_VALUE),c(a.PROP.COMPUTATION_SQL_STATEMENT),c(a.PROP.COMPUTATION_SQL_COLON),c(a.PROP.COMPUTATION_SQL_EXPRESSION),c(a.PROP.COMPUTATION_PLSQL_EXPRESSION),c(a.PROP.COMPUTATION_PLSQL_FUNCTION_BODY),c(a.PROP.COMPUTATION_ITEM_VALUE),c(a.PROP.COMPUTATION_PREFERENCE_VALUE)}function j(){var d=b.getProperty(a.PROP.VALIDATION_REGION).getValue();""===d?(c(a.PROP.VALIDATION_TYPE),c(a.PROP.VAL_SQL_STATEMENT),c(a.PROP.VAL_SQL_EXPRESSION),c(a.PROP.VAL_PLSQL_EXPRESSION),c(a.PROP.VAL_PLSQL_FUNCTION_BODY_BOOLEAN),c(a.PROP.VAL_PLSQL_FUNCTION_BODY_VARCHAR2),c(a.PROP.VAL_PLSQL),c(a.PROP.VAL_ITEM),c(a.PROP.VAL_VALUE),c(a.PROP.VAL_REGULAR_EXPRESSION)):(c(a.PROP.VALIDATION_REGION),c(a.PROP.REGION_VALIDATION_TYPE),c(a.PROP.REGION_VAL_SQL_STATEMENT),c(a.PROP.REGION_VAL_SQL_EXPRESSION),c(a.PROP.REGION_VAL_PLSQL_EXPRESSION),c(a.PROP.REGION_VAL_PLSQL_FUNCTION_BODY_BOOLEAN),c(a.PROP.REGION_VAL_PLSQL_FUNCTION_BODY_VARCHAR2),c(a.PROP.REGION_VAL_PLSQL),c(a.PROP.REGION_VAL_COLUMN),c(a.PROP.REGION_VAL_VALUE),c(a.PROP.REGION_VAL_REGULAR_EXPRESSION)),c(a.PROP.ALWAYS_EXECUTE)}var k=b.typeId,l=apex.util.htmlBuilder();return k===a.COMP_TYPE.PAGE?c(a.PROP.TITLE):k===a.COMP_TYPE.REGION?(c(a.PROP.REGION_TYPE),e()):k===a.COMP_TYPE.PAGE_ITEM?(c(a.PROP.ITEM_LABEL),c(a.PROP.ITEM_TYPE),e()):k===a.COMP_TYPE.BUTTON?(c(a.PROP.BUTTON_LABEL),c(a.PROP.BUTTON_ACTION),e()):k===a.COMP_TYPE.DA_EVENT?f():k===a.COMP_TYPE.DA_ACTION?g():k===a.COMP_TYPE.VALIDATION?j():k===a.COMP_TYPE.PAGE_PROCESS?c(a.PROP.PAGE_PROCESS_TYPE):k===a.COMP_TYPE.PAGE_COMPUTATION?i():k===a.COMP_TYPE.BRANCH?(c(a.PROP.BRANCH_TYPE),c(a.PROP.TARGET),c(a.PROP.BRANCH_PAGE_NUMBER),c(a.PROP.BRANCH_ACCEPT_REQUEST),c(a.PROP.BRANCH_ITEM)):k===a.COMP_TYPE.IR_COLUMN?(c(a.PROP.COLUMN_HEADING),c(a.PROP.IR_COLUMN_DISPLAY_TYPE)):k===a.COMP_TYPE.CLASSIC_RPT_COLUMN?(c(a.PROP.COLUMN_HEADING),c(a.PROP.CLASSIC_REPORT_COLUMN_TYPE)):k===a.COMP_TYPE.TAB_FORM_COLUMN&&(c(a.PROP.COLUMN_HEADING),c(a.PROP.TAB_FORM_COLUMN_TYPE)),d(),l.toString()?"<ul class='tt-list'>"+l.toString()+"</ul>":null},f.getComponentIconClass=function(a,b){return/^PLUGIN_/.test(b)?"icon-"+a+"-plugin":"icon-"+a+"-"+b.toLowerCase().replace(/_/g,"-")},f.isConditional=function(b){function c(a){var c=b.getProperty(a);return c&&""!==c.getValue()}return c(a.PROP.CONDITION_TYPE)||c(a.PROP.AUTHORIZATION_SCHEME)||c(a.PROP.BUILD_OPTION)||c(a.PROP.WHEN_BUTTON_PRESSED)},f.observerIsConditional=function(b,c,d){a.observer(b,{components:c,events:[a.EVENT.CHANGE],properties:[a.PROP.CONDITION_TYPE,a.PROP.AUTHORIZATION_SCHEME,a.PROP.BUILD_OPTION,a.PROP.WHEN_BUTTON_PRESSED]},d)},f.isDisplayed=function(c){var d,e=!0;return c.isOnGlobalPage()&&(d=c.getProperty(a.PROP.CONDITION_TYPE).getValue(),"CURRENT_PAGE_EQUALS_CONDITION"===d?e=c.getProperty(a.PROP.CONDITION_PAGE).getValue()===a.getCurrentPageId():"CURRENT_PAGE_NOT_EQUAL_CONDITION"===d?e=c.getProperty(a.PROP.CONDITION_PAGE).getValue()!==a.getCurrentPageId():"CURRENT_PAGE_IN_CONDITION"===d?e=-1!==b.inArray(a.getCurrentPageId(),c.getProperty(a.PROP.CONDITION_PAGES).getValue().split(",")):"CURRENT_PAGE_NOT_IN_CONDITION"===d&&(e=-1===b.inArray(a.getCurrentPageId(),c.getProperty(a.PROP.CONDITION_PAGES).getValue().split(",")))),e},f.setPageSelection=function(c,d,e,g,h){var i,j="OK";if(c&&c===a.getCurrentAppId()){if(d&&d!==a.getCurrentPageId())return i=f.goToPage(d),void b.when(i).done(function(){e&&g&&(f.goToComponent(e,g)||(j="COMPONENT_NOT_SELECTED")),h(j)}).fail(function(a){h("user-abort"===a?"PAGE_CHANGE_ABORTED":"PAGE_NOT_CHANGED")});e&&g&&(f.goToComponent(e,g)||(j="COMPONENT_NOT_SELECTED"))}else j="APP_NOT_CHANGED";h(j)},f.goToPage=function(d){var e,h,l,m=b("#a_PageDesigner"),n=b.Deferred();return a.hasChanged()&&!window.confirm(f.msg("BEFORE_AJAX_UNSAVED_CHANGES"))?(i(),n.reject("user-abort"),n.promise()):(b(document).trigger("selectionChanged",["controller",[]]),a.clear(),b(document).trigger("modelCleared"),b("#go_to_page").val(d),j("waitSpinner"),c.delayLinger.start("main",function(){h=c.showSpinner(m),m.addClass(r)}),j("loadServerData"),p||(p=b.ajax({dataType:"json",type:"GET",url:apex_img_dir+"apex_ui/js/staticData/pd_static_data_"+gLanguage+".json?v="+gApexVersion})),e=g.process("getSharedComponentData",{},{type:"GET"}),l=g.process("getPageData",{x01:d},{type:"GET"}),b.when(p,e,l).done(function(c,e,h){k("loadServerData"),b.isEmptyObject(h[0])?f.showError(f.msg("PAGE_DOES_NOT_EXIST")):(j("set model"),a.setStaticData(c[0]),a.setSharedComponentData(e[0]),a.setComponentData(h[0]),a.setCurrentAppId($v("P4500_CURRENT_APP")),a.setCurrentPageId(d),k("set model"),j("modelReady"),b(document).trigger("modelReady"),k("modelReady"),g.process("getAdditionalData",{x01:d},{type:"GET",success:function(a){var c,d;d=f.format("COMMENTS_BADGE_TITLE",a.comments),b("#button-comments").prop("disabled",!1).attr("aria-label",d).attr("title",d).find(".a-Button-badge").text(0===a.comments?"":a.comments),gTeamDevEnabled&&(c=a.teamDev.features+a.teamDev.bugs+a.teamDev.todos+a.teamDev.feedback,d=f.format("TEAM_DEV_BADGE_TITLE",c),0===c&&(c=""),b("#menu-team-dev").prop("disabled",!1).attr("aria-label",d).attr("title",d).find(".a-Button-badge").text(c),q=a.teamDev)}}),j("selectionChanged"),b(document).trigger("selectionChanged",["controller",a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})]),k("selectionChanged"),n.resolve())}).fail(function(){n.reject()}).always(function(){c.delayLinger.finish("main",function(){h.remove(),m.removeClass(r)}),k("waitSpinner")}),n.promise())},f.goToComponent=function(c,d,e){var f=a.getComponents(c,{id:d});return 1!==f.length?!1:(b(document).trigger("selectionChanged",["controller",f,e]),b("#PDrenderingTree, #PDdynamicActionTree, #PDprocessingTree, #PDsharedCompTree").each(function(a){var c,f=b(this);return c=f.treeView("getSelectedNodes")[0],c&&c.data.componentId===d?(b("#trees").tabs("option","active",a),f.treeView("setSelectedNodes",[c],e===h),!1):void 0}),!0)},f.showSuccess=function(a){b("#pdNotificationState").addClass("is-success"),b("#pdNotificationIcon").addClass("icon-check"),f.showNotification(a)},f.showError=function(a){b("#pdNotificationState").addClass("is-error"),b("#pdNotificationIcon").addClass("icon-error"),f.showNotification(a)},f.showNotification=function(c){var d,e=b("#pdNotificationMessage");c&&(d=e.text().replace("#PD_MESSAGE#",c),e.text(d)),b("#pdNotification").addClass("is-displayed").fadeIn("slow"),b(document).on("commandHistoryChange.forMsg",function(){a.hasChanged()&&f.hideNotification()}).on("modelCleared.forMsg",function(){f.hideNotification()})},f.hideNotification=function(){b("#pdNotification").removeClass("is-displayed").fadeOut("slow",function(){b("#pdNotificationMessage").text("#PD_MESSAGE#"),b("#pdNotificationState").removeClass("is-error is-success"),b("#pdNotificationIcon").removeClass("icon-error icon-check")}),b(document).off(".forMsg")},f.setHelpText=function(a,c){var d=b("#help-container");c&&(a+='<div class="a-HelpFeedback"><a class="a-Button a-Button--small a-Button--noUI" href="https://apex.oracle.com/pls/apex/f?p=apex_help_feedback:1:::::'+c+"&p_lang="+gBuilderLang+'" target="_blank">'+f.msg("HELP.FEEDBACK")+"</a></div>"),d.html(a)},f.clearHelpText=function(){var a=b("#help-container"),c=f.msg("HELP.DEFAULT");a.html(c)},f.getPreference=function(a){var b="PD_"+a;return window.gPreferences.hasOwnProperty(b)?window.gPreferences[b]:null},f.savePreference=function(a,b){var c="PD_"+a,d=window.gPreferences[c];window.gPreferences[c]=b,d!==b&&g.process("setPreference",{x01:c,x02:b},{dataType:""})},f.saveBoolPref=function(a,b){f.savePreference(a,b?"Y":"N")},f.getBoolPref=function(a,b){var c=f.getPreference(a);return c=null===c?b:"Y"===c},b(document).ready(function(){function e(a){var c=b("#"+a);c.length&&c.splitter("option","collapsed")&&c.splitter("option","collapsed",!1)}j("readyEvent"),j("ReadyEventTotal"),b("#sp_main").show(),m(),n(),o(),a.init({isInternal:gIsInternal,isReadOnly:gIsReadOnly}),setTimeout(function(){j("pd.goToPage-total");var a=f.goToPage(b("#go_to_page").val());b.when(a).done(function(){var a=l(window.location.hash);a&&f.goToComponent(a.typeId,a.componentId),k("pd.goToPage-total"),k("ReadyEventTotal")})},0),apex.actions.add([{name:"pd-expand-restore",onLabel:f.msg("RESTORE"),offLabel:f.msg("EXPAND"),shortcut:"Alt+F11",get:function(){return this.isCenterExpanded},set:function(a){this.isCenterExpanded=a,b("#sp_main_content, #sp_glv_content, #sp_right_content").splitter("option","collapsed",this.isCenterExpanded)},isCenterExpanded:!1,updateState:function(){var a=this;this.isCenterExpanded=!0,b("#sp_main_content, #sp_glv_content, #sp_right_content").each(function(){return b(this).splitter("option","collapsed")?void 0:(a.isCenterExpanded=!1,!1)}),this.icon=this.isCenterExpanded?"icon-restore":"icon-maximize",apex.actions.update(this.name)}},{name:"pd-goto-help",label:f.msg("ACTION.GOTO_HELP"),shortcut:"Alt+F1",action:function(){return b("#editor_tabs").tabs("option","active",3),b("#help-container")[0].focus(),!0}},{name:"pd-goto-rendering-tree",label:f.msg("ACTION.GOTO_RENDERING"),shortcut:"Alt+1",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",0),b("#PDrenderingTree").treeView("focus"),!0}},{name:"pd-goto-dynamic-actions-tree",label:f.msg("ACTION.GOTO_DA"),shortcut:"Alt+2",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",1),b("#PDdynamicActionTree").treeView("focus"),!0}},{name:"pd-goto-processing-tree",label:f.msg("ACTION.GOTO_PROCESSING"),shortcut:"Alt+3",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",2),b("#PDprocessingTree").treeView("focus"),!0}},{name:"pd-goto-shared-components-tree",label:f.msg("ACTION.GOTO_SHARED"),shortcut:"Alt+4",action:function(){return e("sp_main_content"),b("#trees").tabs("option","active",3),b("#PDsharedCompTree").treeView("focus"),!0}},{name:"pd-goto-grid-layout",label:f.msg("ACTION.GOTO_GLV"),shortcut:"Alt+5",action:function(){return b("#editor_tabs").tabs("option","active",0),b("#glv").gridlayout("focus"),!0}},{name:"pd-goto-property-editor-layout",label:f.msg("ACTION.GOTO_PE"),shortcut:"Alt+6",action:function(){return e("sp_right_content"),b("#pe").propertyEditor("focus"),!0}},{name:"pd-goto-gallery-regions",label:f.msg("ACTION.GOTO_REGIONS"),shortcut:"Alt+7",action:function(){return b("#editor_tabs").tabs("option","active",0),e("sp_glv_content"),b("#gallery-tabs").tabs("option","active",0),b("#cg-regions .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-gallery-items",label:f.msg("ACTION.GOTO_ITEMS"),shortcut:"Alt+8",action:function(){return b("#editor_tabs").tabs("option","active",0),e("sp_glv_content"),b("#gallery-tabs").tabs("option","active",1),b("#cg-items .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-gallery-buttons",label:f.msg("ACTION.GOTO_BUTTONS"),shortcut:"Alt+9",action:function(){return b("#editor_tabs").tabs("option","active",0),e("sp_glv_content"),b("#gallery-tabs").tabs("option","active",2),b("#cg-buttons .a-Gallery.a-IconList").iconList("focus"),!0}},{name:"pd-goto-messages",label:f.msg("ACTION.GOTO_MSGS"),shortcut:"Ctrl+F1",action:function(){return b("#editor_tabs").tabs("option","active",1),b("#messages-container").find(".a-AlertMessages-message").first().each(function(){this.focus()}),!0}},{name:"pd-page-search",label:f.msg("ACTION.PAGE_SEARCH"),shortcut:"Ctrl+Alt+F",action:function(){return b("#editor_tabs").tabs("option","active",2),b("#P4500_LOCAL_SEARCH")[0].focus(),!0}},{name:"pd-show-shortcuts",label:f.msg("KBD_SHORTCUTS"),shortcut:"Alt+Shift+F1",action:function(){var a,e,g,h=[],i={},j=c.htmlBuilder(),k=apex.actions.listShortcuts();for(a=0;a<k.length;a++)e=k[a],g=i[e.actionName],g||(h.push(e.actionName),g={actionLabel:e.actionLabel,shortcuts:[]},i[e.actionName]=g),g.shortcuts.push(e.shortcutDisplay);for(h.sort(function(a,b){return i[a].actionLabel>i[b].actionLabel?1:i[a].actionLabel<i[b].actionLabel?-1:0}),j.markup("<div").attr("id","shortcutDlg").attr("title",f.msg("KBD_SHORTCUTS")).markup(" tabindex='0'>").markup("<ul class='a-AVPList a-AVPList--shortcuts'>"),a=0;a<h.length;a++)g=i[h[a]],j.markup("<li class='a-AVPList-item'><span class='a-AVPList-label'>").content(g.actionLabel).markup("</span><span class='a-AVPList-value'>").content(g.shortcuts.join(", ")).markup("</span></li>");return j.markup("</ul></div>"),b(j.toString()).dialog({modal:!0,closeText:d.getMessage("APEX.DIALOG.CLOSE"),minWidth:300,width:460,height:380,close:function(){b(this).dialog("destroy").remove()},open:function(){this.focus()},buttons:[{text:f.msg("OK"),click:function(){b(this).dialog("close")}}]}),!0}}]),b("#helpMenu_menu").on("menucreate",function(){var a=b("#helpMenu_menu").menu("find","keyboardShortcuts");a&&(a.hide=!1,a.action="pd-show-shortcuts")}),f.clearHelpText();var g=null;b("body").on("splitterchange splittercreate",function(){var a=apex.actions.lookup("pd-expand-restore");g||(g=setTimeout(function(){g=null,a.updateState()},100))}),apex.builder.nameBuilderWindow(),b(".a-TabsContainer").tabs({heightStyle:"fill",activate:function(a,b){b.newPanel.is(".resize")&&b.newPanel.resize()}}),b("#editor_tabs .ui-tabs-nav").on("dblclick",function(){apex.actions.toggle("pd-expand-restore")}),b("#editor_tabs [aria-controls=help]").addClass("ui-tabs-helpTab"),apex.theme.pageResizeInit(),b(window).on("beforeunload",function(){return a.hasChanged()?f.msg("BEFORE_PAGE_UNLOAD_UNSAVED_CHANGES"):void 0}),b("#pdNotificationClose").on("click",function(){f.hideNotification()}),k("readyEvent")})}(pe,apex.jQuery,apex.util,apex.lang,apex.navigation,window.pageDesigner,apex.server);
!function(a,b,c,d,e,f,g){"use strict";function h(a){return e.getMessage("PD.TREE."+a)}function i(a){var b=h(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.formatNoEscape.apply(this,c)}function j(a,b){var c=k(a,f.extend({isHeader:!0},b));return c.children=[],c.state={},b.isOpen&&(c.state={opened:!0}),b.omitIfEmpty&&(c.commands.omitIfEmpty=!0),b.showHasComponents&&(c.commands.showHasComponents=!0),c}function k(c,d){var e={type:d.type,label:d.title,classes:"",data:{},commands:{}};return d.component instanceof a.Component?(e.data={typeId:d.component.typeId,componentId:d.component.id,isPlain:d.isPlain},b.isConditional(d.component)&&!d.isPlain&&(e.classes=b.CSS.IS_CONDITIONAL),d.component.hasErrors()&&!d.isPlain&&(e.classes+=" "+b.CSS.IS_ERROR,e.commands.openAllParents=!0),d.component.hasWarnings()&&!d.isPlain&&(e.classes+=" "+b.CSS.IS_WARNING),d.title||(e.label=d.component.getDisplayTitle())):(d.hasWarnings&&(e.classes+=" "+b.CSS.IS_WARNING),d.hasErrors&&(e.classes+=" "+b.CSS.IS_ERROR,e.commands.openAllParents=!0)),d.isNotImportant&&(e.classes+=" "+kb.IS_NOT_IMPORTANT),d.hasOwnProperty("id")?e.id=d.id:d.component instanceof a.Component?(e.id=e.type+"_"+d.component.typeId+"_"+d.component.id,(0===e.type.indexOf("inline_")||0===e.type.indexOf("page_load_da_"))&&(e.id=c.id+"_"+e.id)):(e.id=d.type,d.idPostfix&&(e.id+=d.idPostfix),c&&(e.id=c.id+"_"+e.id)),d.tooltip&&(e.tooltip=d.tooltip),d.hasOwnProperty("icon")&&(e.icon=d.icon===!1?null:d.icon),d.openAllParents&&(e.commands.openAllParents=!0),c&&c.children.push(e),e}function l(a,b){var c,d;if(b=f.extend({component:{},hasWarnings:!1,hasErrors:!1,isOpen:!1,isPlain:!1,openAllParents:!1,omitIfEmpty:!1,showHasComponents:!1},b),b.isHeader=!0,b.isNotImportant=!0,c=j(a,b),b.filter)if("parent"===b.filter.setFilter)for(d=0;d<b.filter.properties.length;d++)a.data[b.filter.properties[d].id]=b.filter.properties[d].value;else if(b.filter.properties)for(d=0;d<b.filter.properties.length;d++)c.data[b.filter.properties[d].id]=b.filter.properties[d].value;if(b.data)for(var e in b.data)b.data.hasOwnProperty(e)&&(c.data[e]=b.data[e]);return c}function m(b){if(b.children){for(var c=0;c<b.children.length;)m(b.children[c])?b.children.splice(c,1):(b.children[c].commands.openAllParents&&(b.state.opened||(b.state.opened=!0),b.commands.openAllParents||(b.commands.openAllParents=!0)),(b.children[c].state&&b.children[c].state.hasComponents||b.children[c].data.hasOwnProperty("componentId")&&!a.getComponents(b.children[c].data.typeId,{id:b.children[c].data.componentId})[0].isOnGlobalPage())&&(b.state.hasComponents||(b.state.hasComponents=!0,b.commands.showHasComponents&&(b.classes+=" "+kb.IS_POPULATED))),c++);return 0===b.children.length&&delete b.state,b.commands.omitIfEmpty&&(b.children&&0===b.children.length||!b.children)}return delete b.state,!1}function n(c,d){var e,h,i,m,n,o,p=d.setFilter,q=[],r={};if(p===g&&(p=b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?"header":"parent"),d.header===!1){if(m=c,"parent"===p)for(o=0;o<d.component.filter.properties.length;o++)c.data[d.component.filter.properties[o].id]=d.component.filter.properties[o].value}else{if(e=d.header.component instanceof a.Component?d.header.component.getDisplayTitle():d.header.title?d.header.title:a.getComponentType(d.component.typeId).title.plural,p)if(i={setFilter:p,properties:[]},f.isArray(d.component))for(o=0;o<d.component.length;o++)i.properties=i.properties.concat(d.component[o].filter.properties);else d.component.filter.properties&&(i.properties=d.component.filter.properties);m=l(c,{title:e,type:d.header.type,id:d.header.id,idPostfix:d.header.idPostfix,isPlain:d.header.isPlain,hasWarnings:d.header.hasWarnings,hasErrors:d.header.hasErrors,isOpen:d.header.isOpen,openAllParents:d.header.openAllParents,omitIfEmpty:d.header.omitIfEmpty,component:d.header.component,filter:i})}if(f.isArray(d.component))for(o=0;o<d.component.length;o++)q[o]={typeId:d.component[o].typeId,filter:d.component[o].filter},r[d.component[o].typeId]=d.component[o];else q[0]={typeId:d.component.typeId,filter:d.component.filter},r[d.component.typeId]=d.component;for(h=a.getComponentsAdvanced(q),o=0;o<h.length;o++)b.isDisplayed(h[o])&&(r[h[o].typeId].addSubComponents?(n=j(m,{title:h[o].getDisplayTitle(),type:r[h[o].typeId].type,component:h[o],isHeader:!1,isPlain:r[h[o].typeId].isPlain,isOpen:r[h[o].typeId].isOpen,openAllParents:h[o].isOnGlobalPage()?!1:r[h[o].typeId].openAllParents,omitIfEmpty:r[h[o].typeId].omitIfEmpty}),r[h[o].typeId].addSubComponents(n,h[o])):k(m,{title:h[o].getDisplayTitle(),type:r[h[o].typeId].type,isPlain:r[h[o].typeId].isPlain,component:h[o],openAllParents:h[o].isOnGlobalPage()?!1:r[h[o].typeId].openAllParents}))}function o(b,c){var d;return b===a.COMP_TYPE.BRANCH?d=a.PROP.BRANCH_POINT:b===a.COMP_TYPE.PAGE_COMPUTATION?d=a.PROP.COMPUTATION_POINT:b===a.COMP_TYPE.PAGE_PROCESS&&(d=a.PROP.PROCESS_POINT),a.getLovTitle(b,d,c)}function p(c,d,e){var f={type:"branches",isOpen:!0,omitIfEmpty:e};b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)&&(f.title=o(a.COMP_TYPE.BRANCH,d.point)),n(c,{header:f,component:{type:"branch",typeId:a.COMP_TYPE.BRANCH,filter:{properties:[{id:a.PROP.BRANCH_POINT,value:d.point}]},openAllParents:!0}})}function q(b,c,d){var e,f,g,h="inline_",i=[],j={isOpen:!0,omitIfEmpty:d};c.hasOwnProperty("regionColumn")?(g=c.regionColumn.getProperty(a.PROP.COLUMN_NAME).getValue(),e=function(){var b;return this.getProperty(a.PROP.VALIDATION_REGION).getValue()!==c.region.id?!1:(b=this.getProperty(a.PROP.REGION_VAL_COLUMN),b&&b.getValue()===g||this.getProperty(a.PROP.ASSOCIATED_COLUMN).getValue()===g)}):c.hasOwnProperty("region")?(j.isOpen=!1,e=function(){return!(this.getProperty(a.PROP.VALIDATION_REGION).getValue()!==c.region.id||""!==this.getProperty(a.PROP.ASSOCIATED_COLUMN).getValue()||this.getProperty(a.PROP.REGION_VAL_COLUMN))}):c.hasOwnProperty("pageItem")?(f=c.pageItem.getProperty(a.PROP.ITEM_NAME).getValue(),e=function(){var b;return""!==this.getProperty(a.PROP.VALIDATION_REGION).getValue()?!1:(b=this.getProperty(a.PROP.VAL_ITEM),this.getProperty(a.PROP.ASSOCIATED_ITEM).getValue()===c.pageItem.id||b&&b.getValue()===f)}):(h="",j.isOpen=!0,j.openAllParents=!0),j.type=h+"validations",n(b,{header:j,setFilter:!1,component:{type:h+"validation",typeId:a.COMP_TYPE.VALIDATION,filter:{properties:i,filterFunction:e}}})}function r(c,d,e,f){var g,h=d.hasOwnProperty("pageItem")?"inline_":"",i={type:h+"computations",isOpen:!0,omitIfEmpty:e};d.hasOwnProperty("point")?(b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)&&(i.title=o(a.COMP_TYPE.PAGE_COMPUTATION,d.point)),g={id:a.PROP.COMPUTATION_POINT,value:d.point}):d.hasOwnProperty("pageItem")&&(g={id:a.PROP.COMPUTATION_ITEM_NAME,value:d.pageItem.getProperty(a.PROP.ITEM_NAME).getValue()}),n(c,{header:i,component:{type:h+"computation",typeId:a.COMP_TYPE.PAGE_COMPUTATION,filter:{properties:[g]},openAllParents:f}})}function s(c,d,e,g){function h(b,c){var d=c.getProperty(a.PROP.PAGE_PROCESS_TYPE).getValue();-1!==f.inArray(d,["NATIVE_WEB_SERVICE","NATIVE_WEB_SERVICE_LEGACY"])&&(n(b,{header:{type:"ws_params",isOpen:!0,omitIfEmpty:!0},setFilter:!1,component:{type:"ws_param",typeId:a.COMP_TYPE.PAGE_PROC_WS_P_I,filter:{parentId:c.id}}}),"ITEMS"===c.getProperty(a.getPluginProperty(a.COMP_TYPE.PAGE_PROCESS,d,2).id).getValue()&&n(b,{header:{type:"ws_params",isOpen:!0,omitIfEmpty:!0},setFilter:!1,component:{type:"ws_param",typeId:a.COMP_TYPE.PAGE_PROC_WS_P_O,filter:{parentId:c.id}}}),n(b,{header:{type:"ws_params",isOpen:!0,omitIfEmpty:!0},setFilter:!1,component:{type:"ws_param",typeId:a.COMP_TYPE.PAGE_PROC_WS_P_A,filter:{parentId:c.id}}}))}var i,j,k=d.hasOwnProperty("region")?"inline_":"";j="ON_DEMAND"!==d.point||b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?{type:k+"processes",isOpen:!0,omitIfEmpty:e}:!1,d.hasOwnProperty("point")?(b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)&&(j.title=o(a.COMP_TYPE.PAGE_PROCESS,d.point)),i={id:a.PROP.PROCESS_POINT,value:d.point}):d.hasOwnProperty("region")&&(i={id:a.PROP.PROCESS_REGION,value:d.region.id},j.isOpen=!1),n(c,{header:j,component:{type:k+"process",typeId:a.COMP_TYPE.PAGE_PROCESS,filter:{properties:[i]},addSubComponents:h,openAllParents:g}})}function t(b,d){function e(b,c,d,e){n(b,{header:{title:e,type:"da_actions_"+d,isOpen:!0,omitIfEmpty:!1},setFilter:"header",component:{type:"da_action",typeId:a.COMP_TYPE.DA_ACTION,filter:{parentId:c.id,properties:[{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:d.toUpperCase()}]}}})}function f(a,b){e(a,b,"true",h("TRUE")),e(a,b,"false",h("FALSE"))}var g,i=!1,j=[],k={title:h("DYNAMIC_ACTIONS"),isOpen:!0,omitIfEmpty:!0};g="inline_",d.hasOwnProperty("regionColumn")?j.push({id:a.PROP.WHEN_REGION,value:d.region.id}):d.hasOwnProperty("region")?(j.push({id:a.PROP.WHEN_REGION,value:d.region.id}),k.isOpen=!1):d.hasOwnProperty("pageItem")?j.push({id:a.PROP.WHEN_ITEMS,value:new RegExp("(^|,|\\s)"+c.escapeRegExp(d.pageItem.getProperty(a.PROP.ITEM_NAME).getValue())+"($|,|\\s)")}):d.hasOwnProperty("button")?j.push({id:a.PROP.WHEN_BUTTON,value:d.button.id}):d.hasOwnProperty("event")&&(j.push({id:a.PROP.EVENT,value:d.event}),g="",i="header",k.title=""===d.event?h("UNDEFINED_EVENT"):a.getLovTitle(a.COMP_TYPE.DA_EVENT,a.PROP.EVENT,d.event),k.idPostfix="_"+d.event,k.omitIfEmpty=!1),k.type=g+"da_events",n(b,{header:k,setFilter:i,component:{type:g+"da_event",typeId:a.COMP_TYPE.DA_EVENT,filter:{properties:j},addSubComponents:f}})}function u(c,d){function e(c,d){var e={NATIVE_IR:v,NATIVE_SQL_REPORT:w,NATIVE_FNC_REPORT:w,NATIVE_TABFORM:x,NATIVE_FLASH_MAP:y,NATIVE_FLASH_CHART5:z,NATIVE_CALENDAR:A},f=d.getProperty(a.PROP.REGION_TYPE).getValue();d.isOnGlobalPage()||(e.hasOwnProperty(f)?e[f](c,d):B(c,d)),b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?u(c,{region:d}):(C(c,d),D(c,d),q(c,{region:d},!0),t(c,{region:d}),u(c,{region:d}))}var f,g={},i={isOpen:!1,omitIfEmpty:!0};d.hasOwnProperty("region")?(f=a.getRegionTemplate(d.region.id).displayPointsMap.SUB_REGIONS,i.title=f?f.name:h("SUB_REGIONS"),i.type="sub_regions",g.properties=[{id:a.PROP.PARENT_REGION,value:d.region.id}]):d.hasOwnProperty("point")?(i.title=d.point.name,i.type="regions",i.id="rdp_"+d.point.id,i.omitIfEmpty=!d.point.isQuickPick,g.properties=[],g.properties.push({id:a.PROP.PARENT_REGION,value:""}),g.properties.push({id:a.PROP.REGION_POSITION,value:d.point.id})):d.hasOwnProperty("validPointsMap")&&(i.title=h("INVALID_POSITION"),i.type="regions",i.id="invalid_region_dp",i.hasWarnings=!0,g.filterFunction=function(){var b=this.getProperty(a.PROP.REGION_POSITION);return b?!d.validPointsMap.hasOwnProperty(b.getValue()):!1}),n(c,{header:i,setFilter:"header",component:{type:"region",typeId:a.COMP_TYPE.REGION,filter:g,addSubComponents:e,isOpen:!0,openAllParents:!0,omitIfEmpty:!1}})}function v(b,c){var d,e,g,i=a.getComponents(a.COMP_TYPE.IR_ATTRIBUTES,{parentId:c.id})[0];n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"ir_report_column",typeId:a.COMP_TYPE.IR_COLUMN,filter:{parentId:i.id}}}),d=j(b,{type:"ir_attributes",title:a.getComponentType(i.typeId).title.singular,component:i,isHeader:!1,isOpen:!1,omitIfEmpty:!1}),n(d,{header:{type:"ir_column_groups",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"ir_column_group",typeId:a.COMP_TYPE.IR_COLUMN_GROUP,filter:{parentId:i.id}}}),n(d,{header:{type:"ir_saved_reports",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"ir_saved_report",typeId:a.COMP_TYPE.IR_SAVED_REPORT,filter:{parentId:i.id}}}),e=i.getProperty(a.PROP.SHOW_DOWNLOAD),e&&"Y"===e.getValue()&&(g=i.getProperty(a.PROP.DOWNLOAD_FORMATS).getValue().split(":"),(-1!==f.inArray("XLS",g)||-1!==f.inArray("PDF",g)||-1!==f.inArray("RTF",g))&&j(d,{type:"ir_print",title:a.getComponentType(a.COMP_TYPE.IR_PRINT_ATTR).title.singular,component:a.getComponents(a.COMP_TYPE.IR_PRINT_ATTR,{parentId:i.id})[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1}))}function w(b,c){var d,e;n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"classic_report_column",typeId:a.COMP_TYPE.CLASSIC_RPT_COLUMN,isOpen:!1,filter:{parentId:c.id}}}),d=a.getComponents(a.COMP_TYPE.CLASSIC_REPORT,{parentId:c.id})[0],e=j(b,{type:"classic_report_attributes",title:a.getComponentType(d.typeId).title.singular,component:d,isHeader:!1,isOpen:!1,omitIfEmpty:!1}),"Y"===d.getProperty(a.PROP.ENABLE_PRINTING).getValue()&&j(e,{type:"classic_report_print",title:a.getComponentType(a.COMP_TYPE.CLASSIC_RPT_PRINT).title.singular,component:a.getComponents(a.COMP_TYPE.CLASSIC_RPT_PRINT,{parentId:d.id})[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function x(b,c){function d(a,b){q(a,{region:c,regionColumn:b},!0)}var e,f;n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"tabform_column",typeId:a.COMP_TYPE.TAB_FORM_COLUMN,isOpen:!1,filter:{parentId:c.id},addSubComponents:d}}),e=a.getComponents(a.COMP_TYPE.TABULAR_FORM,{parentId:c.id})[0],f=j(b,{type:"tabform_attributes",title:a.getComponentType(e.typeId).title.singular,component:e,isHeader:!1,isOpen:!1,omitIfEmpty:!1}),"Y"===e.getProperty(a.PROP.ENABLE_PRINTING).getValue()&&j(f,{type:"tabform_print",title:a.getComponentType(a.COMP_TYPE.TAB_FORM_PRINT).title.singular,component:a.getComponents(a.COMP_TYPE.TAB_FORM_PRINT,{parentId:e.id})[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function y(b,c){var d,e=a.getComponents(a.COMP_TYPE.MAP_CHART,{parentId:c.id})[0];d=j(b,{type:"map_chart",title:a.getComponentType(e.typeId).title.singular,component:e,isHeader:!1,isOpen:!0,omitIfEmpty:!1}),n(d,{header:{type:"map_chart_series",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"map_chart_serie",typeId:a.COMP_TYPE.MAP_CHART_SERIES,filter:{parentId:e.id}}})}function z(b,c){var d,e=a.getComponents(a.COMP_TYPE.CHART,{parentId:c.id})[0];d=j(b,{type:"chart_attributes",title:a.getComponentType(e.typeId).title.singular,component:e,isHeader:!1,isOpen:!0,omitIfEmpty:!1}),n(d,{header:{type:"chart_series",isOpen:!0,omitIfEmpty:!1},setFilter:!1,component:{type:"chart_serie",typeId:a.COMP_TYPE.CHART_SERIES,filter:{parentId:e.id}}})}function A(b,c){var d=a.getComponents(a.COMP_TYPE.CLASSIC_CALENDAR,{parentId:c.id})[0];j(b,{type:"classic_calendar",title:a.getComponentType(d.typeId).title.singular,component:d,isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function B(b,c){var d,e,g=a.getComponentType(a.COMP_TYPE.REGION_PLUGIN_ATTR).pluginType.plugins;e=c.getProperty(a.PROP.REGION_TYPE).getValue(),d=a.getComponents(a.COMP_TYPE.REGION_PLUGIN_ATTR,{parentId:c.id}),-1!==f.inArray("COLUMNS",g[e].stdAttributes)&&n(b,{header:{title:h("REPORT_COLUMNS"),type:"region_columns",isOpen:!1,omitIfEmpty:!1},setFilter:!1,component:{type:"region_column",typeId:a.COMP_TYPE.REGION_COLUMN,filter:{parentId:c.id}}}),d.length>0&&j(b,{type:"region_plugin_attributes",title:a.getComponentType(a.COMP_TYPE.REGION_PLUGIN_ATTR).title.singular,component:d[0],isHeader:!1,isOpen:!1,omitIfEmpty:!1})}function C(c,d){function e(a,b){q(a,{pageItem:b},!0),t(a,{pageItem:b}),r(a,{pageItem:b},!0)}function f(a,b){t(a,{button:b})}var g={type:"page_items",isOpen:!1,omitIfEmpty:!0};b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?d instanceof a.Component?g.component=d:(g.title=h("NO_REGION"),g.type="no_region",g.hasWarnings=!0):g.title=h("ITEMS"),n(c,{header:g,setFilter:"header",component:[{type:"page_item",typeId:a.COMP_TYPE.PAGE_ITEM,isOpen:!1,openAllParents:!0,filter:{properties:[{id:a.PROP.REGION,value:d instanceof a.Component?d.id:""}]},addSubComponents:e},{type:"form_button",typeId:a.COMP_TYPE.BUTTON,isOpen:!1,openAllParents:!0,filter:{properties:[{id:a.PROP.REGION,value:d instanceof a.Component?d.id:""},{id:a.PROP.BUTTON_POSITION,value:"BODY"}]},addSubComponents:f}]})}function D(c,d){function e(a,b){t(a,{button:b})}var f={type:"region_buttons",isOpen:!1,omitIfEmpty:!0},g=d instanceof a.Component?d.id:"";b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?d instanceof a.Component?f.component=d:(f.title=h("NO_REGION"),f.type="no_region",f.hasWarnings=!0):f.title=h("REGION_BUTTONS"),n(c,{header:f,component:{type:"region_button",typeId:a.COMP_TYPE.BUTTON,isOpen:!1,openAllParents:!0,filter:{filterFunction:function(){var b=this.getProperty(a.PROP.REGION).getValue();return(b===g||""===b&&"no_region"===f.type)&&"BODY"!==this.getProperty(a.PROP.BUTTON_POSITION).getValue()}},addSubComponents:e}})}function E(){var c,d;return d=a.getComponents(a.COMP_TYPE.PAGE),c=j(g,{component:d[0],type:"page",title:i("PAGE_TITLE",d[0].id,d[0].getDisplayTitle()),isHeader:!1,isOpen:!0}),c.data[a.PROP.COMPUTATION_POINT]="BEFORE_BOX_BODY",c.data[a.PROP.PROCESS_POINT]="AFTER_HEADER",c.data[a.PROP.BRANCH_POINT]="BEFORE_HEADER",c.data[a.PROP.REGION_POSITION]="BODY",c.data[a.PROP.BUTTON_POSITION]="BELOW_BOX","Y"===b.getPreference("GROUP_BY_COMPONENT_TYPE")?G(c):F(c),m(c),c}function F(b){var c,d,e,g,i=a.isGlobalPage();g=a.getPageTemplate(),c=l(b,{title:h("PRE_RENDERING"),type:"pre_rendering",showHasComponents:!0,omitIfEmpty:!0}),i||(e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"ON_NEW_INSTANCE"),type:"on_new_instance",isOpen:!0,omitIfEmpty:!0}),r(e,{point:"ON_NEW_INSTANCE"},!0),s(e,{point:"ON_NEW_INSTANCE"},!0),e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"BEFORE_HEADER"),type:"before_header",isOpen:!0}),p(e,{point:"BEFORE_HEADER"},!0),r(e,{point:"BEFORE_HEADER"},!0),s(e,{point:"BEFORE_HEADER"},!0)),e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_HEADER"),type:"after_header",isOpen:!0,omitIfEmpty:i}),i||(r(e,{point:"AFTER_HEADER"},!0),s(e,{point:"AFTER_HEADER"},!0)),u(e,{point:{id:"AFTER_HEADER"}}),i||(e=l(c,{title:o(a.COMP_TYPE.PAGE_PROCESS,"BEFORE_BOX_BODY"),type:"before_regions",isOpen:!0}),r(e,{point:"BEFORE_BOX_BODY"},!0),s(e,{point:"BEFORE_BOX_BODY"},!0)),e=l(b,{title:a.getComponentType(a.COMP_TYPE.REGION).title.plural,type:"main_regions",icon:"icon-tree-region",isOpen:!0});for(var j=0;j<g.displayPoints.length;j++)-1===f.inArray(g.displayPoints[j].id,["AFTER_HEADER","BEFORE_FOOTER"])&&u(e,{point:g.displayPoints[j]});u(e,{validPointsMap:g.displayPointsMap}),e=l(b,{title:h("NO_REGION"),type:"no_region",hasWarnings:!0,isOpen:!0,omitIfEmpty:!0}),C(e,null),D(e,null),d=l(b,{title:h("POST_RENDERING"),type:"post_rendering",showHasComponents:!0}),i||(e=l(d,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_BOX_BODY"),type:"after_regions",isOpen:!0}),r(e,{point:"AFTER_BOX_BODY"},!0),s(e,{point:"AFTER_BOX_BODY"},!0)),e=l(d,{title:o(a.COMP_TYPE.PAGE_PROCESS,"BEFORE_FOOTER"),type:"before_footer",isOpen:!0}),i||(r(e,{point:"BEFORE_FOOTER"},!0),s(e,{point:"BEFORE_FOOTER"},!0)),u(e,{point:{id:"BEFORE_FOOTER",name:a.getComponentType(a.COMP_TYPE.REGION).title.plural}}),i||(e=l(d,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_FOOTER"),type:"after_footer",isOpen:!0}),r(e,{point:"AFTER_FOOTER"},!0),s(e,{point:"AFTER_FOOTER"},!0))}function G(b){var c,d,e,f,g,h=a.isGlobalPage();for(d=a.getPageTemplate(),c=l(b,{title:a.getComponentType(a.COMP_TYPE.REGION).title.plural,type:"main_regions",isOpen:!0}),u(c,{validPointsMap:d.displayPointsMap}),g=0;g<d.displayPoints.length;g++)u(c,{point:d.displayPoints[g]});for(f=a.getComponents(a.COMP_TYPE.REGION,{}),c=l(b,{title:a.getComponentType(a.COMP_TYPE.BUTTON).title.plural,type:"main_buttons",isOpen:!0}),D(c,null),g=0;g<f.length;g++)D(c,f[g]);for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_ITEM).title.plural,type:"main_page_items",isOpen:!0}),C(c,null),g=0;g<f.length;g++)C(c,f[g]);if(!h){for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_COMPUTATION).title.plural,type:"main_computations",isOpen:!0}),e=["ON_NEW_INSTANCE","BEFORE_HEADER","AFTER_HEADER","BEFORE_BOX_BODY","AFTER_BOX_BODY","BEFORE_FOOTER","AFTER_FOOTER"],g=0;g<e.length;g++)r(c,{point:e[g]},!0,!0);for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_PROCESS).title.plural,type:"main_processes",isOpen:!0}),e=["ON_NEW_INSTANCE","BEFORE_HEADER","AFTER_HEADER","BEFORE_BOX_BODY","AFTER_BOX_BODY","BEFORE_FOOTER","AFTER_FOOTER"],g=0;g<e.length;g++)s(c,{point:e[g]},!0,!0);c=l(b,{title:a.getComponentType(a.COMP_TYPE.BRANCH).title.plural,type:"main_branches",isOpen:!0}),p(c,{point:"BEFORE_HEADER"},!0)}}function H(){function b(b,c,d,e){var f=[{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:d.toUpperCase()}];"ready"!==c.getProperty(a.PROP.EVENT).getValue()&&f.push({id:a.PROP.FIRE_ON_PAGE_LOAD,value:"Y"}),n(b,{header:{title:e,type:"page_load_da_actions_"+d,isOpen:!0,omitIfEmpty:!0},setFilter:"header",component:{type:"page_load_da_action",typeId:a.COMP_TYPE.DA_ACTION,isPlain:!0,filter:{parentId:c.id,properties:f}}})}var c,d,e={id:"da",children:[],state:{},commands:{omitIfEmpty:!1}},f={ready:!0,change:!0,click:!0,apexafterclosedialog:!0};n(e,{header:{title:h("FIRED_ON_PAGE_LOAD"),type:"page_load_da_events",isOpen:!1,omitIfEmpty:!0},setFilter:!1,component:{type:"page_load_da_event",typeId:a.COMP_TYPE.DA_EVENT,isPlain:!0,filter:{filterFunction:function(){var b=!0;return"ready"!==this.getProperty(a.PROP.EVENT).getValue()&&(b=this.getChilds(a.COMP_TYPE.DA_ACTION,{properties:[{id:a.PROP.FIRE_ON_PAGE_LOAD,value:"Y"}]},!1).length>0),b}},addSubComponents:function(a,c){b(a,c,"true",h("TRUE")),b(a,c,"false",h("FALSE"))}}}),c=l(e,{title:h("EVENTS"),type:"da_events",isOpen:!0,filter:{properties:[{id:a.PROP.EVENT,value:""}]}}),d=a.getComponents(a.COMP_TYPE.DA_EVENT,{});for(var g=0;g<d.length;g++)f[d[g].getProperty(a.PROP.EVENT).getValue()]=!0;for(var i in f)f.hasOwnProperty(i)&&t(c,{event:i});return m(e),e}function I(){var a={id:"rd",children:[],state:{},commands:{omitIfEmpty:!1}};return"Y"===b.getPreference("GROUP_BY_COMPONENT_TYPE")?K(a):J(a),m(a),a}function J(b){var c,d=a.isGlobalPage();d||(c=l(b,{title:o(a.COMP_TYPE.PAGE_COMPUTATION,"AFTER_SUBMIT"),type:"after_submit"}),s(c,{point:"ON_SUBMIT_BEFORE_COMPUTATION"},!0,!0),p(c,{point:"BEFORE_COMPUTATION"},!0),r(c,{point:"AFTER_SUBMIT"},!0,!0),c=l(b,{title:o(a.COMP_TYPE.BRANCH,"BEFORE_VALIDATION"),type:"validating"}),p(c,{point:"BEFORE_VALIDATION"},!0),q(c,{},!0),c=l(b,{title:o(a.COMP_TYPE.PAGE_PROCESS,"AFTER_SUBMIT"),type:"processing",isOpen:!0}),p(c,{point:"BEFORE_PROCESSING"},!0),s(c,{point:"AFTER_SUBMIT"},!0,!0),c=l(b,{title:o(a.COMP_TYPE.BRANCH,"AFTER_PROCESSING"),type:"after_processing",isOpen:!0}),p(c,{point:"AFTER_PROCESSING"},!0),c=l(b,{title:o(a.COMP_TYPE.PAGE_PROCESS,"ON_DEMAND"),id:"ajax_callbacks",type:"processes",isOpen:!0}),s(c,{point:"ON_DEMAND"},!1,!0))}function K(b){var c,d,e,f=a.isGlobalPage();if(!f){for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_COMPUTATION).title.plural,type:"main_computations",isOpen:!0,filter:{properties:[{id:a.PROP.COMPUTATION_POINT,value:"AFTER_SUBMIT"}]}}),r(c,{point:"AFTER_SUBMIT"},!0,!0),q(b,{},!1),c=l(b,{title:a.getComponentType(a.COMP_TYPE.PAGE_PROCESS).title.plural,type:"main_processes",isOpen:!0,filter:{properties:[{id:a.PROP.PROCESS_POINT,value:"AFTER_SUBMIT"}]}}),d=["ON_SUBMIT_BEFORE_COMPUTATION","AFTER_SUBMIT","ON_DEMAND"],e=0;e<d.length;e++)s(c,{point:d[e]},!0,!0);for(c=l(b,{title:a.getComponentType(a.COMP_TYPE.BRANCH).title.plural,type:"main_branches",isOpen:!0,filter:{properties:[{id:a.PROP.BRANCH_POINT,value:"AFTER_PROCESSING"}]}}),d=["BEFORE_COMPUTATION","BEFORE_VALIDATION","BEFORE_PROCESSING","AFTER_PROCESSING"],e=0;e<d.length;e++)p(c,{point:d[e]},!0)}}function L(){function b(b,c,d){var e,g,h,j,k,m,o,p=a.getComponentType(c.typeId);o=l(b,{title:c.title||(c.titleTypeId?a.getComponentType(c.titleTypeId).title.singular:p.title.plural),type:c.type+"s",isOpen:!1,omitIfEmpty:d,data:{typeId:c.typeId}}),e=M(c.typeId),m={};for(var q=0;q<e.length;q++){g=a.getComponents(e[q].typeId,{});for(var r=0;r<g.length;r++)k=!1,e[q].typeId===a.COMP_TYPE.PAGE&&-1!==f.inArray(e[q].propertyId,[a.PROP.PAGE_TEMPLATE,a.PROP.DIALOG_TEMPLATE,a.PROP.NAVIGATION_LIST,a.PROP.TAB_SET])?!g[r].getProperty(e[q].propertyId)||e[q].propertyId!==a.PROP.PAGE_TEMPLATE&&e[q].propertyId!==a.PROP.DIALOG_TEMPLATE||(k=!0,j=a.getPageTemplate().id):(h=g[r].getProperty(e[q].propertyId),h&&(j=h.getValue(),""!==j&&(c.typeId!==a.COMP_TYPE.BUILD_OPTION&&c.typeId!==a.COMP_TYPE.AUTHORIZATION||!/^[-!]/.test(j)||(j=j.substr(1)),k=!0))),k&&""!==j&&(m.hasOwnProperty(j)||(m[j]={}),m[j].hasOwnProperty(e[q].typeId)||(m[j][e[q].typeId]=[]),m[j][e[q].typeId].push(g[r]))}for(var s in m)m.hasOwnProperty(s)&&n(o,{header:!1,component:{type:c.type,typeId:c.typeId,isOpen:!1,filter:{id:s,properties:[]},addSubComponents:function(b){var c,d;for(var e in m[s])if(m[s].hasOwnProperty(e)){c=a.getComponentType(e),d=l(b,{title:i("REFERENCED_BY",1===m[s][c.id].length?c.title.singular:c.title.plural),type:"references",isOpen:!0,omitIfEmpty:!1});for(var f=0;f<m[s][c.id].length;f++)n(d,{header:!1,component:{type:"referenced_by",typeId:c.id,isPlain:!0,filter:{id:m[s][c.id][f].id,properties:[]}}})}}}});return o}function c(d,e,g){for(var h,i,j=0;j<e.length;j++)-1!==f.inArray(e[j].type,["navigation_list","nav_list_template","tab_set"])?("navigation_list"===e[j].type?i=a.getNavListId():"nav_list_template"===e[j].type?i=a.getNavListTemplateId():"tab_set"===e[j].type&&(i=a.getTabSetId()),i&&n(d,{header:{title:e[j].title,type:e[j].type+"s",isOpen:!1,omitIfEmpty:!0,data:{typeId:e[j].typeId}},component:{type:e[j].type,typeId:e[j].typeId,isOpen:!1,filter:{id:i,properties:[]}}})):h=e[j].hasOwnProperty("typeId")?b(d,e[j],g):l(d,{title:e[j].title,type:e[j].type+"s",isOpen:!0,omitIfEmpty:g}),e[j].children&&c(h,e[j].children,!0)}var d={id:"sd",children:[],state:{},commands:{omitIfEmpty:!1}};return c(d,ob,!1),m(d),d}function M(b){for(var c,d,e=a.getComponentType(b),f=[],g=0;g<e.refByProperties.length;g++){c=a.getProperty(e.refByProperties[g]);for(var h=0;h<c.refByComponentTypes.length;h++)d=a.getComponentType(c.refByComponentTypes[h]),(d.isPageComponent||d.id===a.COMP_TYPE.PAGE)&&f.push({typeId:d.id,propertyId:c.id})}return f}function N(b){function c(a){var c;a.hasOwnProperty("value")?d.push({id:a.id,value:a.value}):a.typeId?(c=_(a.typeId,b._parent),d.push({id:a.id,value:c?c.id:""})):a.id&&d.push({id:a.id,value:ab(a.id,b._parent)+""})}var d=[];switch(b.type){case"region":"regions"===b._parent.type?(c({id:a.PROP.PARENT_REGION,value:""}),c({id:a.PROP.REGION_POSITION})):c({id:a.PROP.PARENT_REGION,typeId:a.COMP_TYPE.REGION});break;case"page_item":c({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION});break;case"form_button":c({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION}),c({id:a.PROP.BUTTON_POSITION});break;case"region_button":c({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION}),c({id:a.PROP.BUTTON_POSITION});break;case"da_action":c({id:a.PROP.DA_EVENT,typeId:a.COMP_TYPE.DA_EVENT}),c({id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS});break;case"computation":c({id:a.PROP.COMPUTATION_POINT});break;case"process":c({id:a.PROP.PROCESS_POINT});break;case"branch":c({id:a.PROP.BRANCH_POINT})}return d}function O(b){var c,d,e,f=[];if(b.items.length>0){d=a.transaction.message({action:a.MESSAGE_ACTION.MOVE,component:$(b.items[0].toNode),count:b.items.length}),e=a.transaction.start("",d);for(var g=0;g<b.items.length;g++)f[g]=$(b.items[g].toNode),0===b.items[g].toIndex?c=null:(c=$(b.parentNode.children[b.items[g].toIndex-1]),c||(c="last")),f[g].move(c,N(b.items[g].toNode));apex.commandHistory.execute(e)}}function P(b,c){var d,e,f,g,h=[];if(b.items.length>0){f=a.transaction.message({action:a.MESSAGE_ACTION.DUPLICATE,component:$(b.items[0].toNode),count:b.items.length}),g=a.transaction.start("",f);for(var i=0;i<b.items.length;i++)d=$(b.items[i].toNode),0===b.items[i].toIndex?e=null:(e=$(b.parentNode.children[b.items[i].toIndex-1]),e||(e="last")),h[i]=d.duplicate(),h[i].move(e,N(b.items[i].toNode));apex.commandHistory.execute(g),T(h,c,b.items[0].toNode._parent.id,!0)}}function Q(b){var c,d,e;if(b.items.length>0){d=a.transaction.message({action:a.MESSAGE_ACTION.DELETE,component:$(b.items[0].node),count:b.items.length}),e=a.transaction.start("",d);for(var f=0;f<b.items.length;f++)c=$(b.items[f].node),c&&c.remove()}apex.commandHistory.execute(e)}function R(b,c){var d,e,f=[];if(b.length>0){d=a.transaction.message({action:a.MESSAGE_ACTION.DUPLICATE,component:$(b[0]),count:b.length}),e=a.transaction.start("",d);for(var g=0;g<b.length;g++)f.push($(b[g]).duplicate());apex.commandHistory.execute(e),T(f,c,b[0]._parent.id,!0)}}function S(b){var c,d;if(b.length>0){c=a.transaction.message({action:a.MESSAGE_ACTION.DELETE,component:$(b[0]),count:b.length}),d=a.transaction.start("",c);for(var e=0;e<b.length;e++)$(b[e]).remove();apex.commandHistory.execute(d)}}function T(a,b,c,d){var e,g,h=[],i=f(),j=c;if(c||"PDdynamicActionTree"!==b[0].id||(j="da_da_events"),d){for(g=0;g<a.length;g++)i=i.add(Y(a[g],b,j));b.treeView("setSelection",i)}else{for(g=0;g<a.length;g++)e=Z(a[g],b,j),e&&h.push(e);b.treeView("setSelectedNodes",h)}}function U(b,c){var d,e,f,g,h,i,j,k={NATIVE_SHOW:"NATIVE_HIDE",NATIVE_HIDE:"NATIVE_SHOW",NATIVE_ENABLE:"NATIVE_DISABLE",NATIVE_DISABLE:"NATIVE_ENABLE",NATIVE_ADD_CLASS:"NATIVE_REMOVE_CLASS",NATIVE_REMOVE_CLASS:"NATIVE_ADD_CLASS"},l=[],m=[];i=a.transaction.message({action:a.MESSAGE_ACTION.CREATE,component:$(b[0]),count:b.length}),j=a.transaction.start("",i);for(var n=0;n<b.length;n++){if(d=$(b[n]),e=d.getProperty(a.PROP.DA_ACTION_TYPE).getValue(),k.hasOwnProperty(e)){for(l.push({id:a.PROP.DA_ACTION_TYPE,value:k[e]}),f=1,g=a.getPluginProperty(a.COMP_TYPE.DA_ACTION,e,f);g&&nb>=f;)l.push({id:a.getPluginProperty(a.COMP_TYPE.DA_ACTION,k[e],f).id,value:d.getProperty(g.id).getValue()}),f++,g=a.getPluginProperty(a.COMP_TYPE.DA_ACTION,e,f);l.push({id:a.PROP.FIRE_ON_PAGE_LOAD,value:d.getProperty(a.PROP.FIRE_ON_PAGE_LOAD).getValue()})}h="TRUE"===d.getProperty(a.PROP.FIRE_WHEN_EVENT_RESULT_IS).getValue()?"FALSE":"TRUE",l.push({id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:h}),m.push(d.duplicate(l)),m[m.length-1].move("last")}apex.commandHistory.execute(j),T(m,c,b[0]._parent._parent.id,!0)}function V(b,c,d,e){function h(a){var c;a.hasOwnProperty("value")?s.push({id:a.id,value:a.value}):a.typeId?(c=_(a.typeId,b),s.push({id:a.id,value:c?c.id:""})):a.id&&s.push({id:a.id,value:ab(a.id,b)+""})}var i,j,k,l,m,n,o,p,q,r=$(b),s=[];if(d===a.COMP_TYPE.REGION)h("SUB_REGION"===e?{id:a.PROP.PARENT_REGION,typeId:a.COMP_TYPE.REGION}:r&&""!==r.getProperty(a.PROP.PARENT_REGION).getValue()?{id:a.PROP.PARENT_REGION}:{id:a.PROP.REGION_POSITION});else if(d===a.COMP_TYPE.PAGE_ITEM)h({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION});else if(d===a.COMP_TYPE.BUTTON)h({id:a.PROP.REGION,typeId:a.COMP_TYPE.REGION}),h({id:a.PROP.BUTTON_POSITION});else if(d===a.COMP_TYPE.PAGE_COMPUTATION)j=_(a.COMP_TYPE.PAGE_ITEM,b),j?(h({id:a.PROP.COMPUTATION_ITEM_NAME,value:j.getProperty(a.PROP.ITEM_NAME).getValue()}),h({id:a.PROP.COMPUTATION_POINT,value:"BEFORE_BOX_BODY"})):h({id:a.PROP.COMPUTATION_POINT});else if(d===a.COMP_TYPE.PAGE_PROCESS)h({id:a.PROP.PROCESS_POINT});else if(d===a.COMP_TYPE.VALIDATION){if(j=_([a.COMP_TYPE.PAGE_ITEM,a.COMP_TYPE.REGION,a.COMP_TYPE.TAB_FORM_COLUMN],b))switch(j.typeId){case a.COMP_TYPE.PAGE_ITEM:h({id:a.PROP.ASSOCIATED_ITEM,value:j.id});break;case a.COMP_TYPE.REGION:h({id:a.PROP.VALIDATION_REGION,value:j.id});break;case a.COMP_TYPE.TAB_FORM_COLUMN:k=j.getProperty(a.PROP.COLUMN_NAME).getValue(),h({id:a.PROP.VALIDATION_REGION,value:j.parentId}),h({id:a.PROP.ASSOCIATED_COLUMN,value:k}),h({id:a.PROP.REGION_VALIDATION_TYPE,value:"ITEM_NOT_NULL"}),h({id:a.PROP.REGION_VAL_COLUMN,value:k}),h({id:a.PROP.ERROR_MESSAGE,value:"#COLUMN_HEADER# must have a value."})}}else if(d===a.COMP_TYPE.BRANCH)h({id:a.PROP.BRANCH_POINT});else if(d===a.COMP_TYPE.DA_EVENT)if(j=_([a.COMP_TYPE.PAGE_ITEM,a.COMP_TYPE.BUTTON,a.COMP_TYPE.REGION,a.COMP_TYPE.PAGE],b))switch(j.typeId){case a.COMP_TYPE.PAGE_ITEM:h({id:a.PROP.EVENT,value:"change"}),h({id:a.PROP.WHEN_TYPE,value:"ITEM"}),h({id:a.PROP.WHEN_ITEMS,value:j.getProperty(a.PROP.ITEM_NAME).getValue()});break;case a.COMP_TYPE.BUTTON:h(-1!==f.inArray(j.getProperty(a.PROP.BUTTON_ACTION).getValue(),["REDIRECT_PAGE","REDIRECT_APP"])?{id:a.PROP.EVENT,value:"apexafterclosedialog"}:{id:a.PROP.EVENT,value:"click"}),h({id:a.PROP.WHEN_TYPE,value:"BUTTON"}),h({id:a.PROP.WHEN_BUTTON,value:j.id});break;case a.COMP_TYPE.REGION:h({id:a.PROP.EVENT,value:"apexafterrefresh"}),h({id:a.PROP.WHEN_TYPE,value:"REGION"}),h({id:a.PROP.WHEN_REGION,value:j.id});break;
case a.COMP_TYPE.PAGE:h({id:a.PROP.EVENT,value:"ready"})}else h({id:a.PROP.EVENT});else d===a.COMP_TYPE.DA_ACTION?(h({id:a.PROP.DA_EVENT,typeId:a.COMP_TYPE.DA_EVENT}),h(e!==g?{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS,value:e}:{id:a.PROP.FIRE_WHEN_EVENT_RESULT_IS})):d===a.COMP_TYPE.TAB_FORM_COLUMN||d===a.COMP_TYPE.CLASSIC_RPT_COLUMN?(j=_(a.COMP_TYPE.REGION,b),i=j.id,l=j.getChilds(d),h({id:a.PROP.QUERY_COLUMN_ID,value:l.length+1}),h({id:a.PROP.DERIVED_COLUMN,value:"Y"}),h({id:a.PROP.DISABLE_SORT_COLUMN,value:"Y"}),"ROW_SELECTOR"===e?(h({id:a.PROP.COLUMN_NAME,value:lb}),h({id:a.PROP.TAB_FORM_COLUMN_TYPE,value:"ROW_SELECTOR"}),h({id:a.PROP.COLUMN_HEADING,value:"&nbsp;"})):"VIRTUAL"===e&&(l=j.getChilds(d,{properties:[{id:a.PROP.DERIVED_COLUMN,value:"Y"}]},function(b,c){return b.getProperty(a.PROP.COLUMN_NAME).getValue()>c.getProperty(a.PROP.COLUMN_NAME).getValue()?1:-1}),h({id:a.PROP.COLUMN_NAME,value:"DERIVED$"+(l.length<8?"0":"")+(l.length+1)}),h({id:d===a.COMP_TYPE.TAB_FORM_COLUMN?a.PROP.TAB_FORM_COLUMN_TYPE:a.PROP.CLASSIC_REPORT_COLUMN_TYPE,value:"LINK"}),h({id:a.PROP.COLUMN_HEADING,value:"&nbsp;"}))):d===a.COMP_TYPE.IR_COLUMN_GROUP?i=_(a.COMP_TYPE.IR_ATTRIBUTES,b).id:d===a.COMP_TYPE.CHART_SERIES?(j=_(a.COMP_TYPE.CHART,b),i=j.id,h({id:a.PROP.SERIES_CHART_TYPE,value:j.getProperty(a.PROP.CHART_TYPE).getValue()})):d===a.COMP_TYPE.MAP_CHART_SERIES&&(j=_(a.COMP_TYPE.MAP_CHART,b),i=j.id);r&&(m=b._parent.id),p=d===a.COMP_TYPE.TAB_FORM_COLUMN&&"ROW_SELECTOR"===e?g:d===a.COMP_TYPE.DA_EVENT?"last":r?r:"last",q=a.transaction.message({action:a.MESSAGE_ACTION.CREATE,component:d}),n=a.transaction.start("",q),o=new a.Component({previousComponent:p,typeId:d,parentId:i,values:s}),d===a.COMP_TYPE.DA_EVENT&&new a.Component("apexafterclosedialog"===o.getProperty(a.PROP.EVENT).getValue()?{typeId:a.COMP_TYPE.DA_ACTION,parentId:o.id,values:[{id:a.PROP.DA_ACTION_TYPE,value:"NATIVE_REFRESH"},{id:a.PROP.AFFECTED_TYPE,value:"REGION"},{id:a.PROP.AFFECTED_REGION,value:j?j.getProperty(a.PROP.REGION).getValue():""}]}:{typeId:a.COMP_TYPE.DA_ACTION,parentId:o.id,values:[{id:a.PROP.DA_ACTION_TYPE,value:"NATIVE_SHOW"},{id:a.PROP.AFFECTED_TYPE,value:"ITEM"}]}),apex.commandHistory.execute(n),T([o],c,m,!0)}function W(a,b){return b.treeView("getNodes",a)}function X(b){for(var c=b.treeView("getSelectedNodes"),d=[],e=0;e<c.length;e++)c[e].data&&c[e].data.hasOwnProperty("componentId")&&d.push(a.getComponents(c[e].data.typeId,{id:c[e].data.componentId})[0]);return d}function Y(a,b,c){var d;return c&&(d=b.treeView("find",{depth:-1,match:function(a){return a.id===c}})),b.treeView("find",{parentNodeContent$:d,depth:-1,findAll:!0,match:function(b){return b.data.typeId===a.typeId&&b.data.componentId===a.id}})}function Z(a,b,c){return b.treeView("getNodes",Y(a,b,c))[0]}function $(b,c){var d,e=[];return d=b instanceof jQuery?c.treeView("getNodes",b)[0]:b,d.data&&d.data.typeId&&d.data.componentId&&(e=a.getComponents(d.data.typeId,{id:d.data.componentId})),1===e.length?e[0]:g}function _(a,b){var c,d=f.isArray(a)?a:[a];return b&&(c=$(b),(c===g||c&&-1===f.inArray(c.typeId,d))&&(c=_(d,b._parent))),c}function ab(a,b){var c;return c=b?b.data.hasOwnProperty(a)?b.data[a]:ab(a,b._parent):""}function bb(a,b,c){Y(a,b).each(function(){var a=f(this);c.call(W(a,b)[0]),b.treeView("update",a)})}function cb(a,b,c){bb(a,c,function(){this.data&&this.data.isPlain||(this.classes+=" "+b)})}function db(a,b,c){bb(a,c,function(){this.classes=f.grep(this.classes.split(" "),function(a){return a!==b}).join(" ")})}function eb(){function b(b){return"Y"===$(b).getProperty(a.PROP.DERIVED_COLUMN).getValue()}function c(b){return $(b).getProperty(a.PROP.COLUMN_NAME).getValue()!==lb}function d(b){return-1===f.inArray(_(a.COMP_TYPE.CHART,b).getProperty(a.PROP.CHART_TYPE).getValue(),["DOUGHNUT","PIE","DIAL","CANDLESTICK","PROJECT_GANTT","RESOURCE_GANTT"])}function e(b){return a.getComponents(a.COMP_TYPE.CHART_SERIES,{parentId:$(b).parentId}).length>1}function g(b){return-1===f.inArray($(b).getParent().getProperty(a.PROP.CHART_TYPE).getValue(),["DOUGHNUT","PIE","DIAL","CANDLESTICK","PROJECT_GANTT","RESOURCE_GANTT"])}function h(b){return a.getComponents(a.COMP_TYPE.MAP_CHART_SERIES,{parentId:$(b).parentId}).length>1}return{"default":{operations:{canAdd:!1,canDuplicate:!1,canDelete:!1,canRename:!1,canDrag:!1,canSearch:!1,canExtCreate:!1,canExtEdit:!1,canExtCopy:!1}},page:{icon:"icon-tree-page"},validations:{operations:{canAdd:!0},icon:"icon-tree-folder",validChildren:["validation"]},validation:{icon:"icon-tree-validation",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canDrag:!0,canExtCopy:!0}},inline_validations:{icon:"icon-tree-folder",validChildren:["inline_validation"]},inline_validation:{icon:"icon-tree-validation",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},pre_rendering:{icon:"icon-tree-folder"},post_rendering:{icon:"icon-tree-folder"},main_computations:{icon:"icon-tree-folder",validChildren:["computations"]},computations:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["computation"]},computation:{icon:"icon-tree-computation",operations:{canDuplicate:!0,canDrag:!0,canDelete:!0,canExtCopy:!0,canSearch:!0}},inline_computations:{icon:"icon-tree-folder",validChildren:["inline_computation"]},inline_computation:{icon:"icon-tree-computation",operations:{canDuplicate:!0,canDelete:!0,canExtCopy:!0,canSearch:!0}},main_processes:{icon:"icon-tree-folder",validChildren:["processes"]},processes:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["process"]},process:{icon:"icon-tree-process",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},after_submit:{icon:"icon-tree-folder"},processing:{icon:"icon-tree-folder"},after_processing:{icon:"icon-tree-folder"},validating:{icon:"icon-tree-folder"},after_header:{icon:"icon-tree-folder"},before_header:{icon:"icon-tree-folder"},before_regions:{icon:"icon-tree-folder"},after_regions:{icon:"icon-tree-folder"},before_footer:{icon:"icon-tree-folder"},after_footer:{icon:"icon-tree-folder"},main_branches:{icon:"icon-tree-folder",validChildren:["branches"]},branches:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["branch"]},branch:{icon:"icon-tree-branch",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},main_regions:{icon:"icon-tree-folder",validChildren:["regions"]},regions:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["region"]},sub_regions:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["region"]},region:{icon:"icon-tree-region",operations:{canAdd:!0,canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0},validChildren:["page_items","region_buttons","inline_da_events","region_columns","ir_attributes","classic_report_attributes","classic_report_print","tabform_attributes","tabform_print","chart_series","map_chart_series","svg_chart_series","region","page_item","region_button"]},main_page_items:{icon:"icon-tree-folder",validChildren:["page_items"]},page_items:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["page_item","region_button","form_button"]},page_item:{icon:"icon-tree-item",operations:{canAdd:!0,canDuplicate:!0,canDrag:!0,canRename:!1,canDelete:!0,canExtCopy:!0,canSearch:!0},validChildren:["computations","inline_validations","inline_da_events","computation"]},form_button:{icon:"icon-tree-button",operations:{canDuplicate:!0,canDrag:!0,canRename:!1,canDelete:!0,canExtCopy:!0}},region_columns:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["classic_report_column","ir_report_column","tabform_column","region_column"]},classic_report_column:{icon:"icon-tree-report-column",operations:{canRename:!1,canDuplicate:!1,canDelete:b,canDrag:c,drag:{normal:"move"}}},classic_report_attributes:{icon:"icon-tree-attributes"},tabform_attributes:{icon:"icon-tree-attributes"},region_plugin_attributes:{icon:"icon-tree-attributes"},ir_attributes:{icon:"icon-tree-folder",validChildren:["ir_column_groups","ir_saved_reports"]},ir_column_groups:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["ir_column_group"]},ir_column_group:{icon:"icon-tree-col-group",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0}},ir_saved_reports:{icon:"icon-tree-folder",validChildren:["ir_saved_report"]},ir_saved_report:{icon:"icon-tree-saved-report"},ir_report_column:{icon:"icon-tree-report-column",operations:{canRename:!1,canDrag:!0}},tabform_column:{icon:"icon-tree-item",operations:{canRename:!1,canDrag:c,canDelete:b}},tabform_processes:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["tabform_process"]},tabform_process:{icon:"icon-tree-process",operations:{canDuplicate:!0,canRename:!0,canDelete:!0}},region_column:{icon:"icon-tree-report-column",operations:{canRename:!1,canDrag:!0}},chart_attributes:{icon:"icon-tree-folder",validChildren:["chart_series"]},chart_series:{icon:"icon-tree-folder",operations:{canAdd:d},validChildren:["chart_serie"]},chart_serie:{icon:"icon-tree-chart-series",operations:{canAdd:d,canDuplicate:g,canDelete:e,canRename:!0,canDrag:!0,drag:{normal:"move"}}},map_chart_attributes:{icon:"icon-tree-folder",validChildren:["map_chart_series"]},map_chart_series:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["map_chart_serie"]},map_chart_serie:{icon:"icon-tree-map-series",operations:{canDuplicate:!0,canDelete:h,canRename:!0,canDrag:!0,drag:{normal:"move"}}},main_buttons:{icon:"icon-tree-folder",validChildren:["region_buttons"]},region_buttons:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["region_button","form_button"]},region_button:{icon:"icon-tree-button",operations:{canDuplicate:!0,canDrag:!0,canRename:!0,canDelete:!0,canExtCopy:!0}},main_da_events:{icon:"icon-tree-folder",validChildren:["da_events"]},da_events:{icon:"icon-tree-folder",validChildren:["da_event"]},da_event:{icon:"icon-tree-da-event",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canExtCopy:!0},validChildren:["da_actions_true","da_actions_false"]},da_actions_true:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["da_action"]},da_actions_false:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["da_action"]},da_action:{icon:"icon-tree-da-action",operations:{canDuplicate:!0,canDrag:!0,canDelete:!0}},inline_da_events:{icon:"icon-tree-folder",validChildren:["inline_da_event"]},inline_da_event:{icon:"icon-tree-da-event",operations:{canDuplicate:!0,canRename:!0,canDelete:!0,canExtCopy:!0},validChildren:["da_actions_true","da_actions_false"]},page_load_da_events:{icon:"icon-tree-folder",operations:{canAdd:!0},validChildren:["page_load_da_event"]},page_load_da_event:{icon:"icon-tree-da-event",operations:{canDrag:!0,drag:{normal:"move"}}},tab_sets:{icon:"icon-tree-folder"},tab_set:{icon:"icon-tree-tabs",operations:{canExtEdit:!0}},lovs:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},lov:{icon:"icon-tree-lov",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},breadcrumbs:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},breadcrumb:{icon:"icon-tree-breadcrumb",operations:{canExtCreate:!0,canExtEdit:!0}},lists:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},list:{icon:"icon-tree-list",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},navigation_lists:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},navigation_list:{icon:"icon-tree-list",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},templates:{icon:"icon-tree-folder"},page_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},page_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},field_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},field_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},button_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},button_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},region_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},region_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},list_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},list_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},nav_list_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},nav_list_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},breadcrumb_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},breadcrumb_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},calendar_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},calendar_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},report_templates:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},report_template:{icon:"icon-tree-templates",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},authorizations:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},authorization:{icon:"icon-tree-authorization",operations:{canExtCreate:!0,canExtEdit:!0,canExtCopy:!0}},plugins:{icon:"icon-tree-folder"},plugin:{icon:"icon-tree-plugin"},build_options:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},build_option:{icon:"icon-tree-build-option",operations:{canExtCreate:!0,canExtEdit:!0}},data_load_tables:{icon:"icon-tree-folder"},data_load_table:{icon:"icon-tree-data-load-table",operations:{canExtEdit:!0}},web_services:{icon:"icon-tree-folder",operations:{canExtCreate:!0}},web_service:{icon:"icon-tree-web-service",operations:{canExtCreate:!0}},references:{icon:"icon-tree-folder"},referenced_by:{operations:{canRename:!0}}}}function fb(c,d){function e(a){function b(a){return d&&d[a.id]===!0?!0:!a.state||!a.state.opened||d&&d[a.id]===!1?!1:!0}function c(a){for(var d=0;d<a.length;d++)b(a[d])&&e.push(a[d].id),a[d].children&&c(a[d].children)}var e=[];return b(a)&&e.push(a.id),c(a.children),e}var g=c(),h=f.apex.treeView.makeDefaultNodeAdapter(g,eb(),!0,e(g));return h.sortCompare=null,h.defaultGetIcon=h.getIcon,h.getIcon=function(c){if(c.data){if(c.data.typeId===a.COMP_TYPE.REGION)return b.getComponentIconClass("region",$(c).getProperty(a.PROP.REGION_TYPE).getValue());if(c.data.typeId===a.COMP_TYPE.PAGE_ITEM)return b.getComponentIconClass("item",$(c).getProperty(a.PROP.ITEM_TYPE).getValue());if(c.data.typeId===a.COMP_TYPE.BUTTON)return b.getComponentIconClass("button","Y"===$(c).getProperty(a.PROP.BUTTON_IS_HOT).getValue()?"hot":"normal")}return this.defaultGetIcon(c)},h.extraCheck=function(b,c,d,e,g){var h,i;if(b){if(-1!==f.inArray(c,["canDelete","canRename","canDrag","canDuplicate"]))return h=$(d),h&&!h.isReadOnly()&&!a.isPageReadOnly();if("canAdd"===c&&a.isPageReadOnly())return!1;if("canAdd"===c&&"move"===e&&-1!==f.inArray(d.type,["region_columns","ir_column_groups","chart_series","map_chart_series"])&&g)for(i=0;i<g.length;i++)if(g[i]._parent&&g[i]._parent!==d)return!1}return b},h.renderNodeContent=function(a,c,d,e){var f,g,h;f=this.getIcon(a),null!==f&&c.markup("<span").attr("class","a-Icon "+f).markup("></span>"),g=this.getClasses(a),g&&(g.indexOf(b.CSS.IS_ERROR)>=0?h="icon-error":g.indexOf(b.CSS.IS_WARNING)>=0&&(h="icon-warning")),c.markup("<span role='treeitem' class='a-TreeView-label' tabIndex='-1'").attr("aria-level",e.level).optionalAttr("aria-selected",e.selected?"true":"false").optionalAttr("aria-disabled",e.disabled?"true":null).optionalAttr("aria-expanded",e.hasChildren===!1?null:e.expanded?"true":"false").markup(">"),h&&c.markup("<span class='a-Icon ").attr(h).markup("'></span>"),c.content(this.getLabel(a)).markup("</span>")},function(){return h}}function gb(a,c,e){a.treeView({getNodeAdapter:fb(c),showRoot:e,collapsibleRoot:!1,expandRoot:!1,contextMenu:jb(a),contextMenuId:a[0].id+"Menu",multiple:!0,doubleClick:"toggle",clickToRename:!1,keyboardRename:!1,keyboardAdd:!1,keyboardDelete:!0,tooltip:{show:apex.tooltipManager.defaultShowOption(),content:function(a,c){var d=$(c);return d?b.tooltipContentForComponent(d):void 0}},dragAndDrop:!0,dragMultiple:!0,dragReorder:!0,delay:10,distance:5,dragAppendTo:document.body,dragCursor:"move",dragOpacity:.6,dragCursorAt:{left:10,bottom:10},dragAnimate:!1,dragContainment:"document",selectionChange:function(){var a,b=this.id;a=X(f(this)),d.trace("%s: trigger event selectionChanged",b,a),f(document).trigger("selectionChanged",[b,a])},added:function(){},moved:function(b,c){O(c,a)},copied:function(b,c){P(c,a)},deleted:function(b,c){Q(c,a)}}),a.on("refresh",function(){var b=a.treeView("getExpandedState");d.trace("%s: refresh tree",a[0].id),a.treeView("option","getNodeAdapter",fb(c,b))}),ib(a,c)}function hb(b){var c=b[0].id;a.unobserver(c,{}),f(document).off("selectionChanged."+c),b.off("refresh"),b.treeView("destroy")}function ib(c){function e(a){for(var b,c=0;c<a.length;c++){if(a[c].hasOwnProperty("typeId")){h[a[c].typeId]=!0,b=M(a[c].typeId);for(var d=0;d<b.length;d++)j.push({typeId:b[d].typeId}),k.push(b[d].propertyId)}a[c].children&&e(a[c].children)}}var h,i=c[0].id,j=null,k=[];if("PDrenderingTree"===i?(j=null,h=null):"PDdynamicActionTree"===i?j=[{typeId:a.COMP_TYPE.DA_EVENT},{typeId:a.COMP_TYPE.DA_ACTION}]:"PDprocessingTree"===i?j=[{typeId:a.COMP_TYPE.BRANCH},{typeId:a.COMP_TYPE.PAGE_COMPUTATION},{typeId:a.COMP_TYPE.PAGE_PROCESS},{typeId:a.COMP_TYPE.VALIDATION},{typeId:a.COMP_TYPE.PAGE_PROC_WS_P_I},{typeId:a.COMP_TYPE.PAGE_PROC_WS_P_O},{typeId:a.COMP_TYPE.PAGE_PROC_WS_P_A}]:"PDsharedCompTree"===i&&(j=[],h={},e(ob)),h===g){h={};for(var l=0;l<j.length;l++)h[j[l].typeId]=!0}a.observer(i,{components:j,events:[a.EVENT.DISPLAY_TITLE]},function(a){d.trace("%s: DISPLAY_TITLE component notification received",i,a),bb(a.component,c,function(){this.label=a.component.getDisplayTitle()})}),a.observer(i,{components:j,events:[a.EVENT.CREATE,a.EVENT.DELETE]},function(a){d.trace("%s: CREATE/DELETE component notification received",i,a),c.trigger("refresh")},!0),"PDsharedCompTree"===i?a.observer(i,{components:j,events:[a.EVENT.CHANGE,a.EVENT.ADD_PROP,a.EVENT.REMOVE_PROP],properties:k},function(a){d.trace("%s: CHANGE/ADD_PROP/REMOVE_PROP component notification received for shared component reference properties",i,a),c.trigger("refresh")},!0):(a.observer(i,{components:j,events:[a.EVENT.CHANGE,a.EVENT.ADD_PROP,a.EVENT.REMOVE_PROP],properties:[a.PROP.PAGE_TEMPLATE,a.PROP.DIALOG_TEMPLATE,a.PROP.EXECUTION_SEQUENCE,a.PROP.DISPLAY_SEQUENCE,a.PROP.BRANCH_POINT,a.PROP.PROCESS_POINT,a.PROP.COMPUTATION_POINT,a.PROP.BUTTON_POSITION,a.PROP.REGION_POSITION,a.PROP.PARENT_REGION,a.PROP.REGION,a.PROP.VALIDATION_REGION,a.PROP.VAL_ITEM,a.PROP.REGION_VAL_COLUMN,a.PROP.REGION_TYPE,a.ASSOCIATED_ITEM,a.ASSOCIATED_COLUMN,a.PROP.COMPUTATION_ITEM_NAME,a.PROP.EVENT,a.PROP.DA_EVENT,a.PROP.DA_ACTION_TYPE,a.PROP.FIRE_WHEN_EVENT_RESULT_IS,a.PROP.FIRE_ON_PAGE_LOAD,a.PROP.WHEN_REGION,a.PROP.WHEN_ITEMS,a.PROP.WHEN_BUTTON]},function(a){d.trace("%s: CHANGE/ADD_PROP/REMOVE_PROP component notification received for display relevant properties",i,a),c.trigger("refresh")},!0),a.observer(i,{components:j,events:[a.EVENT.ERRORS,a.EVENT.NO_ERRORS]},function(a){a.component.hasErrors()?cb(a.component,b.CSS.IS_ERROR,c):db(a.component,b.CSS.IS_ERROR,c)}),a.observer(i,{components:j,events:[a.EVENT.WARNINGS,a.EVENT.NO_WARNINGS]},function(a){a.component.hasWarnings()?cb(a.component,b.CSS.IS_WARNING,c):db(a.component,b.CSS.IS_WARNING,c)}),b.observerIsConditional(i,j,function(a){b.isConditional(a.component)?cb(a.component,b.CSS.IS_CONDITIONAL,c):db(a.component,b.CSS.IS_CONDITIONAL,c)})),f(document).on("selectionChanged."+i,function(a,b,e){b!==i&&(d.trace("%s: selectionChanged event received from %s",i,b,e),(0===e.length||null===h||h.hasOwnProperty(e[0].typeId))&&T(e,c,null,!1))})}function jb(c){function d(b){return i("CREATE",a.getComponentType(b).title.singular)}function e(a){return a.call(c.treeView("getSelectedNodes"))}function g(b,c){return 1===b.length&&-1!==f.inArray(b[0].type,c)&&!a.isPageReadOnly()}function j(b,c){return a.isGlobalPage()?!1:g(b,c)}function k(b,c){var d=_(a.COMP_TYPE.REGION,b);return-1!==f.inArray(d.getProperty(a.PROP.REGION_TYPE).getValue(),c)}function l(b,c){apex.navigation.redirect(b.replace(/\\u002525/g,"%").replace(/%25/g,"%").replace(/%session%/g,$v("pInstance")).replace(/%pk_value%/g,c).replace(/%application_id%/g,a.getCurrentAppId()).replace(/%page_id%/g,a.getCurrentPageId()))}function m(b,c){var d=$(b,c);l(a.getComponentType(d.typeId).editUrl,d.id)}function n(b,c){var d=$(b,c);l(a.getComponentType(d.typeId).copyUrl,d.id)}function o(b,c){var d;d=$(b,c)?$(b,c).typeId:b.data.typeId,l(a.getComponentType(d).createUrl)}function p(b,c){var d,e,g=$(b,c),h=g.getProperty(a.PROP.BRANCH_TYPE).getValue(),i=null;return"REDIRECT_URL"===h?(d=g.getProperty(a.PROP.TARGET).getValue(),/f\?p=([^:]*):([^:]*)/i.test(d)&&(e=RegExp.$1,("&FLOW_ID."===e||"&APP_ID."===e||e===a.getCurrentAppId())&&(i=RegExp.$2))):-1!==f.inArray(h,["BRANCH_TO_STEP","BRANCH_TO_PAGE_ACCEPT"])&&(i=g.getProperty(a.PROP.BRANCH_PAGE_NUMBER).getValue()),i}function q(a){var b,h,i={label:a.label,accelerator:a.accelerator,type:a.type};s++,i.id=c[0].id+"_ctx_"+s,i.type||(i.type="action",b=a.action),a.typeId&&(a.label||(i.label=d(a.typeId)),b||(b=function(){V(this[0],c,a.typeId)})),i.action=function(){return e(b)},a.visible&&(h=f.isFunction(a.visible)?a.visible:f.isArray(a.visible)?function(){return g(this,a.visible)}:a.visible.global===!1?function(){return j(this,a.visible.types)}:function(){return g(this,a.visible.types)},i.hide=function(){return!e(h)}),a.disabled&&(i.disabled=function(){return e(a.disabled)}),r.push(i)}var r=[],s=0;return q({typeId:a.COMP_TYPE.REGION,visible:["main_regions","regions","region","before_footer"]}),q({label:i("CREATE",h("SUB_REGION")),action:function(){V(this[0],c,a.COMP_TYPE.REGION,"SUB_REGION")},visible:function(){var a=$(this[0],c);return!a||a&&!a.isOnGlobalPage()?g(this,["region","sub_regions"]):!1}}),q({typeId:a.COMP_TYPE.PAGE_ITEM,visible:["main_page_items","page_items","page_item","form_button","region"]}),q({typeId:a.COMP_TYPE.BUTTON,visible:["main_buttons","region_buttons","region_button","region","page_items","page_item","form_button"]}),q({typeId:a.COMP_TYPE.BRANCH,visible:{global:!1,types:["main_branches","branches","branch","before_header","after_submit","validating","processing","after_processing"]}}),q({typeId:a.COMP_TYPE.PAGE_COMPUTATION,visible:{global:!1,types:["main_computations","computations","computation","inline_computations","inline_computation","on_new_instance","before_header","after_header","before_regions","after_regions","before_footer","after_footer","after_submit","page_item"]}}),q({typeId:a.COMP_TYPE.PAGE_PROCESS,visible:{global:!1,types:["main_processes","processes","process","on_new_instance","before_header","after_header","before_regions","after_regions","before_footer","after_footer","after_submit","processing"]}}),q({typeId:a.COMP_TYPE.VALIDATION,visible:function(){return j(this,["validation","validations","validating","inline_validations","inline_validation","page_item"])?!0:j(this,["region","tabform_column"])&&k(this[0],["NATIVE_TABFORM"])}}),q({typeId:a.COMP_TYPE.DA_EVENT,visible:["main_da_events","da_events","da_event","inline_da_events","inline_da_event","region","page_item","region_button","form_button"]}),q({typeId:a.COMP_TYPE.DA_ACTION,visible:["da_action"]}),q({label:i("CREATE",h("TRUE_ACTION")),typeId:a.COMP_TYPE.DA_ACTION,action:function(){V(this[0],c,a.COMP_TYPE.DA_ACTION,"TRUE")},visible:["da_actions_true","da_event","inline_da_event"]}),q({label:i("CREATE",h("FALSE_ACTION")),typeId:a.COMP_TYPE.DA_ACTION,action:function(){V(this[0],c,a.COMP_TYPE.DA_ACTION,"FALSE")},visible:["da_actions_false","da_event","inline_da_event"]}),q({label:i("CREATE",h("OPPOSITE_DYNAMIC_ACTION")),typeId:a.COMP_TYPE.DA_ACTION,action:function(){U(this,c)},visible:function(){for(var a=0;a<this.length;a++)if("da_action"!==this[a].type||!c.treeView("getNodeAdapter").check("canDuplicate",this[a]))return!1;return!0}}),q({label:i("CREATE",h("VIRTUAL_COLUMN")),action:function(){k(this[0],["NATIVE_TABFORM"])?V(this[0],c,a.COMP_TYPE.TAB_FORM_COLUMN,"VIRTUAL"):V(this[0],c,a.COMP_TYPE.CLASSIC_RPT_COLUMN,"VIRTUAL")},visible:function(){return g(this,["region_columns","classic_report_column","tabform_column"])&&k(this[0],["NATIVE_SQL_REPORT","NATIVE_FNC_REPORT","NATIVE_TABFORM"])}}),q({label:i("CREATE",h("ROW_SELECTOR")),action:function(){V(this[0],c,a.COMP_TYPE.TAB_FORM_COLUMN,"ROW_SELECTOR")},visible:function(){var b;return g(this,["region_columns","tabform_column"])&&(b=_(a.COMP_TYPE.REGION,this[0],c),"NATIVE_TABFORM"===b.getProperty(a.PROP.REGION_TYPE).getValue())?0===b.getChilds(a.COMP_TYPE.TAB_FORM_COLUMN,{properties:[{id:a.PROP.COLUMN_NAME,value:lb}]}).length:!1}}),q({typeId:a.COMP_TYPE.CHART_SERIES,visible:function(){return g(this,["chart_series","chart_serie"])?c.treeView("getNodeAdapter").check("canAdd",this[0]):!1}}),q({typeId:a.COMP_TYPE.MAP_CHART_SERIES,visible:["map_chart","map_chart_series","map_chart_serie"]}),q({typeId:a.COMP_TYPE.IR_COLUMN_GROUP,visible:["ir_attributes","ir_column_groups","ir_column_group"]}),q({label:h("DUPLICATE"),action:function(){R(this,c)},visible:function(){for(var a=0;a<this.length;a++)if(!c.treeView("getNodeAdapter").check("canDuplicate",this[a]))return!1;return!0}}),q({type:"separator"}),q({label:h("DELETE"),accelerator:"Del",action:function(){return S(this,c),!0},visible:function(){for(var a=0;a<this.length;a++)if(!c.treeView("getNodeAdapter").allowDelete(this[a]))return!1;return!0}}),q({type:"separator"}),q({label:h("COPY_TO_PAGE"),action:function(){n(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtCopy",this[0])&&a.getComponentType($(this[0]).typeId).isPageComponent&&!$(this[0]).isOnGlobalPage()}}),q({label:h("EDIT_SHARED_COMPONENT"),action:function(){m(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtEdit",this[0])&&!a.getComponentType($(this[0],c).typeId).isPageComponent}}),q({label:h("COPY_SHARED_COMPONENT"),action:function(){n(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtCopy",this[0])&&!a.getComponentType($(this[0],c).typeId).isPageComponent}}),q({label:h("CREATE_SHARED_COMPONENT"),action:function(){o(this[0])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canExtCreate",this[0])}}),q({label:h("PAGE_SEARCH"),action:function(){f(document).trigger("pageSearch",[$(this[0],c).getDisplayTitle()])},visible:function(){return 1===this.length&&c.treeView("getNodeAdapter").check("canSearch",this[0])}}),q({label:h("GOTO_TARGET_PAGE"),action:function(){b.goToPage(p(this[0],c))},visible:function(){return 1===this.length&&"branch"===this[0].type},disabled:function(){return null===p(this[0],c)}}),q({type:"separator"}),q({label:h("EXPAND_ALL_BELOW"),action:function(){c.treeView("expandAll",c.treeView("getSelection"))}}),q({label:h("COLLAPSE_ALL_BELOW"),action:function(){c.treeView("collapseAll",c.treeView("getSelection"))}}),{items:r}}var kb={IS_HEADER:"is-header",IS_COMPONENT_VIEW:"is-component-view",IS_EVENT_VIEW:"is-event-view",IS_NOT_IMPORTANT:"is-not-important",IS_POPULATED:"is-populated"},lb="CHECK$01",mb="is-active",nb=15,ob=[{typeId:a.COMP_TYPE.LOV,type:"lov"},{typeId:a.COMP_TYPE.LIST,type:"list"},{typeId:a.COMP_TYPE.AUTHORIZATION,type:"authorization"},{typeId:a.COMP_TYPE.BUILD_OPTION,type:"build_option"},{typeId:a.COMP_TYPE.DATA_LOAD_TABLE,type:"data_load_table"},{typeId:a.COMP_TYPE.WS_REF,type:"web_service"},{typeId:a.COMP_TYPE.BREADCRUMB,type:"breadcrumb"},{title:h("NAVIGATION_MENU_LIST"),typeId:a.COMP_TYPE.LIST,type:"navigation_list"},{title:h("TAB_SET"),typeId:a.COMP_TYPE.TAB_SET,type:"tab_set"},{title:h("TEMPLATES"),type:"template",children:[{titleTypeId:a.COMP_TYPE.PAGE,typeId:a.COMP_TYPE.PAGE_TEMPLATE,type:"page_template"},{titleTypeId:a.COMP_TYPE.PAGE_ITEM,typeId:a.COMP_TYPE.FIELD_TEMPLATE,type:"field_template"},{titleTypeId:a.COMP_TYPE.BUTTON,typeId:a.COMP_TYPE.BUTTON_TEMPLATE,type:"button_template"},{titleTypeId:a.COMP_TYPE.REGION,typeId:a.COMP_TYPE.REGION_TEMPLATE,type:"region_template"},{titleTypeId:a.COMP_TYPE.LIST,typeId:a.COMP_TYPE.LIST_TEMPLATE,type:"list_template"},{title:h("CLASSIC_REPORT"),typeId:a.COMP_TYPE.REPORT_TEMPLATE,type:"report_template"},{title:h("NAVIGATION_MENU_LIST"),typeId:a.COMP_TYPE.LIST_TEMPLATE,type:"nav_list_template"},{titleTypeId:a.COMP_TYPE.BREADCRUMB,typeId:a.COMP_TYPE.BREADCRUMB_TEMPLATE,type:"breadcrumb_template"},{title:h("LEGACY_CALENDAR"),typeId:a.COMP_TYPE.CALENDAR_TEMPLATE,type:"calendar_template"}]}];f(document).ready(function(){function a(){b.getBoolPref("GROUP_BY_COMPONENT_TYPE",!1)?(c.removeClass(kb.IS_EVENT_VIEW),c.addClass(kb.IS_COMPONENT_VIEW),j.removeClass(mb),k.addClass(mb)):(c.removeClass(kb.IS_COMPONENT_VIEW),c.addClass(kb.IS_EVENT_VIEW),j.addClass(mb),k.removeClass(mb))}var c=f("#trees"),e=f("#PDrenderingTree"),g=f("#PDdynamicActionTree"),h=f("#PDprocessingTree"),i=f("#PDsharedCompTree"),j=f("#r_event_view, #p_event_view"),k=f("#r_comp_view, #p_comp_view");j.click(function(){b.saveBoolPref("GROUP_BY_COMPONENT_TYPE",!1),f(document).trigger("settingsStateChanged",["view"])}),k.click(function(){b.saveBoolPref("GROUP_BY_COMPONENT_TYPE",!0),f(document).trigger("settingsStateChanged",["view"])}),a(),c.on("tabsactivate",function(a,b){var c,e=b.newPanel.find(".a-TreeView");e.length>0&&(c=X(e),c.length>0&&(d.trace("%s: trigger event selectionChanged",e.id,c),f(document).trigger("selectionChanged",[e.id,c])))}),f(document).on("settingsStateChanged",function(b,c){"view"===c?(a(),e.trigger("refresh"),h.trigger("refresh")):"componentTitle"===c&&alert("Not yet implemented!")}),f(document).on("modelReady",function(){gb(e,E,!0),gb(g,H,!1),gb(h,I,!1),gb(i,L,!1),f(document).one("modelCleared",function(){hb(e),hb(g),hb(h),hb(i)})})})}(pe,window.pageDesigner,apex.util,apex.debug,apex.lang,apex.jQuery);
!function(a,b,c,d){"use strict";function e(b){var d,e,f,g="";g+="<table class='u-Report'><tr><th>Property</th><th>Value</th></tr>",g+="<tr><td>id</td><td>"+b.id+"</td></tr>",g+="<tr><td>title</td><td>"+c.escapeHTML(b.getDisplayTitle())+"</td></tr>",g+="<tr><td>parentId</td><td>"+b.parentId+"</td></tr>",g+="<tr><td>pageId</td><td>"+b.pageId+"</td></tr>",g+="<tr><td>seq</td><td>"+b.seq+"</td></tr>",g+="<tr><td>hasChanged()</td><td>"+b.hasChanged()+"</td></tr>",g+="<tr><td>hasErrors()</td><td>"+b.hasErrors()+"</td></tr>",g+="<tr><td>hasWarnings()</td><td>"+b.hasWarnings()+"</td></tr>",g+="<tr><td>isReadOnly()</td><td>"+b.isReadOnly()+"</td></tr>",g+="<tr><td>_status</td><td>"+b._status+"</td></tr>",b._grid&&(g+="<tr><td>_grid</td><td>hasGridSupport: "+b._grid.hasGridSupport+"<br>maxColumns: "+b._grid.maxColumns+"<br>"+(b._grid.isUnknown?"isUnknown: true":"")+"</td></tr>"),b.typeId===a.COMP_TYPE.PAGE&&(g+="<tr><td>_lock</td><td>",b._lock&&(g+="isLockedByCurrentUser: "+(b._lock.isLockedByCurrentUser?"true":"false")+"<br>owner: "+b._lock.owner+"<br>on: "+b._lock.on+"<br>comment: "+b._lock.comment),g+="</td></tr>"),g+="</table>",d=b.getProperties(),d.sort(function(a,b){return a.getMetaData().displaySeq-b.getMetaData().displaySeq}),g+="<table class='u-Report'i><tr><th>Property</th><th>Value</th><th>has Changed</th><th>Errors</th><th>Warnings</th><th>_isRequired</th><th>Columns</th></tr>";for(var h=0;h<d.length;h++){if(e=d[h].id,g+="<tr><td>",g+=d[h].getMetaData().prompt+" ("+e+")",g+="</td><td>",g+=c.escapeHTML(d[h].getDisplayValue()),d[h].getDisplayValue()!==d[h].getValue()&&(g+="<br>["+c.escapeHTML(d[h].getValue())+"]"),g+="</td><td>",g+=d[h].hasChanged?"true":"",g+="</td><td>",g+=d[h].errors.join("<br>"),g+="</td><td>",g+=d[h].warnings.join("<br>"),g+="</td><td>",g+=d[h]._isRequired?"true":"",g+="</td><td>",f=d[h].getColumns(),f.length>0){g+="<table class='u-Report'><tr><th>Name</th><th>Type</th></tr>";for(var i=0;i<f.length;i++)g+="<tr><td>"+c.escapeHTML(f[i].name)+"</td><td>"+c.escapeHTML(f[i].type)+"</td></tr>";g+="</table>"}g+="</td></tr>"}return g+="</table>"}function f(b,c,f){var j;if(i){for(d.trace("%s: selectionChanged event triggered by %s",g,c,f),a.unobserver(g,{events:[a.EVENT.CHANGE]}),j=0;j<f.length;j++)a.observer(g,{component:f[j],events:[a.EVENT.CHANGE,a.EVENT.META_DATA]},function(a){d.trace("%s: CHANGE or META_DATA notification received",g,a),h.find("#dump"+a.component.id).html(e(a.component))});for(h.empty(),j=0;j<f.length;j++)h.append('<div id="dump'+f[j].id+'">'+e(f[j])+"</div>")}}var g="dump",h=b("#dumpContent"),i=!0;b(document).on("modelReady",function(){b(document).one("modelCleared",function(){h.empty()})}),b(document).on("selectionChanged."+g,f),a.observer(g,{},function(a){d.trace("%s: %s notification(s)",g,a.events.join(", "),a)}),window.pageDesigner.hideDumpTab=function(){b("#dump, [href=#dump]").closest("li").hide(),i=!1},window.pageDesigner.showDumpTab=function(){b("#dump, [href=#dump]").closest("li").show(),b("#editor_tabs").tabs("refresh"),i=!0},b(document).ready(function(){window.pageDesigner.hideDumpTab()})}(pe,apex.jQuery,apex.util,apex.debug);
!function(a,b,c,d,e,f){"use strict";function g(a){return e.getMessage("PE."+a)}function h(a){var b=g(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.format.apply(this,c)}function i(a){var b=g(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.formatNoEscape.apply(this,c)}function j(b,c){var d=a.extend({"class":"",style:""},c);b.markup("<div"),d["class"]&&b.attr("class",a.isArray(d["class"])?d["class"].join(" "):d["class"]),d.style&&b.attr("style",d.style),b.markup(">")}function k(a){a.markup("</div>")}function l(a,b,c){a.markup("<span").attr("class",b).attr("aria-hidden",!0).markup("></span>"),c&&a.markup("<span").attr("class",Ab).markup(">").content(c).markup("</span>")}function m(b,c,d){var e,f;return e=d?Jb[d]:Kb,!c&&d?void(Jb[b]=e):(f=a.extend(Object.create(e),c),f["super"]=function(){var a=Array.prototype.slice,b=f["super"];return function(c){var d,f=a.call(arguments,1),g=this["super"];return this["super"]=b,d=e[c].apply(this,f),this["super"]=g,d}}(),void(Jb[b]=f))}var n="a-PropertyEditor",o=n+"--stacked",p=n+"-propertyGroup",q=n+"-message",r=n+"-messageText",s=n+"-editParent",t=p+"-header",u=p+"-title",v=p+"-body",w="a-Property",x=w+"--stacked",y=w+"-buttonContainer",z=y+"--comboBox",A=y+"--colorPicker",B=w+"-labelContainer",C=w+"-label",D=C+"--withIcon",E=w+"-radioGroup",F=w+"-radio",G=F+"-label",H=F+"-input",I=w+"-checkboxGroup",J=w+"-checkbox",K=J+"-label",L=J+"-input",M=w+"-fieldContainer",N=M+"--comboBox",O=M+"--radioGroup",P=M+"--checkboxGroup",Q=M+"--colorPicker",R=w+"-field",S=R+"--readOnly",T=R+"--text",U=R+"--textarea",V=R+"--select",W=w+"-unitContainer",X=w+"-unit",Y=w+"-colorPreview",Z=w+"--scrollable",$="js-showAll",_="a-Button",ab=_+"--small",bb=_+"--noLabel",cb=_+"--withIcon",db=_+"--full",eb=_+"--primary",fb=_+" "+ab+" "+bb+" "+cb,gb="is-active",hb="is-focused",ib="is-error",jb="is-warning",kb="is-expanded",lb="is-variable",mb="is-empty",nb="a-Icon",ob=nb+" icon-down-arrow",pb=nb+" icon-right-arrow",qb=nb+" icon-required",rb=nb+" icon-error",sb=nb+" icon-warning",tb=nb+" icon-popup-lov",ub=nb+" icon-variable",vb=nb+" icon-quick-pick",wb=nb+" icon-color-picker",xb=nb+"--large",yb=nb+" "+xb+" icon-warning",zb=nb+" icon-open-in-dialog",Ab="u-VisuallyHidden",Bb="ui-dialog-flushBody",Cb="u-textLower",Db="u-textUpper",Eb="data-property-id",Fb="data-group-id",Gb={COMBOBOX:"COMBOBOX",NUMBER:"NUMBER",INTEGER:"INTEGER",SELECT_LIST:"SELECT LIST",TEXT:"TEXT",TEXTAREA:"TEXTAREA",YES_NO:"YES NO",CHECKBOXES:"CHECKBOXES",RADIOS:"RADIOS",COLOR:"COLOR",POPUP_LOV:"POPUP LOV"},Hb={},Ib=[],Jb={},Kb={renderDivOpen:j,renderDivClose:k,renderIcon:l,stacked:!1,noLabel:!1,labelVisible:!0,render:function(){},init:function(a,b){this.addKeyboardHandlersForVariesState(a,b),this.addTooltipsForErrors(a,b)},destroy:function(a){a.closest("div."+w).off()},validate:function(){},setValue:function(a,b,c){a.val(c),b.value=c},addValue:function(a,b,c){var d,e=!1,f=a.val(),g=f?f.split(b.metaData.multiValueDelimiter):[];for(d=0;d<g.length;d++)if(c===g[d]){e=!0;break}e||g.push(c),a.val(g.join(b.metaData.multiValueDelimiter))},getValue:function(a){var b=a.find("["+Eb+"]").val();return a.hasClass(lb)&&""===b&&(b=Hb),b},getDisplayValue:function(a){return a.value},setFocus:function(a){a[0].focus()},renderCommonAttributes:function(a,b,c){a.attr("id",b).attr(Eb,c.propertyName).optionalAttr("aria-required",c.metaData.isRequired?"true":null).optionalAttr("aria-invalid",c.errors.length>0?"true":null)},commonAttributes:function(a){var b={};return b[Eb]=a.propertyName,b["aria-required"]=a.metaData.isRequired,b["aria-invalid"]=a.errors.length>0,b},renderBaseInput:function(b,c){var d,e,f=a.extend({id:"",type:"text",value:"",inputClass:[],data:{},readonly:!1,maxLength:"",attributes:{}},c);if(b.markup("<input").attr("id",f.id).attr("type",f.type).attr("value",f.value).optionalAttr("readonly",f.readonly),f.inputClass.length>0&&b.attr("class",a.isArray(f.inputClass)?f.inputClass.join(" "):f.inputClass),f.maxLength&&b.attr("maxlength",f.maxLength),f.ariaDescribedBy&&b.attr("aria-describedby",f.ariaDescribedBy),!a.isEmptyObject(f.data))for(e in f.data)f.data.hasOwnProperty(e)&&b.attr("data-"+e,f.data[e]);if(!a.isEmptyObject(f.attributes))for(d in f.attributes)f.attributes.hasOwnProperty(d)&&b.attr(d,f.attributes[d]);b.markup(" />")},renderText:function(b,c,d,e){var f,g=d.value,h=!1,i=[],j={},k=g===Hb;e=a.extend({"class":T,type:"text",textCase:d.metaData.textCase,manualEntry:!0,attributes:{}},e),i.push(R),i.push(e["class"]),e.textCase&&i.push(this.getTextCaseClass(e.textCase)),d.metaData.isReadOnly&&(h=!0,i.push(S),k||(g=Jb[d.metaData.type].getDisplayValue(d))),e.manualEntry||(h=!0,i.push(S),k||""===d.value||(j["return-value"]=d.value,d.metaData.lovValues(function(b){var c,e=a("["+Eb+"="+d.propertyName+"]");c=b.length>0&&b[0].r===d.value?b[0].d:d.value,Jb[d.metaData.type].setValue(e,d,d.value,c)},{id:d.value}))),k&&(g="",i.push(lb)),f={id:c,type:e.type,value:g,inputClass:i,data:j,attributes:a.extend(e.attributes,this.commonAttributes(d)),readonly:h},d.metaData.maxLen&&(f.maxLength=d.metaData.maxLen),d.metaData.unit&&(f.ariaDescribedBy=f.id+"_unit"),this.renderBaseInput(b,f)},renderOption:function(a,b,c){return a.markup("<option").attr("value",b.r).optionalAttr("selected",b.r===c?"true":null),b.hasOwnProperty("isSupported")&&a.attr("data-is-supported",b.isSupported?"true":"false"),a.markup(">").content(b.d).markup("</option>"),b.r===c},renderLovValues:function(b,c,d){var e,f=c,g=!1;for(a.isFunction(f)&&(f=f()),e=0;e<f.length;e++)f[e].hasOwnProperty("group")?(b.markup("<optgroup").attr("label",f[e].group).markup(">"),this.renderLovValues(b,f[e].values,d)&&(g=!0),b.markup("</optgroup>")):this.renderOption(b,f[e],d)&&(g=!0);return g},renderIconButton:function(b,c){var d=a.extend({id:"",icon:"",text:"",dataFor:null,disabled:!1,isMenuButton:!1,addContainer:!1,containerClass:"",buttonClass:""},c);d.addContainer&&this.renderDivOpen(b,{"class":y+(d.containerClass?" "+d.containerClass:"")}),b.markup("<button type='button'").attr("id",d.id).attr("class",fb+(d.buttonClass?" "+d.buttonClass:"")+(d.isMenuButton?" js-menuButton":"")).attr("title",d.text).attr("aria-label",d.text).optionalAttr("disabled",d.disabled),d.dataFor&&b.attr("data-for",d.dataFor),d.isMenuButton&&b.attr("aria-haspopup","true").attr("aria-expanded","false").attr("data-menu",d.id+"_menu"),b.markup(">"),this.renderIcon(b,d.icon),b.markup("</button>"),d.addContainer&&this.renderDivClose(b)},addValueVariesStateStyle:function(c,d,e,f){var h=b.htmlBuilder(),i=b.htmlBuilder();c.addClass(lb),d.addClass(lb),f.renderIcon(h,ub),i.markup("<span").attr("class",Ab).markup(">").content(g("VALUE_VARIES_POSTFIX")).markup("</span>"),a("#"+e+"_label").prepend(h.toString()).append(i.toString())},removeValueVariesStateStyle:function(b,c){var d=a("#"+b.attr("id")+"_label");b.removeClass(lb),c.removeClass(lb),d.find("span.icon-variable").remove().end().find("span."+Ab).remove()},addKeyboardHandlersForVariesState:function(b,c){var d,e,f;c.metaData.isReadOnly||(d=this,e=b.closest("div."+w),f=b.attr("id"),e.on("keydown","#"+f,function(b){var g=a(this);b.which===a.ui.keyCode.ESCAPE&&c.value===Hb&&(d.addValueVariesStateStyle(g,e,f,d),setTimeout(function(){g[0].value=""},1))}).on("keypress","#"+f,function(b){var c=a(this);b.which&&c.hasClass(lb)&&d.removeValueVariesStateStyle(c,e)}))},addChangeHandlersForVariesState:function(b,c){var d,e,f;c.metaData.isReadOnly||(d=this,e=b.closest("div."+w),f=b.attr("id"),e.on("change","#"+f,function(){var b=a(this),g=b.val();b.hasClass(lb)?d.removeValueVariesStateStyle(b,e):""===g&&c.value===Hb&&d.addValueVariesStateStyle(b,e,f,d)}))},addTooltipsForErrors:function(a,b){var c=a.attr("id");a.tooltip().off("mouseover mouseout"),b.errors.length>0&&a.tooltip({items:"#"+c,content:function(a){var c,d;for(c="<ul>",d=0;d<b.errors.length;d++)c+="<li>"+b.errors[d]+"</li>";c+="</ul>",a(c)},position:{my:"left bottom",at:"left top",of:"#"+c+"_label"}}),b.warnings.length>0&&a.tooltip({items:"#"+c,content:function(a){var c,d;for(c="<ul>",d=0;d<b.warnings.length;d++)c+="<li>"+b.warnings[d]+"</li>";c+="</ul>",a(c)},position:{my:"left bottom",at:"left top",of:"#"+c+"_label"}})},initQuickPicks:function(b,c){var d,e,h,i,j,k=[];if(c.metaData.quickPicks&&(h=c.metaData.quickPicks(),i=h.length,!c.metaData.isReadOnly&&i>0)){for(c.metaData.isRequired||(c.metaData.nullText===f?(k.push({type:"action",label:g("QUICK_PICK.CLEAR"),hide:function(){return""===b.val()},action:function(){b.val("").trigger("change")}}),k.push({type:"separator",hide:function(){return""===b.val()}})):k.push({type:"action",label:c.metaData.nullText,action:function(){b.val("").trigger("change")}})),d=0;i>d;d++)k.push({type:"action",label:h[d].d,value:h[d].r,action:function(){b.val(this.value).trigger("change")}});e=b.attr("id")+"_quickPickBtn_menu",Ib.push(e),j=a("<div id='"+e+"'></div>").appendTo("body"),j.menu({items:k})}},addLabelClickHandler:function(a,b){var c=this,d=a.closest("div."+w),e=a.attr("id");d.on("click","#"+e+"_label",function(){c.setFocus(a,b)})},renderQuickPickButton:function(a,b,c,d){var e,f=d?!0:!1;c.metaData.quickPicks&&(e=c.metaData.quickPicks(),c.metaData.isReadOnly||e.length>0&&this.renderIconButton(a,{id:b+"_quickPickBtn",icon:vb,text:i("QUICK_PICK",c.metaData.prompt),isMenuButton:!0,addContainer:f,buttonClass:"a-Button--quickPick"}))},renderRadioCheckbox:function(b,c,d,e,f){var g,h,i,j,k,l;e===Gb.CHECKBOXES?(i="checkbox",j=J,k=L,l=K):(i="radio",j=F,k=H,l=G),g=a.extend({type:i,name:c+"_name",inputValue:null,inputLabel:null,currentValue:d.value!==Hb?d.value.split(":"):d.value},f),h=c+g.inputValue,this.renderDivOpen(b,{"class":j}),b.markup("<input").attr("type",g.type).attr("id",h).attr("value",g.inputValue).attr("name",g.name).attr("class",k).optionalAttr("checked",-1!==a.inArray(g.inputValue,g.currentValue)?"true":null).markup(" />"),b.markup("<label").attr("for",h).attr("class",l).markup(">").content(g.inputLabel).markup("</label>"),this.renderDivClose(b)},renderRadiosCheckboxes:function(b,c,d,e){var f,h,i=[],j=[],k=c+"_label";if(i.push(M),e===Gb.CHECKBOXES?(i.push(P),j.push(I)):e===Gb.RADIOS&&(i.push(O),j.push(E)),this.renderDivOpen(b,{"class":i}),d.metaData.isReadOnly)this.renderText(b,c,d);else{if(d.value===Hb&&j.push(lb),b.markup("<div").attr("role","group").attr("class",j.join(" ")).attr("aria-labelledby",k).attr("tabindex","-1"),this.renderCommonAttributes(b,c,d),b.markup(">"),d.metaData.type!==Gb.YES_NO)for(h=d.metaData.lovValues,a.isFunction(h)&&(h=h()),f=0;f<h.length;f++)this.renderRadioCheckbox(b,c,d,e,{inputValue:h[f].r,inputLabel:h[f].d});else this.renderRadioCheckbox(b,c,d,e,{inputValue:d.metaData.yesValue,inputLabel:g("YES")}),this.renderRadioCheckbox(b,c,d,e,{inputValue:d.metaData.noValue,inputLabel:g("NO")});this.renderDivClose(b)}this.renderDivClose(b)},getTextCaseClass:function(a){var b="";return"UPPER"===a?b=Db:"LOWER"===a&&(b=Cb),b}};m(Gb.TEXT,{render:function(a,b,c,d){this.renderDivOpen(a,{"class":M}),this.renderText(a,b,c,d),this.renderDivClose(a),this.renderQuickPickButton(a,b,c,!0)},init:function(a,b){this.initQuickPicks(a,b),this["super"]("init",a,b)}}),m(Gb.NUMBER,{init:function(b,c){c.metaData.isReadOnly||c.metaData.supportsSubstitution||b.on("keydown",function(b){var c=d.getDecimalSeparator(),e=[8,9,13,37,39,45,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,107,109,110,189];"."===c?e.push(190):","===c&&e.push(188),-1===a.inArray(b.which,e)&&b.preventDefault()}),this["super"]("init",b,c)}},Gb.TEXT),m(Gb.INTEGER,{init:function(b,c){c.metaData.isReadOnly||c.metaData.supportsSubstitution||b.on("keydown",function(b){var c=[8,9,13,37,39,45,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,107,109,189];-1===a.inArray(b.which,c)&&b.preventDefault()}),this["super"]("init",b,c)}},Gb.TEXT),m(Gb.TEXTAREA,{stacked:!0,render:function(a,b,c,d){var e,f=R+" "+U;this.renderDivOpen(a,{"class":y}),d&&this.renderIconButton(a,{id:b+"_modalBtn",icon:zb,text:i("CODE_EDITOR",c.metaData.prompt)}),this.renderQuickPickButton(a,b,c),this.renderDivClose(a),this.renderDivOpen(a,{"class":M}),e=c.value,e===Hb&&(e="",f+=" "+lb),f+=" "+this.getTextCaseClass(c.metaData.textCase),a.markup("<textarea rows=3").attr("maxlength",c.metaData.maxLen).attr("class",f).optionalAttr("readonly",c.metaData.isReadOnly?"true":null),this.renderCommonAttributes(a,b,c),a.markup(">").content(e).markup("</textarea>"),this.renderDivClose(a)},init:function(a,b){var c=50,d=150,e=a.prop("scrollHeight");e>c&&(e>d&&(e=d),a.height(e)),this.initQuickPicks(a,b),this["super"]("init",a,b)}}),m(Gb.COMBOBOX,{manualEntry:!0,render:function(a,b,c){this.renderDivOpen(a,{"class":[M,N]}),this.renderText(a,b,c,{manualEntry:this.manualEntry}),this.renderDivClose(a),this.renderIconButton(a,{id:b+"_lovBtn",icon:tb,text:i("LIST_OF_VALUES",c.metaData.prompt),addContainer:!0,containerClass:z}),this.renderQuickPickButton(a,b,c,!0)},init:function(c,d,e){function h(){var e,g=b.htmlBuilder();g.markup("<div").attr("id","lovDlg").attr("title",k.dialogTitle).markup(">").markup("</div>"),e=a(g.toString()).lovDialog({modal:!0,minWidth:520,height:500,filters:k.filters,columnDefinitions:k.columnDefinitions,filterLov:k.filterLov,dialogClass:Bb,resizable:!1,multiValue:k.multiValue,valueSelected:function(a,b){var e,g;e=b.r!==f?b.r:b[k.columnDefinitions[0].name],j.manualEntry||(g=b.d?b.d:e),d.metaData.multiValueDelimiter?j["super"]("addValue",c,d,e):j.setValue(c,d,e,g),c.trigger("change")}})}var j=this,k=a.extend({columnDefinitions:[{name:"d",title:d.metaData.prompt}],filters:[{name:"search",title:g("SEARCH"),type:"search"}],filterLov:function(b,c){a.isFunction(d.metaData.lovValues)?d.metaData.lovValues(function(a){j.manualEntry||d.metaData.isRequired||a.unshift({r:"",d:d.metaData.nullText!==f?d.metaData.nullText:g("SELECT")}),c(a,b.search)},b):c(d.metaData.lovValues,b.search)},multiValue:!1,dialogTitle:i("PICK",d.metaData.prompt)},e),l=a("#"+c.attr("id")+"_lovBtn");this["super"]("init",c,d),l.on("click",h),l.prop("disabled",d.metaData.isReadOnly),this.initQuickPicks(c,d)},setValue:function(a,b,c,d){this.manualEntry?a.val(c):(a.data("return-value",c),d&&a.val(d)),b.value=c},getValue:function(a){var b;return b=this.manualEntry?this["super"]("getValue",a):a.find("["+Eb+"]").data("return-value")}}),m(Gb.CHECKBOXES,{noLabel:!0,render:function(a,b,c){this.renderRadiosCheckboxes(a,b,c,Gb.CHECKBOXES)},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addLabelClickHandler(a,b),this.addTooltipsForErrors(a,b)},getValue:function(a){var b=[];return a.find("input").each(function(){this.checked&&b.push(this.value)}),b.join(":")},getDisplayValue:function(b){var c,d,e,f=[],g=b.value.split(":");if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c){for(e=0;e<c.length;e++)a.inArray(c[e].r,g)>-1&&f.push(c[e].d);d=f.join(":")}return d},setValue:function(b,c,d){var e=b.find("input"),f=d.split(":");e.prop("checked",!1),e.each(function(){var b=a(this);a.inArray(b.val(),f)>-1&&b.prop("checked",!0)}),c.value=d},setFocus:function(a,b){b.metaData.isReadOnly?a[0].focus():a.find(":input")[0].focus()}}),m(Gb.RADIOS,{noLabel:!0,render:function(a,b,c){this.renderRadiosCheckboxes(a,b,c,Gb.RADIOS)},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addLabelClickHandler(a,b),this.addTooltipsForErrors(a,b)},getValue:function(a){var b="";return a.find("input").each(function(){return this.checked?(b=this.value,!1):void 0}),b},getDisplayValue:function(b){var c,d,e;if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c)for(e=0;e<c.length;e++)if(c[e].r===b.value){d=c[e].d;break}return d},setValue:function(b,c,d){var e=b.find("input");e.each(function(){var b=a(this);if(b.prop("checked")){if(b.val()===d)return!1;b.prop("checked",!1).button("refresh")}else if(b.val()===d)return b.prop("checked",!0).button("refresh"),!1}),c.value=d},setFocus:function(a,b){b.metaData.isReadOnly?a[0].focus():a.find(":input")[0].focus()}}),m(Gb.YES_NO,{init:function(a,b){this["super"]("init",a,b),b.metaData.isReadOnly||a.buttonset({})},getDisplayValue:function(a){return g(a.metaData.yesValue===a.value?"YES":"NO")}},Gb.RADIOS),m(Gb.SELECT_LIST,{render:function(a,b,c,d){var e=R+" "+V,i=c.value,j=!1;this.renderDivOpen(a,{"class":M}),c.metaData.isReadOnly?this.renderText(a,b,c):(i===Hb&&(e+=" "+lb),a.markup("<select size=1").attr("class",e),this.renderCommonAttributes(a,b,c),a.markup(">"),i===Hb?(j=this.renderOption(a,{r:"",d:""},""),c.metaData.isRequired||this.renderOption(a,{r:"",d:c.metaData.nullText!==f?c.metaData.nullText:g("SELECT")},null),i=""):c.metaData.isRequired&&""!==i||(j=this.renderOption(a,{r:"",d:c.metaData.nullText!==f?c.metaData.nullText:g("SELECT")},i)),this.renderLovValues(a,c.metaData.lovValues,i)||j||this.renderOption(a,{r:i,d:h("INVALID",i)},i),a.markup("</select>")),k(a),this.renderQuickPickButton(a,b,c,!0),d&&this.renderIconButton(a,{id:b+"_btn",icon:d.icon,text:d.text,addContainer:!0})},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addTooltipsForErrors(a,b),this.initQuickPicks(a,b)},getDisplayValue:function(b){var c,d;if(""!==b.value){if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c)for(var e=0;e<c.length;e++)if(c[e].r===b.value){d=c[e].d;break}}else d=b.metaData.nullText?b.metaData.nullText:b.value;return d}}),m(Gb.COLOR,{render:function(a,b,c){var d=["#FF3B30","#FF9500","#FFCC00","#4CD964","#34AADC","#007AFF","#5856D6","#FF2D55","#FFFFFF","#C7C7CC","#8E8E93","#000000"];this.renderDivOpen(a,{"class":[M,Q]}),a.markup("<span").attr("id",b+"_preview").attr("class",Y).markup(">").markup("</span>"),this.renderText(a,b,c,{manualEntry:this.manualEntry}),this.renderDivClose(a),this.renderIconButton(a,{id:b+"_picker",icon:wb,text:i("COLOR_PICKER",c.metaData.prompt),addContainer:!0,containerClass:A}),c.metaData.quickPicks=function(){var a,b=[];for(a=0;a<d.length;a++)b.push({d:d[a],r:d[a]});return b},this.renderQuickPickButton(a,b,c,!0)},init:function(b,c){var d=this,e=b.attr("id"),f=a("#"+e+"_picker"),g=a("#"+e+"_preview");this["super"]("init",b,c),b.ColorPicker({eventName:"xxx",onSubmit:function(){b.trigger("change").ColorPickerHide()},onBeforeShow:function(){a(this).ColorPickerSetColor(this.value)},onShow:function(b){return a(b).fadeIn("fast").position({my:"right top",at:"right bottom",of:"#"+e+"_picker"}).css("z-index",200),!1},onHide:function(c){return a(c).fadeOut("fast"),b.trigger("change"),!1},onChange:function(c,d){var e=b.attr("id"),f=a("#"+e+"_preview"),g="#"+d.toUpperCase();f.css("background-color",g),b.val(g)}}).ColorPickerHide(),b.on("change",function(a){var e=a.target;e.value=e.value.toUpperCase(),d.setValue(b,c,e.value)}),f.on("click",function(a){b.ColorPickerShow(),a.preventDefault()}),g.css("background-color",b.val()),this.initQuickPicks(b,c)},setValue:function(b,c,d){var e=b.attr("id"),f=a("#"+e+"_preview");b.val(d),f.css("background-color",d),c.value=d}},Gb.TEXT),m(Gb.POPUP_LOV,{manualEntry:!1,init:function(a,b){this["super"]("init",a,b)}},Gb.COMBOBOX),a.widget("apex.propertyEditor",{version:"5.0",widgetEventPrefix:"propertyeditor",baseId:null,nextId:1,idMap:{},propMap:{},currentPropertyName:null,options:{data:{propertySet:[],componentCount:[]},idPrefix:null,showAll:!1,labelsAlwaysAbove:!1,hideDisplayGroups:!1,stackLabelsWidth:280,focusPropertyName:null,externalEdit:null,expand:null,collapse:null,activate:null,deactivate:null,change:null},_create:function(){var b=this.options;if(!b.data||!b.data.propertySet)throw"Missing required data option.";this.baseId=(b.idPrefix||this.element[0].id||"pe")+"_",this.element.addClass(n),this.options.showAll&&this.element.addClass($),this._on(this._eventHandlers),this.refresh(),this.options.labelsAlwaysAbove?this.element.addClass(o):this.element.hasClass("resize")?(this._on({resize:function(b){this.options.labelsAlwaysAbove||this.element.toggleClass(o,a(b.target).width()<this.options.stackLabelsWidth)}}),this.element.toggleClass(o,this.element.width()<this.options.stackLabelsWidth)):this.element.removeClass(o)},_eventHandlers:{click:function(b){var c=null,d=a(b.target);d.is("."+t)?c=d.parent():d.parent("."+t).length>0&&(c=d.parent().parent()),c&&this._toggle(c),d.attr("id")===this.baseId+"externalEdit"&&this.options.externalEdit()},keydown:function(b){var c=null,d=!1,e=a.ui.keyCode,f=b.keyCode,g=a(b.target);g.is("."+t)&&(f===e.HOME?c=g.parent().parent().children(":visible").first():f===e.END?c=g.parent().parent().children(":visible").last():f===e.DOWN?(c=g.parent().nextAll().filter(":visible").first(),0===c.length&&(c=g.parent().parent().children(":visible").first())):f===e.UP?(c=g.parent().prevAll().filter(":visible").first(),0===c.length&&(c=g.parent().parent().children(":visible").last())):f===e.LEFT?(this._collapse(g.parent()),d=!0):f===e.RIGHT?(this._expand(g.parent()),d=!0):(f===e.SPACE||f===e.ENTER)&&(this._toggle(g.parent()),d=!0),d&&b.preventDefault(),c&&(c.children("."+t)[0].focus(),b.preventDefault()))},"focusin div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");c.addClass(gb+" "+hb),this._activate(c)},"focusout div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");c.removeClass(gb+" "+hb)},"change div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");this._checkForChange(c)},"focusin div.a-PropertyEditor-propertyGroup-header":function(b){this._deactivate(),a(b.target).closest("div.a-PropertyEditor-propertyGroup-header").addClass(hb)},"focusout div.a-PropertyEditor-propertyGroup-header":function(b){a(b.target).closest("div.a-PropertyEditor-propertyGroup-header").removeClass(hb)}},_destroy:function(){this.element.removeClass(n+" "+$).empty()},_setOption:function(a,b){if(this._super(a,b),"data"===a){if(!b.propertySet)throw"Missing required properties.";this.refresh()}else"showAll"===a?this.element.toggleClass($,!!b):"labelsAlwaysAbove"===a&&(b?this.element.addClass(o):this.element.hasClass("resize")?this.element.toggleClass(o,this.element.width()<this.options.stackLabelsWidth):this.element.removeClass(o))},_callPropertyInit:function(a){var c=a.propertyName,d=this.element.find("["+Eb+"="+b.escapeCSS(c)+"]");Jb[a.metaData.type].init(d,a)},_renderLabel:function(a,c){var d=b.htmlBuilder(),e=c.errors.length>0,f=c.warnings.length>0,h=c.value===Hb,i=C,m=[],n=this._getId(c)+"_label";m.push(B),Jb[c.metaData.type].labelVisible?(e||f||h)&&(i+=" "+D):(i+=" "+Ab,m.push(B+"--hiddenLabel")),j(a,{"class":m}),Jb[c.metaData.type].noLabel?a.markup("<span").attr("id",n).attr("class",i).markup(">"):a.markup("<label").attr("id",n).attr("for",this._getId(c)).attr("class",i).markup(">"),Jb[c.metaData.type].labelVisible&&(e&&l(d,rb),f&&l(d,sb),c.value===Hb&&l(d,ub)),a.markup(d.html),a.content(c.metaData.prompt),Jb[c.metaData.type].labelVisible&&(e&&a.markup("<span").attr("class",Ab).markup(">").content(g("ERROR_POSTFIX")).markup("</span>"),f&&a.markup("<span").attr("class",Ab).markup(">").content(g("WARNING_POSTFIX")).markup("</span>"),c.value===Hb&&a.markup("<span").attr("class",Ab).markup(">").content(g("VALUE_VARIES_POSTFIX")).markup("</span>")),a.markup(Jb[c.metaData.type].noLabel?"</span>":"</label>"),k(a)},_countVisibleProperties:function(a){var b,c,d,e=this.options.componentCount>0;for(b=0,c=0;c<a.length;c++)d=a[c],e&&d.metaData.isUnique||this._isCommon(d)&&(b+=1);return b},_renderDisplayGroup:function(a,b,c){var d,e,f,g,h,i,j,m,n=this.options.componentCount>0,o=b.properties;if(g=o.length,m=p,this.options.hideDisplayGroups)for(d=0;g>d;d++)e=o[d],n&&e.metaData.isUnique||this._renderProperty(a,e);else{for(h=this._countVisibleProperties(o),j=!b.collapsed,j?(f=ob,m+=" "+kb):f=pb,0===h&&(m+=" "+$),i=this.baseId+"g_"+c,a.markup("<div role='group'").attr("class",m).attr(Fb,b.displayGroupId).attr("aria-labelledby",i+"_LABEL").markup(">"),a.markup("<div tabindex='0'").attr("class",t).attr("aria-controls",i).attr("aria-expanded",j?"true":"false").attr("aria-labelledby",i+"_LABEL").markup(">"),l(a,f),a.markup("<h2").attr("class",u).attr("id",i+"_LABEL").markup(">").content(b.displayGroupTitle).markup("</h2>"),k(a),a.markup("<div").attr("id",i).attr("class",v),j||a.attr("style","display:none;"),a.markup(">"),d=0;g>d;d++)e=o[d],n&&e.metaData.isUnique||this._renderProperty(a,e);k(a),k(a)}},_renderDisplayGroups:function(a){var b,c=this.options.data.propertySet;for(b=0;b<c.length;b++)this._renderDisplayGroup(a,c[b],b)},_renderProperty:function(a,b){var c,d=[w];Jb[b.metaData.type].stacked&&d.push(x),Jb[b.metaData.type].minHeight&&(c="min-height: "+Jb[b.metaData.type].minHeight+"px;"),Jb[b.metaData.type].maxHeight&&(c="max-height: "+Jb[b.metaData.type].maxHeight+"px;",d.push(Z)),Jb[b.metaData.type].height&&(c="max-height: "+Jb[b.metaData.type].height+"px;",d.push(Z)),b.errors.length>0&&d.push(ib),b.warnings.length>0&&d.push(jb),b.value===Hb&&d.push(lb),this._isCommon(b)||d.push($);var e={"class":d,style:c};j(a,e),b.metaData.isRequired&&l(a,qb,g("REQUIRED")),this._renderLabel(a,b),Jb[b.metaData.type].render(a,this._getId(b),b),b.metaData.unit&&(a.markup("<div").attr("class",W).markup(">"),a.markup("<span").attr("class",X).attr("id",this._getId(b)+"_unit").markup(">").content(b.metaData.unit).markup("</span>"),a.markup("</div>")),k(a)},_getProperty:function(a){return this.propMap[a]},_getId:function(a,b){var c;return c=this.idMap[a.propertyName],c||(c=this.baseId+this.nextId,this.nextId+=1,this.idMap[a.propertyName]=c),b&&(c+=b),c},_getElement:function(b,c){return a("#"+this._getId(b,c))},_isCommon:function(a){return a.metaData.isCommon||a.value!==a.metaData.defaultValue||a.errors.length>0||a.warnings.length>0},_activate:function(a){var b=this,c=a.find("["+Eb+"]").attr(Eb),d=this._getProperty(c);this.currentPropertyName!==c&&(this._deactivate(),this.currentPropertyName=c,setTimeout(function(){b._trigger("activate",{},d)},0))},_deactivate:function(){var a=this;this.currentPropertyName=null,setTimeout(function(){a._trigger("deactivate")},0)},_checkForChange:function(b){var d,e,f,g,h=b.find("["+Eb+"]").attr(Eb),i=this._getProperty(h),j=i.oldValue;if(c.info("propertyEditor _checkForChange",b),e=this.getValue(b,i),f=a("#"+this.idMap[h]),f.hasClass(lb)&&""===e&&(e=Hb),e!==j){if(i.value=e,i.oldValue=e,this.options.showAll){b.toggleClass($,!this._isCommon(i)),g=b.closest("div."+p);var k=g.find("div."+w).filter(":not(."+$+")").length;g.toggleClass($,0===k)}d={propertyName:h,property:this._getProperty(h),previousValue:j,property$:b},this._trigger("change",{},d)}},_expand:function(a){a.hasClass(kb)||(a.addClass(kb).children("."+v).show(),a.children("."+t).attr("aria-expanded","true").children("."+nb).removeClass(pb).addClass(ob),this._trigger("expand",{},{displayGroupId:a.attr("data-group-id")}))},_collapse:function(a){a.hasClass(kb)&&(a.removeClass(kb).children("."+v).hide(),a.children("."+t).attr("aria-expanded","false").children("."+nb).removeClass(ob).addClass(pb),this._trigger("collapse",{},{displayGroupId:a.attr("data-group-id")}))},_toggle:function(a){a.hasClass(kb)?this._collapse(a):this._expand(a)},refresh:function(){var d,e,f,h,i,j=b.htmlBuilder(),k=this.options.componentCount,l=this.options.data.propertySet,m=this.options.externalEdit;for(this.nextId=1,this.idMap={},this.propMap={},c.info("propertyEditor refresh"),this._deactivate(),d=0;d<Ib.length;d++)a("#"+Ib[d]).remove();if(Ib=[],0===k||1===k&&0===l.length?i=g("NO_COMMON_PROPERTIES"):0===l.length&&(i=g("NO_COMPONENTS_SELECTED")),i)return j.markup("<div").attr("class",q).markup(">"),j.markup("<span").attr("class",yb).markup(">"),j.markup("<span").attr("class",Ab).markup(">").content(g("WARNING")).markup("</span>").markup("</span>"),j.markup("<p").attr("class",r).markup(">").content(i).markup("</p>"),j.markup("</div>"),this.element.html(j.toString()),void this.element.addClass(mb);for(this.element.removeClass(mb),m&&j.markup("<div").attr("class",s).markup(">").markup("<button").attr("type","button").attr("id",this.baseId+"externalEdit").attr("class",_+" "+db+" "+eb).markup(">").content(g("EDIT_COMPONENT")).markup("</button>").markup("</div>"),this._renderDisplayGroups(j),this.element.children().remove(),this.element.html(j.toString()),d=0;d<l.length;d++)for(f=l[d].properties,e=0;e<f.length;e++)h=f[e],this.propMap[h.propertyName]=h,this._callPropertyInit(h);this.options.focusPropertyName&&this.focus(this.options.focusPropertyName)},getPropertyValue:function(a){var b=this._getProperty(a),c=this._getElement(b),d=b.metaData.type;return Jb[d].getValue(c.closest("div."+w))},updatePropertyValue:function(a,b,d){var e,f,g,h;c.info("propertyEditor updatePropertyValue: Property "+a+" to "+b),f=this._getProperty(a),f&&(g=this._getElement(f),h=f.metaData.type,e=f.value,b!==e&&(f.value=b,f.oldValue=b,b!==Hb?Jb[h].setValue(g,f,b):this.updateProperty(f),d||g.trigger("change")))},updateProperty:function(a){var d,e,f=this.options.data.propertySet,g=b.htmlBuilder();for(c.info("propertyEditor updateProperty: ",a),d=0;d<f.length;d++)for(e=0;e<f[d].properties.length;e++)f[d].properties[e].propertyName===a.propertyName&&(f[d].properties.splice(e,1),f[d].properties.splice(e,0,a));this._renderProperty(g,a),this._getElement(a).closest("div."+w).replaceWith(g.toString()),Jb[a.metaData.type].destroy(this._getElement(a)),this._callPropertyInit(a)},addProperty:function(d){var e,f,g,h,i,j,k,l=b.htmlBuilder(),m=b.htmlBuilder(),n=this.options.data.propertySet,o=0,p=0,q=!1,r=!1,s=a.extend({property:{},prevPropertyName:null,displayGroup:{},prevDisplayGroupId:null},d);for(c.info("propertyEditor addProperty: ",s),e=0;e<n.length;e++)if(n[e].displayGroupId===s.property.metaData.displayGroupId){p=e,q=!0;break}if(!q){for(f=0;f<n.length;f++)if(n[f].displayGroupId===s.prevDisplayGroupId){p=f+1;break}n.splice(p,0,s.displayGroup)}for(i=n[p].properties,g=0;g<i.length;g++)if(i[g].propertyName===s.property.propertyName){o=g,r=!0;break}if(!r){for(h=0;h<i.length;h++)if(i[h].propertyName===s.prevPropertyName){o=h+1;break}n[p].properties.splice(o,0,s.property),this.propMap[s.property.propertyName]=s.property,q?(this._renderProperty(l,s.property),0===o?this.element.find("div["+Fb+"="+b.escapeCSS(s.displayGroup.displayGroupId)+"]").find("div."+v).prepend(l.toString()):a("#"+this.idMap[s.prevPropertyName]).closest("div."+w).after(l.toString()),j=this._countVisibleProperties(n[p].properties),k=this.element.find("div["+Fb+"="+b.escapeCSS(s.displayGroup.displayGroupId)+"]"),j>0&&k.hasClass($)&&k.removeClass($)):(this._renderDisplayGroup(m,s.displayGroup,p),0===p?this.element.prepend(m.toString()):this.element.find("div["+Fb+"="+b.escapeCSS(s.prevDisplayGroupId)+"]").after(m.toString())),this._callPropertyInit(s.property)}},removeProperty:function(a){var b,d,e,f,g,h=!1,i=this.options.data.propertySet,j=!1;for(c.info("propertyEditor removeProperty: ",a),this.currentPropertyName===a&&this._deactivate(),b=0;b<i.length;b++)if(!j)for(h=1===i[b].properties.length?!0:!1,d=0;d<i[b].properties.length;d++)if(i[b].properties[d].propertyName===a){f=i[b].properties[d],e=this._getElement(f),g=e.closest("div."+p),h?(i.splice(b,1),g.remove()):(Jb[f.metaData.type].destroy(e),i[b].properties.splice(d,1),e.closest("div."+w).remove()),j=!0;break}},expand:function(a){var c=this.element.find("div."+p).filter("["+Fb+"="+b.escapeCSS(a)+"]");this._expand(c)},expandAll:function(){var b=this;this.element.find("div."+p).each(function(){b._expand(a(this))})},collapseAll:function(){var b=this;this.element.find("div."+p).each(function(){b._collapse(a(this))})},getValueVariesConstant:function(){return Hb},setValue:function(a,b,c){Jb[b.metaData.type].setValue(a,b,c)},getValue:function(a,b){return Jb[b.metaData.type].getValue(a)},focus:function(a){var b,c,d,e;e=a?a:this.currentPropertyName?this.currentPropertyName:this.options.data.propertySet[0].properties[0].propertyName,c=this._getProperty(e),d=this._getElement(c),b=d.closest("div."+p),b.hasClass(kb)||this._expand(b),Jb[c.metaData.type].setFocus(d,c)},saveProperty:function(a){var b,c,d;a?b=a:this.currentPropertyName&&(b=this.currentPropertyName),b&&(c=this._getProperty(b),d=this._getElement(c),d.trigger("change"))},goToGroup:function(a){var c=this.element.find("div."+p).filter("["+Fb+"="+b.escapeCSS(a)+"]").find("["+Eb+"]").first().attr(Eb);
this.focus(c)}}),a.apex.propertyEditor.PROP_TYPE=Gb,a.apex.propertyEditor.addPropertyType=m}(apex.jQuery,apex.util,apex.debug,apex.locale,apex.lang);
!function(a,b,c,d){"use strict";function e(a){return d.getMessage("LOV_DIALOG."+a)}var f="a-PopupLOV",g=f+"-search",h=f+"-filters",i=f+"-filterGroup",j=i+"--lineFilter",k=f+"-filterLabel",l=f+"-filterItem",m=l+"-label",n=l+"-select",o=l+"-text",p=f+"-results",q=f+"-resultsSet",r=q+"-link",s="a-SearchBox",t=s+"-field",u=s+"-icon",v=s+"-input",w="a-Icon",x="icon-search",y="icon-right-chevron",z="a-Button",A=z+"--noLabel",B=z+"--withIcon",C=z+"--slim",D=z+"--pillEnd",E=z+"--primary",F="a-Form-label",G="a-Form-field",H="a-Form-select",I="visuallyhidden",J="u-textRight",K="u-textLeft",L="u-textCenter",M="ui-button-container";a.widget("apex.lovDialog",a.ui.dialog,{version:"5.0",widgetEventPrefix:"lovdialog",baseId:null,filterHasSubFilter:[],filterIsButtonSet:[],filterIsSearch:[],filterFiltersOnChange:[],currentFilters:{},options:{filterLov:null,idPrefix:null,multiValue:!1,filters:[],columnDefinitions:[]},_create:function(){var b,c=this.options;if(!a.isFunction(c.filterLov))throw"Missing required 'filterLov' option.";if(0===c.columnDefinitions.length)throw"Missing required 'columnDefinitions' option.";this.baseId=(c.idPrefix||this.element[0].id||"lovDialog")+"_",this.element.addClass(f);for(var e=0;e<this.options.columnDefinitions.length;e++)this.options.columnDefinitions[e]=a.extend({alignment:"left",escape:!0},this.options.columnDefinitions[e]);return this.filterHasSubFilter=[],this.filterIsButtonSet=[],this.filterIsSearch=[],this.filterFiltersOnChange=[],this.currentFilters={},this.options.closeText=d.getMessage("APEX.DIALOG.CLOSE"),b=this._super(),this._renderLovDialog(),b},_renderLovDialog:function(){var c,d,g,h,i,j,k,l=this,m=b.htmlBuilder();for(m.markup("<div").attr("class",f).markup(">"),this._renderFilters(m,this.options.filters),m.markup("<div").attr("class",p).markup(">"),m.markup("<table").attr("class",q).attr("id",l.baseId+"lovEntries").markup(">").markup("<caption").attr("class",I).markup(">").content(e("LOV_ENTRIES")).markup("</caption>"),m.markup("<tr>"),this.options.multiValue&&m.markup("<th>").content(e("SELECT")).markup("</th>"),c=0;c<this.options.columnDefinitions.length;c++)k=this.options.columnDefinitions[c].title,j="left"===this.options.columnDefinitions[c].alignment?K:L,m.markup("<th").attr("class",j).optionalAttr("width",this.options.columnDefinitions[c].width).markup(">"),this.options.columnDefinitions[c].escape?m.content(k):m.markup(k),m.markup("</th>");for(m.markup("</tr>"),m.markup("</table>"),m.markup("</div>"),this.element.empty().append(m.toString()),this._lovEntries$=a("#"+this.baseId+"lovEntries"),this._filterLov(this.options.filters),this._on({click:this._resultsLinkClick}),g=0;g<this.filterIsSearch.length;g++)this._on("#"+this.filterIsSearch[g]+"_button",{click:this._doSearch}),this._on("#"+this.filterIsSearch[g],{keypress:function(a){13===a.which&&(l._doSearch(a),a.preventDefault())}});for(i=0;i<this.filterFiltersOnChange.length;i++)this._on("#"+this.filterFiltersOnChange[i],{change:this._doSearch});for(d=0;d<this.filterIsButtonSet.length;d++)a("#"+this.filterIsButtonSet[d]).buttonset();for(h=0;h<this.filterHasSubFilter.length;h++)this._on("#"+this.filterHasSubFilter[h],{change:this._filterHasSubFilterChange})},_resultsLinkClick:function(b){var c,d,e,f,g=a(b.target),h=!1;if(g.hasClass(r)){c=this.lovEntries[g.data("lov-entry-idx")];for(var i in this.currentFilters){for(d=0;d<this.options.filters.length;d++)if(this.options.filters[d].name===i){if(h=!0,this.options.filters[d].lov)for(e=0;e<this.options.filters[d].lov.length;e++)if(this.options.filters[d].lov[e].value===this.currentFilters[i]){this.options.filters[d].lov[e].valueFormatting&&(f=this.options.filters[d].lov[e].valueFormatting);break}break}if(h)break}f&&a.extend(c,{valueFormatting:f}),this._trigger("valueSelected",{},c),this.options.multiValue===!1&&this.close()}},_doSearch:function(){this._filterLov(this.options.filters)},_filterHasSubFilterChange:function(c){for(var d=b.htmlBuilder(),e=this.options.filters,f=a(c.target),g=f.data("filter-name"),h=0;h<e.length;h++)if(e[h].name===g)for(var j=0;j<e[h].lov.length;j++)if(e[h].lov[j].filters)if(f.val()===e[h].lov[j].value)this._renderFilters(d,e[h].lov[j].filters,!0),f.closest("div."+i).after(d.toString());else for(var k=0;k<e[h].lov[j].filters.length;k++)this.element.find("[data-filter-name="+e[h].lov[j].filters[k].name+"]").closest("div."+i).remove()},_filterLovEntries:function(a){var b,c,d,e,f=[];if(""!==a){for(d=a instanceof RegExp?a:new RegExp(a,"i"),b=0;b<this.lovEntries.length;b++)for(c=0;c<this.options.columnDefinitions.length;c++)if(e=this.lovEntries[b][this.options.columnDefinitions[c].name]+"",e.match(d)){f.push(this.lovEntries[b]);break}this.lovEntries=f}},_renderLovEntries:function(a,c){var d,f,g,h,i,j=b.htmlBuilder(),k=this;for(this.lovEntries=a.slice(),c&&this._filterLovEntries(c),d=0;d<this.lovEntries.length;d++){for(j.markup("<tr>"),this.options.multiValue&&j.markup("<td>").markup("<input").attr("type","checkbox").attr("title",e("SELECT")).attr("data-lov-row",d).markup(" />").markup("</td>"),f=0;f<this.options.columnDefinitions.length;f++)i=this.options.columnDefinitions[f].cellFormatting?function(a){j.markup(k.options.columnDefinitions[f].cellFormatting(a))}:this.options.columnDefinitions[f].escape?function(a){j.content(a)}:function(a){j.markup(a)},h=this.lovEntries[d][this.options.columnDefinitions[f].name],h=0!==h?h||"":h,"left"===this.options.columnDefinitions[f].alignment?g=K:"right"===this.options.columnDefinitions[f].alignment?g=J:"center"===this.options.columnDefinitions[f].alignment&&(g=L),j.markup("<td").attr("class",g).markup(">"),0===f?(j.markup("<a").attr("class",r).attr("href","#").attr("data-lov-entry-idx",d).markup(">"),i(h),j.markup("</a>")):i(h),j.markup("</td>");j.markup("</tr>")}this._lovEntries$.find("tr").after(j.toString())},_updateCurrentFilters:function(b){var c,d,e,f;for(c=0;c<b.length;c++)if(d=b[c].name,a("#"+this.baseId+d).length>0&&(e=a("#"+this.baseId+b[c].name),a.inArray(b[c].type,["text","select","search"])>-1?f=e.val():"buttonset"===b[c].type&&(f=e.find("input:checked").val()),this.currentFilters[d]=f,b[c].lov))for(var g=0;g<b[c].lov.length;g++)b[c].lov[g].value===f&&b[c].lov[g].filters&&this._updateCurrentFilters(b[c].lov[g].filters)},_filterLov:function(a){var b=this;this._lovEntries$.find("tr").not(":first").remove(),this._updateCurrentFilters(a),this.options.filterLov(this.currentFilters,function(a,c){b._renderLovEntries(a,c)})},_renderSearch:function(a,b){a.markup("<div").attr("class",g).markup(">"),a.markup("<div").attr("class",s).markup(">"),a.markup("<div").attr("class",t).markup(">"),a.markup("<span").attr("class",u).markup(">"),a.markup("<span").attr("class",w+" "+x).markup(">").markup("</span>"),a.markup("</span>"),a.markup("<input").attr("id",this.baseId+b.name).attr("data-filter-name",b.name).attr("type","text").attr("class",v).attr("title",b.title).attr("placeholder",b.title).attr("aria-controls",this.baseId+"lovEntries").attr("value",b.defaultValue?b.defaultValue:"").optionalBoolAttr("aria-required",b.isRequired).markup(" />"),a.markup("</div>"),a.markup("<button").attr("class",z+" "+A+" "+B+" "+C+" "+D+" "+E).attr("value",e("GO")).attr("type","button").attr("id",this.baseId+b.name+"_button").attr("title",e("GO")).markup(">"),a.markup("<span").attr("class",w+" "+y).markup(">").markup("</span>"),a.markup("<span").attr("class",I).markup(">").content("Go").markup("</span>"),a.markup("</button>"),a.markup("</div>"),a.markup("</div>"),this.filterIsSearch.push(this.baseId+b.name)},_renderText:function(a,b){a.markup("<div").attr("class",i+" "+j).markup(">"),a.markup("<span").attr("class",k).markup(">"),a.markup("<label").attr("for",this.baseId+b.name).attr("class",F+" "+m).markup(">").content(b.title).markup("</label>"),a.markup("</span>"),a.markup("<span").attr("class",l).markup(">"),a.markup("<input").attr("id",this.baseId+b.name).attr("data-filter-name",b.name).attr("type","text").attr("class",G+" "+o).attr("value",b.defaultValue?b.defaultValue:"").optionalBoolAttr("aria-required",b.isRequired).markup(" />"),a.markup("</span>"),a.markup("</div>")},_renderSelect:function(a,b){function c(c){var d=b.defaultValue===c.value;a.markup("<option").attr("value",c.value).optionalAttr("selected",d).markup(">").content(c.display).markup("</option>"),c.filters&&(this.filterHasSubFilter.push(this.baseId+b.name),d&&(f=c.filters))}var d,f=[];for(this.filterFiltersOnChange.push(this.baseId+b.name),a.markup("<div").attr("class",i+" "+j).markup(">"),a.markup("<span").attr("class",k).markup(">"),a.markup("<label").attr("for",this.baseId+b.name).attr("class",F+" "+m).markup(">").content(b.title).markup("</label>"),a.markup("</span>"),a.markup("<span").attr("class",l).markup(">"),a.markup("<select").attr("id",this.baseId+b.name).attr("data-filter-name",b.name).attr("size","1").attr("class",G+" "+H+" "+n).attr("aria-controls",this.baseId+"lovEntries").optionalBoolAttr("aria-required",b.isRequired).markup(">"),b.isRequired||c({display:e("SELECT_VALUE"),value:""}),d=0;d<b.lov.length;d++)c(b.lov[d]);return a.markup("</select>"),a.markup("</span>"),a.markup("</div>"),f},_renderButtonSet:function(a,b){var c,d,e=[];for(this.filterIsButtonSet.push(this.baseId+b.name),this.filterFiltersOnChange.push(this.baseId+b.name),a.markup("<div").attr("class",i+" "+j).markup(">"),a.markup("<span").attr("class",l).markup(">"),a.markup("<span").attr("id",this.baseId+b.name).attr("class","").attr("role","group").attr("aria-label",b.title).markup(">"),c=0;c<b.lov.length;c++)d=b.defaultValue===b.lov[c].value,a.markup("<div").attr("class",M).markup(">"),a.markup("<input").attr("class","").attr("id",this.baseId+b.name+"_"+b.lov[c].value).attr("type","radio").optionalAttr("checked",d).attr("value",b.lov[c].value).attr("name",this.baseId+b.name).attr("data-filter-name",b.name).markup(" />"),a.markup("<label").attr("for",this.baseId+b.name+"_"+b.lov[c].value).attr("class","").markup(">").content(b.lov[c].display).markup("</label>"),a.markup("</div>"),b.lov[c].filters&&(this.filterHasSubFilter.push(this.baseId+b.name),d&&(e=b.lov[c].filters));return a.markup("</span>"),a.markup("</span>"),a.markup("</div>"),e},_renderFilters:function(a,b,c){var d,e=[];for(b.length>0&&!c&&a.markup("<div").attr("class",h).markup(">"),d=0;d<b.length;d++){switch(e=[],b[d].type){case"search":this._renderSearch(a,b[d]);break;case"text":this._renderText(a,b[d]);break;case"select":e=this._renderSelect(a,b[d]);break;case"buttonset":e=this._renderButtonSet(a,b[d])}e.length>0&&this._renderFilters(a,e,!0)}b.length>0&&!c&&a.markup("</div>")},close:function(){return this.element.removeClass(f).empty(),this._super()}})}(apex.jQuery,apex.util,apex.debug,apex.lang);
!function(a,b,c,d,e,f,g,h){"use strict";function i(a){return d.getMessage("PD.PE."+a)}function j(a){var b=i(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.format.apply(this,c)}function k(a){var b=i(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return d.formatNoEscape.apply(this,c)}function l(a){var b,c,d={appId:"",pageId:"",session:"&SESSION.",request:"",debug:"&DEBUG.",clearCache:"",resetPagination:"Y",itemNames:"",itemValues:"",printerFriendly:"NO",url:"",successMessage:"Y"},e=/f\?p=([^:]*):?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?:?([^:]*)?/i;return a&&(0===a.toLowerCase().indexOf("f?p=")?(b=a.toLowerCase().indexOf("&success_msg=#success_msg#"),b>-1?(c=a.substr(0,b),d.successMessage="Y"):(c=a,d.successMessage="N"),e.test(c)&&(RegExp.$1&&(d.appId=RegExp.$1),RegExp.$2&&(d.pageId=RegExp.$2),RegExp.$3&&(d.session=RegExp.$3),RegExp.$4&&(d.request=RegExp.$4),RegExp.$5&&(d.debug=RegExp.$5),RegExp.$6&&(d.clearCache=RegExp.$6),RegExp.$7&&(d.itemNames=RegExp.$7),RegExp.$8&&(d.itemValues=RegExp.$8),RegExp.$9&&(d.printerFriendly=RegExp.$9)),d.clearCache&&d.clearCache.indexOf("RP")>-1?(d.resetPagination="Y",d.clearCache=d.clearCache.replace("RP",""),","===d.clearCache.charAt(0)&&(d.clearCache=d.clearCache.substr(1))):d.resetPagination="N",d.itemNames&&(d.itemNames=d.itemNames.split(",")),d.itemValues&&(d.itemValues=d.itemValues.split(","))):d.url=a),d}function m(a,b){var c,d;for(c=0;c<a.length;c++)if(0===c)d=a[c].getProperty(b).getValue();else if(d!==a[c].getProperty(b).getValue()){d=v.propertyEditor("getValueVariesConstant");break}return d}function n(a,c){var d,e,f=[],g=[];for(d in a)if(a.hasOwnProperty(d))for(f=a[d],e=0;e<f.length;e++)b.inArray(f[e],c)>-1&&-1===b.inArray(d,g)&&g.push(d);return g}function o(a,c){var d,e,f,g,h=[],i=[],j=a.getMetaData(),k=[Z.SELECT_LIST,Z.COMPONENT,Z.SUPPORTED_UI];if(c.length>1&&-1!==b.inArray(j.type,k)){for(d=0;d<c.length;d++){for(g={values:c[d].getProperty(a.id).getMetaData().lovValues(),map:{}},e=0;e<g.values.length;e++)g.map[g.values[e].r]=!0;i.push(g)}for(i.sort(function(a,b){return a.values.length-b.values.length}),h=i[0].values,e=1;e<i.length;e++)for(f=0;f<h.length;f++)i[e].map.hasOwnProperty(h[f].r)||(h.splice(f,1),f-=1);j.lovValues=h}return{metaData:j,propertyName:a.id,errors:a.errors,warnings:a.warnings,value:m(c,a.id),oldValue:m(c,a.id)}}function p(a){var c,d="";d=a?a:k("TITLE"),c=b("#right_col").find(".ui-tabs-anchor"),c.eq(0).text(d),c.eq(1).hide()}function q(){A=null,v.propertyEditor("option",{data:{propertySet:[],propertyValues:[]}}),f.clearHelpText(),p(),b("#peToolbar").find("button").each(function(){b(this).prop("disabled",!0)}),a.unobserver(B,{})}function r(c,d){var e,f,g="";if(c.length>0){for(e=0;e<c.length;e++)if(0===e)g=a.getComponentType(c[e].typeId).title.singular,f=c[e].typeId;else{if(c[e].typeId!==c[e-1].typeId){g=i("MULTIPLE_TYPES");break}g=a.getComponentType(c[e].typeId).title.plural,f=c[e].typeId}A=c,s(c,d),p(g,f),b("#peToolbar").find("button").each(function(){b(this).prop("disabled",!1)})}else q()}function s(d,e){var h,i,j,k,l,p,q,s,t,w,x,y,z,C,D={},E=[],F={},G=[];for(x=a.getComponentType(d[0].typeId),w=x.isSharedComponent?[d[0].getProperty(x.displayPropertyId)]:d[0].getProperties(),h=0;h<w.length;h++)D[w[h].id]=w[h].getMetaData();if(w.sort(function(a,b){return D[a.id].displaySeq-D[b.id].displaySeq}),d.length>1)for(h=0;h<w.length;h++){if(p=w[h],t=!1,(D[p.id].isUnique||b.inArray(D[p.id].type,$)>-1)&&(t=!0),!t)for(i=1;i<d.length;i++)if(s=d[i],!s.getProperty(p.id)){t=!0;break}t&&(delete D[p.id],w.splice(h,1),h-=1)}for(h=0;h<w.length;h++)p=w[h],k=p.id,l=m(d,k),q=D[k].displayGroupId,D[k].type!==Z.HIDDEN&&(F.hasOwnProperty(q)||(E.push({displayGroupId:q,displayGroupTitle:a.getDisplayGroup(q).title,collapsed:!!fb[q],properties:[]}),F[q]=E.length-1),E[F[q]].properties.push(o(p,d)));for(j=0;j<E.length;j++)G.push({type:"action",label:E[j].displayGroupTitle,value:E[j].displayGroupId,action:function(){return u(),v.propertyEditor("goToGroup",this.value),!0}});z={items:G},C=b("#pe_goto_group_menu"),C.menu(z),1===d.length&&(s=d[0],x.isSharedComponent&&(y=function(){g.redirect(x.editUrl.replace(/%session%/g,$v("pInstance")).replace(/%pk_value%/g,s.id).replace(/%application_id%/g,a.getCurrentAppId()).replace(/%page_id%/g,a.getCurrentPageId()))}),s.isOnGlobalPage()&&(y=function(){f.setPageSelection(a.getCurrentAppId(),s.pageId,s.typeId,s.id,function(){})})),v.propertyEditor("option",{focusPropertyName:e,externalEdit:y,data:{propertySet:E,componentCount:d.length}}),a.unobserver(B,{}),a.observer(B,{components:d,events:[a.EVENT.CHANGE]},function(d){var e,f,g={},h=[];for(c.trace("%s: CHANGE component notification received",B,d),e=0;e<d.length;e++){h.push(d[e].component);for(f in d[e].properties)d[e].properties.hasOwnProperty(f)&&-1!==b.inArray(a.EVENT.CHANGE,d[e].properties[f])&&(g[f]=!0)}for(f in g)g.hasOwnProperty(f)&&v.propertyEditor("updatePropertyValue",f,m(h,f),!0)},!0),a.observer(B,{components:d,events:[a.EVENT.ADD_PROP,a.EVENT.REMOVE_PROP]},function(e){var f,g,h,i,j,k,l,m,p,q,r,s,t,u,w,x={},y=[],z=[];for(c.trace("%s: ADD_PROP/REMOVE_PROP notification received",B,e),k=0;k<e.length;k++)y.push(e[k].component);for(s=n(e[0].properties,[a.EVENT.ADD_PROP]),f=a.getComponentType(d[0].typeId),g=f.isSharedComponent?[d[0].getProperty(f.displayPropertyId)]:d[0].getProperties(),l=0;l<g.length;l++)x[g[l].id]=g[l].getMetaData();if(g.sort(function(a,b){return x[a.id].displaySeq-x[b.id].displaySeq}),d.length>1)for(m=0;m<g.length;m++){if(h=g[m],i=!1,(x[h.id].isUnique||b.inArray(x[h.id].type,$)>-1)&&(i=!0),!i)for(p=1;p<d.length;p++)if(j=d[p],!j.getProperty(h.id)){i=!0;break}i&&(delete x[h.id],g.splice(m,1),m-=1)}for(q=0;q<g.length;q++)if(w=g[q].id,x[w].type!==Z.HIDDEN)for(u=x[w].displayGroupId,0===q?z.push(u):u!==x[g[q-1].id].displayGroupId&&z.push(u),k=0;k<s.length;k++)if(w===s[k]){r=e[0].component.getProperty(s[k]),v.propertyEditor("addProperty",{property:o(r,y),prevPropertyName:g[q-1].id,displayGroup:{displayGroupId:x[g[q].id].displayGroupId,displayGroupTitle:a.getDisplayGroup(u).title,properties:[]},prevDisplayGroupId:z[z.length-2]});break}for(t=n(e[0].properties,[a.EVENT.REMOVE_PROP]),k=0;k<t.length;k++)v.propertyEditor("removeProperty",t[k])},!0),a.observer(B,{components:d,events:[a.EVENT.ERRORS,a.EVENT.NO_ERRORS,a.EVENT.WARNINGS,a.EVENT.NO_WARNINGS,a.EVENT.META_DATA]},function(b){var d,e,f,g,h,i=[];for(c.trace("%s: ERRORS/NO_ERRORS/WARNINGS/NO_WARNINGS/META_DATA notification received",B,b),d=0;d<b.length;d++)i.push(b[d].component);for(f=n(b[0].properties,[a.EVENT.ERRORS,a.EVENT.NO_ERRORS,a.EVENT.WARNINGS,a.EVENT.NO_WARNINGS,a.EVENT.META_DATA]),e=0;e<f.length;e++)g=b[0].component.getProperty(f[e]),h=o(g,i),v.propertyEditor("updateProperty",h)},!0),a.observer(B,{components:d,events:[a.EVENT.DELETE]},function(a){var b,d;for(c.trace("%s: DELETE component notification received",B,a),d=0;d<A.length;d++)for(b=0;b<a.length;b++)if(a[b].component.typeId===A[d].typeId){A.splice(d,1),d-=1;break}r(A)},!0)}function t(){v.propertyEditor("option","showAll",!1),y.addClass(L),x.removeClass(L),w=D,f.saveBoolPref(cb,!1)}function u(){v.propertyEditor("option","showAll",!0),x.addClass(L),y.removeClass(L),w=C,f.saveBoolPref(cb,!0)}var v,w,x,y,z,A=null,B="property_editor",C="A",D="C",E="a-Property",F=E+"-field",G=F+"--text",H=E+"-fieldContainer",I=E+"-setItemsHeader-header",J=E+"-setItemsTable",K=J+"-removeCol",L="is-active",M="a-Button",N="a-Property-button",O=M+"--hot",P=M+"--forceWrap",Q="linkDlgItemName",R="linkDlgItemValue",S="linkDlgSetItemsRowData",T="a-Icon",U=T+" icon-remove",V=T+" icon-popup-lov",W=T+" icon-go-to-component",X="u-VisuallyHidden",Y="ui-dialog-flushBody",Z={CSS:"CSS",JAVASCRIPT:"JAVASCRIPT",HTML:"HTML",COMPONENT:"COMPONENT",LINK:"LINK",ITEM:"ITEM",PAGE:"PAGE",PLSQL:"PLSQL",PLSQL_EXPR_VARCHAR:"PLSQL EXPRESSION VARCHAR2",PLSQL_EXPR_BOOLEAN:"PLSQL EXPRESSION BOOLEAN",PLSQL_FUNC_VARCHAR:"PLSQL FUNCTION BODY VARCHAR2",PLSQL_FUNC_BOOLEAN:"PLSQL FUNCTION BODY BOOLEAN",SQL:"SQL",SQL_EXPR:"SQL EXPRESSION",SUBSCRIPTION:"SUBSCRIPTION",SUPPORTED_UI:"SUPPORTED UI",OWNER:"OWNER",TABLE:"TABLE",COLUMN:"COLUMN",ICON:"ICON",LINK_SET_ITEMS:"LINK SET ITEMS",TEXT_EDITOR:"TEXT EDITOR",HIDDEN:"HIDDEN",XML:"XML",TEMPLATE_OPTIONS:"TEMPLATE OPTIONS",TEMPLATE_OPTIONS_GENERAL:"TEMPLATE OPTIONS GENERAL",CHECKBOXES:"CHECKBOXES",POPUP_LOV:"POPUP LOV",RADIOS:"RADIOS",SELECT_LIST:"SELECT LIST"},$=[Z.CHECKBOXES,Z.COLUMN,Z.CSS,Z.JAVASCRIPT,Z.HIDDEN,Z.HTML,Z.LINK,Z.OWNER,Z.PLSQL,Z.PLSQL_EXPR_VARCHAR,Z.PLSQL_EXPR_BOOLEAN,Z.PLSQL_FUNC_VARCHAR,Z.PLSQL_FUNC_BOOLEAN,Z.POPUP_LOV,Z.RADIOS,Z.SQL,Z.SQL_EXPR,Z.TABLE,Z.TEMPLATE_OPTIONS,Z.TEMPLATE_OPTIONS_GENERAL,Z.TEXT_EDITOR,Z.XML,Z.HTML],_="data-property-id",ab={PROP:{TYPE:"linkType",APPLICATION:"linkApp",PAGE:"linkPage",URL:"linkUrl",SET_ITEMS:"linkSetItems",CLEAR_CACHE:"linkClearCache",RESET_PAGINATION:"linkResetPagination",REQUEST:"linkRequest",SUCCESS_MESSAGE:"linkSuccessMessage"},DISPLAY_GROUP:{TARGET:"TARGET",SET_ITEMS:"SET_ITEMS",CLEAR_SESSION:"CLEAR_SESSION_STATE",ADVANCED:"ADVANCED"},TYPES:{PAGE_IN_THIS_APP:"PAGE_IN_THIS_APP",PAGE_IN_DIFF_APP:"PAGE_IN_DIFF_APP",URL:"URL"}},bb="PE_KEEP_LABELS_ABOVE",cb="PE_SHOW_ALL",db="PE_CODE_EDITOR_DLG_W",eb="PE_CODE_EDITOR_DLG_H",fb={};b.apex.propertyEditor.addPropertyType(Z.SUPPORTED_UI,{init:function(a,c){var d;this["super"]("init",a,c),d=a.html(),a.find("[data-is-supported=false]:not([value='"+e.escapeCSS(a.val())+"'])").remove(),a.append(b("<option>").attr("value","$UNSUPPORTED$").text(i("SHOW_UNSUPPORTED"))),a.change(function(){"$UNSUPPORTED$"===a.val()&&a.empty().append(d)})}},b.apex.propertyEditor.PROP_TYPE.SELECT_LIST),b.apex.propertyEditor.addPropertyType(Z.COMPONENT,{render:function(c,d,e){var f,g=[a.COMP_TYPE.LOV,a.COMP_TYPE.LIST,a.COMP_TYPE.BREADCRUMB,a.COMP_TYPE.PAGE_TEMPLATE,a.COMP_TYPE.FIELD_TEMPLATE,a.COMP_TYPE.BUTTON_TEMPLATE,a.COMP_TYPE.REGION_TEMPLATE,a.COMP_TYPE.LIST_TEMPLATE,a.COMP_TYPE.BREADCRUMB_TEMPLATE,a.COMP_TYPE.CALENDAR_TEMPLATE,a.COMP_TYPE.REPORT_TEMPLATE,a.COMP_TYPE.AUTHORIZATION,a.COMP_TYPE.BUILD_OPTION,a.COMP_TYPE.DATA_LOAD_TABLE,a.COMP_TYPE.WS_REF],h=a.getComponentType(e.metaData.lovComponentTypeId);(h.isPageComponent||-1!==b.inArray(e.metaData.lovComponentTypeId,g))&&(f={icon:W,text:k("GO_TO_COMPONENT",h.title.singular)}),this["super"]("render",c,d,e,f)},init:function(c,d){function e(){""!==c.val()&&/^[-!]?[0-9]*$/.test(c.val())?g.attr("disabled",!1):g.attr("disabled",!0)}var g=b("#"+c.attr("id")+"_btn");this["super"]("init",c,d),g.length>0&&(c.change(e),e(),g.on("click",function(){var b,c=d.value;""!==c&&(d.metaData.lovComponentTypeId!==a.COMP_TYPE.BUILD_OPTION&&d.metaData.lovComponentTypeId!==a.COMP_TYPE.AUTHORIZATION||!/^[-!]/.test(c)||(c=c.substr(1)),b=a.getComponents(d.metaData.lovComponentTypeId,{id:c})[0],f.goToComponent(b.typeId,b.id))}))}},b.apex.propertyEditor.PROP_TYPE.SELECT_LIST),b.apex.propertyEditor.addPropertyType(Z.LINK,{_getLinkType:function(a){var b;return a.url?b=ab.TYPES.URL:a.appId?0===a.appId.toLowerCase().indexOf("&flow_id.")||0===a.appId.toLowerCase().indexOf("&app_id.")||0===a.appId.toLowerCase().indexOf("#app_id#")?b=ab.TYPES.PAGE_IN_THIS_APP:a.appId&&(b=ab.TYPES.PAGE_IN_DIFF_APP):b=ab.TYPES.PAGE_IN_THIS_APP,b},_getButtonText:function(a){function b(a){var b=a;return 0===b.indexOf("http://")&&(b=b.substr(7)),0===b.indexOf("www.")&&(b=b.substr(4)),b}var c,d,e=i("LINK.NO_LINK_DEFINED");if(a)if(a!==v.propertyEditor("getValueVariesConstant"))switch(c=l(a),d=this._getLinkType(c)){case ab.TYPES.PAGE_IN_THIS_APP:e=k("LINK.PAGE_N",c.pageId);break;case ab.TYPES.PAGE_IN_DIFF_APP:e=k("LINK.APPLICATION_N",c.appId,c.pageId);break;case ab.TYPES.URL:e=b(c.url)}else e="";return e},_getDisplayGroupTarget:function(a){return{displayGroupId:ab.DISPLAY_GROUP.TARGET,displayGroupTitle:i("LINK.DG.TARGET"),properties:a?a:[]}},_getDisplayGroupSetItems:function(a){return{displayGroupId:ab.DISPLAY_GROUP.SET_ITEMS,displayGroupTitle:i("LINK.DG.SET_ITEMS"),properties:a?a:[]}},_getDisplayGroupClearSessionState:function(a){return{displayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION,displayGroupTitle:i("LINK.DG.CLEAR_SESSION"),properties:a?a:[]}},_getDisplayGroupAdvanced:function(a){return{displayGroupId:ab.DISPLAY_GROUP.ADVANCED,displayGroupTitle:i("LINK.DG.ADVANCED"),collapsed:!0,properties:a?a:[]}},_getPropertyLinkType:function(a){return b.extend(!0,{propertyName:ab.PROP.TYPE,value:"",metaData:{type:b.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:i("TYPE"),isRequired:!0,lovValues:[{d:i("LINK.TYPE.PAGE_IN_THIS_APP"),r:ab.TYPES.PAGE_IN_THIS_APP},{d:i("LINK.TYPE.PAGE_IN_DIFF_APP"),r:ab.TYPES.PAGE_IN_DIFF_APP},{d:i("LINK.URL"),r:ab.TYPES.URL}],displayGroupId:ab.DISPLAY_GROUP.TARGET},errors:[],warnings:[]},a)},_getPropertyLinkApp:function(a){return b.extend(!0,{propertyName:ab.PROP.APPLICATION,value:"",metaData:{type:b.apex.propertyEditor.PROP_TYPE.TEXT,prompt:i("APPLICATION"),isRequired:!0,displayGroupId:ab.DISPLAY_GROUP.TARGET},errors:[],warnings:[]},a)},_getPropertyLinkPage:function(a){return b.extend(!0,{propertyName:ab.PROP.PAGE,value:"",metaData:{type:Z.PAGE,prompt:i("LINK.PAGE"),isRequired:!0,displayGroupId:ab.DISPLAY_GROUP.TARGET},errors:[],warnings:[]},a)},_getPropertyLinkUrl:function(a){return b.extend(!0,{propertyName:ab.PROP.URL,value:"",metaData:{type:b.apex.propertyEditor.PROP_TYPE.TEXT,prompt:i("LINK.URL"),isRequired:!0,displayGroupId:ab.DISPLAY_GROUP.TARGET},errors:[],warnings:[]},a)},_getPropertyLinkSetItems:function(a,c){return b.extend(!0,{propertyName:ab.PROP.SET_ITEMS,value:{names:[],values:[]},metaData:{type:Z.LINK_SET_ITEMS,prompt:i("LINK.DG.SET_ITEMS"),displayGroupId:ab.DISPLAY_GROUP.SET_ITEMS,originalProperty:c},errors:[],warnings:[]},a)},_getPropertyLinkClearCache:function(a){return b.extend(!0,{propertyName:ab.PROP.CLEAR_CACHE,value:"",metaData:{prompt:i("LINK.CLEAR_CACHE"),type:Z.PAGE,multiValueDelimiter:",",displayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION},errors:[],warnings:[]},a)},_getPropertyLinkResetPagination:function(a){return b.extend(!0,{propertyName:ab.PROP.RESET_PAGINATION,value:"Y",metaData:{prompt:i("LINK.RESET_PAGINATION"),type:b.apex.propertyEditor.PROP_TYPE.YES_NO,noValue:"N",yesValue:"Y",displayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION,isRequired:!0},errors:[],warnings:[]},a)},_getPropertyLinkRequest:function(a){return b.extend(!0,{propertyName:ab.PROP.REQUEST,value:"",metaData:{type:b.apex.propertyEditor.PROP_TYPE.TEXT,prompt:i("LINK.REQUEST"),displayGroupId:ab.DISPLAY_GROUP.ADVANCED},errors:[],warnings:[]},a)},_getPropertyLinkSuccessMessage:function(a){return b.extend(!0,{propertyName:ab.PROP.SUCCESS_MESSAGE,value:"Y",metaData:{prompt:i("LINK.SUCCESS_MESSAGE"),type:b.apex.propertyEditor.PROP_TYPE.YES_NO,noValue:"N",yesValue:"Y",displayGroupId:ab.DISPLAY_GROUP.ADVANCED,isRequired:!0},errors:[],warnings:[]},a)},noLabel:!0,render:function(a,b,c){var d=b+"_label";this.renderDivOpen(a,{"class":H}),a.markup("<button").attr("type","button").attr("id",b).attr("aria-describedby",d).attr("class",M+" "+N+" "+P).attr(_,c.propertyName).attr("value",c.value).markup(">").content(this._getButtonText(c.value)).markup("</button>"),this.renderDivClose(a)},setValue:function(a,b,c){var d;this["super"]("setValue",a,b,c),d=this._getButtonText(c),a.html(d).attr("title",d)},init:function(c,f){var g=this;this.addLabelClickHandler(c,f),this.addTooltipsForErrors(c,f),c.closest("div."+E).on("click","#"+c.attr("id"),function(){function h(a){var b,c,d;for(b=0;b<p.length;b++)for(c=0;c<p[b].properties.length;c++)if(p[b].properties[c].propertyName===a){d=p[b].properties[c];break}return d}var j,m,n=e.htmlBuilder(),o=l(c.val()),p=[],q=!1,r=!1,s=f.metaData.isRequired,t=f.metaData.isReadOnly;switch(a.getComponentType(A[0].typeId).id){case a.COMP_TYPE.BRANCH:q=!0;break;case a.COMP_TYPE.BUTTON:r=!0}if(r)switch(v.propertyEditor("getPropertyValue",a.PROP.BUTTON_ACTION)){case"REDIRECT_URL":m=ab.TYPES.URL;break;case"REDIRECT_PAGE":m=ab.TYPES.PAGE_IN_THIS_APP;break;case"REDIRECT_APP":m=ab.TYPES.PAGE_IN_DIFF_APP}else m=g._getLinkType(o);p.push(g._getDisplayGroupTarget([g._getPropertyLinkType({value:m,metaData:{isReadOnly:t||r,isRequired:s}}),g._getPropertyLinkApp({value:m===ab.TYPES.PAGE_IN_DIFF_APP?o.appId:"",metaData:{isReadOnly:f.metaData.isReadOnly}}),g._getPropertyLinkPage({value:o.pageId,metaData:{isReadOnly:f.metaData.isReadOnly}}),g._getPropertyLinkUrl({value:o.url,metaData:{isReadOnly:f.metaData.isReadOnly}})])),p.push(g._getDisplayGroupSetItems([g._getPropertyLinkSetItems({value:{names:o.itemNames,values:o.itemValues},metaData:{isReadOnly:f.metaData.isReadOnly}},f)])),p.push(g._getDisplayGroupClearSessionState([g._getPropertyLinkClearCache({value:o.clearCache,metaData:{isReadOnly:f.metaData.isReadOnly}}),g._getPropertyLinkResetPagination({value:o.resetPagination,metaData:{isReadOnly:f.metaData.isReadOnly}})]));var u=[];u.push(g._getPropertyLinkRequest({value:o.request,metaData:{isReadOnly:f.metaData.isReadOnly}})),q&&u.push(g._getPropertyLinkSuccessMessage({value:o.successMessage,metaData:{isReadOnly:f.metaData.isReadOnly}})),p.push(g._getDisplayGroupAdvanced(u)),n.markup("<div").attr("id","linkDlg").attr("title",k("LINK.TITLE",f.metaData.prompt)).markup(">").markup("<div").attr("id","linkDlgPE").markup(">").markup("</div>").markup("</div>"),j=b(n.toString()).dialog({modal:!0,closeText:d.getMessage("APEX.DIALOG.CLOSE"),minWidth:400,width:520,dialogClass:Y,close:function(){b("#linkDlgPE").propertyEditor("destroy"),j.dialog("destroy")},open:function(){function a(a){var b={metaData:{isReadOnly:f.metaData.isReadOnly}};switch(a){case ab.TYPES.PAGE_IN_THIS_APP:c.propertyEditor("removeProperty",ab.PROP.URL),c.propertyEditor("removeProperty",ab.PROP.APPLICATION),c.propertyEditor("addProperty",{property:g._getPropertyLinkPage(b),prevPropertyName:ab.PROP.TYPE,displayGroup:g._getDisplayGroupTarget()}),c.propertyEditor("addProperty",{property:g._getPropertyLinkSetItems(b,f),displayGroup:g._getDisplayGroupSetItems(),prevDisplayGroupId:ab.DISPLAY_GROUP.TARGET}),c.propertyEditor("addProperty",{property:g._getPropertyLinkClearCache(b),displayGroup:g._getDisplayGroupClearSessionState(),prevDisplayGroupId:ab.DISPLAY_GROUP.SET_ITEMS}),c.propertyEditor("addProperty",{property:g._getPropertyLinkResetPagination(b),prevPropertyName:ab.PROP.CLEAR_CACHE,displayGroup:g._getDisplayGroupClearSessionState(),prevDisplayGroupId:ab.DISPLAY_GROUP.SET_ITEMS}),c.propertyEditor("addProperty",{property:g._getPropertyLinkRequest(b),displayGroup:g._getDisplayGroupAdvanced(),prevDisplayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION}),q&&c.propertyEditor("addProperty",{property:g._getPropertyLinkSuccessMessage(b),prevPropertyName:ab.PROP.RESET_PAGINATION,displayGroup:g._getDisplayGroupAdvanced(),prevDisplayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION});break;case ab.TYPES.PAGE_IN_DIFF_APP:c.propertyEditor("removeProperty",ab.PROP.URL),c.propertyEditor("addProperty",{property:g._getPropertyLinkApp(b),prevPropertyName:ab.PROP.TYPE,displayGroup:g._getDisplayGroupTarget()}),c.propertyEditor("addProperty",{property:g._getPropertyLinkPage(b),prevPropertyName:ab.PROP.APPLICATION,displayGroup:g._getDisplayGroupTarget()}),c.propertyEditor("addProperty",{property:g._getPropertyLinkSetItems(b,f),displayGroup:g._getDisplayGroupSetItems(),prevDisplayGroupId:ab.DISPLAY_GROUP.TARGET}),c.propertyEditor("addProperty",{property:g._getPropertyLinkClearCache(b),displayGroup:g._getDisplayGroupClearSessionState(),prevDisplayGroupId:ab.DISPLAY_GROUP.SET_ITEMS}),c.propertyEditor("addProperty",{property:g._getPropertyLinkResetPagination(b),prevPropertyName:ab.PROP.CLEAR_CACHE,displayGroup:g._getDisplayGroupClearSessionState(),prevDisplayGroupId:ab.DISPLAY_GROUP.SET_ITEMS}),c.propertyEditor("addProperty",{property:g._getPropertyLinkRequest(b),displayGroup:g._getDisplayGroupAdvanced(),prevDisplayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION}),q&&c.propertyEditor("addProperty",{property:g._getPropertyLinkSuccessMessage(b),prevPropertyName:ab.PROP.RESET_PAGINATION,displayGroup:g._getDisplayGroupAdvanced(),prevDisplayGroupId:ab.DISPLAY_GROUP.CLEAR_SESSION});break;case ab.TYPES.URL:c.propertyEditor("removeProperty",ab.PROP.APPLICATION),c.propertyEditor("removeProperty",ab.PROP.PAGE),c.propertyEditor("removeProperty",ab.PROP.SET_ITEMS),c.propertyEditor("removeProperty",ab.PROP.REQUEST),c.propertyEditor("removeProperty",ab.PROP.CLEAR_CACHE),c.propertyEditor("removeProperty",ab.PROP.RESET_PAGINATION),c.propertyEditor("removeProperty",ab.PROP.SUCCESS_MESSAGE),c.propertyEditor("addProperty",{property:g._getPropertyLinkUrl(b),prevPropertyName:ab.PROP.TYPE,displayGroup:g._getDisplayGroupTarget()});break;default:c.propertyEditor("removeProperty",ab.PROP.APPLICATION),c.propertyEditor("removeProperty",ab.PROP.PAGE),c.propertyEditor("removeProperty",ab.PROP.SET_ITEMS),c.propertyEditor("removeProperty",ab.PROP.REQUEST),c.propertyEditor("removeProperty",ab.PROP.CLEAR_CACHE),c.propertyEditor("removeProperty",ab.PROP.RESET_PAGINATION),c.propertyEditor("removeProperty",ab.PROP.SUCCESS_MESSAGE),c.propertyEditor("removeProperty",ab.PROP.URL)}}var c=b("#linkDlgPE");c.propertyEditor({focusPropertyName:ab.PROP.TYPE,data:{propertySet:p,multiEdit:!1},change:function(b,c){c.propertyName===ab.PROP.TYPE&&a(h(ab.PROP.TYPE).value),h(c.propertyName).value=c.property.value}}),a(h(ab.PROP.TYPE).value),b("#linkDlg").dialog({position:{my:"center",at:"center"}})},buttons:[{text:i("CANCEL"),click:function(){j.dialog("close")}},{text:i("CLEAR"),disabled:s||t,click:function(){b("#linkDlgPE").propertyEditor("updatePropertyValue",ab.PROP.TYPE,""),g.setValue(c,f,""),c.trigger("change"),g.setFocus(c),j.dialog("close")}},{text:i("OK"),"class":O,disabled:t,click:function(){function a(a,b){var c="";return c="Y"===a?""===b?"RP":"RP,"+b:b}function d(a,b){var c=h(a);return c.errors.push(b),c}var e,k,l=[];if(e=h(ab.PROP.TYPE).value,e===ab.TYPES.PAGE_IN_THIS_APP||e===ab.TYPES.PAGE_IN_DIFF_APP?(e===ab.TYPES.PAGE_IN_DIFF_APP&&""===h(ab.PROP.APPLICATION).value&&l.push(d(ab.PROP.APPLICATION,i("IS_REQUIRED"))),""===h(ab.PROP.PAGE).value&&l.push(d(ab.PROP.PAGE,i("IS_REQUIRED"))),0===l.length&&(k="f?p="+(e===ab.TYPES.PAGE_IN_THIS_APP?"&APP_ID.":h(ab.PROP.APPLICATION).value)+":"+h(ab.PROP.PAGE).value+":&SESSION.:"+h(ab.PROP.REQUEST).value+":&DEBUG.:"+a(h(ab.PROP.RESET_PAGINATION).value,h(ab.PROP.CLEAR_CACHE).value)+":"+(h(ab.PROP.SET_ITEMS).value.names||[]).join(",")+":"+(h(ab.PROP.SET_ITEMS).value.values||[]).join(","),q&&"Y"===h(ab.PROP.SUCCESS_MESSAGE).value&&(k+="&success_msg=#SUCCESS_MSG#"))):e===ab.TYPES.URL&&(""===h(ab.PROP.URL).value&&l.push(d(ab.PROP.URL,i("IS_REQUIRED"))),0===l.length&&(k=h(ab.PROP.URL).value)),0===l.length)g.setValue(c,f,k),c.trigger("change"),g.setFocus(c),j.dialog("close");else for(var m=0;m<l.length;m++)b("#linkDlgPE").propertyEditor("updateProperty",l[m])}}]})})}}),b.apex.propertyEditor.addPropertyType(Z.LINK_SET_ITEMS,{stacked:!0,noLabel:!0,labelVisible:!1,minHeight:85,maxHeight:122,render:function(a,b,c){var d=b+"_label";a.markup("<div").attr("id",b).attr("class",H).attr("aria-labelledby",d).attr("role","group").attr(_,c.propertyName).markup(">"),a.markup("<table").attr("class",J).markup(">").markup("<caption").attr("class",X).markup(">").content(i("LINK.DG.SET_ITEMS")).markup("</caption>").markup("<tr>").markup("<th").attr("scope","col").attr("class",I).markup(">").content(i("NAME")).markup("</th>").markup("<th").attr("scope","col").attr("class",X).markup(">").content(i("LINK.NAME_LIST_OF_VALUES")).markup(">").markup("</th>").markup("<th").attr("scope","col").attr("class",I).markup(">").content(i("LINK.VALUE")).markup("</th>").markup("<th").attr("scope","col").attr("class",X).markup(">").content(i("LINK.VALUE_LIST_OF_VALUES")).markup(">").markup("</th>").markup("<th").attr("class",X).markup(">").content(i("LINK.REMOVE")).markup("</th>").markup("</tr>");for(var e=0;e<c.value.names.length;e++)this._renderLinkItemsRow(a,{rowId:e+1,idPrefix:b,name:c.value.names[e],value:c.value.values[e],readOnly:c.metaData.isReadOnly});c.metaData.isReadOnly||this._renderLinkItemsRow(a,{rowId:c.value.names.length+1,idPrefix:b}),a.markup("</table>"),this.renderDivClose(a)},init:function(c,d){function f(a){var c,d=e.htmlBuilder(),f=g.filters;d.markup("<div").attr("id","lovDlg").attr("title",g.dialogTitle).markup(">").markup("</div>"),c=b(d.toString()).lovDialog({modal:!0,minWidth:520,height:500,filters:f,columnDefinitions:g.columnDefinitions,filterLov:g.filterLov,dialogClass:Y,resizable:!1,multiValue:g.multiValue,valueSelected:function(c,d){var e=d[g.columnDefinitions[0].name],f=b("#"+a);d.valueFormatting&&b.isFunction(d.valueFormatting)&&(e=d.valueFormatting(e)),f.val(e).trigger("change")}})}var g={columnDefinitions:[{name:"name",title:i("NAME"),alignment:"left"},{name:"label",title:i("LABEL"),alignment:"left"}],filterLov:function(c,d){var e,f="page";switch(c.scope){case"application":f="application",e="";break;case"current_page":e=a.getCurrentPageId();break;case"global_page":e=a.getGlobalPageId();break;case"target_page":e=b("#linkDlg").find("[data-property-id="+ab.PROP.PAGE+"]").val();break;case"custom_page":e=c.customPageNumber;break;case"columns":f="columns"}a.getItemsLov({type:f,component:A[0],pageId:e},function(a){d(a,c.search)})},multiValue:!1,dialogTitle:k("PICK",d.metaData.prompt)},h=this,l=c.closest("div."+E),m=c.attr("id");d.metaData.isReadOnly||l.on("change","input."+Q+":last",function(){var a=e.htmlBuilder(),c=e.htmlBuilder(),d=b(this);if(d.val()){var f=b("input."+Q).length;h._renderLinkItemsRow(a,{rowId:f+1,idPrefix:m}),h.renderIconButton(c,{id:m+"_rowRemove_"+f,icon:U,text:j("LINK.REMOVE_ITEM_N",f)}),d.closest("tr").find("td:last").html(c.toString()).end().after(a.toString())}}).on("click","button[id^="+m+"_rowRemove_]",function(){var a=b(this).closest("tr").next("tr").find(":input:first");b(this).closest("tr").remove(),a.trigger("change").focus()}).on("click","button[id^="+m+"_nameLovBtn_]",function(){g.filters=[{name:"scope",title:i("ITEM_SCOPE"),type:"buttonset",defaultValue:"target_page",lov:[{display:i("TARGET_PAGE"),value:"target_page"},{display:i("CURRENT_PAGE"),value:"current_page"},{display:i("CUSTOM_PAGE"),value:"custom_page",filters:[{name:"customPageNumber",title:i("PAGE_NUMBER"),type:"text",isRequired:!0}]},{display:i("GLOBAL_PAGE"),value:"global_page"},{display:i("APPLICATION"),value:"application"}]},{name:"search",title:i("SEARCH"),type:"search"}],f(b(this).data("for"))}).on("click","button[id^="+m+"_valueLovBtn_]",function(){function c(b){return"&"+a.enquoteIdentifier(b)+"."}var e,h,j,k=d.metaData.originalProperty;for(g.filters=[{name:"scope",title:i("ITEM_SCOPE"),type:"buttonset",defaultValue:"current_page",lov:[{display:i("TARGET_PAGE"),value:"target_page",valueFormatting:function(a){return c(a)}},{display:i("CURRENT_PAGE"),value:"current_page",valueFormatting:function(a){return c(a)}},{display:i("CUSTOM_PAGE"),value:"custom_page",valueFormatting:function(a){return c(a)},filters:[{name:"customPageNumber",title:i("PAGE_NUMBER"),type:"text",isRequired:!0}]},{display:i("GLOBAL_PAGE"),value:"global_page",valueFormatting:function(a){return c(a)}},{display:i("APPLICATION"),value:"application",valueFormatting:function(a){return c(a)}}]},{name:"search",title:i("SEARCH"),type:"search"}],e=0;e<g.filters.length;e++)if(j=g.filters[e],"scope"===j.name&&"ROW"===k.metaData.referenceScope)for(j.defaultValue="columns",h=0;h<j.lov.length;h++)if("target_page"===j.lov[h].value){j.lov[h]={display:i("COLUMNS"),value:"columns",valueFormatting:function(d){var e,f,g=[a.COMP_TYPE.IR_ATTRIBUTES,a.COMP_TYPE.IR_COLUMN,a.COMP_TYPE.CLASSIC_RPT_COLUMN,a.COMP_TYPE.TAB_FORM_COLUMN,a.COMP_TYPE.CHART_SERIES,a.COMP_TYPE.MAP_CHART_SERIES];return f=a.getComponentType(A[0].typeId).id,e=-1!==b.inArray(f,g)?"#"+d+"#":c(d)}};break}f(b(this).data("for"))}),this.addLabelClickHandler(c,d)},setFocus:function(a){a.find(":input:first").focus()},getValue:function(a){var c,d,e=[],f=[];return a.find("tr."+S).each(function(){c=b(this).find(":input."+Q),d=b(this).find(":input."+R),""!==c.val()&&(e.push(c.val()),f.push(d.val()))}),{names:e,values:f}},_renderLinkItemsRow:function(a,c){var d,e,f=b.extend({rowId:"",idPrefix:"",name:"",value:"",readOnly:!1},c);d=f.idPrefix+"_name_"+f.rowId,e=f.idPrefix+"_value_"+f.rowId,a.markup("<tr").attr("class",S).markup(">"),a.markup("<td>"),this.renderBaseInput(a,{id:d,value:f.name,inputClass:[Q,F,G],readonly:f.readOnly,attributes:{"aria-label":j("LINK.ITEM_N_NAME",f.rowId)}}),a.markup("</td>"),a.markup("<td>"),this.renderIconButton(a,{id:f.idPrefix+"_nameLovBtn_"+f.rowId,icon:V,text:j("LINK.ITEM_N_NAME_LOV",f.rowId),dataFor:d,disabled:f.readOnly}),a.markup("</td>"),a.markup("<td>"),this.renderBaseInput(a,{id:e,value:f.value,inputClass:[R,F,G],readonly:f.readOnly,attributes:{"aria-label":j("LINK.ITEM_N_VALUE",f.rowId)}}),a.markup("</td>"),a.markup("<td>"),this.renderIconButton(a,{id:f.idPrefix+"_valueLovBtn_"+f.rowId,icon:V,text:j("LINK.ITEM_N_VALUE_LOV",f.rowId),dataFor:e,disabled:f.readOnly}),a.markup("</td>"),a.markup("<td").attr("class",K).markup(">"),f.name&&this.renderIconButton(a,{id:f.idPrefix+"_rowRemove_"+f.rowId,icon:U,text:j("LINK.REMOVE_ITEM_N",f.rowId),disabled:f.readOnly}),a.markup("</td>"),a.markup("</tr>")}});var gb,hb,ib,jb=40,kb="CODE_EDITOR_SETTINGS",lb=-1;b.apex.propertyEditor.addPropertyType(Z.TEXT_EDITOR,{render:function(a,b,c){this["super"]("render",a,b,c,!0)},init:function(j,l){var m,n=this,o=b("#"+j.attr("id")+"_modalBtn");this["super"]("init",j,l),o.on("click",function(){function o(){lb=r.codeEditor("changeGeneration"),c.trace("Editor: update change generation: "+lb)}function p(){return!r.codeEditor("isClean",lb)}var q,r,s,t,u,v,w="text",x=!1,y=[],z=A[0].getProperty(l.propertyName),B=e.htmlBuilder();switch(l.metaData.type){case a.PROP_TYPE.CSS:w="css";break;case a.PROP_TYPE.HTML:w="html";break;case a.PROP_TYPE.JAVASCRIPT:w="javascript";break;case a.PROP_TYPE.XML:w="xml";break;case a.PROP_TYPE.SQL:case a.PROP_TYPE.SQL_EXPR:case a.PROP_TYPE.PLSQL:case a.PROP_TYPE.PLSQL_EXPR_VARCHAR:case a.PROP_TYPE.PLSQL_EXPR_BOOLEAN:case a.PROP_TYPE.PLSQL_FUNC_VARCHAR:case a.PROP_TYPE.PLSQL_FUNC_BOOLEAN:w="x-plsql"}y.push({text:i("CANCEL"),click:function(){q.dialog("close")}}),l.metaData.type===a.PROP_TYPE.SQL&&(v=function(b){g.popup({url:e.makeApplicationUrl({appId:4500,pageId:1002,clearCache:1002,itemNames:["P1002_RETURN_INTO","P1002_POPUP","P1002_SCHEMA"],itemValues:[b.baseId,"1",a.getParsingSchema()]}),width:950,height:720})}),"x-plsql"!==w||l.metaData.isReadOnly||(u=function(a,b){var c=z.validate(a);b(c)}),y.push({text:i("OK"),"class":O,click:function(){n["super"]("setValue",j,l,r.codeEditor("getValue")),j.trigger("change"),o(),n["super"]("setFocus",j),q.dialog("close")}}),B.markup("<div").attr("id","editorDlg").attr("title",k("CODE_EDITOR.TITLE",l.metaData.prompt)).markup(">").markup("<div").attr("id","editorDlg-codeEditor").markup("class='resize'>").markup("</div>").markup("</div>"),t=gb,s=hb,t>b(window).width()-jb&&(t=b(window).width()-jb),s>b(window).height()-jb&&(s=b(window).height()-jb),q=b(B.toString()).dialog({modal:!0,closeText:d.getMessage("APEX.DIALOG.CLOSE"),width:t,height:s,minWidth:680,minHeight:400,beforeClose:function(a){var b=!0;p()&&(b=confirm(i("EDITOR.UNSAVED_CHANGES"))),b||a.preventDefault()},close:function(){var a=q.closest(".ui-dialog");x&&(ib=r.codeEditor("getSettingsString"),window.gPreferences[kb]=ib,h.process("setPreference",{x01:kb,x02:ib},{dataType:""})),gb!==a.outerWidth()&&(gb=a.outerWidth(),f.savePreference(db,gb)),hb!==a.outerHeight()&&(hb=a.outerHeight(),f.savePreference(eb,hb)),q.dialog("destroy").remove()},open:function(){r=b("#editorDlg-codeEditor").codeEditor(b.extend({mode:"text/"+w,autofocus:!0,readOnly:l.metaData.isReadOnly,errors:z.errors,warnings:z.warnings,value:n["super"]("getValue",m),codeComplete:function(a,b){h.process("getCodeCompleteList",{p_widget_name:a.type,x01:a.search,x02:a.parent,x03:a.grantParent},{success:b})},validateCode:u,queryBuilder:v,settingsChanged:function(){x=!0}},b.apex.codeEditor.optionsFromSettingsString(ib))),r.height(b(this).height()).width(b(this).closest(".ui-dialog").width()-2).trigger("resize"),o()
},resizeStop:function(a,b){r.height(q.height()).width(b.size.width-2).trigger("resize")},buttons:y})}),m=j.closest("div."+E)}},b.apex.propertyEditor.PROP_TYPE.TEXTAREA),b.apex.propertyEditor.addPropertyType(Z.ITEM,{init:function(c,d){var e,f,g,h,j={columnDefinitions:[{name:"name",title:i("NAME"),alignment:"left"},{name:"label",title:i("LABEL"),alignment:"left"}],filters:[{name:"scope",title:i("ITEM_SCOPE"),type:"buttonset",defaultValue:"current_page",lov:[{display:i("CURRENT_PAGE"),value:"current_page"},{display:i("CUSTOM_PAGE"),value:"custom_page",filters:[{name:"customPageNumber",title:i("PAGE_NUMBER"),type:"text",isRequired:!0}]},{display:i("GLOBAL_PAGE"),value:"global_page"},{display:i("APPLICATION"),value:"application"}]},{name:"search",title:i("SEARCH"),type:"search"}],filterLov:function(b,c){var d,e="page";switch(b.scope){case"application":e="application",d="";break;case"current_page":d=a.getCurrentPageId();break;case"global_page":d=a.getGlobalPageId();break;case"custom_page":d=b.customPageNumber}a.getItemsLov({type:e,pageId:d},function(a){c(a,b.search)})}};if("PAGE_AND_GLOBAL"===d.metaData.lovComponentScope)for(g=j.filters,e=0;e<g.length;e++)if("scope"===g[e].name)for(h=g[e].lov,f=0;f<h.length;f++)b.inArray(h[f].value,["application","custom_page"])>-1&&(h.splice(f,1),f-=1);if("PAGE"===d.metaData.lovComponentScope)for(g=j.filters,e=0;e<g.length;e++)if("scope"===g[e].name)for(h=g[e].lov,f=0;f<h.length;f++)b.inArray(h[f].value,["application","custom_page","global_page"])>-1&&(h.splice(f,1),f-=1);this["super"]("init",c,d,j)}},b.apex.propertyEditor.PROP_TYPE.COMBOBOX),b.apex.propertyEditor.addPropertyType(Z.PAGE,{init:function(b,c){var d={columnDefinitions:[{name:"id",title:i("PAGE_NUMBER"),alignment:"left"},{name:"name",title:i("PAGE_NAME"),alignment:"left"},{name:"userInterface",title:i("USER_INTERFACE"),alignment:"left"}],filters:[{name:"userInterfaceId",title:i("USER_INTERFACE"),type:"buttonset",defaultValue:"current_ui",lov:[{display:i("CURRENT_UI"),value:"current_ui"},{display:i("ALL_PAGES"),value:"all"}]},{name:"search",title:i("SEARCH"),type:"search"}],filterLov:function(b,c){a.getPagesLov(b,function(d){var e,f,g=[];if("all"===b.userInterfaceId)c(d,b.search);else{for(f=a.getComponents(a.COMP_TYPE.PAGE,{id:a.getCurrentPageId()})[0].getProperty(a.PROP.USER_INTERFACE).getValue(),e=0;e<d.length;e++)d[e].userInterfaceId===f&&g.push(d[e]);c(g,b.search)}})}};this["super"]("init",b,c,d)}},b.apex.propertyEditor.PROP_TYPE.COMBOBOX),b.apex.propertyEditor.addPropertyType(Z.TABLE,{init:function(a,b){var c={columnDefinitions:[{name:"name",title:i("NAME"),alignment:"left"},{name:"comment",title:i("COMMENT"),alignment:"left"}],filters:[{name:"type",title:i("TYPE"),type:"buttonset",defaultValue:"TABLE",lov:[{display:i("TABLES"),value:"TABLE"},{display:i("VIEWS"),value:"VIEW"}]},{name:"search",title:i("SEARCH"),type:"search"}],filterLov:function(a,c){b.metaData.lovValues(function(b){c(b,a.search)},a)}};this["super"]("init",a,b,c)}},b.apex.propertyEditor.PROP_TYPE.COMBOBOX),b.apex.propertyEditor.addPropertyType(Z.ICON,{init:function(c,d){var f,g=a.getThemeIcons(),h={WEB_APPLICATION:"fa-adjust,fa-anchor,fa-archive,fa-area-chart,fa-arrows,fa-arrows-h,fa-arrows-v,fa-asterisk,fa-at,fa-automobile,fa-ban,fa-bank,fa-bar-chart,fa-bar-chart-o,fa-barcode,fa-bars,fa-beer,fa-bell,fa-bell-o,fa-bell-slash,fa-bell-slash-o,fa-bicycle,fa-binoculars,fa-birthday-cake,fa-bolt,fa-bomb,fa-book,fa-bookmark,fa-bookmark-o,fa-briefcase,fa-bug,fa-building,fa-building-o,fa-bullhorn,fa-bullseye,fa-bus,fa-cab,fa-calculator,fa-calendar,fa-calendar-o,fa-camera,fa-camera-retro,fa-car,fa-caret-square-o-down,fa-caret-square-o-left,fa-caret-square-o-right,fa-caret-square-o-up,fa-cc,fa-certificate,fa-check,fa-check-circle,fa-check-circle-o,fa-check-square,fa-check-square-o,fa-child,fa-circle,fa-circle-o,fa-circle-o-notch,fa-circle-thin,fa-clock-o,fa-close,fa-cloud,fa-cloud-download,fa-cloud-upload,fa-code,fa-code-fork,fa-coffee,fa-cog,fa-cogs,fa-comment,fa-comment-o,fa-comments,fa-comments-o,fa-compass,fa-copyright,fa-credit-card,fa-crop,fa-crosshairs,fa-cube,fa-cubes,fa-cutlery,fa-dashboard,fa-database,fa-desktop,fa-dot-circle-o,fa-download,fa-edit,fa-ellipsis-h,fa-ellipsis-v,fa-envelope,fa-envelope-o,fa-envelope-square,fa-eraser,fa-exchange,fa-exclamation,fa-exclamation-circle,fa-exclamation-triangle,fa-external-link,fa-external-link-square,fa-eye,fa-eye-slash,fa-eyedropper,fa-fax,fa-female,fa-fighter-jet,fa-file-archive-o,fa-file-audio-o,fa-file-code-o,fa-file-excel-o,fa-file-image-o,fa-file-movie-o,fa-file-pdf-o,fa-file-photo-o,fa-file-picture-o,fa-file-powerpoint-o,fa-file-sound-o,fa-file-video-o,fa-file-word-o,fa-file-zip-o,fa-film,fa-filter,fa-fire,fa-fire-extinguisher,fa-flag,fa-flag-checkered,fa-flag-o,fa-flash,fa-flask,fa-folder,fa-folder-o,fa-folder-open,fa-folder-open-o,fa-frown-o,fa-futbol-o,fa-gamepad,fa-gavel,fa-gear,fa-gears,fa-gift,fa-glass,fa-globe,fa-graduation-cap,fa-group,fa-hdd-o,fa-headphones,fa-heart,fa-heart-o,fa-history,fa-home,fa-image,fa-inbox,fa-info,fa-info-circle,fa-institution,fa-key,fa-keyboard-o,fa-language,fa-laptop,fa-leaf,fa-legal,fa-lemon-o,fa-level-down,fa-level-up,fa-life-bouy,fa-life-buoy,fa-life-ring,fa-life-saver,fa-lightbulb-o,fa-line-chart,fa-location-arrow,fa-lock,fa-magic,fa-magnet,fa-mail-forward,fa-mail-reply,fa-mail-reply-all,fa-male,fa-map-marker,fa-meh-o,fa-microphone,fa-microphone-slash,fa-minus,fa-minus-circle,fa-minus-square,fa-minus-square-o,fa-mobile,fa-mobile-phone,fa-money,fa-moon-o,fa-mortar-board,fa-music,fa-navicon,fa-newspaper-o,fa-paint-brush,fa-paper-plane,fa-paper-plane-o,fa-paw,fa-pencil,fa-pencil-square,fa-pencil-square-o,fa-phone,fa-phone-square,fa-photo,fa-picture-o,fa-pie-chart,fa-plane,fa-plug,fa-plus,fa-plus-circle,fa-plus-square,fa-plus-square-o,fa-power-off,fa-print,fa-puzzle-piece,fa-qrcode,fa-question,fa-question-circle,fa-quote-left,fa-quote-right,fa-random,fa-recycle,fa-refresh,fa-remove,fa-reorder,fa-reply,fa-reply-all,fa-retweet,fa-road,fa-rocket,fa-rss,fa-rss-square,fa-search,fa-search-minus,fa-search-plus,fa-send,fa-send-o,fa-share,fa-share-alt,fa-share-alt-square,fa-share-square,fa-share-square-o,fa-shield,fa-shopping-cart,fa-sign-in,fa-sign-out,fa-signal,fa-sitemap,fa-sliders,fa-smile-o,fa-soccer-ball-o,fa-sort,fa-sort-alpha-asc,fa-sort-alpha-desc,fa-sort-amount-asc,fa-sort-amount-desc,fa-sort-asc,fa-sort-desc,fa-sort-down,fa-sort-numeric-asc,fa-sort-numeric-desc,fa-sort-up,fa-space-shuttle,fa-spinner,fa-spoon,fa-square,fa-square-o,fa-star,fa-star-half,fa-star-half-empty,fa-star-half-full,fa-star-half-o,fa-star-o,fa-suitcase,fa-sun-o,fa-support,fa-tablet,fa-tachometer,fa-tag,fa-tags,fa-tasks,fa-taxi,fa-terminal,fa-thumb-tack,fa-thumbs-down,fa-thumbs-o-down,fa-thumbs-o-up,fa-thumbs-up,fa-ticket,fa-times,fa-times-circle,fa-times-circle-o,fa-tint,fa-toggle-down,fa-toggle-left,fa-toggle-off,fa-toggle-on,fa-toggle-right,fa-toggle-up,fa-trash,fa-trash-o,fa-tree,fa-trophy,fa-truck,fa-tty,fa-umbrella,fa-university,fa-unlock,fa-unlock-alt,fa-unsorted,fa-upload,fa-user,fa-users,fa-video-camera,fa-volume-down,fa-volume-off,fa-volume-up,fa-warning,fa-wheelchair,fa-wifi,fa-wrench".split(","),FILE_TYPE:"fa-file,fa-file-archive-o,fa-file-audio-o,fa-file-code-o,fa-file-excel-o,fa-file-image-o,fa-file-movie-o,fa-file-o,fa-file-pdf-o,fa-file-photo-o,fa-file-picture-o,fa-file-powerpoint-o,fa-file-sound-o,fa-file-text,fa-file-text-o,fa-file-video-o,fa-file-word-o,fa-file-zip-o".split(","),SPINNER:"fa-circle-o-notch,fa-cog,fa-gear,fa-refresh,fa-spinner".split(","),FORM_CONTROL:"fa-check-square,fa-check-square-o,fa-circle,fa-circle-o,fa-dot-circle-o,fa-minus-square,fa-minus-square-o,fa-plus-square,fa-plus-square-o,fa-square,fa-square-o".split(","),PAYMENT:"fa-cc-amex,fa-cc-discover,fa-cc-mastercard,fa-cc-paypal,fa-cc-stripe,fa-cc-visa,fa-credit-card,fa-google-wallet,fa-paypal".split(","),CHART:"fa-area-chart,fa-bar-chart,fa-bar-chart-o,fa-line-chart,fa-pie-chart".split(","),CURRENCY:"fa-bitcoin,fa-btc,fa-cny,fa-dollar,fa-eur,fa-euro,fa-gbp,fa-ils,fa-inr,fa-jpy,fa-krw,fa-money,fa-rmb,fa-rouble,fa-rub,fa-ruble,fa-rupee,fa-shekel,fa-sheqel,fa-try,fa-turkish-lira,fa-usd,fa-won,fa-yen".split(","),TEXT_EDITOR:"fa-align-center,fa-align-justify,fa-align-left,fa-align-right,fa-bold,fa-chain,fa-chain-broken,fa-clipboard,fa-columns,fa-copy,fa-cut,fa-dedent,fa-eraser,fa-file,fa-file-o,fa-file-text,fa-file-text-o,fa-files-o,fa-floppy-o,fa-font,fa-header,fa-indent,fa-italic,fa-link,fa-list,fa-list-alt,fa-list-ol,fa-list-ul,fa-outdent,fa-paperclip,fa-paragraph,fa-paste,fa-repeat,fa-rotate-left,fa-rotate-right,fa-save,fa-scissors,fa-strikethrough,fa-subscript,fa-superscript,fa-table,fa-text-height,fa-text-width,fa-th,fa-th-large,fa-th-list,fa-underline,fa-undo,fa-unlink".split(","),DIRECTIONAL:"fa-angle-double-down,fa-angle-double-left,fa-angle-double-right,fa-angle-double-up,fa-angle-down,fa-angle-left,fa-angle-right,fa-angle-up,fa-arrow-circle-down,fa-arrow-circle-left,fa-arrow-circle-o-down,fa-arrow-circle-o-left,fa-arrow-circle-o-right,fa-arrow-circle-o-up,fa-arrow-circle-right,fa-arrow-circle-up,fa-arrow-down,fa-arrow-left,fa-arrow-right,fa-arrow-up,fa-arrows,fa-arrows-alt,fa-arrows-h,fa-arrows-v,fa-caret-down,fa-caret-left,fa-caret-right,fa-caret-square-o-down,fa-caret-square-o-left,fa-caret-square-o-right,fa-caret-square-o-up,fa-caret-up,fa-chevron-circle-down,fa-chevron-circle-left,fa-chevron-circle-right,fa-chevron-circle-up,fa-chevron-down,fa-chevron-left,fa-chevron-right,fa-chevron-up,fa-hand-o-down,fa-hand-o-left,fa-hand-o-right,fa-hand-o-up,fa-long-arrow-down,fa-long-arrow-left,fa-long-arrow-right,fa-long-arrow-up,fa-toggle-down,fa-toggle-left,fa-toggle-right,fa-toggle-up".split(","),VIDEO_PLAYER:"fa-arrows-alt,fa-backward,fa-compress,fa-eject,fa-expand,fa-fast-backward,fa-fast-forward,fa-forward,fa-pause,fa-play,fa-play-circle,fa-play-circle-o,fa-step-backward,fa-step-forward,fa-stop,fa-youtube-play".split(","),BRAND:"fa-warning,fa-adn,fa-android,fa-angellist,fa-apple,fa-behance,fa-behance-square,fa-bitbucket,fa-bitbucket-square,fa-bitcoin,fa-btc,fa-cc-amex,fa-cc-discover,fa-cc-mastercard,fa-cc-paypal,fa-cc-stripe,fa-cc-visa,fa-codepen,fa-css3,fa-delicious,fa-deviantart,fa-digg,fa-dribbble,fa-dropbox,fa-drupal,fa-empire,fa-facebook,fa-facebook-square,fa-flickr,fa-foursquare,fa-ge,fa-git,fa-git-square,fa-github,fa-github-alt,fa-github-square,fa-gittip,fa-google,fa-google-plus,fa-google-plus-square,fa-google-wallet,fa-hacker-news,fa-html5,fa-instagram,fa-ioxhost,fa-joomla,fa-jsfiddle,fa-lastfm,fa-lastfm-square,fa-linkedin,fa-linkedin-square,fa-linux,fa-maxcdn,fa-meanpath,fa-openid,fa-pagelines,fa-paypal,fa-pied-piper,fa-pied-piper-alt,fa-pinterest,fa-pinterest-square,fa-qq,fa-ra,fa-rebel,fa-reddit,fa-reddit-square,fa-renren,fa-share-alt,fa-share-alt-square,fa-skype,fa-slack,fa-slideshare,fa-soundcloud,fa-spotify,fa-stack-exchange,fa-stack-overflow,fa-steam,fa-steam-square,fa-stumbleupon,fa-stumbleupon-circle,fa-tencent-weibo,fa-trello,fa-tumblr,fa-tumblr-square,fa-twitch,fa-twitter,fa-twitter-square,fa-vimeo-square,fa-vine,fa-vk,fa-wechat,fa-weibo,fa-weixin,fa-windows,fa-wordpress,fa-xing,fa-xing-square,fa-yahoo,fa-yelp,fa-youtube,fa-youtube-play,fa-youtube-square".split(","),MEDICAL:"fa-ambulance,fa-h-square,fa-hospital-o,fa-medkit,fa-plus-square,fa-stethoscope,fa-user-md,fa-wheelchair".split(",")},j=g.custom?g.custom.split(","):[],k={columnDefinitions:[{name:"d",title:i("NAME"),alignment:"left"}],filters:[{name:"search",title:i("SEARCH"),type:"search"}],filterLov:function(a,b){function c(a){g.push({r:a,d:a,preview:'<span class="fa '+e.escapeHTMLAttr(a)+' fa-lg"></span>'})}function f(a,b){for(var d=0;d<a.length;d++)c(a[d]),b&&c(a[d]+" fa-spin")}var g=[];if("FONTAWESOME"===a.type){if(""===a.category)for(var i in h)h.hasOwnProperty(i)&&f(h[i],"SPINNER"===i);else f(h[a.category],"SPINNER"===a.category);b(g,a.search)}else"CUSTOM"===a.type?(f(j,!1),b(g,a.search)):a.type&&"UTILIZED"!==a.type||d.metaData.lovValues(function(d){for(var e=0;e<d.length;e++)c(d[e].r);b(g,a.search)},a)}},l={name:"type",title:i("TYPE"),type:"buttonset",defaultValue:"",lov:[]};if(j.length>0&&(l.lov.push({display:i("CUSTOM"),value:"CUSTOM"}),l.defaultValue="CUSTOM"),"FONTAWESOME"===g.library){k.columnDefinitions.push({name:"preview",title:i("PREVIEW"),alignment:"center",width:"20%",escape:!1}),f={name:"category",title:i("CATEGORY"),type:"select",defaultValue:"WEB_APPLICATION",lov:[]};for(var m in h)h.hasOwnProperty(m)&&f.lov.push({display:i("FA."+m),value:m});l.lov.unshift({display:"Font Awesome",value:"FONTAWESOME",filters:[f]}),l.defaultValue="FONTAWESOME",z||(z=b('<link rel="stylesheet" type="text/css" href="'+apex_img_dir+'libraries/font-awesome/4.2.0/css/font-awesome.min.css" />').appendTo("head"))}l.lov.length>0&&(l.lov.push({display:i("UTILIZED"),value:"UTILIZED"}),k.filters.unshift(l)),this["super"]("init",c,d,k)}},b.apex.propertyEditor.PROP_TYPE.COMBOBOX),b.apex.propertyEditor.addPropertyType(Z.CSS,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.JAVASCRIPT,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.HTML,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.PLSQL,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.PLSQL_EXPR_VARCHAR,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.PLSQL_EXPR_BOOLEAN,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.PLSQL_FUNC_VARCHAR,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.PLSQL_FUNC_BOOLEAN,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.SQL,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.SQL_EXPR,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.XML,null,Z.TEXT_EDITOR),b.apex.propertyEditor.addPropertyType(Z.TEMPLATE_OPTIONS_GENERAL,{init:function(a,c){function d(){var a=b(this).prop("checked");a&&f.prop("checked",!0),f.prop("disabled",a)}var f=b();this["super"]("init",a,c),this.checkboxes$=a.find("input[type=checkbox]"),this.defaultCheckbox$=this.checkboxes$.filter("[value='#DEFAULT#']");for(var g=0;g<c.metaData.defaultTemplateOptions.length;g++)f=f.add(this.checkboxes$.filter("[value='"+e.escapeCSS(c.metaData.defaultTemplateOptions[g])+"']"));this.defaultCheckbox$.on("click setdefaultcheckboxes",d).trigger("setdefaultcheckboxes")},getValue:function(){var a=[];return this.checkboxes$.filter(":checked:not(:disabled)").each(function(){a.push(this.value)}),a.join(":")},setValue:function(a,b,c){this["super"]("setValue",a,b,c),this.defaultCheckbox$.trigger("setdefaultcheckboxes")}},b.apex.propertyEditor.PROP_TYPE.CHECKBOXES),b.apex.propertyEditor.addPropertyType(Z.TEMPLATE_OPTIONS,{_getProperties:function(a,c){var d,e,f,g,h=this.getValue(a).split(":"),j=[],k={},l=[],m=[],n={common:[],advanced:[]};for(d=0;d<this.templateOptions.values.length;d++)this.templateOptions.values[d].groupId?(e=this.templateOptions.values[d].groupId,k.hasOwnProperty(e)?f=k[e]:(j.push({title:this.templateOptions.groups[e].title,seq:this.templateOptions.groups[e].seq,nullText:this.templateOptions.groups[e].nullText,isAdvanced:this.templateOptions.groups[e].isAdvanced,isRequired:!1,lovValues:[],value:""}),f=j.length-1,k[e]=f),-1!==b.inArray(this.templateOptions.values[d].r,this.templateOptions.presetValues)&&(j[f].isRequired=!0,""===j[f].value&&(j[f].value=this.templateOptions.values[d].r)),-1!==b.inArray(this.templateOptions.values[d].r,h)&&(j[f].value=this.templateOptions.values[d].r),j[f].lovValues.push({r:this.templateOptions.values[d].r,d:this.templateOptions.values[d].d})):(m.push(this.templateOptions.values[d]),-1!==b.inArray(this.templateOptions.values[d].r,h)&&l.push(this.templateOptions.values[d].r));for(j.sort(function(a,b){return a.seq===b.seq?a.title.localeCompare(b.title):a.seq-b.seq}),n.common[0]={propertyName:"general",value:l.join(":"),metaData:{type:Z.TEMPLATE_OPTIONS_GENERAL,prompt:i("TEMPLATE_OPTIONS.GENERAL"),isReadOnly:c.metaData.isReadOnly,isRequired:!1,lovValues:m,displayGroupId:"common",defaultTemplateOptions:this.templateOptions.defaultValues},errors:[],warnings:[]},d=0;d<j.length;d++)g=j[d].isAdvanced?"advanced":"common",n[g].push({propertyName:"grp"+d,value:j[d].value,metaData:{type:b.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:j[d].title,isReadOnly:c.metaData.isReadOnly,isRequired:j[d].isRequired,nullText:j[d].nullText,lovValues:j[d].lovValues,displayGroupId:g},errors:[],warnings:[]});return n},_getDisplayValue:function(b){var c,d=[],e=b.value,f=e.split(":");if(this.templateOptions=a.getTemplateOptions(A[0].getProperty(b.propertyName)),""===e)return i("TEMPLATE_OPTIONS.NONE_SELECTED");c=this.templateOptions.valuesMap;for(var g=0;g<f.length;g++)d.push(c.hasOwnProperty(f[g])?c[f[g]].d:k("LOV.UNKNOWN_LOOKUP",f[g]));return d.join(", ")},noLabel:!0,render:function(a,b,c){var d,e=b+"_label",f=this._getDisplayValue(c);d=this.templateOptions.values.length<2,this.renderDivOpen(a,{"class":H}),a.markup("<button").attr("type","button").attr("id",b).attr("aria-describedby",e).attr("class",M+" "+N).attr(_,c.propertyName).attr("value",c.value).optionalAttr("disabled",d).markup(">").content(f).markup("</button>"),this.renderDivClose(a)},init:function(a,c){var f=this;f.addLabelClickHandler(a,c),f.addTooltipsForErrors(a,c),a.closest("div."+E).on("click","#"+a.attr("id"),function(){var g,h=f._getProperties(a.closest("div."+E),c),j=e.htmlBuilder();j.markup("<div").attr("id","templateOptionsDlg").attr("title",c.metaData.prompt).markup(">").markup("<div").attr("id","templateOptionsDlgPE").markup(">").markup("</div>").markup("</div>"),g=b(j.toString()).dialog({modal:!0,closeText:d.getMessage("APEX.DIALOG.CLOSE"),minWidth:400,width:520,dialogClass:Y,close:function(){b("#templateOptionsDlgPE").propertyEditor("destroy"),g.dialog("destroy")},open:function(){var a=b("#templateOptionsDlgPE");a.propertyEditor({focusPropertyName:"general",hideDisplayGroups:0===h.advanced.length,data:{propertySet:[{displayGroupId:"common",displayGroupTitle:i("TEMPLATE_OPTIONS.COMMON"),properties:h.common},{displayGroupId:"advanced",displayGroupTitle:i("TEMPLATE_OPTIONS.ADVANCED"),properties:h.advanced}]},change:function(){}}),b("#templateOptionsDlg").dialog({position:{my:"center",at:"center"}})},buttons:[{text:i("CANCEL"),click:function(){g.dialog("close")}},{text:i("OK"),"class":O,disabled:c.metaData.isReadOnly,click:function(){function d(a){for(var b=0;b<a.length;b++)e=i.propertyEditor("getPropertyValue",a[b].propertyName),""!==e&&j.push(e)}var e,i=b("#templateOptionsDlgPE"),j=[];d(h.common),d(h.advanced),f.setValue(a,c,j.join(":")),a.trigger("change"),f.setFocus(a),g.dialog("close")}}]})})},setValue:function(a,b,c){var d;this["super"]("setValue",a,b,c),d=this._getDisplayValue(b),a.html(d).attr("title",d)}}),b.apex.propertyEditor.addPropertyType(Z.SUBSCRIPTION,null,b.apex.propertyEditor.PROP_TYPE.TEXT),b.apex.propertyEditor.addPropertyType(Z.OWNER,null,b.apex.propertyEditor.PROP_TYPE.SELECT_LIST),b.apex.propertyEditor.addPropertyType(Z.COLUMN,null,b.apex.propertyEditor.PROP_TYPE.SELECT_LIST),b(document).ready(function(){var c,d=f.getBoolPref(bb,!1),e=b("#pe_expand_all"),g=b("#pe_collapse_all");w=f.getBoolPref(cb,!0)?C:D,x=b("#pe_show_all"),y=b("#pe_show_common"),gb=parseInt(f.getPreference(db),10),isNaN(gb)&&(gb=900),hb=parseInt(f.getPreference(eb),10),isNaN(hb)&&(hb=600),ib=window.gPreferences[kb]||"",y.click(function(){t()}),x.click(function(){u()}),w===C?x.addClass(L):y.addClass(L),e.click(function(){v.propertyEditor("expandAll")}),g.click(function(){v.propertyEditor("collapseAll")}),c={menubar:!1,items:[{type:"radioGroup",set:function(a){a===D?t():u()},get:function(){return w},choices:[{label:i("SHOW_COMMON"),value:D},{label:i("SHOW_ALL"),value:C}]},{type:"toggle",label:i("KEEP_LABELS_ABOVE"),get:function(){return d},set:function(a){v.propertyEditor("option","labelsAlwaysAbove",a),f.saveBoolPref(bb,a),d=a}}]},v=b("#pe"),v.propertyEditor({showAll:w===C,expand:function(a,b){delete fb[b.displayGroupId]},collapse:function(a,b){fb[b.displayGroupId]=!0},change:function(b,c){var d,e=a.transaction.message({action:a.MESSAGE_ACTION.CHANGE,component:A[0],property:A[0].getProperty(c.propertyName),count:A.length}),f=a.transaction.start(B,e);for(d=0;d<A.length;d++)A[d].getProperty(c.propertyName).setValue(c.property.value);apex.commandHistory.execute(f)}}),v.on("propertyeditoractivate",function(a,c){var d=apex.util.htmlBuilder(),e=c.metaData.helpText;b.isFunction(e)&&(e=e()),d.markup("<h3>").content(c.metaData.prompt).markup("</h3>"),"<"!==e.charAt(0)&&(e="<p>"+e+"</p>"),d.markup(e),c.metaData.isCustomPluginAttribute?f.setHelpText(d.toString()):f.setHelpText(d.toString(),"P1_COMPONENT_TYPE_ID,P1_PROPERTY_ID,P1_APEX_VERSION:"+A[0].typeId+","+c.propertyName+","+gApexVersion)}).on("propertyeditordeactivate",function(){f.clearHelpText()}),b(document).on("selectionChanged",function(a,b,c,d){r(c,d)}),b(document).on("modelCleared",function(){q()})})}(pe,apex.jQuery,apex.debug,apex.lang,apex.util,window.pageDesigner,apex.navigation,apex.server);
!function(a,b,c,d,e){"use strict";function f(a,b,c){return a>b&&b+c>a}function g(a){return a.parent().children(":visible").index(a)}function h(a,b,c,d){var e,f;"string"!=typeof b&&(d=c,c=b,b="*"),e=a.children(b),f=e.index(c),f>=0&&d>f&&(d+=1),d>=e.length?a.append(c):e.eq(d).before(c)}function i(a){var b,c=a||"";return b=c.indexOf("_"),0>b?void 0:c.substring(b+1)}function j(a,b){var c;for(c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function k(a){var b=0,c=a.parent();return c.children().each(function(){return this===a[0]?!1:void(b+=this.colSpan||1)}),b}function l(a,b,c,d){var e=b[c];e!==d&&(a.propertyChanges.push({component:b,property:c,oldValue:e,newValue:d}),b[c]=d)}function m(a,b,c,d){var e,f,g;if(0>c&&(c=0),d>0)for(g=Math.floor(c/d),0===g&&(g=1),e=b;e<a.length;e++)f=a[e],-1===f.span&&(f.span=g,c-=g,c>0&&g>c&&(f.span+=c))}function n(a,b){var c,d,e,f=b,g=0,h=0,i=0,j=1;for(c=0;c<a.columns.length;c++)e=a.columns[c],e.col>1&&(d=e.col-j,m(a.columns,g,d-h,i),f-=d,g=c,h=0,i=0,j=e.col),e.span>0?h+=e.span:i+=1;m(a.columns,g,f-h,i)}function o(a,b,c){var d;for(d in c)c.hasOwnProperty(d)&&b[d]&&(a+=" "+c[d]);return a}function p(a,b){var c;for(c in b)if(b.hasOwnProperty(c)&&a[c])return b[c];return null}function q(a,b){return a.types.indexOf(b)>=0}function r(a,b){var c,d="";for(c=0;c<a.length;c++)c>0&&(d+=" "),d+=qb[a[c]][b];return d}function s(a){var b="";return a.hasClass(P)&&(b+=",."+y),a.hasClass(O)&&(b+=",."+x),a.hasClass(Q)&&(b+=",."+z),b.substr(1)}function t(a){var b="",c=a.closest(_);return c.hasClass(A)&&(b+=" "+P),c.hasClass(C)&&(b+=" "+O),c.hasClass(E)&&(b+=" "+Q),b.substr(1)}var u="a-GridLayout",v="a-GridLayout-page",w=".a-GridLayout-page",x="a-GridLayout-pageItem",y="a-GridLayout-region",z="a-GridLayout-button",A="a-GridLayout-regionContainer",B=".a-GridLayout-regionContainer",C="a-GridLayout-itemContainer",D=".a-GridLayout-itemContainer",E="a-GridLayout-buttonContainer",F=".a-GridLayout-buttonContainer",G="a-GridLayout-regionContent",H="a-GridLayout-buttonGroup",I=".a-GridLayout-buttonGroup,.a-GridLayout-regionContent",J="a-GridLayout-buttonRow",K=".a-GridLayout-buttonRow",L="a-GridLayout--conditional",M="a-GridLayout--legacy",N=".a-GridLayout--legacy",O="a-GridLayout-items",P="a-GridLayout-regions",Q="a-GridLayout-buttons",R="a-GridLayout-grid",S=".a-GridLayout-grid",T="a-GridLayout-stack",U="a-GridLayout-flow",V="a-GridLayout-label",W=".a-GridLayout-label",X="a-GridLayout-dragAction",Y=".a-GridLayout-dragAction",Z=".a-GridLayout-pageItem, .a-GridLayout-region, .a-GridLayout-button",$=".a-GridLayout-page, .a-GridLayout-pageItem, .a-GridLayout-region, .a-GridLayout-button",_=".a-GridLayout-regionContainer, .a-GridLayout-itemContainer, .a-GridLayout-buttonContainer",ab=".a-GridLayout-grid, .a-GridLayout-stack, .a-GridLayout-flow",bb="a-GridLayout-templateGrid",cb="is-disabled",db="is-focused",eb=".is-selected",fb="is-selected",gb="is-active",hb="a-GridLayout-helper",ib="a-GridLayout-placeholder",jb="a-GIcon",kb="is-draggable",lb=".is-draggable",mb="aria-selected",nb=-1,ob=-2,pb=-3,qb={regionContainer:[A,P],itemContainer:[C,O],buttonContainer:[E,Q]},rb={region:y,item:x,button:z},sb=[50,75,100,125,150,175,200];a.widget("apex.gridlayout",a.ui.mouse,{version:"5.0",widgetEventPrefix:"gridlayout",dragging:!1,animating:!1,nodeMap:{},nextId:1,dragComponent:null,helper:null,fromOutside:!1,isOver:!1,lastZoom:"",pageRoot:null,options:{getPageRoot:null,getIconForComponent:function(a){var b="",c=a.type;return"region"===c?b="region":"item"===c?b="page-item":"button"===c?b="button":"page"===c&&(b="page"),b},makeComponent:null,updateComponentCopy:null,deleteKeyAction:null,contextMenuAction:null,stateClassMap:{},stateIconMap:{},displayFrom:null,hideLegacyDisplayPoints:!1,hideEmptyDisplayPoints:!1,hideButtons:!1,hideItems:!1,zoom:100,iconType:jb,appendTo:"parent",containment:!1,cursor:"auto",cursorAt:!1,gridTolerance:10,idPrefix:null,multiple:!0,opacity:!1,animate:!0,scroll:!0,scrollSensitivity:20,scrollSpeed:20,tolerance:"intersect",zIndex:1e3,activate:null,deactivate:null,out:null,over:null,start:null,beforeStop:null,stop:null,selectionChange:null,added:null,removed:null,moved:null,copied:null},_create:function(){var b=this.options,c=this;if(!b.makeComponent||!b.updateComponentCopy||!b.getPageRoot)throw"Missing required options.";this.pageRoot=b.getPageRoot(),this.containerCache={},this.element.addClass(u),this.baseId=(b.idPrefix||this.element[0].id||"glv")+"_",this.refresh(!1),this._setZoom(),this.offset=this.element.offset(),this._mouseInit(),this.element.on("keydown.glv",function(d){var e=a.ui.keyCode,f=d.which;d.altKey||(f===e.HOME?(c._select(a(w+":first"),d,!0,!0),d.preventDefault()):f===e.END?(c._select(c.element.find($).last(),d,!0,!0),d.preventDefault()):f===e.DOWN?(c._traverseDown(d),d.preventDefault()):f===e.UP?(c._traverseUp(d),d.preventDefault(),d.stopPropagation()):f===e.LEFT?(c._traverseLeft(d),d.preventDefault()):f===e.RIGHT?(c._traverseRight(d),d.preventDefault()):f===e.SPACE?(c.lastFocused&&c._select(a(c.lastFocused),d,!0,!0),d.preventDefault()):b.deleteKeyAction&&f===e.DELETE?(c.lastFocused&&b.deleteKeyAction(d),d.preventDefault()):b.contextMenuAction&&d.shiftKey&&121===f&&(c.lastFocused&&!a(c.lastFocused).is(eb)&&c._select(a(c.lastFocused),{},!1,!0),b.contextMenuAction(d),d.preventDefault()))}).on("focusin",function(b){var d=a(b.target).closest($);0!==d.length&&(d.addClass(db),c._setFocusable(d[0]))}).on("focusout",function(b){var c=a(b.target).closest($);c.removeClass(db)}).on("contextmenu",function(d){var e;b.contextMenuAction&&(e=a(d.target).closest($).not(eb),e.length&&c._select(e,{},!1,!1),b.contextMenuAction(d),d.preventDefault())})},_destroy:function(){return this.element.removeClass(u).empty(),this._mouseDestroy(),this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass(cb,!!c)):a.Widget.prototype._setOption.apply(this,arguments),"displayFrom"===b?this.refresh(!1):"hideLegacyDisplayPoints"===b||"hideButtons"===b||"hideItems"===b||"hideEmptyDisplayPoints"===b?this._showOrHideDisplayPoints():"zoom"===b&&this._setZoom()},pageDataChanged:function(){var a=this.options;this.pageRoot=this.options.getPageRoot(),a.displayFrom&&(this._find(a.displayFrom,!0)||(a.displayFrom=null)),this.refresh(!1)},getPageData:function(){return this.pageRoot},refresh:function(a){var d,e,f,g,h,i,j,k=this.options,l=b.htmlBuilder();if(c.info("Gridlayout refresh"),!a)for(h=[],g=this.getSelectedComponents(),d=0;d<g.length;d++)h.push(g[d].id);if(this._layoutPage(),this.nodeMap={},k.displayFrom){if(e=this._find(k.displayFrom,!0),!e)throw"No such region in displayFrom option: "+k.displayFrom;for(i=!0,j=e._parent;j;){if(j.components&&!j.isGrid){i=!1;break}j=j._parent}this._renderRegion(l,e,i,!0)}else this._renderPage(l,this.pageRoot);return this.element.html(l.toString()),this._showOrHideDisplayPoints(),f=this.element.children().eq(0),a?(this._select(f,a),this._trigger("selectionChange")):(this._setFocusable(f[0]),h.length>0&&this.element.is(":visible")&&(this.setSelectedComponents(h,!1),h.length!==this.getSelection().length&&this._trigger("selectionChange"))),this},dump:function(){c.log("Page: \r\n"+JSON.stringify(this.pageRoot,function(a,b){return"_parent"===a?"-> "+(this._parent.id||this._parent.title):"_modelComponent"===a?"[id="+b.id+"]":"_parentGrid"===a?"-> "+j(this._parentGrid._parent._grids,this._parentGrid):"_parentRow"===a?"-> "+j(this._parentRow._parentGrid.rows,this._parentRow):"_parentColumn"===a?"-> "+j(this._parentColumn._parentRow.columns,this._parentColumn):b},2))},findById:function(b){var c=this._find(b);return c?this._getElement(c):a()},findComponentById:function(a){return this._find(a)},getContainer:function(a){return a.closest(_)},findContainer:function(a,b){var c,d,e,f=this.pageRoot;if(d=f.id===a?f:this._find(a,!0))for(c=0;c<d.displayPoints.length;c++)if(e=d.displayPoints[c],e.id===b)return e;return null},getComponents:function(a){var b=this,c=[];return a.each(function(){c.push(b._getNode(this))}),c},getSelection:function(){return this.element.find(eb)},getSelectedComponents:function(){return this.getComponents(this.getSelection())},setSelection:function(a,b){b=!!b,this._select(a,null,b,!1,!0)},setSelectedComponents:function(b,c){var d,e,f,g=[];for(c=!!c,d=0;d<b.length;d++)e=this._find(b[d]),e&&(f=this._getElement(e),f.length>0&&g.push(f[0]));this._select(a(g),null,c,!1,!0)},focus:function(){this.lastFocused&&this.lastFocused.focus()},makeHelper:function(c,d,e,f){var g,h,i=this.options.getIconForComponent,j=new b.htmlBuilder;return c||(g=this._getNode(this.dragComponent[0]),c=g.type,d=i(g),e=g.title),h=rb[c]+" "+hb,j.markup("<div").attr("class",h).optionalAttr("data-type-id",f).markup(">"),this._renderHeader(j,d,e,!0),j.markup("<div").attr("class",X).markup("></div></div>"),a(j.toString())},getDropTargets:function(b,c){function e(c){i=c,a(this).children().eq(0).children(k).each(function(c){return n&&this===b[0]?void(m=!0):void g.items.push({element:a(this),row:h,col:i,index:c,name:a(this).children("h3").text()})})}function f(b){h=b,a(this).children("td").each(e)}var g,h,i,j,k,l,m,n,o,p=[];if(c=c||"move",n="move"===c,"add"===c&&"string"==typeof b&&(o=b),"item"===o||!o&&b.hasClass(x))j=O;else if("region"===o||!o&&b.hasClass(y))j=P;else{if("button"!==o&&(o||!b.hasClass(z)))throw"Invalid component or component type";j=Q}return j="."+j,k="."+k,l=a(j,this.element).filter(":visible"),l.each(function(){var c,e,h,i,j,l=a(this),o=null;k=s(l),l.hasClass(R)?e="grid":l.hasClass(T)?e="stack":l.hasClass(U)&&(e="flow"),("stack"!==e||"TD"!==l.parent()[0].nodeName)&&(n&&0!==l.parents().filter(b[0]).length||(i=l.parent().closest(".a-GridLayout-region").find(".a-GridLayout-label").eq(0).text(),j="",""!==i&&(j=i+" > "),"flow"===e&&"TD"===l.parent()[0].nodeName?(h=l.closest(K).prev().text(),l.parent().next().length>0?(h=d.formatMessageNoEscape("GL.BTN_POS_L",h),o="left"):(h=d.formatMessageNoEscape("GL.BTN_POS_R",h),o="right")):h=l.prev().text(),j+=h,g={element:l.closest(_),type:e,region:i,name:h,label:j},m=!1,"grid"===e?(g.items=[],l.children("tbody").children("tr").each(f)):(g.items=[],o&&(g.alignment=o),l.children(k).each(function(d){return n&&this===b[0]?void(m=!0):(c={element:a(this),index:d,name:a(this).children("h3").text()},o&&(c.alignment=o),void g.items.push(c))})),m&&0===g.items.length||p.push(g)))}),p},update:function(d,e,f){var g,h,i,j,k,l,m=this.options,n=!1;if("string"==typeof d&&(d=this._find(d)),!d)throw"Nothing to update";if(c.getLevel()>=c.LOG_LEVEL.INFO&&c.info("Gridlayout update component: "+d.title+", layoutChange: "+e+", childrenOnly: "+f),e&&((!f||d._parent)&&(d=d._parent._parent),n="page"===d.type?!0:a.isArray(d._parent._grids),this._layoutDisplayPoints(d.displayPoints,d,n,12)),i=this._getElement(d),i.length)if(e)k=this.getSelectedComponents(),h=b.htmlBuilder(),"page"===d.type?this._renderPage(h,d):this._renderComponent(h,d,n),j=a(h.toString()),i.hasClass(fb)&&j.addClass(fb),j[0].tabIndex=i[0].tabIndex,i.replaceWith(j),this._showOrHideDisplayPoints(j),this.setSelectedComponents(k);else{i.find(W).first().html(b.escapeHTML(d.title)),i.toggleClass(L,!!d.isConditional);for(g in m.stateClassMap)m.stateClassMap.hasOwnProperty(g)&&i.toggleClass(m.stateClassMap[g],!!d[g]);i.find("."+m.iconType)[0].className=m.iconType+" "+m.getIconForComponent(d),l=p(d,m.stateIconMap),l&&i.find(W).first().prepend("<span class='a-Icon "+l+"'></span>")}},add:function(a,b,d,e,f,g,h,i,j){var k,l,m;if(("string"==typeof b||"number"==typeof b)&&(l=b,b=this.options.makeComponent(l)),d=this._getContainerElement(d),!d||!d.is(_))throw"Invalid add destination";return c.getLevel()>=c.LOG_LEVEL.INFO&&c.info("Gridlayout add component: "+b.title+" to: "+d[0].id+", g/r/c/i: "+e+"/"+f+"/"+g+"/"+h),k=this._add(b,d,e,f,g,h,i,j),m=k.newComponent$,k.lastChange=!0,this._trigger("added",a,k),this._select(m,a,!0),this},remove:function(b,d){var e,f,g,h,i,j=[],k=a(this.lastFocused).hasClass(db),l=this;if(c.getLevel()>=c.LOG_LEVEL.INFO&&c.info("Gridlayout remove "+(d?d.length+" component(s).":"selection")),d=d||this.getSelection(),a.isArray(d)){for(h=[],e=0;e<d.length;e++)i=this.findById(d[e]),i.length>0&&h.push(i[0]);d=a(h)}if(!d||0===d.filter(Z).length)throw"Nothing to remove";for(g=d.filter(eb).eq(0);g&&g.length&&g.hasClass(fb)&&!g.is(w);)g=a(this._traverseUp(b,!0)),g&&(this.lastFocused=g[0]);for(d.filter(Z).each(function(){var b;b=l._getNode(this),b&&(c.info("Gridlayout remove component: "+b.title),f=l._remove(a(this)),j.push(f))}),e=0;e<j.length;e++)j[e].lastChange=e>=j.length-1,l._trigger("removed",b,j[e]);return g&&g.length&&this._select(g,b,k),this},move:function(b,d,e,f,g,h,i,j){var k,l;if(d=d||a(this.lastFocused),d=this._getComponentElement(d),!d||!d.is(Z))throw"Nothing to move";if(e=this._getContainerElement(e),!e||!e.is(_))throw"Invalid move destination";return c.getLevel()>=c.LOG_LEVEL.INFO&&c.info("Gridlayout move component: "+this._getNode(d[0]).title+" to: "+e[0].id+", g/r/c/i: "+f+"/"+g+"/"+h+"/"+i),k=this._moveOrCopy(d,e,f,g,h,i,j,!1),l=k.newComponent$,k.lastChange=!0,this._trigger("moved",b,k),this._select(l,b,!0),this},copy:function(b,d,e,f,g,h,i,j){var k,l;if(d=d||a(this.lastFocused),d=this._getComponentElement(d),!d||!d.is(Z))throw"Nothing to copy";if(e=this._getContainerElement(e),!e||!e.is(_))throw"Invalid copy destination";return c.getLevel()>=c.LOG_LEVEL.INFO&&c.info("Gridlayout copy component: "+this._getNode(d[0]).title+" to: "+e[0].id+", g/r/c/i: "+f+"/"+g+"/"+h+"/"+i),k=this._moveOrCopy(d,e,f,g,h,i,j,!0),l=k.newComponent$,k.lastChange=!0,this._trigger("copied",b,k),this._select(l,b,!0),this},_layoutGrid:function(a,b,c,d){function e(a,b){var c=s.columns.splice(a,1);s.columns.splice(b,0,c[0])}var f,g,h,i,j,k,l,m=this.pageRoot,o=null,p={},q=0,r=null,s=null,t=null,u=0;if(c)for(o=[],i=0;i<a.length;i++)if(j=a[i],(!r||c&&"fixed"!==m.gridType&&j.newGrid)&&(r={_parent:b,rows:[]},s=null,o.push(r)),(!s||c&&j.newRow)&&(s={_parentGrid:r,columns:[]},t=null,r.rows.push(s),p={}),c&&j.col>0)if(p.hasOwnProperty(j.col))s.columns[p[j.col]].components.push(j),j._parentColumn=s.columns[p[j.col]];else if(t={_parentRow:s,col:j.col,span:m.hasColumnSpan?j.span||-1:1,rowSpan:j.rowSpan,components:[j]},j._parentColumn=t,s.columns.push(t),u=s.columns.length-1,j.col<q){for(l=u,k=j.col+1;q>=k;k++)p.hasOwnProperty(k)&&(p[k]<l&&(l=p[k]),p[k]+=1);l!==u&&e(u,l),p[j.col]=l}else q=j.col,p[j.col]=u;else(!t||c&&j.newCol)&&(t={_parentRow:s,col:-1,span:m.hasColumnSpan?j.span||-1:1,rowSpan:j.rowSpan,components:[]},s.columns.push(t)),t.components.push(j),j._parentColumn=t;if(c&&"fixed"===m.gridType&&m.hasColumnSpan)for(f=0;f<o.length;f++)for(r=o[f],g=0;g<r.rows.length;g++)s=r.rows[g],n(s,d);if(o)for(f=0;f<o.length;f++)for(r=o[f],g=0;g<r.rows.length;g++)for(s=r.rows[g],h=0;h<s.columns.length;h++)t=s.columns[h];for(i=0;i<a.length;i++)j=a[i],j._parent=b,j.displayPoints&&this._layoutDisplayPoints(j.displayPoints,j,c,d);return o},_layoutDisplayPoints:function(a,b,c,d){var e,f,g=this.pageRoot,h=0;for(e=0;e<a.length;e++){if(f=a[e],f._parent=b,f.hasOwnProperty("span")||f.hasOwnProperty("newColumn")){if(f.newGrid===!0&&(delete f.newRow,delete f.newColumn),f.newRow===!0&&delete f.newColumn,(f.newRow===!0||f.newGrid===!0)&&(h=0),f.span=f.span||1,f.newColumn!==!1&&(h+=f.span),"fixed"===g.gridType&&h>d)throw"Fixed layout template grid exceeded max columns. Display point: "+f.title;if(c&&f.isGrid&&!f.maxColumns&&(f.maxColumns="fixed"!==g.gridType||g.alwaysUseMaxColumns?d:f.span),f.isGrid&&"fixed"===g.gridType&&!g.alwaysUseMaxColumns&&f.span!==f.maxColumns)throw"Fixed layout span and maxColumns must be the same. Display point: "+f.title}else h=0,c&&f.isGrid&&!f.maxColumns&&(f.maxColumns=d);if(f.hasRowSpan&&!g.hasRowSpan)throw"Row span not allowed for display point when page doesn't support row span. Display point: "+f.title;f._grids=this._layoutGrid(f.components,f,c&&f.isGrid,f.maxColumns||d)}},_layoutPage:function(){var a=this.pageRoot;this._layoutDisplayPoints(a.displayPoints,a,!0,a.maxColumns)},_showOrHideDisplayPoints:function(b){var c,d=this.options,e=this;b=b||this.element,b.find(B).each(function(){var b=e._getNode(this);a(this).toggle(!d.hideEmptyDisplayPoints&&a(this).is(N)?!d.hideLegacyDisplayPoints||0!==b.components.length:!d.hideEmptyDisplayPoints||0!==b.components.length)}),b.find(F).each(function(){var b=e._getNode(this);c=!(d.hideButtons||d.hideEmptyDisplayPoints&&0===b.components.length),c&&b.isLegacy&&(c=!d.hideLegacyDisplayPoints||0!==b.components.length),a(this).toggle(c)}),b.find(D).each(function(){var b=e._getNode(this);c=!(d.hideItems||d.hideEmptyDisplayPoints&&0===b.components.length),c&&b.isLegacy&&(c=!d.hideLegacyDisplayPoints||0!==b.components.length),a(this).toggle(c)}),d.hideEmptyDisplayPoints},_find:function(a,b){function c(d){var e,f,g,h,i=null;for(e=0;e<d.length;e++)if(g=d[e],!b||q(g,"regionContainer"))for(f=0;f<g.components.length;f++){if(h=g.components[f],h===a||h.id===a)return h;if(h.displayPoints&&(i=c(h.displayPoints)))return i}return i}var d=this.pageRoot;return!b&&d===a||d.id===a?d:c(d.displayPoints)},_getComponentElement:function(a){return"string"==typeof a?this.findById(a):a._elementId?this._getElement(a):a},_getContainerElement:function(b){var c;return a.isArray(b)?(c=this.findContainer(b[0],b[1]),c?this._getElement(c):null):b._elementId?this._getElement(b):b},_addNode:function(a){var b=this.nextId;return this.nodeMap[this.nextId]=a,a._elementId=this.nextId,this.nextId+=1,this.baseId+b},_setNode:function(a){if(!a._elementId)throw"Failed to add node to nodeMap - no id";this.nodeMap[a._elementId]=a},_getNode:function(a){var b=i(a.id);return this.nodeMap[b]},_getElement:function(b){var c=this.baseId+b._elementId;return a("#"+c)},_renderHeader:function(a,b,c,d,e){a.markup("<h3").optionalAttr("class",null!==d?kb:null).optionalAttr("aria-grabbed",null!==d?""+d:null).markup("><span").attr("class",this.options.iconType+" "+b).markup("></span><span").attr("class",V).markup(">"),e&&a.markup("<span class='a-Icon ").attr(e).markup("'></span>"),a.content(c).markup("</span></h3>")},_renderRegion:function(a,b,c,d){var e,f=y;b.isConditional&&(f+=" "+L),f=o(f,b,this.options.stateClassMap),e=p(b,this.options.stateIconMap),a.markup("<div").attr("class",f).attr("id",this._addNode(b)).markup(" tabindex='-1'>"),this._renderHeader(a,this.options.getIconForComponent(b),b.title,d||b.isReadOnly?null:!1,e),this._renderDisplayPoints(a,b.displayPoints,c,b.itemsAboveContent),a.markup("</div>")},_renderItem:function(a,b){var c,d=x;b.isConditional&&(d+=" "+L),d=o(d,b,this.options.stateClassMap),c=p(b,this.options.stateIconMap),a.markup("<div").attr("class",d).attr("id",this._addNode(b)).markup(" tabindex='-1'>"),this._renderHeader(a,this.options.getIconForComponent(b),b.title,b.isReadOnly?null:!1,c),a.markup("</div>")},_renderButton:function(a,b){var c,d=z;b.isConditional&&(d+=" "+L),d=o(d,b,this.options.stateClassMap),c=p(b,this.options.stateIconMap),a.markup("<div").attr("class",d).attr("id",this._addNode(b)).markup(" tabindex='-1'>"),this._renderHeader(a,this.options.getIconForComponent(b),b.title,b.isReadOnly?null:!1,c),a.markup("</div>")},_renderComponentsInGrid:function(a,b,c,d){function e(){for(a.markup("<thead><tr>"),f=0;f<b.maxColumns;f++)a.markup("<td></td>");a.markup("</tr></thead>")}var f,g,h,i,j,k,l,m,n,o,p=this.pageRoot.gridType;if(d.length>0)for(g=0;g<d.length;g++){for(m=d[g],a.markup("<table").attr("class",R+" "+c+(0===g?" first":"")).markup(">"),"fixed"===p&&e(),a.markup("<tbody>"),h=0;h<m.rows.length;h++){for(n=m.rows[h],a.markup("<tr>"),l=1,i=0;i<n.columns.length;i++){for(o=n.columns[i],o.col>l&&(a.markup("<td").attr("colspan",o.col-l).markup("><div").attr("class",T+" "+c).markup("></div></td>"),l=o.col),l+=o.span>0?o.span:1,a.markup("<td").optionalAttr("colspan",o.span).optionalAttr("rowspan",o.rowSpan).markup("><div").attr("class",T+" "+c).markup(">"),j=0;j<o.components.length;j++)k=o.components[j],this._renderComponent(a,k,!0);a.markup("</div></td>")}a.markup("</tr>")}a.markup("</tbody></table>")}else a.markup("<table").attr("class",R+" first "+c).markup(">"),"fixed"===p&&e(),a.markup("<tbody><tr><td><div").attr("class",T+" "+c).markup("></div></td></tr></tbody></table>")},_renderComponent:function(a,b,c){if("region"===b.type)this._renderRegion(a,b,c);else if("item"===b.type)this._renderItem(a,b);else{if("button"!==b.type)throw"Unknown component type";this._renderButton(a,b)}},_renderComponents:function(a,b,c,d){var e,f;if(a.markup("<div").attr("class",b).markup(">"),c&&c.length>0)for(e=0;e<c.length;e++)f=c[e],d&&f.alignment!==d||this._renderComponent(a,f,!1);a.markup("</div>")},_renderDisplayPoints:function(a,b,c,e){function f(){var b;k=d.getMessage("GL.REGION_CONTENT"),a.markup("<div").attr("class",G).markup("><h3>").content(k).markup("</h3>"),m&&(b=m.types[0],a.markup("<div").attr("class",qb[b][0]).attr("id",l._addNode(m)).markup(">"),a.markup("<h3>").content(m.title).markup("</h3>"),l._renderComponents(a,U+" "+qb[b][1],m.components),a.markup("</div>")),a.markup("</div>")}var g,h,i,j,k,l=this,m=null,n=!1,o=!1,p=!1;for(g=0;g<b.length;g++){if(h=b[g],h.hasOwnProperty("span")||h.hasOwnProperty("newColumn")?(p&&h.newColumn!==!1&&(a.markup("</td>"),p=!1),o?h.newGrid===!0&&a.markup("</tr></tbody></table><table").attr("class",bb).markup("><tbody><tr>"):(a.markup("<table").attr("class",bb).markup("><tbody><tr>"),o=!0,h.newColumn=!0),h.newRow===!0&&a.markup("</tr><tr>"),h.newColumn!==!1&&(a.markup("<td colspan='"+h.span+"'>"),p=!0)):o&&(a.markup("</tr></tbody></table>"),o=!1),h.types.length>1||q(h,"regionContainer")||q(h,"itemContainer"))n&&(a.markup("</div>"),n=!1);else if("buttonContainer"===h.types[0]){if("RIGHT_OF_IR_SEARCH_BAR"===h.id){m=h;continue}n?h.hasAlignment&&(a.markup("</div>"),n=!1):h.hasAlignment||(a.markup("<div").attr("class",H).markup(">"),n=!0)}if(q(h,"itemContainer")&&"BODY"===h.id&&!e&&f(),i=r(h.types,0),h.isLegacy&&(i+=" "+M),j=r(h.types,1),a.markup("<div").attr("class",i).attr("id",this._addNode(h)).markup(">"),a.markup("<h3>").content(h.title).markup("</h3>"),h.types.length>1||q(h,"regionContainer")||q(h,"itemContainer"))h.isGrid&&c?this._renderComponentsInGrid(a,h,j,h._grids):this._renderComponents(a,T+" "+j,h.components);else{if("buttonContainer"!==h.types[0])throw"Unknown display point type: "+h.types[0];h.hasAlignment?(a.markup("<table").attr("class",J).markup("><tbody><tr><td>"),this._renderComponents(a,U+" "+j,h.components,"left"),a.markup("</td><td>"),this._renderComponents(a,U+" "+j,h.components,"right"),a.markup("</td></tr></tbody></table>")):this._renderComponents(a,U+" "+j,h.components)}a.markup("</div>"),q(h,"itemContainer")&&"BODY"===h.id&&e&&f()}n&&a.markup("</div>"),o&&a.markup("</tr></tbody></table>")},_renderPage:function(a,b){var c,d=v;b.isConditional&&(d+=" "+L),d=o(d,b,this.options.stateClassMap),c=p(b,this.options.stateIconMap),a.markup("<div").attr("class",d).attr("id",this._addNode(b)).markup(" tabindex='-1'>"),this._renderHeader(a,this.options.getIconForComponent(b),b.title,null,c),this._renderDisplayPoints(a,b.displayPoints,!0),a.markup("</div>")},_setFocusable:function(a){this.lastFocused&&this.lastFocused!==a&&(this.lastFocused.tabIndex=-1),a.tabIndex=0,this.lastFocused=a},_select:function(b,c,d,e,f){var g,h,i,j,k,l,m="set",n=this;b=b.filter(":visible"),c&&this.options.multiple&&("mousedown"===c.type?c.ctrlKey||c.metaKey?m="toggle":c.shiftKey&&(m="add"):"keydown"===c.type&&(c.keyCode===a.ui.keyCode.SPACE?m="toggle":c.ctrlKey?m="none":c.shiftKey&&(m="add"))),g=this.element.find(eb),"set"===m&&g.removeClass(fb).removeAttr(mb),h=b.hasClass(fb),"set"===m||"add"===m||"toggle"===m&&!h?b.addClass(fb).attr(mb,!0):"toggle"===m&&h&&b.removeClass(fb).removeAttr(mb),b.length>0&&(d?(b[0].tabIndex=0,b[0].focus()):this._setFocusable(b[0]),j=this.element.scrollParent(),k=j.offset(),k&&(l=this.element.offset(),i=b.first().offset(),(i.top<k.top||i.top>k.top+j[0].offsetHeight)&&(j[0].scrollTop=i.top-l.top),(i.left+b[0].offsetWidth<k.left||i.left>k.left+j[0].offsetWidth)&&(j[0].scrollLeft=i.left-l.left))),f||("toggle"===m||"add"===m&&!h||"set"===m&&(g[0]!==b[0]||g.length!==b.length))&&(n.triggerTimerId&&(clearTimeout(n.triggerTimerId),n.triggerTimerId=null),n.triggerTimerId=setTimeout(function(){n.triggerTimerId=null,n._trigger("selectionChange",c)},e?350:1))},_traverseRight:function(b){var c,d,e=null;if(this.lastFocused){if(c=a(this.lastFocused),c.parent().hasClass(U))return void this._traverseDown(b);for(d=c.closest("td");d.length;){if(c=d.next().find(Z).first(),c.length){e=c;break}d=d.parent().closest("td")}e&&e.length>0&&this._select(e.eq(0),b,!0,!0)}},_traverseLeft:function(b){var c,d,e=null;if(this.lastFocused){if(c=a(this.lastFocused),c.parent().hasClass(U))return void this._traverseUp(b);for(d=c.closest("td");d.length;){if(c=d.prev().find(Z).first(),c.length){e=c;break}d=d.parent().closest("td")}e&&e.length>0&&this._select(e.eq(0),b,!0,!0)}},_traverseDown:function(b){var c,d,e,f,g,h,i;if(this.lastFocused){if(e=a(this.lastFocused),b.which!==a.ui.keyCode.RIGHT&&(i=e.closest(I),0===i.length&&(i=e.closest("."+E)),i.length>0&&(e=i.find(Z).last())),f=e.find(Z).filter(":visible").first(),f.length>0)e=f;else if(f=e.nextAll(":visible").first(),f.length>0)e=f;else if(e.closest(K).length>0&&(f=e.closest("td").next().find(Z).filter(":visible").first()),f.length>0)e=f;else for(;e.length>0;){if(f=e.nextAll(Z).filter(":visible").first(),f.length>0){e=f;break}if(f=e.nextAll(":visible").find(Z).filter(":visible").first(),f.length>0){e=f;break}if(g=e.parent().parent().parent("tr").first().next().first(),g.length>0&&(h=g.prev()[0],c=k(e.parents("td").filter(function(){return this.parentNode===h})),d=0,g.children().each(function(){return d+=this.colSpan||1,d>c?(f=a(this).find(Z).first(),!1):void 0}),0===f.length&&(f=g.children().last().find(Z).first())),f.length>0){e=f;break}e=e.parent().closest(Z+","+_+","+I)}e&&e.length>0&&this._select(e,b,!0,!0)}},_traverseUp:function(b,c){var d,e,f,g,h,i,j;if(this.lastFocused&&(f=a(this.lastFocused),b.which!==a.ui.keyCode.LEFT&&(j=f.closest(I),0===j.length&&(j=f.closest("."+E)),j.length>0&&(f=j.find(Z).first())),g=f.prevAll(":visible").first(),g.length>0?(f=g.find(Z).filter(":visible").last(),0===f.length&&(f=g)):(h=f.closest("tr").prev(),h.length>0&&(d=k(f.closest("td")),e=0,h.children().each(function(){return e+=this.colSpan||1,e>d?(g=a(this).find(Z).filter(":visible").last(),!1):void 0}),0===g.length&&(g=h.children().last().find(Z).filter(":visible").last())),g.length>0?f=g:(f.closest(K).length>0&&(g=f.closest("td").prev().find(Z).filter(":visible").last()),0===g.length&&(i=j&&j.length>0?j:f.parent().closest(_),g=i.prevAll(":visible").find(Z).filter(":visible").last(),0===g.length&&i.parent().is(I)&&(i=i.parent(),g=i.prevAll(":visible").find(Z).filter(":visible").last())),f=0===g.length?f.parent().closest($):g)),f&&f.length>0)){if(c)return f[0];this._select(f,b,!0,!0)}},_setZoom:function(){var a,b,c=1*this.options.zoom;for(a=0;a<sb.length;a++)if(c<=sb[a]){c=sb[a];break}a>=sb.length&&(c=sb[sb.length-1]),b=u+"--z"+c,this.element.removeClass(this.lastZoom).addClass(b),this.lastZoom=b},_mouseCapture:function(b,c){var d,e=null,f=this;return this.animating||this.options.disabled?!1:("H3"===b.target.nodeName?d=a(b.target):"H3"===b.target.parentNode.nodeName&&(d=a(b.target.parentNode)),d&&d.length&&(e=d.parent($)),e&&e.length&&!c&&f._select(e,b,!0,!1),d&&d.length&&(e=d.parent(Z)),d&&d.is(lb)&&e&&1===e.length&&!e.parent().hasClass(u)?(this.dragComponent=e,this._initDragTargets(this.dragComponent),!0):!1)},_mouseStart:function(b,c,d){var e,f,g,h=this.options,i=this;return d||(a("body").on("keydown.glv",function(b){return b.keyCode===a.ui.keyCode.ESCAPE?void i._cancel(b):void i._dragCopyOrMove(b.ctrlKey)}),a("body").on("keyup.glv",function(a){i._dragCopyOrMove(a.ctrlKey)})),this.helper||(this.helper=this._createHelper()),this.margins={left:parseInt(this.dragComponent.css("marginLeft"),10)||0,top:parseInt(this.dragComponent.css("marginTop"),10)||0},this.scrollParent=this.helper.scrollParent(),this.offset=this.dragComponent.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset()}),this.helper.css("position","absolute"),this._cacheHelperProportions(),this.originalPosition=this._generatePosition(c),h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),this.dragging=!0,f=this.dragComponent.children("h3").outerHeight(),this.dragComponent.hide(),this._createPlaceholder(f),g=this.placeholder.offset().top,this._initTargetContainers(),g=this.placeholder.offset().top-g,g>0&&(this.scrollParent[0].scrollTop=this.scrollParent[0].scrollTop+g),this._refreshPositions(),h.containment&&this._setContainment(),d||h.cursor&&"auto"!==h.cursor&&(e=a("body"),this.storedCursor=e.css("cursor"),e.css("cursor",h.cursor),this.storedStylesheet=a("<style>*{ cursor: "+h.cursor+" !important; }</style>").appendTo(e)),h.opacity&&this.helper.css("opacity",h.opacity),h.zIndex&&this.helper.css("zIndex",h.zIndex),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",c,this._uiHashDnD()),this._mouseDrag(c),!0},_mouseDrag:function(b){var c,d,e,g,h,i,j,k,l,m,n,o,p,q=0,r=0,s=this.options,t=!1,u=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._adjustPositionForScroll(),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+s.scrollSpeed:b.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-s.scrollSpeed),r=this.scrollParent[0].scrollTop-this.dropPositionsOrigin.y,this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+s.scrollSpeed:b.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-s.scrollSpeed),q=this.scrollParent[0].scrollLeft-this.dropPositionsOrigin.x):(b.pageY-a(document).scrollTop()<s.scrollSensitivity?u=a(document).scrollTop(a(document).scrollTop()-s.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<s.scrollSensitivity&&(u=a(document).scrollTop(a(document).scrollTop()+s.scrollSpeed)),r=a(document).scrollTop()-this.dropPositionsOrigin.y,b.pageX-a(document).scrollLeft()<s.scrollSensitivity?u=a(document).scrollLeft(a(document).scrollLeft()-s.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<s.scrollSensitivity&&(u=a(document).scrollLeft(a(document).scrollLeft()+s.scrollSpeed)),q=a(document).scrollLeft()-this.dropPositionsOrigin.x)),this.positionAbs=this._adjustPositionForScroll(),this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",this._dragCopyOrMove(b.ctrlKey),c=0;c<this.containers.length;c++)if(e=this.containers[c],i=this._intersectsWithPointer(e,null,q,r)){if(p=e.type,"grid"===p)for(o=this.positionAbs.top+this.offset.click.top+r,n=this.positionAbs.left+this.offset.click.left+q,j=0;j<e.rows.length;j++){if(k=e.rows[j],f(o,k.y-s.gridTolerance,2*s.gridTolerance)){t=this._movePlaceholder(e,null,"row",j);break}if(j<e.rows.length-1&&f(o,k.y,e.rows[j+1].y-k.y))for(l=0;l<k.columns.length;l++)if(m=k.columns[l],f(n,m-s.gridTolerance,2*s.gridTolerance)){t=this._movePlaceholder(e,null,"column",j,l);break}}if(t)break;if(e.items)for(d=0;d<e.items.length;d++)if(g=e.items[d],i=this._intersectsWithPointer(g,p,q,r)){h=g.element[0],h!==this.dragComponent[0]&&this.placeholder[1===i?"next":"prev"]()[0]!==h&&("pointer"===this.options.tolerance||this._intersectsWithSides(g,p))&&(t=this._movePlaceholder(e,g,1===i?"before":"after"));break}if(t)break;if("grid"!==e.type&&(t=this._movePlaceholder(e)),t)break;
e!==this.curContainer&&(this.curContainer=e);break}return this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(c||a("body").off(".glv"),this._deactivate(),this.storedCursor&&(a("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),!b.target)return this.fromOutside=!1,void(this.dragging=!1);if(this.options.animate){var d=this,e=this.placeholder.offset(),f={};f.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),f.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop),this.animating=!0,a(this.helper).animate(f,parseInt(this.options.animate,10)||500,function(){d._finishDrag(b)})}else this._finishDrag(b);return!1},_initDragTargets:function(a){a.hasClass(x)?(this.targetClass=O,this.itemClass=x):a.hasClass(y)?(this.targetClass=P,this.itemClass=y):a.hasClass(z)&&(this.targetClass=Q,this.itemClass=z)},_dragCopyOrMove:function(a){this.isOver||this.prevCopy===a||(a?(this.dragComponent.show(),this.helper.find(Y).text(d.getMessage("GL.DRAG_COPY"))):(this.dragComponent.hide(),this.helper.find(Y).text("")),this.prevCopy=a)},_cancel:function(a){this.dragging&&(this._mouseUp({target:null}),this.dragComponent.show(),this._select(this.dragComponent,null,!0)),this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper&&this.helper[0].parentNode&&this.helper.remove(),this.helper=null,this.dragging=!1,this.animating=!1),this._trigger("stop",a,this._uiHashDnD())},_intersectsWith:function(a){var b=this.positionAbs.left,c=this.positionAbs.top,d=a.left,e=d+a.width,f=a.top,g=f+a.height,h=this.offset.click.top,i=this.offset.click.left,j="x"===this.options.axis||c+h>f&&g>c+h,k="y"===this.options.axis||b+i>d&&e>b+i;return j&&k},_intersectsWithPointer:function(a,b,c,d){var e=f(this.positionAbs.top+this.offset.click.top+d,a.top,a.height),g=f(this.positionAbs.left+this.offset.click.left+c,a.left,a.width),h=e&&g,i=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return h?"flow"===b&&j?"right"===j||"down"===i?2:1:i&&"down"===i?2:1:!1},_intersectsWithSides:function(a,b){var c=f(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=f(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return"flow"===b&&g?"right"===g&&d||"left"===g&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},_initTargetContainers:function(){var b,c=this,d="."+this.targetClass,e=a(d,this.element),f=null;this.helper&&(e=e.not(this.helper.find(d))),this.dragComponent&&(e=e.not(this.dragComponent.find(d)),f=this.dragComponent.closest(d)[0]),e.addClass(gb),this.containers=[],this.curContainer=null,e.each(function(){var d,e,g;e=a(this),e.hasClass(R)?d="grid":e.hasClass(T)?d="stack":e.hasClass(U)&&(d="flow"),b={element:e,type:d,name:a(this).prev().text(),width:0,height:0,left:0,top:0},c.containers.unshift(b),this===f&&(c.curContainer=b),"grid"===d?b.rows=[]:(b.items=[],g=s(e),e.children(g).each(function(){b.items.push({element:a(this),name:a(this).children("h3").text(),width:0,height:0,left:0,top:0})}))})},_deactivate:function(){a("."+this.targetClass).removeClass(gb)},_refreshPositions:function(){function b(){l=a(this),h=l.offset(),j.columns.push(h.left)}function c(){k=a(this),h=k.offset(),j={y:h.top,columns:[]},f.rows.push(j),k.children("td").each(b),j.columns.push(h.left+l.outerWidth())}var d,e,f,g,h,i,j,k,l,m;for(k=a(),d=0;d<this.containers.length;d++)if(f=this.containers[d],g=f.element,f.width=g.outerWidth(),f.height=g.outerHeight(),h=g.offset(),f.left=h.left,f.top=h.top,"grid"===f.type)f.rows=[],g.children("tbody").children("tr").each(c),f.rows.push({y:h.top+k.outerHeight()});else for(e=0;e<f.items.length;e++)i=f.items[e],g=i.element,i.width=g.outerWidth(),i.height=g.outerHeight(),h=g.offset(),i.left=h.left,i.top=h.top;this.dropPositionsOrigin={x:0,y:0},m=this.element.scrollParent(),m[0]===document?m=this.element:this.dropPositionsOrigin={x:m[0].scrollLeft,y:m[0].scrollTop},h=m.offset(),this.containerCache.left=h.left,this.containerCache.top=h.top,this.containerCache.width=m.outerWidth(),this.containerCache.height=m.outerHeight()},_createPlaceholder:function(b){this.placeholder=a("<div class='"+ib+"'>&nbsp;</div>"),this.dragComponent.after(this.placeholder),b&&this.placeholder.height(b)},_createHelper:function(){var b=this.options,c=this.makeHelper();return c.parents("body").length||a("parent"!==b.appendTo?b.appendTo:this.element[0].parentNode)[0].appendChild(c[0]),!c[0].style.width,!c[0].style.height,c},_adjustOffsetFromHelper:function(a){"left"in a&&(this.offset.click.left=a.left+this.margins.left),"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top"in a&&(this.offset.click.top=a.top+this.margins.top),"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.parent.left,0-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_generatePosition:function(b){var c=b.pageX,d=b.pageY,e=this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return this.originalPosition&&this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(c=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(d=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(c=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(d=this.containment[3]+this.offset.click.top)),{top:d-this.offset.click.top-this.offset.parent.top-(f?0:e.scrollTop()),left:c-this.offset.click.left-this.offset.parent.left-(f?0:e.scrollLeft())}},_adjustPositionForScroll:function(){var b=this.position,c=this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.parent.top-(d?0:c.scrollTop()),left:b.left+this.offset.parent.left-(d?0:c.scrollLeft())}},_makeTempDragComponent:function(){var c,d,e=b.htmlBuilder();return e.markup("<div").attr("class",this.itemClass).markup("><h3 class='is-draggable'><span>&nbsp;</span></h3></div>"),c=a(e.toString()),d=this.element.find("."+this.targetClass).not(S).filter(":visible").first(),d.length?(d.append(c),this.dragComponent=c,!0):!1},_movePlaceholder:function(b,c,d,e,f){var g,h,i,j,k,l,m,n=null,o=null,p=!1;if(c)g=c.element[0],g.parentNode.insertBefore(this.placeholder[0],"before"===d?g:g.nextSibling),p=!0;else if(l=s(b.element),m=t(b.element),"grid"===b.type){if(h=b.element.children("tbody").children("tr"),"row"===d){if(e>=h.length?k=h.last().find(l).filter(":visible").length:(k=h.eq(e).find(l).filter(":visible").length,k>0&&e>0&&(k=h.eq(e-1).find(l).filter(":visible").length)),0===k)return!1;n=a("<tr><td><div class='"+T+" "+m+"'></div></td></tr>"),e>=h.length?h.last().after(n):h.eq(e).before(n),n.find("div").append(this.placeholder[0]),this.containers.unshift({element:n.find("div"),type:"stack",name:"temp",items:[],width:0,height:0,left:0,top:0}),p=!0}else if("column"===d){if(i=h.eq(e),j=i.children("td"),f>=j.length?k=j.last().find(l).filter(":visible").length:(k=j.eq(f).find(l).filter(":visible").length,k>0&&f>0&&(k=j.eq(f-1).find(l).filter(":visible").length)),0===k)return!1;o=a("<td><div class='"+T+" "+m+"'></div></td>"),f>=j.length?j.last().after(o):j.eq(f).before(o),o.find("div").append(this.placeholder[0]),this.containers.unshift({element:o.find("div"),type:"stack",name:"temp",items:[],width:0,height:0,left:0,top:0}),p=!0}}else(!b.items||0===b.items.length||1===b.items.length&&b.items[0].element[0]===this.dragComponent[0])&&(b.element.append(this.placeholder[0]),p=!0);return b!==this.curContainer&&(this.curContainer=b),p&&(this.tempGridRow&&0===this.placeholder.closest(this.tempGridRow).length&&(this.tempGridRow.remove(),this.tempGridRow=null),n&&(this.tempGridRow=n),this.tempGridColumn&&0===this.placeholder.closest(this.tempGridColumn).length&&(this.tempGridColumn.remove(),this.tempGridColumn=null),o&&(this.tempGridColumn=o)),p&&this._refreshPositions(),p},_copyComponent:function(a,b){var c,d,e,f,g={};for(e in a)if(f=a[e],"displayPoints"===e)for(d=g.displayPoints=[],c=0;c<a.displayPoints.length;c++)d.push(this._copyComponent(a.displayPoints[c],g));else if("components"===e)for(d=g.components=[],c=0;c<a.components.length;c++)d.push(this._copyComponent(a.components[c],g));else"_parent"===e?g._parent=b:"_"!==e.substring(0,1)&&(g[e]=f);return this.options.updateComponentCopy(g,a),g},_insert:function(a,b,c,d,f,g,h){var i,k,m,o,p,q,r=this.pageRoot,s=a.component,t=a.newParentContainer;if("button"===s.type&&(l(a,s,"alignment",h),h&&(a.newAlignment=h)),b){for(g===nb||0===t._grids.length?(i={_parent:t,rows:[]},t._grids.splice(c,0,i),l(a,s,"newGrid",!0),a.newGridInserted=!0,g=ob):(l(a,s,"newGrid",!1),i=t._grids[c]),g===ob||d>=i.rows.length?(k={_parentGrid:i,columns:[]},i.rows.splice(d,0,k),a.newRowInserted=!0,g=pb,l(a,s,"newRow",!0)):(l(a,s,"newRow",!1),k=i.rows[d]),g===pb?(m={_parentRow:k,span:-1,col:-1,components:[]},k.columns.splice(f,0,m),a.newColumnInserted=!0,g=0,l(a,s,"newCol",!0),0!==f||a.newRowInserted||l(a,s,"newRow",!0)):(m=k.columns[f],p=m.components[g],0===g?(l(a,s,"newCol",!0),p&&(l(a,s,"newRow",p.newRow),l(a,s,"newGrid",p.newGrid),l(a,s,"col",p.col),l(a,s,"span",p.span),p.rowSpan!==e&&l(a,s,"rowSpan",p.rowSpan),l(a,p,"newCol",!1),l(a,p,"newRow",!1),l(a,p,"newGrid",!1),l(a,p,"col",-1),l(a,p,"span",-1),p.rowSpan!==e&&l(a,p,"rowSpan",-1))):l(a,s,"newCol",!1)),(s.col===e||s.col>=0&&(0!==g||!p)&&!s.forceColumn)&&l(a,s,"col",-1),delete s.forceColumn,s.span===e&&l(a,s,"span",-1),s._parentColumn=m,a.newGrid=c,a.newRow=d,a.newColumn=f,a.newIndex=g,!p&&f+1<k.columns.length&&(p=k.columns[f+1].components[0],a.newColumnInserted&&0===f&&l(a,p,"newRow",!1)),!p&&d+1<i.rows.length&&(p=i.rows[d+1].columns[0].components[0]),!p&&c+1<t._grids.length&&(p=t._grids[c+1].rows[0].columns[0].components[0]),q=p?j(t.components,p):t.components.length,a.newComponentIndex=q,m.components.splice(g,0,s),t.components.splice(q,0,s),p&&p._parentColumn!==s._parentColumn&&0===f&&s.newCol&&l(a,p,"newCol",!0),o=0;o<k.columns.length;o++)m=k.columns[o],m.col=m.components[0].col,m.span=m.components[0].span||-1;"fixed"===r.gridType&&r.hasColumnSpan&&n(k,t.maxColumns)}else a.newIndex=g,t.components.splice(g,0,s);return s._parent=t,g},_getTableColumnFromColumn:function(a,b,c,d){var e,f,g=1,h=0,i=a._grids[b].rows[c].columns;for(e=0;d>=e&&e<i.length;e++)f=i[e],f.col>g&&(h+=1,g=f.col),g+=f.span>0?f.span:1,h+=1;return h-1},_insertInDom:function(b,c,d,e,f,g,i,j,k){var l,m,n,o,p,q,r,s,u,v,w,x=this.pageRoot;o=b.hasClass(z)&&c.children(K).length?c.find(K).find("td").eq("left"===k?0:1).children(ab):c.children(ab),this.placeholder?this.placeholder.before(b):o.is(S)?(u=t(c),v=i,0>v&&(v=0),i===nb&&d._grids.length>1?(p=a("<table><tbody></tbody></table>"),h(o.parent(),"table",p,e),i=ob,v=0):p=o.parent().children("table").eq(e),i===ob&&0===e&&d._grids[e].rows.length>1?(m="<td><div class='"+T+" "+u+"'></div></td>",d._grids[e].rows[f].columns[0].col>=0&&(m+=m),q=a("<tr>"+m+"</tr>"),h(p.children("tbody"),q,f),v=0):q=p.children("tbody").children("tr").eq(f),w=this._getTableColumnFromColumn(d,e,f,g),i===pb?(d._grids[e].rows[f].columns[g].col>=0&&(r=a("<td><div class='"+T+" "+u+"'></div></td>"),h(q,r,w-1)),r=a("<td><div class='"+T+" "+u+"'></div></td>"),h(q,r,w),v=0):r=q.children().eq(w),h(r.children().eq(0),b,v)):h(o,b,i),"fixed"===x.gridType&&x.hasColumnSpan&&o.is(S)&&(p=o.parent().children("table").eq(e),q=p.children("tbody").children("tr").eq(f),s=d._grids[e].rows[f].columns,l=0,n=1,q.children("td").each(function(){s[l].col>n&&(this.colSpan=s[l].col-n,n=s[l].col),n+=s[l].span>0?s[l].span:1,a(this).find(Z).length>0&&(this.colSpan=s[l].span,l+=1)})),j&&this._showOrHideDisplayPoints(b)},_add:function(c,d,e,f,g,h,i,j){var k,l,m,n=!1,o=b.htmlBuilder(),p={container$:d,propertyChanges:[]};return p.newParentContainer=k=this._getNode(d[0]),m=a.isArray(k._grids),c.displayPoints&&(l=12,this._layoutDisplayPoints(c.displayPoints,c,m,l)),j?(this._setNode(c),j[0].id=this.baseId+c._elementId):(this._renderComponent(o,c,m),j=a(o.toString()),n=!0),p.newComponent$=j,p.component=c,this._insert(p,m,e,f,g,h,i),this._insertInDom(p.newComponent$,d,k,e,f,g,h,n,i),p},_remove:function(b,c,d){var e,f,g,h,k,m,o,p,q,r,s,t,u,v,w,x,y=this.pageRoot,z=this,A=!!d;if(c=c||{propertyChanges:[]},g=this._getNode(b[0]),d=d||b.parent(),A?b.hide():(c.component$=b,c.component=g,c.prevContainer$=b.closest(_),delete this.nodeMap[i(b[0].id)],b.find(Z).each(function(){delete z.nodeMap[i(this.id)]}),b.remove()),x="TD"===d[0].parentNode.nodeName&&d.closest("table").is(S),c.prevParentContainer=r=g._parent,c.prevComponentIndex=t=j(r.components,g),c.prevIndex=c.prevComponentIndex,"button"===g.type&&g.alignment&&(c.prevAlignment=g.alignment),x&&0===d.children(":visible").length&&(f=d.parent().parent(),f.parent().children("tr").length>1&&0===f.find(Z).filter(":visible").length?f.remove():f.children("td").length>1&&(q=d.parent().prev().eq(0),d.parent().remove(),0===q.find(Z).filter(":visible").length&&q.remove())),x){if(h=g._parentColumn,s=j(h.components,g),u=0,v=j(h._parentRow._parentGrid.rows,h._parentRow),w=j(h._parentRow.columns,h),c.prevGrid=u,c.prevRow=v,c.prevColumn=w,c.prevIndex=s,0===s&&h.components.length>1&&(o=h.components[1],l(c,o,"newGrid",g.newGrid),l(c,o,"newRow",g.newRow),l(c,o,"newCol",g.newCol),l(c,o,"col",g.col),l(c,o,"span",g.span),g.rowSpan&&l(c,o,"rowSpan",g.rowSpan)),m=r._grids[u],k=m.rows[v],h=k.columns[w],h.components.splice(s,1),0===h.components.length&&(k.columns.splice(w,1),0===w&&k.columns.length>0&&(o=k.columns[w].components[0],l(c,o,"newRow",!0)),c.prevColumnRemoved=!0,k.columns.length>0)){if("fixed"===y.gridType&&y.hasColumnSpan){for(e=0;e<k.columns.length;e++)h=k.columns[e],h.col=h.components[0].col,h.span=h.components[0].span||-1;n(k,r.maxColumns)}p=k.columns,e=0,f.children("td").each(function(){a(this).find(Z).length>0&&(p[e].span>0&&(this.colSpan=p[e].span),e+=1)})}0===k.columns.length&&(m.rows.splice(v,1),c.prevRowRemoved=!0),0===m.rows.length&&(r._grids.splice(u,1),c.prevGridRemoved=!0)}return A&&b.show(),r.components.splice(t,1),delete g._parent,c},_moveOrCopy:function(c,d,e,f,g,h,j,k){var l,m,n,o,p,q=!1,r=!1,s=b.htmlBuilder(),t={container$:d,propertyChanges:[]};return l=this._getNode(c[0]),t.newParentContainer=o=this._getNode(d[0]),n=a.isArray(o._grids),t.prevContainer$=c.closest(_),k?(t.originalComponent=l,l=this._copyComponent(l),p=12,l.displayPoints&&this._layoutDisplayPoints(l.displayPoints,l,n,p),this._renderComponent(s,l,n),t.newComponent$=a(s.toString()),q=!0):(m=c.parent(),r="TD"===m[0].parentNode.nodeName,t.newComponent$=c,l.displayPoints&&n!==r&&(p=12,this._layoutDisplayPoints(l.displayPoints,l,n,p),this._renderComponent(s,l,n),t.newComponent$=a(s.toString()),q=!0,c.remove(),delete this.nodeMap[i(c[0].id)])),t.component=l,k||(this._remove(t.newComponent$,t,m),r&&t.prevParentContainer===t.newParentContainer&&(t.prevColumnRemoved&&t.prevColumn<g&&f===t.prevRow&&(g-=1),t.prevRowRemoved&&t.prevRow<f&&e===t.prevGrid&&(f-=1),t.prevGridRemoved&&t.prevGrid<e&&(e-=1))),this._insert(t,n,e,f,g,h,j),this._insertInDom(t.newComponent$,d,o,e,f,g,h,q,j),t},_finishDrag:function(b){var c,d,e,f,h,i,j,k,l,m,n,o,p,q=b.ctrlKey,r=[];for(this.animating=!1,(this.dragComponent.next()[0]!==this.placeholder[0]||q||this.fromOutside)&&(k=this.placeholder.closest(_),m=g(this.placeholder),h=null,i=null,j=null,k.children("table.a-GridLayout-grid").length>0?(d=this.placeholder.closest("td"),j=0,d.parent().children("td").each(function(){return this===d[0]?!1:void(a(this).children("."+T).children().length>0&&(j+=1))}),e=d.parent(),i=g(e),h=k.children("table").index(e.parent().parent()),0===m&&1===this.placeholder.parent().children(":visible").length&&(m=1===e.parent().children().length&&1===e.children().length?nb:1===e.children().length?ob:pb)):k.children("table.a-GridLayout-buttonRow").length>0&&(d=this.placeholder.closest("td"),p=0===g(d)?"left":"right"),this.fromOutside?(o=this.helper.attr("data-type-id"),f=this.options.makeComponent(o),this.dragComponent.remove(),n=this._add(f,k,h,i,j,m,p),r.push(function(a){this._trigger("added",a,n)})):(n=this._moveOrCopy(this.dragComponent,k,h,i,j,m,p,q),r.push(function(a){this._trigger(q?"copied":"moved",a,n)}))),n&&(l=n.newComponent$),this.fromOutside&&r.push(function(a){this._trigger("deactivate",a,this._uiHashDnD(this))}),this.dragComponent.show(),this.dragging=!1,this.tempGridRow=null,this.tempGridColumn=null,this._trigger("beforeStop",b,this._uiHashDnD()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.placeholder=null,this.helper.remove(),this.helper=null,c=0;c<r.length;c++)r[c].call(this,b);return this._trigger("stop",b,this._uiHashDnD()),n&&this._select(l,b,!0),this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHashDnD:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.dragComponent,sender:b?b.element:null}}}),a.apex.gridlayout.INDEX={NEW_GRID:nb,NEW_ROW:ob,NEW_COLUMN:pb},a.ui.plugin.add("draggable","connectToGridlayout",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});a("body").on("keydown.glvplug",function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(d.dropped=!1,d.cancel())}),d.grids=[],a(e.connectToGridlayout).each(function(){var e=a.data(this,"apex-gridlayout");e&&!e.options.disabled&&(d.grids.push({instance:e}),e._initDragTargets(c.helper),e._initTargetContainers(),e._refreshPositions(),e._trigger("activate",b,f))})},stop:function(b,c){var d,e=a(this).data("ui-draggable");a("body").off(".glvplug"),a.each(e.grids,function(){this.instance.isOver&&!this.invalid?(this.instance.isOver=!1,e.cancelHelperRemoval=!0,b.target?this.instance._mouseStop(b,!0):(this.instance._mouseStop(b,!0),this.instance.dragComponent.remove(),this.instance._cancel(b))):(this.instance._deactivate(),d=a.extend({},c,{item:e.element}),this.instance._trigger("deactivate",b,d))})},drag:function(b,c){var d=a(this).data("ui-draggable");a.each(d.grids,function(){var a=!1;if(!this.invalid)if(this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0),a){if(!this.instance.isOver){if(this.instance.isOver=!0,!this.instance._makeTempDragComponent())return this.instance.isOver=!1,void(this.invalid=!0);if(this.instance.helper=c.helper,this.instance.helper.css("position","relative"),b.target=this.instance.dragComponent.children("h3")[0],!this.instance._mouseCapture(b,!0))return this.instance.isOver=!1,void(this.invalid=!0);this.instance._trigger("over",b,this.instance._uiHashDnD(this.instance)),this.instance._mouseStart(b,b,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d}this.instance.dragComponent&&this.instance._mouseDrag(b)}else this.instance.isOver&&(this.instance.isOver=!1,this.instance._trigger("out",b,this.instance._uiHashDnD(this.instance)),b.target=null,this.instance._mouseStop(b,!0),this.instance.dragComponent.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d.dropped=!1)})}})}(apex.jQuery,apex.util,apex.debug,apex.lang);
!function(a,b,c,d,e,f){"use strict";function g(a){var b,c,d,e,g,h;for(b=0;b<a.length;b++)d=a[b],c=Z[d.property],e=d.component._modelComponent,h=e.getProperty(c),h&&(d.newValue===!0?g=h.getMetaData().yesValue:d.newValue===!1?g=h.getMetaData().noValue:"alignment"===d.property&&d.newValue?g=d.newValue.toUpperCase():"col"!==d.property&&"span"!==d.property&&"rowSpan"!==d.property||-1!==d.newValue?d.newValue!==f&&null!==d.newValue&&(g=""+d.newValue):g="",g!==f&&h.setValue(g))}function h(a){var b,c=null;return b=a.newComponentIndex,b===f&&(b=a.newIndex),b>0&&(c=a.newParentContainer.components[b-1]._modelComponent),c}function i(a){a.newParentContainer===a.prevParentContainer?a.newParentContainer=a.prevParentContainer=[a.newParentContainer._parent.id,a.newParentContainer.id]:(a.newParentContainer&&(a.newParentContainer=[a.newParentContainer._parent.id,a.newParentContainer.id]),a.prevParentContainer&&(a.prevParentContainer=[a.prevParentContainer._parent.id,a.prevParentContainer.id])),delete a.component$,delete a.newComponent$,delete a.container$,delete a.prevContainer$}function j(){var a=F.gridlayout("option");return{hideLegacyDisplayPoints:a.hideLegacyDisplayPoints,hideEmptyDisplayPoints:a.hideEmptyDisplayPoints,hideButtons:a.hideButtons,hideItems:a.hideItems,displayFrom:a.displayFrom,hideGlobalComponents:_}}function k(a){var c=F.gridlayout("option");c.displayFrom!==a.displayFrom&&F.gridlayout("option","displayFrom",a.displayFrom),b.each(["displayFrom","hideLegacyDisplayPoints","hideEmptyDisplayPoints","hideButtons","hideItems"],function(b,d){a[d]||c[d]===a[d]||F.gridlayout("option",d,a[d])}),a.hideGlobalComponents!==_&&(_=a.hideGlobalComponents,F.gridlayout("pageDataChanged"))}function l(a,b,c,d,e,f,g,h,i){var j=Object.create(eb);return j.changes=b,j.gl$=a,j.component$=c,j.container$=d,j.grid=e,j.row=f,j.column=g,j.index=h,j.alignment=i,j._label="move",j}function m(a,b,c,d,e,f,g,h,i){var j=Object.create(fb);return j.changes=b,j.gl$=a,j.component$=c,j.container$=d,j.grid=e,j.row=f,j.column=g,j.index=h,j.alignment=i,j._label="copy",j}function n(a,b,c,d,e,f,g,h,i){var j=Object.create(gb);return j.changes=b,j.gl$=a,j.componentTypeId=c,j.container$=d,j.grid=e,j.row=f,j.column=g,j.index=h,j.alignment=i,j._label="create",j}function o(a,b){var c=Object.create(hb);return c.changes=[],c.gl$=a,c.transaction=null,c._label=b.length>1?d.formatMessageNoEscape("PD.GLV.CMD.DEL_N",b.length):d.formatMessageNoEscape("PD.GLV.CMD.DEL",F.gridlayout("getComponents",b)[0].title),c}function p(a,b){a.id="t0001",a._modelComponent=b._modelComponent}function q(a){return a.iconClass}function r(b){var c,d,e,f,g,h,i,j=window.componentGallery.getComponentData(b);if(f=j.type,d={type:f,_galleryComponent:j,id:"t0002",title:j.title},f===P){for(g="",i="",c=0;c<j.values.length;c++)e=j.values[c],e.id===a.PROP.REGION_TEMPLATE?g=e.value:e.id===a.PROP.REGION_TYPE&&(i=e.value);for(d.displayPoints=[],h=a.getRegionTemplates()[g],w(h.displayPoints,d.displayPoints,null,i),c=0;c<d.displayPoints.length;c++)d.displayPoints[c].components=[]}return d}function s(a,b,c){var d,e=c,f=a.getProperty(b);return f&&(d=f.getMetaData().yesValue,e=f.getValue()===d),e}function t(a,b,c){var d=c,e=a.getProperty(b);return e&&(d=e.getValue(),null!==d&&""!==d||!c||(d=c)),d}function u(b){var c=b.parentId;return b.typeId===a.COMP_TYPE.REGION&&(c=t(b,a.PROP.PARENT_REGION,c)),c}function v(a){var b,c=[];for(b=0;b<a.length;b++)c.push(ib[a[b]]);return c}function w(b,c,e,f){var g,h,i,j,k=0;for(g=0;g<b.length;g++)i=b[g],h=i.name,"PAGE_ITEM"===i.types[0]&&(h=d.getMessage("PD.GLV.DP_ITEMS")),"RIGHT_OF_IR_SEARCH_BAR"===i.id&&(f&&"NATIVE_IR"!==f||e&&"NATIVE_IR"!==a.getComponents(a.COMP_TYPE.REGION,{id:e})[0].getProperty(a.PROP.REGION_TYPE).getValue()||!e&&!f)||(j={types:v(i.types),id:i.id,title:h,isGrid:i.hasGridSupport,isLegacy:i.isLegacy},e||f||(i.hasOwnProperty("glvSpan")||i.glvNewRow===!1?(j.span=i.glvSpan,j.newColumn=!i.glvNewRow,!j.newColumn&&j.span>k&&(j.newRow=!0),k=j.span):j.newRow=!0),"buttonContainer"===j.types[0]&&i.hasAlignment&&(j.hasAlignment=!0),c.push(j))}function x(a,b){return b.templateName=a.name,b.maxColumns=12,b.displayPoints=[],w(a.displayPoints,b.displayPoints,b.id),b}function y(a,b){var c=a.grid;return b.gridType=c.type.toLowerCase(),b.maxColumns=c.maxColumns,b.hasColumnSpan=c.hasColumnSpan,c.hasRowSpan!==f&&(b.hasRowSpan=c.hasRowSpan),b.alwaysUseMaxColumns=c.alwaysUseMaxColumns,b.displayPoints=[],w(a.displayPoints,b.displayPoints),b}function z(b,c,d,f){var g,h,i,j,k,l,m,n,o,p,q=[];for(g=0;g<b.length;g++){if(n={properties:[{id:a.PROP.REGION,value:f}]},"buttonContainer"===b[g])m=a.COMP_TYPE.BUTTON,n.properties.push({id:a.PROP.BUTTON_POSITION,value:c});else{if("itemContainer"!==b[g])throw"Unknown container type: "+b[g];m=a.COMP_TYPE.PAGE_ITEM}q.push({typeId:m,filter:n})}for(_&&(n.excludeGlobalPage=!0),h=a.getComponentsAdvanced(q),g=0;g<h.length;g++){if(i=h[g],i.typeId===a.COMP_TYPE.BUTTON)o=R,p=e.getComponentIconClass(R,s(i,a.PROP.BUTTON_IS_HOT,!1)?"hot":"normal");else{if(i.typeId!==a.COMP_TYPE.PAGE_ITEM)throw"Unexpected component type "+i.typeId;o=Q,p=e.getComponentIconClass(Q,t(i,a.PROP.ITEM_TYPE))}(o!==Q||(k=t(i,a.PROP.ITEM_TYPE),"NATIVE_HIDDEN"!==k))&&(j={type:o,id:i.id,title:i.getDisplayTitle(),iconClass:p,newGrid:s(i,a.PROP.GRID_NEW_GRID,!1),newRow:s(i,a.PROP.GRID_NEW_ROW,!1),col:1*t(i,a.PROP.GRID_COLUMN,-1),newCol:s(i,a.PROP.GRID_NEW_COLUMN,!0),span:1*t(i,a.PROP.GRID_COLUMN_SPAN,-1),hasErrors:i.hasErrors(),hasWarnings:i.hasWarnings(),isReadOnly:i.isReadOnly(),_modelComponent:i},l=1*t(i,a.PROP.GRID_ROW_SPAN,-1),l>0&&(j.rowSpan=l),e.isConditional(i)&&(j.isConditional=!0),d.push(j))}}function A(b,c){var d,f,g,h,i,j,k,l={properties:[{id:a.PROP.REGION,value:c}]};for(_&&(l.excludeGlobalPage=!0),f=a.getComponents(a.COMP_TYPE.BUTTON,l),d=0;d<f.length;d++)g=f[d],i=t(g,a.PROP.BUTTON_POSITION),b[i]&&(j=t(g,a.PROP.ALIGNMENT,null),k=s(g,a.PROP.BUTTON_IS_HOT,!1),h={type:R,id:g.id,title:g.getDisplayTitle(),iconClass:e.getComponentIconClass(R,k?"hot":"normal"),hasErrors:g.hasErrors(),hasWarnings:g.hasWarnings(),isReadOnly:g.isReadOnly(),_modelComponent:g},j&&(h.alignment=j.toLowerCase()),e.isConditional(g)&&(h.isConditional=!0),b[i].push(h))}function B(b,d,f){var g,h,i,j,k,l,m,n,o,p,q=a.getRegionTemplates();for(o=f?{properties:[{id:a.PROP.PARENT_REGION,value:f}]}:{properties:[{id:a.PROP.PARENT_REGION,value:""},{id:a.PROP.REGION_POSITION,value:d}]},_&&(o.excludeGlobalPage=!0),l=a.getComponents(a.COMP_TYPE.REGION,o),g=0;g<l.length;g++)if(m=l[g],e.isDisplayed(m))if(n={},j=t(m,a.PROP.REGION_TEMPLATE),k=q[j]){for(p={},n=x(k,{type:P,id:m.id,title:m.getDisplayTitle(),iconClass:e.getComponentIconClass(P,t(m,a.PROP.REGION_TYPE)),newGrid:s(m,a.PROP.GRID_NEW_GRID,!1),newRow:s(m,a.PROP.GRID_NEW_ROW,!1),col:1*t(m,a.PROP.GRID_COLUMN,-1),newCol:s(m,a.PROP.GRID_NEW_COLUMN,!0),span:1*t(m,a.PROP.GRID_COLUMN_SPAN,-1),hasErrors:m.hasErrors(),hasWarnings:m.hasWarnings(),isReadOnly:m.isReadOnly(),itemsAboveContent:"ABOVE"===t(m,a.PROP.ITEM_DISPLAY_POSITION,"ABOVE"),_modelComponent:m}),e.isConditional(m)&&(n.isConditional=!0),h=0;h<n.displayPoints.length;h++)i=n.displayPoints[h],i.components=[],"regionContainer"===i.types[0]?B(i.components,null,n.id):i.types.length>1||"itemContainer"===i.types[0]?z(i.types,i.id,i.components,n.id):"buttonContainer"===i.types[0]&&(p[i.id]=i.components);A(p,n.id),b.push(n)}else c.warn("Skipping region %s because no template found for id %s.",m.getDisplayTitle(),j)}function C(){return{type:O,iconClass:"icon-warning",gridType:"fixed",maxColumns:12,hasColumnSpan:!0,hasRowSpan:!1,alwaysUseMax:!1,title:d.getMessage("PD.GLV.EMPTY_GRID"),displayPoints:[]}}function D(){var b,c,d,e,f,g;if(!$)return C();if(g=a.getComponents(a.COMP_TYPE.PAGE),1!==g.length)return C();if(e=g[0],f=a.getPageTemplate(),!f)return C();for(b=y(f,{type:O,id:e.id,iconClass:"icon-page",title:e.getDisplayTitle(),hasErrors:e.hasErrors(),hasWarnings:e.hasWarnings(),isReadOnly:a.isPageReadOnly(),_modelComponent:e}),c=0;c<b.displayPoints.length;c++)d=b.displayPoints[c],d.components=[],B(d.components,d.id);return b}function E(a){var b,c,d={};for(b=0;b<a.displayPoints.length;b++)c=a.displayPoints[b],c.components=[],"regionContainer"===c.types[0]?B(c.components,null,a.id):c.types.length>1||"itemContainer"===c.types[0]?z(c.types,c.id,c.components,a.id):"buttonContainer"===c.types[0]&&(d[c.id]=c.components);A(d,a.id)}var F,G=e.CSS.IS_ERROR,H=e.CSS.IS_WARNING,I="icon-error",J="icon-warning",K="a-GridLayout-buttonContainer",L=".a-GridLayout-pageItem, .a-GridLayout-region, .a-GridLayout-button",M=".a-GridLayout-page, .a-GridLayout-pageItem, .a-GridLayout-region, .a-GridLayout-button",N=".a-GridLayout-page > h3, .a-GridLayout-pageItem > h3, .a-GridLayout-region > h3, .a-GridLayout-button > h3",O="page",P="region",Q="item",R="button",S="GLV_HIDE_LEGACY",T="GLV_HIDE_GLOBAL",U="GLV_HIDE_EMPTY",V="GLV_HIDE_BTNS",W="GLV_HIDE_ITEMS",X="glv",Y=b.apex.gridlayout.INDEX,Z={newGrid:a.PROP.GRID_NEW_GRID,newRow:a.PROP.GRID_NEW_ROW,col:a.PROP.GRID_COLUMN,newCol:a.PROP.GRID_NEW_COLUMN,span:a.PROP.GRID_COLUMN_SPAN,rowSpan:a.PROP.GRID_ROW_SPAN,alignment:a.PROP.ALIGNMENT},$=!1,_=!0,ab=null,bb=!1,cb=!1,db=!1,eb=b.extend(apex.commandHistory.baseCommand(),{execute:function(){this.changes?this.updateDataLayer():(ab=this,this.gl$.gridlayout("move",{},this.component$,this.container$,this.grid,this.row,this.column,this.index,this.alignment)),this.state=j()},updateDataLayer:function(b){function c(a,b){l.push({id:a,value:b})}var e,f,j,k,l=[];b&&(this.changes=b),b=this.changes,this._label=d.formatMessageNoEscape("PD.GLV.CMD.MOVE",this.changes.component.title),db=!0,this.transaction=a.transaction.start(X),j=b.component._modelComponent,b.newParentContainer!==b.prevParentContainer&&(e=b.newParentContainer,f=e._parent,b.component.type===P?f.type===O?(c(a.PROP.PARENT_REGION,""),c(a.PROP.REGION_POSITION,e.id)):c(a.PROP.PARENT_REGION,f.id):b.component.type===Q?c(a.PROP.REGION,f.id):b.component.type===R&&(f!==b.prevParentContainer._parent?(c(a.PROP.REGION,f.id),c(a.PROP.BUTTON_POSITION,e.id)):e.id!==b.prevParentContainer.id&&c(a.PROP.BUTTON_POSITION,e.id))),k=h(b),j.move(k,l),g(b.propertyChanges),this.transaction.execute(),i(b)},undo:function(){var b,c=this.changes,d=c.prevGrid,e=c.prevRow,f=c.prevColumn,g=c.prevIndex;k(this.state),bb=!0,c.prevGridRemoved?g=Y.NEW_GRID:c.prevRowRemoved?g=Y.NEW_ROW:c.prevColumnRemoved&&(g=Y.NEW_COLUMN),c.newParentContainer===c.prevParentContainer&&(g>=0&&c.prevIndex>c.newIndex&&(g+=1),c.newGridInserted?c.newGrid<=c.prevGrid&&(d+=1):c.newRowInserted?c.newRow<=c.prevRow&&(e+=1):c.newColumnInserted&&c.newColumn<=c.prevColumn&&(f+=1)),db=!0,this.transaction.undo(),b=F.gridlayout("findComponentById",c.component.id),b.col=1*t(b._modelComponent,a.PROP.GRID_COLUMN,-1),b.col>=0&&(b.forceColumn=!0),this.gl$.gridlayout("move",{},c.component.id,c.prevParentContainer,d,e,f,g,c.prevAlignment)},redo:function(){var a=this.changes,b=a.newIndex;k(this.state),bb=!0,a.newGridInserted?b=Y.NEW_GRID:a.newRowInserted?b=Y.NEW_ROW:a.newColumnInserted?b=Y.NEW_COLUMN:a.newParentContainer===a.prevParentContainer&&a.newIndex>a.prevIndex&&(b+=1),db=!0,this.transaction.redo(),this.gl$.gridlayout("move",{},a.component.id,a.newParentContainer,a.newGrid,a.newRow,a.newColumn,b,a.newAlignment)},label:function(){return this._label}}),fb=b.extend(apex.commandHistory.baseCommand(),{execute:function(){this.changes?this.updateDataLayer():(ab=this,this.gl$.gridlayout("copy",{},this.component$,this.container$,this.grid,this.row,this.column,this.index,this.alignment)),this.state=j()},updateDataLayer:function(b){function c(a,b){l.push({id:a,value:b})}var e,f,j,k,l=[];b&&(this.changes=b),b=this.changes,this._label=d.formatMessageNoEscape("PD.GLV.CMD.COPY",this.changes.originalComponent.title),db=!0,cb=!0,this.transaction=a.transaction.start(X),j=b.component._modelComponent,j=b.component._modelComponent=j.duplicate(),b.component.id=j.id,b.component.title=j.getDisplayTitle(),F.gridlayout("update",b.component,!1),b.newParentContainer!==b.originalComponent._parent&&(e=b.newParentContainer,f=e._parent,b.component.type===P?f.type===O?(c(a.PROP.PARENT_REGION,""),c(a.PROP.REGION_POSITION,e.id)):c(a.PROP.PARENT_REGION,f.id):b.component.type===Q?c(a.PROP.REGION,f.id):b.component.type===R&&(c(a.PROP.REGION,f.id),c(a.PROP.BUTTON_POSITION,e.id))),k=h(b),j.move(k,l),g(b.propertyChanges),this.transaction.execute(),i(b)},undo:function(){var a=this.changes;k(this.state),bb=!0,this.gl$.gridlayout("remove",{},[a.component.id]),this.transaction.undo()},redo:function(){var a=this.changes,b=a.newIndex;k(this.state),bb=!0,a.newGridInserted?b=Y.NEW_GRID:a.newRowInserted?b=Y.NEW_ROW:a.newColumnInserted?b=Y.NEW_COLUMN:a.newParentContainer===a.prevParentContainer&&a.newIndex>a.prevIndex&&(b+=1),db=!0,cb=!0,this.gl$.gridlayout("add",{},a.component,a.newParentContainer,a.newGrid,a.newRow,a.newColumn,b,a.newAlignment,a.newComponent$),this.transaction.redo()},label:function(){return this._label}}),gb=b.extend(apex.commandHistory.baseCommand(),{execute:function(){this.changes?this.updateDataLayer():(ab=this,this.gl$.gridlayout("add",{},this.componentTypeId,this.container$,this.grid,this.row,this.column,this.index,this.alignment)),this.state=j()},updateDataLayer:function(b){function c(a,b){q.push({id:a,value:b})}var e,f,j,k,l,m,n,o,p=!1,q=[];for(b&&(this.changes=b),b=this.changes,n=b.component._galleryComponent,this._label=d.formatMessageNoEscape("PD.GLV.CMD.CREATE",n.title),this.transaction=a.transaction.start(X),f=b.newParentContainer,j=f._parent,b.component.type===P?(m=a.COMP_TYPE.REGION,j.type===O?(c(a.PROP.PARENT_REGION,""),c(a.PROP.REGION_POSITION,f.id)):c(a.PROP.PARENT_REGION,j.id)):b.component.type===Q?(m=a.COMP_TYPE.PAGE_ITEM,c(a.PROP.REGION,j.id)):b.component.type===R&&(m=a.COMP_TYPE.BUTTON,c(a.PROP.REGION,j.id),c(a.PROP.BUTTON_POSITION,f.id)),o=h(b),e=0;e<n.values.length;e++)k=n.values[e],q.push(k),k.id===a.PROP.ITEM_TYPE&&"NATIVE_HIDDEN"===k.value&&(p=!0);db=!0,cb=!0,l=new a.Component({previousComponent:o,typeId:m,values:q}),b.component._modelComponent=l,delete b.component._galleryComponent,p?(bb=!0,F.gridlayout("remove",{},b.newComponent$),this.changes=null):(g(b.propertyChanges),b.component.id=l.id,b.component.title=l.getDisplayTitle(),F.gridlayout("update",b.component,!1)),this.transaction.execute(),i(b)},undo:function(){var a=this.changes;k(this.state),a&&(bb=!0,this.gl$.gridlayout("remove",{},[a.component.id])),this.transaction.undo()},redo:function(){var a,b=this.changes;k(this.state),b&&(a=b.newIndex,bb=!0,db=!0,cb=!0,b.newGridInserted?a=Y.NEW_GRID:b.newRowInserted?a=Y.NEW_ROW:b.newColumnInserted?a=Y.NEW_COLUMN:b.newParentContainer===b.prevParentContainer&&b.newIndex>b.prevIndex&&(a+=1),this.gl$.gridlayout("add",{},b.component,b.newParentContainer,b.newGrid,b.newRow,b.newColumn,a,b.newAlignment,b.newComponent$)),this.transaction.redo()},label:function(){return this._label}}),hb=b.extend(apex.commandHistory.baseCommand(),{execute:function(){ab=this,this.gl$.gridlayout("remove",{}),this.state=j()},updateDataLayer:function(b){this.changes.push(b),this.transaction||(this.transaction=a.transaction.start(X)),b.component._modelComponent.remove(),i(b),b.lastChange&&this.transaction.execute()},undo:function(){var a,b,c,d=this.changes;for(k(this.state),a=d.length-1;a>=0;a--)b=d[a],bb=!0,c=b.prevIndex,b.prevGridRemoved?c=Y.NEW_GRID:b.prevRowRemoved?c=Y.NEW_ROW:b.prevColumnRemoved&&(c=Y.NEW_COLUMN),this.gl$.gridlayout("add",{},b.component,b.prevParentContainer,b.prevGrid,b.prevRow,b.prevColumn,c,b.prevAlignment,b.component$);this.transaction.undo()},redo:function(){var a,b=[],c=this.changes;for(k(this.state),bb=!0,a=0;a<c.length;a++)b.push(c[a].component.id);this.gl$.gridlayout("remove",{},b),this.transaction.redo()},label:function(){return this._label}}),ib={BUTTON:"buttonContainer",PAGE_ITEM:"itemContainer",REGION:"regionContainer"};b(document).ready(function(){function f(a){var b,c=!0;for(b=0;b<a.length;b++)if(a[b].isReadOnly){c=!1;break}return c}function g(){var a,b=F.gridlayout("getSelection").filter(L),c=F.gridlayout("getSelectedComponents"),d=f(c);0!==b.length&&d&&F.gridlayout("option","displayFrom")!==c[0].id&&(a=o(F,b),apex.commandHistory.execute(a))}function h(){var a,b=null,c=null,d=null,e=F.gridlayout("getSelection");1===e.length&&(this.col>=0&&(b=0,c=this.row,d=this.col),a=this.copy?m(F,null,e,this.container,b,c,d,this.index,this.alignment):l(F,null,e,this.container,b,c,d,this.index,this.alignment),apex.commandHistory.execute(a))}function i(a){var b,c=null,d=null,e=null;this.col>=0&&(c=0,d=this.row,e=this.col),b=n(F,null,a,this.container,c,d,e,this.index,this.alignment),apex.commandHistory.execute(b)}function j(a,b,c){function d(a){var d,e,f,g,h=[];for(f="grid"===l?z:A,d=0;d<f.length;d++)e=f[d],g={label:e.l,type:"action",action:b,container:i.element,index:e.i?e.i:a.index+e.a},"grid"===l?(g.row=e.i===Y.NEW_ROW?a.row+e.a:a.row,g.col=e.i===Y.NEW_COLUMN?a.col+e.a:a.col):a.alignment&&(g.alignment=a.alignment),c&&(g.copy=!0),h.push(g);return h}var e,f,g,h,i,j,k,l,m=null,n=[];for(a.length>0&&a[0].element.hasClass(K)&&(m={}),e=0;e<a.length;e++){if(i=a[e],m&&m.label!==i.region&&(m.label&&n.push(m),m={label:i.region,type:"subMenu",menu:{items:[]}}),g={label:m?i.name:i.label},l=i.type,0===i.items.length)g.type="action",g.action=b,g.container=i.element,g.index=0,"grid"===l?(g.row=0,g.col=0):i.alignment&&(g.alignment=i.alignment),c&&(g.copy=!0);else for(g.type="subMenu",g.menu={items:[]},j=g.menu.items,f=0;f<i.items.length;f++)h=i.items[f],k={label:h.name,type:"subMenu",menu:{items:d(h)}},j.push(k);m?m.menu.items.push(g):n.push(g)}return m&&n.push(m),n}function k(a){a=a||F.gridlayout("getSelectedComponents"),apex.actions.lookup("glv-disp-from-region").disabled=!(a.length>=1&&a[0].type===P&&a[0].id!==F.gridlayout("option","displayFrom")),apex.actions.update("glv-disp-from-region"),apex.actions.lookup("glv-disp-from-page").disabled=null===F.gridlayout("option","displayFrom"),apex.actions.update("glv-disp-from-page")}function v(a){var c,d,e,f,g,h="";for(b.isArray(a)||(a=[a]),c=0;c<a.length;c++){g=a[c],h+="["+g.component.id+": ";for(e in g.properties){for(h+=e+":",f=g.properties[e],d=0;d<f.length;d++)h+=f[d]+",";h=h.substring(0,h.length-1)+";"}h+="] "}return h}var w=[a.COMP_TYPE.PAGE,a.COMP_TYPE.REGION,a.COMP_TYPE.PAGE_ITEM,a.COMP_TYPE.BUTTON],x=b("#glvMenu"),y=null;F=b("#glv");var z=[{l:"Before",i:null,a:0},{l:"After",i:null,a:1},{l:"Row before",i:Y.NEW_ROW,a:0},{l:"Row after",i:Y.NEW_ROW,a:1},{l:"Column before",i:Y.NEW_COLUMN,a:0},{l:"Column after",i:Y.NEW_COLUMN,a:1}],A=[{l:"Before",i:null,a:0},{l:"After",i:null,a:1}];e.glvMakeTargetMenu=j,e.glvMenuAddAction=i,apex.actions.add([{name:"glv-disp-from-page",label:d.getMessage("PD.GLV.MI.DISP_PAGE"),shortcut:"Ctrl+Alt+T",disabled:!0,action:function(){F.gridlayout("option","displayFrom",null),k()}},{name:"glv-disp-from-region",label:d.getMessage("PD.GLV.MI.DISP_REGION"),shortcut:"Ctrl+Alt+D",disabled:!0,action:function(){var a=F.gridlayout("getSelectedComponents");a.length>=1&&a[0].type===P&&F.gridlayout("option","displayFrom",a[0].id),this.disabled=!0,apex.actions.update(this.name),apex.actions.lookup("glv-disp-from-page").disabled=!1,apex.actions.update("glv-disp-from-page")}},{name:"glv-hide-empty",label:d.getMessage("PD.GLV.MI.HIDE_EMPTY"),shortcut:"Ctrl+Alt+E",get:function(){return F.gridlayout("option","hideEmptyDisplayPoints")},set:function(a){F.gridlayout("option","hideEmptyDisplayPoints",a),saveBoolPref(U,a)}}]);var B={menubar:!1,items:[{id:"dispRoot",type:"action",action:"glv-disp-from-page"},{id:"dispHere",type:"action",action:"glv-disp-from-region"},{type:"toggle",action:"pd-expand-restore"},{type:"separator"},{id:"newgrid",type:"action",labelKey:"PD.GLV.MI.NEW_GRID",hide:!0},{id:"delete",type:"action",labelKey:"PD.DEL",accelerator:"Del",disabled:function(){var a=F.gridlayout("getSelectedComponents"),b=f(a);return a.length<1||1===a.length&&a[0].type===O||!b||F.gridlayout("option","displayFrom")===a[0].id},action:function(){g({})}},{id:"moveTo",type:"subMenu",disabled:!0,labelKey:"PD.MI.MOVE2",menu:{items:[]}},{id:"copyTo",type:"subMenu",disabled:!0,labelKey:"PD.MI.COPY2",menu:{items:[]}},{type:"separator"},{id:"hideConditional",type:"subMenu",disabled:!0,labelKey:"PD.GLV.MI.HIDE_COND_COMP",hide:!0,menu:{items:[]}},{type:"toggle",labelKey:"PD.GLV.MI.HIDE_LEGACY",get:function(){return F.gridlayout("option","hideLegacyDisplayPoints")},set:function(a){F.gridlayout("option","hideLegacyDisplayPoints",a),e.saveBoolPref(S,a)}},{type:"toggle",action:"glv-hide-empty"},{type:"toggle",labelKey:"PD.GLV.MI.HIDE_GLOBAL",disabled:function(){var b=F.gridlayout("option","displayFrom"),c=b?F.gridlayout("findComponentById",b)._modelComponent.isOnGlobalPage():!1;return!$||a.isGlobalPage()||c},get:function(){return _},set:function(a){_=a,F.gridlayout("pageDataChanged"),e.saveBoolPref(T,a)}},{type:"toggle",labelKey:"PD.GLV.MI.HIDE_BTNS",get:function(){return F.gridlayout("option","hideButtons")},set:function(a){F.gridlayout("option","hideButtons",a),e.saveBoolPref(V,a)}},{type:"toggle",labelKey:"PD.GLV.MI.HIDE_ITEMS",get:function(){return F.gridlayout("option","hideItems")},set:function(a){F.gridlayout("option","hideItems",a),e.saveBoolPref(W,a)}},{type:"subMenu",hide:!0,labelKey:"PD.GLV.MI.ZOOM",menu:{items:[{type:"radioGroup",set:function(a){F.gridlayout("option","zoom",a)},get:function(){return F.gridlayout("option","zoom")+""},choices:[{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","50"),value:"50"},{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","75"),value:"75"},{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","100"),value:"100"},{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","120"),value:"125"},{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","150"),value:"150"},{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","170"),value:"175"},{labelKey:d.formatMessage("PD.GLV.MI.ZOOM_N","200"),value:"200"}]}]}}],beforeOpen:function(){var a,b=x.menu("find","moveTo"),c=x.menu("find","copyTo"),d=F.gridlayout("getSelection").filter(L);b.menu.items=[],c.menu.items=[],1===d.length&&(a=d.eq(0),F.gridlayout("getComponents",a)[0].isReadOnly||(b.menu.items=j(F.gridlayout("getDropTargets",a),h),c.menu.items=j(F.gridlayout("getDropTargets",a,"copy"),h,!0))),b.disabled=0===b.menu.items.length,c.disabled=0===c.menu.items.length},afterClose:function(a,b){b.actionTookFocus||F.gridlayout("focus")}};x.menu(B),_=e.getBoolPref(T,!0),F.gridlayout({getPageRoot:D,hideLegacyDisplayPoints:e.getBoolPref(S,!0),hideEmptyDisplayPoints:e.getBoolPref(U,!1),hideButtons:e.getBoolPref(V,!1),hideItems:e.getBoolPref(W,!1),getIconForComponent:q,makeComponent:r,updateComponentCopy:p,deleteKeyAction:function(a){g(a)},contextMenuAction:function(a){var c,d;"contextmenu"===a.type?x.menu("toggle",a.pageX,a.pageY):(d=b(a.target),c=d.offset(),x.menu("toggle",c.left,c.top+d.find("h3").height()))},stateClassMap:{hasErrors:G,hasWarnings:H},stateIconMap:{hasErrors:I,hasWarnings:J},appendTo:"parent",cursor:"default",cursorAt:{left:2,top:2},containment:"document",multiple:!0,animate:!1,delay:10,distance:5,opacity:.9,scroll:!0,scrollSensitivity:30,iconType:"a-Icon",selectionChange:function(){var a,d,e,f=[];for(d=b(this).gridlayout("getSelectedComponents"),a=0;a<d.length;a++)e=d[a]._modelComponent,e?f.push(e):c.log("No component found for selection "+d[a].id);k(d),b(document).trigger("selectionChanged",[X,f])},added:function(a,b){var c;return bb?void(bb=!1):void(ab?(ab.updateDataLayer(b),ab=null):(c=n(F,b),apex.commandHistory.execute(c)))},removed:function(a,b){return bb?void(bb=!1):void(ab&&(ab.updateDataLayer(b),b.lastChange&&(ab=null)))},moved:function(a,b){var c;return bb?void(bb=!1):void(ab?(ab.updateDataLayer(b),ab=null):(c=l(F,b),apex.commandHistory.execute(c)))},copied:function(a,b){var c;return bb?void(bb=!1):void(ab?(ab.updateDataLayer(b),ab=null):(c=m(F,b),apex.commandHistory.execute(c)))},start:function(){apex.tooltipManager.disableTooltips()},stop:function(){apex.tooltipManager.enableTooltips()}}).tooltip({items:N,show:apex.tooltipManager.defaultShowOption(),content:function(){var a=F.gridlayout("getComponents",b(this).parent())[0];return a.note?a.note:a._modelComponent?e.tooltipContentForComponent(a._modelComponent):void 0}}).on("focusin",function(a){var c,d=b(a.target).closest(M);0!==d.length&&(c=b.Event(a),c.target=c.currentTarget=d.children("h3")[0],F.tooltip("open",c))}).on("focusout",function(a){var c,d=b(a.target).closest(M);0!==d.length&&(c=b.Event(a),c.target=c.currentTarget=d.children("h3")[0],F.tooltip("close",c))}).on("keyup",function(a){var c,d;if(a.keyCode===b.ui.keyCode.ESCAPE){if(d=b(a.target).closest(M),0===d.length)return;c=b.Event(a),c.currentTarget=d.children("h3")[0],F.tooltip("close",c)}}),b(document).on("selectionChanged",function(b,c,d){var e,f,g=[];if(c!==X){for(e=0;e<d.length;e++)f=d[e],(f.typeId===a.COMP_TYPE.PAGE||f.typeId===a.COMP_TYPE.REGION||f.typeId===a.COMP_TYPE.PAGE_ITEM||f.typeId===a.COMP_TYPE.BUTTON)&&g.push(f.id);F.is(":visible")?(F.gridlayout("setSelectedComponents",g),k()):y=g}}),b("#editor_tabs").on("tabsactivate",function(a,b){"grid_layout"===b.newPanel[0].id&&y&&(F.gridlayout("setSelectedComponents",y),k(),y=null)}),a.observer(X,{component:{typeIds:w},events:[a.EVENT.DISPLAY_TITLE]},function(a){var b=F.gridlayout("findComponentById",a.component.id);c.getLevel()>=c.LOG_LEVEL.APP_TRACE&&c.trace("GLV Handle display title change: "+v(a)),b&&(b.title=a.component.getDisplayTitle(),F.gridlayout("update",b,!1))}),a.observer(X,{component:{typeIds:w},events:[a.EVENT.CHANGE],properties:[a.PROP.CONDITION_TYPE,a.PROP.AUTHORIZATION_SCHEME,a.PROP.BUILD_OPTION,a.PROP.GRID_NEW_GRID,a.PROP.GRID_NEW_ROW,a.PROP.GRID_NEW_COLUMN,a.PROP.GRID_COLUMN,a.PROP.GRID_COLUMN_SPAN,a.PROP.GRID_ROW_SPAN,a.PROP.ALIGNMENT,a.PROP.ITEM_DISPLAY_POSITION,a.PROP.ITEM_TYPE,a.PROP.REGION_TYPE,a.PROP.BUTTON_IS_HOT,a.PROP.DISPLAY_SEQUENCE,a.PROP.REGION_POSITION,a.PROP.PARENT_REGION,a.PROP.REGION,a.PROP.BUTTON_POSITION]},function(d){function f(a){var c=n.properties[a];return c&&b.inArray("change",c)>=0}function g(a){return n.component.getProperty(a).getValue()}function h(a){var b=n.component.getProperty(a),c=b.getMetaData().yesValue;return b.getValue()===c}function i(a,b){for(var c=b._parent?b._parent._parent:null;c;){if(a[c.id])return!0;c=c._parent?c._parent._parent:null}return!1}var j,k,l,m,n,o,p,q={},r={},w={};if(db)return void(db=!1);for(c.getLevel()>=c.LOG_LEVEL.APP_TRACE&&c.trace("GLV Handle property changes: "+v(d)),j=0;j<d.length;j++)n=d[j],k=n.component.id,l=u(n.component),o=F.gridlayout("findComponentById",k),p=F.gridlayout("findComponentById",l),!o&&p&&(w[l]=p),o&&(f(a.PROP.ITEM_TYPE)&&o.type===Q&&(m=g(a.PROP.ITEM_TYPE),"NATIVE_HIDDEN"===m?w[l]=p:(o.iconClass=e.getComponentIconClass(Q,t(n.component,a.PROP.ITEM_TYPE)),q[k]=o)),(f(a.PROP.CONDITION_TYPE)||f(a.PROP.AUTHORIZATION_SCHEME)||f(a.PROP.BUILD_OPTION))&&(e.isConditional(n.component)?o.isConditional=!0:delete o.isConditional,q[k]=o),f(a.PROP.REGION_TYPE)&&o.type===P&&(o.iconClass=e.getComponentIconClass(P,t(n.component,a.PROP.REGION_TYPE)),q[k]=o),f(a.PROP.BUTTON_IS_HOT)&&o.type===R&&(o.iconClass=e.getComponentIconClass(R,s(n.component,a.PROP.BUTTON_IS_HOT,!1)?"hot":"normal"),q[k]=o),f(a.PROP.GRID_NEW_GRID)&&(o.newGrid=h(a.PROP.GRID_NEW_GRID),r[l]=o),f(a.PROP.GRID_NEW_ROW)&&(o.newRow=h(a.PROP.GRID_NEW_ROW),r[l]=o),f(a.PROP.GRID_NEW_COLUMN)&&(o.newCol=h(a.PROP.GRID_NEW_COLUMN),r[l]=o),f(a.PROP.GRID_COLUMN)&&(o.col=1*g(a.PROP.GRID_COLUMN),r[l]=o),f(a.PROP.GRID_COLUMN_SPAN)&&(o.span=1*g(a.PROP.GRID_COLUMN_SPAN),r[l]=o),f(a.PROP.GRID_ROW_SPAN)&&(o.rowSpan=1*g(a.PROP.GRID_ROW_SPAN),r[l]=o),f(a.PROP.ITEM_DISPLAY_POSITION)&&(o.itemsAboveContent="ABOVE"===g(a.PROP.ITEM_DISPLAY_POSITION),r[l]=o),(f(a.PROP.ALIGNMENT)||f(a.PROP.BUTTON_POSITION)||f(a.PROP.REGION)||f(a.PROP.PARENT_REGION)||f(a.PROP.REGION_POSITION)||f(a.PROP.DISPLAY_SEQUENCE))&&(o._parent._parent.id!==l&&(w[o._parent._parent.id]=o._parent._parent),w[l]=p));for(k in q)q.hasOwnProperty(k)&&(o=q[k],r[o.id]||w[o.id]||i(r,o)||i(w,o)||F.gridlayout("update",o,!1));for(k in r)r.hasOwnProperty(k)&&(o=r[k],w[o.id]||i(r,o._parent._parent)||i(w,o)||F.gridlayout("update",o,!0));for(k in w)w.hasOwnProperty(k)&&(p=w[k],p&&!i(w,p)&&("page"===p.type?F.gridlayout("pageDataChanged"):(E(p),F.gridlayout("update",p,!0,!0))))},!0),a.observer(X,{events:[a.EVENT.GRID]},function(a){var b,d;if(c.getLevel()>=c.LOG_LEVEL.APP_TRACE&&c.trace("GLV Handle grid changes - refresh whole page: "+v(a)),!F.is(":visible"))for(y=[],d=F.gridlayout("getSelectedComponents"),b=0;b<d.length;b++)y.push(d[b].id);F.gridlayout("pageDataChanged")},!0),a.observer(X,{component:{typeIds:w},events:[a.EVENT.CREATE]},function(a){var b;return cb?void(cb=!1):(c.getLevel()>=c.LOG_LEVEL.APP_TRACE&&c.trace("GLV Handle create: "+v(a)),b=F.gridlayout("findComponentById",u(a.component)),void(b&&("page"===b.type?F.gridlayout("pageDataChanged"):(E(b),F.gridlayout("update",b,!0,!0)))))}),a.observer(X,{component:{typeIds:w},events:[a.EVENT.DELETE]},function(a){var b,d=a.component.id;ab||(c.getLevel()>=c.LOG_LEVEL.APP_TRACE&&c.trace("GLV Handle delete: "+v(a)),b=F.gridlayout("findById",d),b.length&&(bb=!0,F.gridlayout("remove",{},b)))}),a.observer(X,{component:{typeIds:w},events:[a.EVENT.ERRORS,a.EVENT.NO_ERRORS,a.EVENT.WARNINGS,a.EVENT.NO_WARNINGS]},function(a){var b=F.gridlayout("findComponentById",a.component.id);c.getLevel()>=c.LOG_LEVEL.APP_TRACE&&c.trace("GLV Handle error or warning status change: "+v(a)),b&&(b.hasErrors=a.component.hasErrors(),b.hasWarnings=a.component.hasWarnings(),F.gridlayout("update",b,!1))})}),b(document).on("modelReady",function(){$=!0;try{F.gridlayout("pageDataChanged")}catch(a){c.error("Failed to load grid layout",a),$=!1,F.gridlayout("pageDataChanged")}}),b(document).on("modelCleared",function(){$=!1,F.gridlayout("pageDataChanged")})}(pe,apex.jQuery,apex.debug,apex.lang,window.pageDesigner);